Summary,Issue key,Issue id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project description,Project url,Priority,Resolution,Assignee,Reporter,Creator,Created,Updated,Last Viewed,Resolved,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Fix Version/s,Component/s,Due Date,Votes,Labels,Labels,Labels,Labels,Labels,Labels,Labels,Labels,Labels,Labels,Labels,Labels,Labels,Labels,Labels,Labels,Description,Environment,Original Estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Outward issue link (Backport),Outward issue link (Backport),Outward issue link (Backport),Outward issue link (Backport),Outward issue link (Backport),Outward issue link (Backport),Outward issue link (Backport),Outward issue link (Backport),Outward issue link (Backport),Outward issue link (Backport),Outward issue link (Backport),Outward issue link (Backport),Outward issue link (Backport),Outward issue link (Backport),Outward issue link (Backport),Inward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (CSR),Inward issue link (Cloners),Inward issue link (Cloners),Inward issue link (Cloners),Inward issue link (Cloners),Inward issue link (Cloners),Inward issue link (Cloners),Inward issue link (Cloners),Inward issue link (Cloners),Inward issue link (Cloners),Inward issue link (Cloners),Outward issue link (Cloners),Inward issue link (Duplicate),Inward issue link (Duplicate),Inward issue link (Duplicate),Inward issue link (Duplicate),Inward issue link (Duplicate),Inward issue link (Duplicate),Inward issue link (Duplicate),Outward issue link (Duplicate),Outward issue link (Duplicate),Outward issue link (Duplicate),Outward issue link (Duplicate),Outward issue link (Duplicate),Outward issue link (Duplicate),Outward issue link (Duplicate),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Custom field ( Type of Bug [Challenge] ),Custom field (CPU),Custom field (CPU),Custom field (CPU),Custom field (CPU),Custom field (CPU),Custom field (CPU),Custom field (Cost of Delay),Custom field (Epic Link),Custom field (Imported),Custom field (Indexed),Custom field (Introduced In Build),Custom field (Introduced In Version),Custom field (Number of Tests Affected [Challenge]),Custom field (OS),Custom field (OS),Custom field (OS),Custom field (Oracle Evaluation),Custom field (Original story points),Custom field (Parent Link),Custom field (Rank),Custom field (Rank (Obsolete)),Custom field (Resolved In Build),Sprint,Sprint,Custom field (Story Points),Custom field (Subcomponent),Custom field (Target end),Custom field (Target start),Custom field (Team),Custom field (Time Spent),Custom field (Understanding),Custom field (Value),Custom field (Verification),Custom field (external_bug),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment
"Possible race condition when integrating PR could cause a spurious ""Withdrawn"" email",SKARA-1280,5064486,Bug,Resolved,SKARA,Skara,software,darcy,,,P4,Fixed,erikj,kcr,kcr,2021-12-10 07:27,2021-12-14 08:35,2023-10-01 09:57,2021-12-14 08:35,,,,,,,,,,,,,,1.0,bots,,0,,,,,,,,,,,,,,,,,"When a pull request is integrated, the PR bot closes the PR and adds the ""integrated"" label. Since this is not an atomic operation, it is possible for the notify bot to see the PR in the state where it is closed but does not yet have the ""integrated"" label. In that case, the notify bot will send a spurious email saying that the PR was withdrawn. This is confusing, but not a serious problem, since it will still be processed correctly and a subsequent ""Integrated"" email will be sent.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vcy3:",9223372036854775807,,,,,,,,,,,,,,"2021-12-14 08:34;roboduke;Changeset: 2ed56ac1
Author:    Erik Joelsson <erikj@openjdk.org>
Date:      2021-12-14 16:34:39 +0000
URL:       https://git.openjdk.java.net/skara/commit/2ed56ac14c73f118b3acb423402ff160b93eecb8
;;;",,,,,,,,,,,,,,,,,,,,
An unknown sub-command gives a confusing error message,SKARA-1275,5064320,Bug,Resolved,SKARA,Skara,software,darcy,,,P4,Fixed,gli,gli,gli,2021-12-08 05:58,2021-12-20 06:14,2023-10-01 09:57,2021-12-20 06:14,,,,,,,,,,,,,,1.0,cli,,0,,,,,,,,,,,,,,,,,"When using the the unknown sub-command, the client will execute the default command which can output the unexpected message.

The right behavior:

```
$ git-pr lis

error: unknown sub-command: lis

Available sub-commands are:
// Ignore the following output.
```

The wrong behavior:

```
$ git-pr lis 123

error: unexpected input: 123   // <-- here wrong
usage: git-pr [options] [<COMMAND>]
	-h, --help      Show help
	    --verbose   Turn on verbose output
	    --debug     Turn on debugging output
	    --version   Print the version of this tool
```

The default sub-command is `git-pr help`, so when the client doesn't identify the sub-command `git-pr lis`, it will execute `git-pr help` and will pass `lis 123` as the argument to the `git-pr help` command. And the `git-pr help` can resolve only one argument, which is `lis` in this example, so it would output `error: unexpected input: 123`. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbx7:",9223372036854775807,,,,,,,,,,,,,,"2021-12-20 06:14;roboduke;Changeset: 649dd3cf
Author:    Guoxiong Li <gli@openjdk.org>
Committer: Erik Joelsson <erikj@openjdk.org>
Date:      2021-12-20 14:14:19 +0000
URL:       https://git.openjdk.java.net/skara/commit/649dd3cf73e2feed6ba330966f3d6108e56585f5
;;;",,,,,,,,,,,,,,,,,,,,
The help message of the 'git-pr' sub-command misses the sub-command name,SKARA-1274,5064313,Bug,Resolved,SKARA,Skara,software,darcy,,,P4,Fixed,gli,gli,gli,2021-12-08 04:56,2021-12-16 14:44,2023-10-01 09:57,2021-12-16 14:44,,,,,,,,,,,,,,1.0,cli,,0,,,,,,,,,,,,,,,,,"When we use the 'git-pr' sub-command, such as `git-pr list -h`, the output information missed the command name `list`.

```
$ git-pr list -h

usage: git-pr [options] [<ID>]  // <---- Here miss the `list`
      // Ignore the following output.
```

The first line `usage: git-pr [options] [<ID>]` should be `usage: git-pr list [options] [<ID>]`.

The wrong sub-command is listed below:

git-pr apply
git-pr approve // will change to git-pr review
git-pr checkout
git-pr close
git-pr create
git-pr fetch
git-pr help
git-pr info
git-pr integrate
git-pr issue
git-pr list
git-pr set
git-pr show
git-pr sponsor
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbvn:",9223372036854775807,,,,,,,,,,,,,,"2021-12-08 05:26;gli;Because the `git-pr approve` will change to `git-pr review`. So I would like to fix this issue after solving SKARA-713.;;;","2021-12-16 14:44;roboduke;Changeset: 2e9fd5f8
Author:    Guoxiong Li <gli@openjdk.org>
Committer: Erik Joelsson <erikj@openjdk.org>
Date:      2021-12-16 22:44:26 +0000
URL:       https://git.openjdk.java.net/skara/commit/2e9fd5f8f46ba742e4d5c8cf4cc45c1741182271
;;;",,,,,,,,,,,,,,,,,,,
Handle Jira host with path element in URL,SKARA-1269,5064096,Bug,Resolved,SKARA,Skara,software,darcy,,,P3,Fixed,erikj,erikj,erikj,2021-12-03 13:52,2021-12-08 06:38,2023-10-01 09:57,2021-12-08 06:38,,,,,,,,,,,,,,1.0,libraries,,0,,,,,,,,,,,,,,,,,"The IssueTracker/JiraHost classes in Skara make the assumption that the base URL for Jira is just a hostname with no path. In order to use Skara with a Jira instance with a URL that has a path element, this needs to be fixed.

Instead of always basing REST call URLs on the configured base path and appending to it, there are many cases where the URIBuilder::setPath is used instead, which overwrites any existing path element. This is especially troublesome when combined with using IssueProject::webUrl as the base for these URLs.

I would like to fix this by adding a supported way of getting the base URI from an IssueTracker (IssueTracker::uri), replace all uses of ::webUrl for constructing other URLs with this new call, and replacing all ::setPath with ::appendPath.

This change will require all configurations to be careful not to add a trailing slash to the URL for the Jira instance.",,,,,,,,,,,,,,,,,,,,,,,,,,SKARA-1267,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vajf:",9223372036854775807,,,,,,,,,,,,,,"2021-12-08 06:38;roboduke;Changeset: 57c88f57
Author:    Erik Joelsson <erikj@openjdk.org>
Date:      2021-12-08 14:38:20 +0000
URL:       https://git.openjdk.java.net/skara/commit/57c88f57681bacb96ba1ded9670562e5faec7943
;;;",,,,,,,,,,,,,,,,,,,,
New CSR link warns that issue isn't open,SKARA-1265,5063882,Bug,Resolved,SKARA,Skara,software,darcy,,,P3,Fixed,gli,erikj,erikj,2021-12-01 09:15,2022-04-26 04:25,2023-10-01 09:57,2021-12-02 06:36,,,,,,,,,,,,,,1.0,bots,,0,,,,,,,,,,,,,,,,,"See https://github.com/openjdk/jdk/pull/5076 for an example. We expect the CSR issue to be closed, so this warning should not be visible.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SKARA-286,SKARA-1411,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v98z:",9223372036854775807,,,,,,,,,,,,,,"2021-12-01 10:05;erikj;[~gli] Could you take a look?;;;","2021-12-01 10:51;gli;Yes, I will assign this task to myself.;;;","2021-12-02 06:36;roboduke;Changeset: 3d48ff8c
Author:    Guoxiong Li <gli@openjdk.org>
Committer: Erik Joelsson <erikj@openjdk.org>
Date:      2021-12-02 14:35:58 +0000
URL:       https://git.openjdk.java.net/skara/commit/3d48ff8c0c1571ee1af0548bc654a8183f5e8d4e
;;;",,,,,,,,,,,,,,,,,,
The pre-submit test fails intermittently,SKARA-1264,5063863,Bug,Closed,SKARA,Skara,software,darcy,,,P4,Fixed,,gli,gli,2021-12-01 05:23,2021-12-14 10:00,2023-10-01 09:57,2021-12-14 10:00,,,,,,,,,,,,,,,bots,,0,intermittent,,,,,,,,,,,,,,,,"During solving the issue SKARA-1254, I found the pre-submit test failed[1]. So I try to re-run it. The pre-submit test passed at this time[2].

The corresponding failed log is shown below:

```
> Task :jcheck:test FAILED
120 tests completed, 3 failed

JCheckTests > checkRemoval(VCS) > org.openjdk.skara.jcheck.JCheckTests.checkRemoval(VCS)[2] FAILED
    java.io.UncheckedIOException: java.io.IOException: Num headers (1) differ from num hunks (0)
        at org.openjdk.skara.vcs/org.openjdk.skara.vcs.hg.HgCommitIterator.next(HgCommitIterator.java:83)
        at org.openjdk.skara.vcs/org.openjdk.skara.vcs.hg.HgCommitIterator.next(HgCommitIterator.java:34)
        at org.openjdk.skara.jcheck/org.openjdk.skara.jcheck.iterators.MapIterator.next(MapIterator.java:45)
        at org.openjdk.skara.jcheck/org.openjdk.skara.jcheck.iterators.FlatMapIterator.hasNext(FlatMapIterator.java:46)
        at org.openjdk.skara.jcheck/org.openjdk.skara.jcheck.iterators.ConcatIterator.hasNext(ConcatIterator.java:39)
        at org.openjdk.skara.jcheck/org.openjdk.skara.jcheck.JCheckTests.checkRemoval(JCheckTests.java:295)

        Caused by:
        java.io.IOException: Num headers (1) differ from num hunks (0)
            at org.openjdk.skara.vcs/org.openjdk.skara.vcs.tools.GitRawDiffParser.parse(GitRawDiffParser.java:212)
            at org.openjdk.skara.vcs/org.openjdk.skara.vcs.hg.HgCommitIterator.next(HgCommitIterator.java:71)
            ... 5 more
Test report disabled, omitting generation of the HTML test report.
:jcheck:test (Thread[Daemon worker,5,main]) completed. Took 22.882 secs.
Gradle Test Executor 14 finished executing tests.
```

It seems the bug is only in mac and may be related to concurrency.

[1] https://github.com/lgxbslgx/skara/actions/runs/1525457193/attempts/1
[2] https://github.com/lgxbslgx/skara/actions/runs/1525457193/attempts/2",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SKARA-1283,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v94r:",9223372036854775807,,,,,,,,,,,,,,"2021-12-01 09:03;gli;This tests failed again just now [1]. And the error log is the same.

It is in SKARA-1256 this time. So we can confirm that it is not related to SKARA-1256 or SKARA-1254.

[1] https://github.com/lgxbslgx/skara/actions/runs/1526780541/attempts/1;;;","2021-12-02 01:16;gli;The issue occured again. https://github.com/lgxbslgx/skara/actions/runs/1529638979/attempts/1;;;","2021-12-09 08:44;gli;The issue has always occured in the pre-submit tests. Maybe we should improve the priority and solve it as soon as possible. Could anyone who has a mac environment help analyze this bug?

Or we can just ignore the related test cases in the code to prevent the pre-submit tests failing.;;;","2021-12-14 10:00;erikj;This is the same failure as in SKARA-1283.;;;",,,,,,,,,,,,,,,,,
Add GitHub User fg1417,SKARA-1262,5063834,Bug,Closed,SKARA,Skara,software,darcy,,,P4,Fixed,kcr,fgao,fgao,2021-12-01 01:32,2021-12-07 21:54,2023-10-01 09:57,2021-12-01 05:21,,,,,,,,,,,,,,,admin,,0,,,,,,,,,,,,,,,,,"My openjdk ID: fgao
My github user ID: fg1417

Please record this switch.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v8yb:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add GitHub user zhengxiaolinX,SKARA-1259,5063696,Bug,Resolved,SKARA,Skara,software,darcy,,,P4,Fixed,kcr,xlinzheng,xlinzheng,2021-11-29 18:26,2021-11-29 18:43,2023-10-01 09:57,2021-11-29 18:43,,,,,,,,,,,,,,,admin,,0,,,,,,,,,,,,,,,,,"Please associate my GitHub account with my OpenJDK identity.

https://github.com/zhengxiaolinX
https://openjdk.java.net/census#xlinzheng

Thanks --",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v83n:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add GitHub user feilongjiang,SKARA-1255,5063480,Bug,Resolved,SKARA,Skara,software,darcy,,,P3,Fixed,kcr,fjiang,fjiang,2021-11-24 17:06,2021-11-24 18:09,2023-10-01 09:57,2021-11-24 18:08,,,,,,,,,,,,,,,admin,,0,,,,,,,,,,,,,,,,,"Please associate my GitHub account with my OpenJDK identity.

https://github.com/feilongjiang
https://openjdk.java.net/census#fjiang",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v6rn:",9223372036854775807,,,,,,,,,,,,,,"2021-11-24 18:09;kcr;Done.;;;",,,,,,,,,,,,,,,,,,,,
Add GitHub user tprinzing,SKARA-1250,5063023,Bug,Resolved,SKARA,Skara,software,darcy,,,P4,Fixed,erikj,tprinzing,tprinzing,2021-11-18 12:32,2022-06-01 05:59,2023-10-01 09:57,2022-06-01 05:59,,,,,,,,,,,,,,,bots,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v3yb:",9223372036854775807,,,,,,,,,,,,,,"2021-11-18 12:45;erikj;This association cannot happen until you have an OpenJDK user name to associate your GitHub user with.;;;","2021-11-18 12:53;erikj;You may reopen this once you have an OpenJDK username.;;;","2021-11-18 13:35;tprinzing;I do have a PR stuck on the OCA: https://github.com/openjdk/jdk/pull/6443 using /covered;;;","2022-06-01 05:50;erikj;I noticed that the openjdk username is now there.;;;",,,,,,,,,,,,,,,,,
Add github User HsError,SKARA-1246,5062955,Bug,Resolved,SKARA,Skara,software,darcy,,,P3,Fixed,kcr,gzhang,gzhang,2021-11-17 19:10,2021-11-18 05:33,2023-10-01 09:57,2021-11-18 05:33,,,,,,,,,,,,,,,admin,,0,,,,,,,,,,,,,,,,,"Please asssociate my github account with my openjdk identity

https://github.com/HsError
https://openjdk.java.net/census#gzhang",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v3j7:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add GitHub user yadongw,SKARA-1245,5062954,Bug,Resolved,SKARA,Skara,software,darcy,,,P3,Fixed,erikj,yadongwang,yadongwang,2021-11-17 19:07,2021-11-18 05:56,2023-10-01 09:57,2021-11-18 05:56,,,,,,,,,,,,,,,admin,,0,,,,,,,,,,,,,,,,,"Please associate my GitHub account with my OpenJDK identity.

https://github.com/yadongw
https://openjdk.java.net/census#yadongwang",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v3iz:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add GitHub user yhzhu20,SKARA-1244,5062953,Bug,Resolved,SKARA,Skara,software,darcy,,,P3,Fixed,kcr,yzhu,yzhu,2021-11-17 18:59,2021-11-18 05:21,2023-10-01 09:57,2021-11-18 05:21,,,,,,,,,,,,,,,admin,,0,,,,,,,,,,,,,,,,,"Please associate my GitHub account with my OpenJDK identity.

https://github.com/yhzhu20
https://openjdk.java.net/census#yzhu",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v3ir:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BotRunnerTests may fail intermittently,SKARA-1243,5062916,Bug,Resolved,SKARA,Skara,software,darcy,,,P4,Fixed,erikj,erikj,erikj,2021-11-17 06:54,2021-11-18 05:16,2023-10-01 09:57,2021-11-18 05:16,,,,,,,,,,,,,,1.0,libraries,,0,,,,,,,,,,,,,,,,,"The BotRunnerTests class tries to verify scheduling behavior in the BotRunner. Writing tests for such behavior can be very hard to get right and intermittent failures are possible.

I have seen intermittent failure in at least discardAdditionalBlockedItems(). The problem in this case is that the test relies on checkPeriodicItems to finish before any of the items scheduled by that call has a chance to run. They all run in the same executor, so there is no guarantee that this will be the case.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v3aj:",9223372036854775807,,,,,,,,,,,,,,"2021-11-17 08:01;erikj;After investigating this further, my conclusion is to just lower concurrency to 1 for the two affected tests. The tests are trying to verify that no more than one WorkItem of a certain ""type"" is queued behind an already running instance, and that the latest one submitted is the one that is kept. (""type"" here means more than just java class, this is determined by the method WorkItem::replaces) This particular logic will get exercised fine without actual parallel execution.;;;","2021-11-18 05:16;roboduke;Changeset: f0c9e8a5
Author:    Erik Joelsson <erikj@openjdk.org>
Date:      2021-11-18 13:15:41 +0000
URL:       https://git.openjdk.java.net/skara/commit/f0c9e8a57d29216de60a1c815d1af194d1cb457a
;;;",,,,,,,,,,,,,,,,,,,
The /clean command for backports is ignored,SKARA-1242,5062910,Bug,Resolved,SKARA,Skara,software,darcy,,,P3,Fixed,erikj,erikj,erikj,2021-11-17 06:04,2021-11-17 08:53,2023-10-01 09:57,2021-11-17 08:53,,,,,,,,,,,,,,1.0,bots,,0,,,,,,,,,,,,,,,,,"When dealing with backport pull requests, Skara tries to automatically determine if the backport is ""clean"". This automatic check is rather picky, so the user is supposed to be able to override this result with the command ""/clean"". Issuing the command works so far as the bot will react to it and add the ""clean"" label, but then it will ignore the label and still not consider the pull request clean.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v397:",9223372036854775807,,,,,,,,,,,,,,"2021-11-17 08:53;roboduke;Changeset: 625a4db8
Author:    Erik Joelsson <erikj@openjdk.org>
Date:      2021-11-17 16:52:49 +0000
URL:       https://git.openjdk.java.net/skara/commit/625a4db8df3bb2cd7ab2b2345729f1812bf4fa48
;;;",,,,,,,,,,,,,,,,,,,,
Add GitHub user kariya-mitsuru,SKARA-1240,5062389,Bug,Closed,SKARA,Skara,software,darcy,,,P4,Fixed,kcr,mkariya,mkariya,2021-11-09 23:41,2021-11-10 04:04,2023-10-01 09:57,2021-11-10 04:04,,,,,,,,,,,,,,,admin,,0,,,,,,,,,,,,,,,,,"Please add GitHub user kariya-mitsuru.
My OpenJDK username is mkariya.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v01n:",9223372036854775807,,,,,,,,,,,,,,"2021-11-10 04:04;kcr;Added.;;;",,,,,,,,,,,,,,,,,,,,
git sync --branches doesn't work as expected,SKARA-1235,5061703,Bug,Resolved,SKARA,Skara,software,darcy,,,P3,Fixed,zsong,vkempik,vkempik,2021-11-02 09:28,2022-09-23 12:59,2023-10-01 09:57,2022-09-23 12:56,,,,,,,,,,,,,,1.0,cli,,0,starter,,,,,,,,,,,,,,,,"This email https://mail.openjdk.java.net/pipermail/jdk-dev/2021-March/005232.html says to use git sync --branches pr/XXX to get some PR branch into your fork.
but it's not working, any argument to --branches is ignored.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uvuz:",9223372036854775807,,,,,,,,,,,,,,"2021-11-02 10:11;erikj;More specifically, supplying anything to --branches which is already on the ignore list (which defaults to ""pr/*"") is ignored. It should be possible to work around by setting --ignore to a dummy value, but this is not a good user experience. If the user explicitly lists a branch or pattern on --branches, I don't think --ignore should override it.;;;","2021-11-02 10:26;vkempik;--ignore foo 
didn't work for me;;;","2022-09-22 16:50;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/skara/pull/1381
Date: 2022-09-22 23:49:12 +0000;;;","2022-09-23 12:56;roboduke;Changeset: 0a4aa299
Author:    Zhao Song <zhao.song@oracle.com>
Committer: Erik Joelsson <erikj@openjdk.org>
Date:      2022-09-23 19:55:04 +0000
URL:       https://git.openjdk.org/skara/commit/0a4aa299f3d5702f32e850d944694f15015ef086
;;;",,,,,,,,,,,,,,,,,
Add GitHub user rnkovacs,SKARA-1234,5061569,Bug,Resolved,SKARA,Skara,software,darcy,,,P4,Fixed,,rkovacs,rkovacs,2021-11-01 12:39,2021-11-01 13:52,2023-10-01 09:57,2021-11-01 13:52,,,,,,,,,,,,,,,admin,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uv17:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Legal bot fails to approve review comments,SKARA-1233,5061563,Bug,Resolved,SKARA,Skara,software,darcy,,,P2,Fixed,erikj,erikj,erikj,2021-11-01 10:59,2021-11-03 06:01,2023-10-01 09:57,2021-11-03 06:01,,,,,,,,,,,,,,,bots,,0,,,,,,,,,,,,,,,,,"When a new github user leaves a message in a PR, the legal bot hides the message with a welcome message and a click box to accept our TOU. If this comment is instead made as a review, then clicking the box seems to have no effect. The bot just removes the tick and never restores the comment. The user is also never added to the approvals DB file.

If the user adds a plain comment after and approves the TOU in that, the new comment gets restored, but the review comment is stuck with the greeting and tick box.

Here is a link to such a case: https://github.com/openjdk/jfx/pull/499#pullrequestreview-793131154",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uuzv:",9223372036854775807,,,,,,,,,,,,,,"2021-11-01 17:21;erikj;This fails in the regexp matching of the hidden comment. The regexp seems to work when applied to a body of a regular comment, but fails on the body of a review comment. I'm still not sure why and still investigating.;;;","2021-11-02 11:27;erikj;It seems like this is an issue with line endings. Most of the regexp matching the replaced comment use \R to match any line ending, but there are two exceptions where \n sneaks in via a different field. At least in the review comment case, all the line endings in the body returned from github are \r\n. This is why the regexp isn't matching. By removing the explicit \n and using \R instead, I can get the regexp to match a review comment. I also need to add an optional space at the end of a line as one of the \n was preceded by space so existing comments on github will have that space, while new ones after this patch will not.;;;",,,,,,,,,,,,,,,,,,,
Skara Backports handling needs to handle non backport type as backport,SKARA-1229,5061278,Bug,Resolved,SKARA,Skara,software,darcy,,,P3,Fixed,erikj,erikj,erikj,2021-10-26 11:18,2021-10-28 12:13,2023-10-01 09:57,2021-10-28 12:13,,,,,,,,,,,,,,1.0,libraries,,0,,,,,,,,,,,,,,,,,"Sometimes people make mistakes and connect bugs with backport links in JBS where both sides are of types other than Backport. This shouldn't be encouraged behavior, but when it happens, Skara currently fails to handle it. Since this is a valid (though undesirable) state in JBS, Skara needs to be able to handle it.

Specifically, when querying for all backports for an issue, Skara should stop filtering out issues with a different type and just honor the ""backported by"" link.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2ut8j:",9223372036854775807,,,,,,,,,,,,,,"2021-10-28 12:13;roboduke;Changeset: 626937d3
Author:    Erik Joelsson <erikj@openjdk.org>
Date:      2021-10-28 19:13:17 +0000
URL:       https://git.openjdk.java.net/skara/commit/626937d35d2bc6c7a426ca25717b571fc9a4af0f
;;;",,,,,,,,,,,,,,,,,,,,
Git patch parser fails on Status T,SKARA-1222,5061021,Bug,Resolved,SKARA,Skara,software,darcy,,,P3,Fixed,zsong,erikj,erikj,2021-10-22 10:51,2022-09-23 12:52,2023-10-01 09:57,2022-09-23 12:52,,,,,,,,,,,,,,1.0,libraries,,0,starter,,,,,,,,,,,,,,,,"In a recent PR for amber-docs, a file was replaced by a symlink, which turned up as status ""T"" in the git patch file. This causes the Skara parser to fail as it doesn't know about this status value.

PR: https://github.com/openjdk/amber-docs/pull/10

Stacktrace:
java.lang.RuntimeException: Exception during jcheck
	at org.openjdk.skara.bots.pr/org.openjdk.skara.bots.pr.CheckRun.checkStatus(CheckRun.java:1017)
	at org.openjdk.skara.bots.pr/org.openjdk.skara.bots.pr.CheckRun.execute(CheckRun.java:97)
	at org.openjdk.skara.bots.pr/org.openjdk.skara.bots.pr.CheckWorkItem.run(CheckWorkItem.java:351)
	at org.openjdk.skara.bot/org.openjdk.skara.bot.BotRunner$RunnableWorkItem.runMeasured(BotRunner.java:190)
	at org.openjdk.skara.bot/org.openjdk.skara.bot.BotRunner$RunnableWorkItem.run(BotRunner.java:146)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at java.base/java.lang.Thread.run(Thread.java:831)
Caused by: java.lang.IllegalArgumentException: Invalid score
	at org.openjdk.skara.vcs/org.openjdk.skara.vcs.Status.from(Status.java:124)
	at org.openjdk.skara.vcs/org.openjdk.skara.vcs.tools.PatchHeader.fromRawLine(PatchHeader.java:93)
	at org.openjdk.skara.vcs/org.openjdk.skara.vcs.tools.GitRawDiffParser.parseRawLines(GitRawDiffParser.java:81)
	at org.openjdk.skara.vcs/org.openjdk.skara.vcs.tools.GitRawDiffParser.parse(GitRawDiffParser.java:208)
	at org.openjdk.skara.vcs/org.openjdk.skara.vcs.git.GitCommitIterator.next(GitCommitIterator.java:83)
	at org.openjdk.skara.vcs/org.openjdk.skara.vcs.git.GitCommitIterator.next(GitCommitIterator.java:32)
	at org.openjdk.skara.jcheck/org.openjdk.skara.jcheck.iterators.MapIterator.next(MapIterator.java:45)
	at org.openjdk.skara.jcheck/org.openjdk.skara.jcheck.iterators.FlatMapIterator.hasNext(FlatMapIterator.java:46)
	at org.openjdk.skara.jcheck/org.openjdk.skara.jcheck.iterators.ConcatIterator.hasNext(ConcatIterator.java:39)
	at org.openjdk.skara.bots.pr/org.openjdk.skara.bots.pr.CheckablePullRequest.executeChecks(CheckablePullRequest.java:197)
	at org.openjdk.skara.bots.pr/org.openjdk.skara.bots.pr.CheckRun.checkStatus(CheckRun.java:920)
	... 10 more
	Suppressed: java.io.IOException: 'git -c core.quotePath=false log --format=#@!_-=&%n%H%n%P%n%an%n%ae%n%aI%n%cn%n%ce%n%cI%n%B=@=@=@=@=@ --patch --find-renames=90% --find-copies=90% --find-copies-harder --topo-order --binary -c --combined-all-paths --raw --no-abbrev --unified=0 --no-color 37f12336bbaca10e6f5fd3f06318c18445120c04^!' timed out
		at org.openjdk.skara.vcs/org.openjdk.skara.vcs.git.GitCommits.close(GitCommits.java:114)
		at org.openjdk.skara.jcheck/org.openjdk.skara.jcheck.JCheck$Issues.close(JCheck.java:191)
		at org.openjdk.skara.bots.pr/org.openjdk.skara.bots.pr.CheckablePullRequest.executeChecks(CheckablePullRequest.java:195)
		... 11 more
Caused by: java.lang.NumberFormatException: For input string: """"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)
	at java.base/java.lang.Integer.parseInt(Integer.java:670)
	at java.base/java.lang.Integer.parseInt(Integer.java:778)
	at org.openjdk.skara.vcs/org.openjdk.skara.vcs.Status.from(Status.java:122)
	... 20 more


The line that we tried to parse:

:100644 120000 b4b808887522a635ffea21c1579ffd70703e040a b316cbb5e3bcbd826c0b683a305807a7039d5dbf T	Makefile",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SKARA-1388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2urnf:",9223372036854775807,,,,,,,,,,,,,,"2022-03-31 10:38;erikj;This was spotted again in jfx#764. It would be good if we could make the parser aware and add a jcheck warning to prevent symlinks from appearing in our repos. ;;;","2022-09-13 16:18;erikj;To clarify what I meant with my last comment. We need to parser to properly handle status T. Then, perhaps as a followup, it would be good if we could make jcheck able to warning/error on symlinks, as we generally don't allow them in OpenJDK repos. Let this bug only be about the parser however. Adding jcheck checks is a much bigger task.;;;","2022-09-22 16:37;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/skara/pull/1373
Date: 2022-09-13 16:44:55 +0000;;;","2022-09-23 12:52;roboduke;Changeset: 39cb319b
Author:    Zhao Song <zhao.song@oracle.com>
Committer: Erik Joelsson <erikj@openjdk.org>
Date:      2022-09-23 19:51:49 +0000
URL:       https://git.openjdk.org/skara/commit/39cb319b753893812993bddc0c1064b5b8c5801a
;;;",,,,,,,,,,,,,,,,,
OCA link in PR comment added by Skara bot is broken,SKARA-1221,5061017,Bug,Resolved,SKARA,Skara,software,darcy,,,P2,Fixed,kcr,kcr,kcr,2021-10-22 10:31,2021-10-22 13:15,2023-10-01 09:57,2021-10-22 13:15,,,,,,,,,,,,,,,bots,,0,,,,,,,,,,,,,,,,,"The following link to the Oracle Contributor Agreement is added by the Skara bot:

https://www.oracle.com/technetwork/community/oca-486395.html

The above is now a broken link, and should be replaced by:

https://oca.opensource.oracle.com/",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275815,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2urmj:",9223372036854775807,,,,,,,,,,,,,,"2021-10-22 10:34;kcr;This was reported here:

https://github.com/openjdk/jdk/pull/5989#issuecomment-949300382;;;",,,,,,,,,,,,,,,,,,,,
Add GitHub user hendriks73,SKARA-1219,5060972,Bug,Resolved,SKARA,Skara,software,darcy,,,P4,Fixed,kcr,hschreiber,hschreiber,2021-10-22 01:09,2021-10-22 04:14,2023-10-01 09:57,2021-10-22 04:14,,,,,,,,,,,,,,,admin,,0,,,,,,,,,,,,,,,,,"Hi there,

Please add the GitHub user hendriks73 to the OpenJDK author account hschreiber (https://openjdk.java.net/census#hschreiber)

Thanks!

Hendrik Schreiber",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2urcj:",9223372036854775807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ProblemList errors should not prevent a PR from being rfr,SKARA-1217,5060403,Bug,Resolved,SKARA,Skara,software,darcy,,,P3,Fixed,zsong,kcr,kcr,2021-10-14 06:54,2022-11-02 09:55,2023-10-01 09:57,2022-11-02 09:54,,,,,,,,,,,,,,1.0,bots,,0,,,,,,,,,,,,,,,,,"Skara jcheck supports checking the ProblemList to ensure that if a bug is fixed, the corresponding entry in the ProblemList, if any, is removed. This should be an integration blocker, but I don't think it should prevent a PR from being ready for review (rfr).

This can be seen in the following PR, which is not yet marked as ""rfr"" even though it is otherwise ready:

https://github.com/openjdk/jdk/pull/5884",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2unu3:",9223372036854775807,,,,,,,,,,,,,,"2021-10-18 12:30;erikj;The idea with requiring a reasonable amount of jcheck checks to pass before asking humans to look at the code is to spare humans from having to point out obvious things that can be automatically checked. Currently we only have exceptions in the RFR check for things that concern the commit message and number of reviewers (as that won't be final until after review).

To me it seems rather arbitrary to allow ProblemList issues to go through but none of the others (which include: binary, symlink, executable, missing issue, whitespace, author email and author name). Should we just stop blocking RFR for all or most of these, or is ProblemList truly the one exception?;;;","2021-10-18 12:39;kcr;You raise a good point. I was thinking that this should be something more like the wrong issue ID, rather than being like a whitespace error, but there is an argument to be made for what is currently being done.;;;","2022-11-01 12:40;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/skara/pull/1410
Date: 2022-11-01 19:39:09 +0000;;;","2022-11-02 09:54;roboduke;Changeset: e1ecf710
Author:    Zhao Song <zsong@openjdk.org>
Committer: Erik Joelsson <erikj@openjdk.org>
Date:      2022-11-02 16:54:22 +0000
URL:       https://git.openjdk.org/skara/commit/e1ecf7100314fb5120d9020730c1808cf02ed229
;;;",,,,,,,,,,,,,,,,,
Clean label not updating correctly,SKARA-1215,5060325,Bug,Resolved,SKARA,Skara,software,darcy,,,P3,Fixed,zsong,erikj,erikj,2021-10-13 06:38,2022-10-05 05:52,2023-10-01 09:57,2022-10-05 05:52,1.0,,,,,,,,,,,,,1.0,bots,,0,,,,,,,,,,,,,,,,,"If the user mistakenly creates a Backport PR with the wrong hash and then later corrects it, the clean status is never correctly re-evaluated. It gets stuck only considering the very first Backport hash that was added. The clean status should re-evaluate on the last/current Backport hash.

Further, on Gitlab, if the user tries to manually label the MR as clean, it's highly likely that the user will use the Gitllab /label command instead of the Skara /clean command. If this happens, Skara will not detect that a user set the label and will just immediately remove it again. The Skara /clean command was broken until recently SKARA-1242. When fixing that bug, I also updated the documentation for the /clean command, which should reduce some of the confusion and at least provide a reasonable workaround.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uncr:",9223372036854775807,,,,,,,,,,,,,,"2022-10-03 15:24;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/skara/pull/1388
Date: 2022-10-03 22:23:27 +0000;;;","2022-10-04 07:47;erikj;I'm pretty sure this is a duplicate of SKARA-1449.;;;","2022-10-04 10:35;erikj;There was apparently another issue at play here. The CheckWorkItem::getMetadata is not considering ""backport"" metadata comments when calculating the metadata hash. Because of this, if just the bug title is updated to another ""Backport <hash>"", the next CheckRun will not rerun the checks, and so will not update the clean label nor the commit comment.;;;","2022-10-05 05:52;roboduke;Changeset: 522d894f
Author:    Zhao Song <zsong@openjdk.org>
Committer: Erik Joelsson <erikj@openjdk.org>
Date:      2022-10-05 12:51:25 +0000
URL:       https://git.openjdk.org/skara/commit/522d894fded2cf99b88d7873de5b69faed161cd4
;;;",,,,,,,,,,,,,,,,,
Add expiration (auto-close) for PRs in JDK updates project,SKARA-1209,5060160,Bug,Resolved,SKARA,Skara,software,darcy,,,P3,Fixed,erikj,clanger,clanger,2021-10-11 15:01,2021-10-12 13:58,2023-10-01 09:57,2021-10-12 13:58,,,,,,,,,,,,,,,admin,,0,,,,,,,,,,,,,,,,,"https://github.com/openjdk/jdk is configured to first warn and then close PRs without activity after some time. This would be helpful for JDK Updates projects as well, since otherwise only PR creators can close their own PRs and stale PRs might accumulate.

So, please configure PR expiry for these repos, if possible:
https://github.com/openjdk/jdk11u-dev
https://github.com/openjdk/jdk11u
https://github.com/openjdk/jdk17u",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2umc3:",9223372036854775807,,,,,,,,,,,,,,"2021-10-12 13:58;erikj;Added the same 28d limit as is currently configured for mainline.;;;",,,,,,,,,,,,,,,,,,,,
Unable to view constants in constant pool page.,JMC-7473,5064233,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P2,Fixed,aptmac,bbanathur,bbanathur,2021-12-07 08:38,2022-04-06 22:29,2023-10-01 09:57,2022-01-12 07:30,8.2.0,,,,,,,,,,,,,8.2.0,Mission Control Client,,0,regression,regression_JMC-7439,sqe-8.2.0,,,,,,,,,,,,,,"Constant Pools and Values are not displayed under JFR page constant pool 

!image-2021-12-07-22-05-32-101.png|width=1152,height=260!",,,,,,,,,,JMC-7738,,,,,,,,,,,,,,,JMC-7439,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-12-07 08:41;bbanathur;exception.log;https://bugs.openjdk.org/secure/attachment/97296/exception.log","2021-12-07 08:35;bbanathur;image-2021-12-07-22-05-32-101.png;https://bugs.openjdk.org/secure/attachment/97295/image-2021-12-07-22-05-32-101.png",,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2vbdv:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1c80c3d6,,,,,,,,,"2022-01-10 08:02;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jmc/pull/348
Date: 2022-01-10 15:57:50 +0000;;;","2022-01-12 07:30;roboduke;Changeset: dbb3e76d
Author:    Alex Macdonald <aptmac@openjdk.org>
Date:      2022-01-12 15:30:00 +0000
URL:       https://git.openjdk.java.net/jmc/commit/dbb3e76d6f9e7a993b1eac37b2cbfeb09bef65ef
;;;",,,,,,,,,,,,,,,,,,,
Fix jdp test coverage,JMC-7468,5064089,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P5,Fixed,aptmac,aptmac,aptmac,2021-12-03 11:51,2022-04-06 22:28,2023-10-01 09:57,2021-12-06 06:29,,,,,,,,,,,,,,8.2.0,Mission Control Core,,0,,,,,,,,,,,,,,,,,"Currently, running coverage on core will show that jdp.test has 0% coverage. This is false, as there are tests included.",,,,,,,,,,JMC-7729,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-12-03 11:51;aptmac;2021-12-03-141742_1091x251_scrot.png;https://bugs.openjdk.org/secure/attachment/97272/2021-12-03-141742_1091x251_scrot.png",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vahv:",9223372036854775807,,,,,,,,,,,,,,"2021-12-06 06:29;roboduke;Changeset: 9148435e
Author:    Alex Macdonald <aptmac@openjdk.org>
Date:      2021-12-06 14:28:33 +0000
URL:       https://git.openjdk.java.net/jmc/commit/9148435e23f746dd82422acd9d24c32874573dc9
;;;",,,,,,,,,,,,,,,,,,,,
Only use one version of d3,JMC-7467,5064070,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P2,Fixed,hirt,hirt,hirt,2021-12-03 07:40,2022-04-06 22:30,2023-10-01 09:57,2022-02-03 18:44,,,,,,,,,,,,,,8.2.0,Mission Control Client,,0,,,,,,,,,,,,,,,,,"Right now the graph view and the flame view are using different versions of the d3 library.

Graph view:
d3.v5.min.js

Flame view:
d3.v6.min.js

 Soon the heatmap view will be added, using:
d3.v6.min.js

We should try upgrading both the graphviz.js version and the d3 version used by the graph view.",,,,,,,,,,JMC-7755,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vadn:",9223372036854775807,,JMC 8.2 Sprint 2,JMC 8.2 Sprint 3,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1c80c3d6,,,,,,,,,"2022-01-31 05:36;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jmc/pull/372
Date: 2022-01-31 13:33:26 +0000;;;","2022-02-03 18:44;roboduke;Changeset: 7f42e4a1
Author:    Marcus Hirt <hirt@openjdk.org>
Date:      2022-02-04 02:42:44 +0000
URL:       https://git.openjdk.java.net/jmc/commit/7f42e4a10291d7e9316711edd81a183951cdae57
;;;",,,,,,,,,,,,,,,,,,,
JfrEditor instances are kept in memory by NavigationHistory,JMC-7463,5063623,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P2,Fixed,jpbempel,jpbempel,jpbempel,2021-11-29 03:02,2022-04-06 22:27,2023-10-01 09:57,2021-12-02 10:46,8.1.0,,,,,,,,,,,,,8.2.0,Mission Control Client,,0,,,,,,,,,,,,,,,,,"JfrEditor instances, even after closing tabs, are retain in memory by at least NavigationHistory

 
 !Screenshot 2021-11-28 at 19.15.37.png|thumbnail! 
 ",,,,,,,,,,JMC-7726,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-29 02:59;jpbempel;Screenshot 2021-11-28 at 19.15.37.png;https://bugs.openjdk.org/secure/attachment/97207/Screenshot+2021-11-28+at+19.15.37.png",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v7nf:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1c80c3d6,,,,,,,,,"2021-12-02 10:46;roboduke;Changeset: 8b8aa7c2
Author:    Jean-Philippe Bempel <jpbempel@openjdk.org>
Date:      2021-12-02 18:45:57 +0000
URL:       https://git.openjdk.java.net/jmc/commit/8b8aa7c299b92b655ba669a92d16f193beb406bc
;;;",,,,,,,,,,,,,,,,,,,,
Unnecessary imports should fail the build,JMC-7457,5063552,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P3,Fixed,aptmac,hirt,hirt,2021-11-26 05:06,2023-05-21 18:19,2023-10-01 09:57,2023-05-19 11:29,,,,,,,,,,,,,,9.0.0,Release Engineering,,0,,,,,,,,,,,,,,,,,"In an effort to keep the code clean, we should simply fail the build if there are unnecessary imports in a class.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v77n:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5dc4c445,,,,,,,,,"2021-12-06 07:20;aptmac;Taking a look at the dependencies we currently use for style/formatting/spotbugs:


- spotbugs: runs static analysis on bytecode, it isn't able to check the imports

- spotless: has an option ({{<removeUnusedImports/>}}) that will remove any unused imports, but otherwise it lacks the functionality of warning about imports instead of simply deleting them. It also just works on unused imports, and won't check for things like wildcard imports, etc.


This issue looks like it'll need a new dependency, the maven-checkstyle-plugin, so maybe we consider this for 8.3.0 instead. There are some pretty neat and powerful style checking options that can be enabled, some of them can be seen in an example config ([https://github.com/checkstyle/checkstyle/blob/master/src/main/resources/google_checks.xml#L49).] At the moment I have a working branch that flags unused imports, redundant imports, and star imports ([https://github.com/aptmac/jmc/commit/00cc39955c61eb1f115c0c5f12ad4a8526bb67ea]);;;","2021-12-06 08:04;hirt;Ok. Let's do this for 8.3.0 then. Using the checkstyle plug-in sounds like the way to go.;;;","2023-05-18 13:51;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jmc/pull/484
Date: 2023-05-18 20:43:08 +0000;;;","2023-05-19 11:29;roboduke;Changeset: 200d0f8f
Author:    Alex Macdonald <aptmac@openjdk.org>
Date:      2023-05-19 18:28:07 +0000
URL:       https://git.openjdk.org/jmc/commit/200d0f8fffc4a646c28c2d570f23e0ac48eff117
;;;",,,,,,,,,,,,,,,,,
Remove the JDK 8 Eclipse launchers,JMC-7456,5063526,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P3,Fixed,aptmac,hirt,hirt,2021-11-25 13:26,2022-04-06 22:27,2023-10-01 09:57,2021-12-03 09:35,,,,,,,,,,,,,,8.2.0,Infrastructure,,0,,,,,,,,,,,,,,,,,They serve no purpose anymore.,,,,,,,,,,JMC-7727,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v71v:",9223372036854775807,,JMC 8.2 Sprint 2,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@312b13a5,,,,,,,,,"2021-12-03 09:35;roboduke;Changeset: 787bf0a9
Author:    Alex Macdonald <aptmac@openjdk.org>
Date:      2021-12-03 17:34:17 +0000
URL:       https://git.openjdk.java.net/jmc/commit/787bf0a9d04c6a78ef5d28ff735611f5df1019ed
;;;",,,,,,,,,,,,,,,,,,,,
Add serializers and writer modules to core test coverage,JMC-7447,5063230,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P5,Fixed,aptmac,aptmac,aptmac,2021-11-22 12:57,2022-04-06 22:27,2023-10-01 09:57,2021-11-25 11:34,,,,,,,,,,,,,,8.2.0,Mission Control Core,,0,,,,,,,,,,,,,,,,,"Currently, the serializers and writer modules are not included in the coverage reports of the core test runs. It would be nice to have them included as well.",,,,,,,,,,JMC-7722,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v583:",9223372036854775807,,,,,,,,,,,,,,"2021-11-25 11:34;roboduke;Changeset: 3ce64837
Author:    Alex Macdonald <aptmac@openjdk.org>
Date:      2021-11-25 19:33:53 +0000
URL:       https://git.openjdk.java.net/jmc/commit/3ce6483718c7a1ae5d490ded7f34cefde63fc42e
;;;",,,,,,,,,,,,,,,,,,,,
Wrong version in THIRDPARTYREADME,JMC-7443,5062728,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P3,Fixed,schaturvedi,psrivastava,psrivastava,2021-11-16 01:40,2022-03-20 21:50,2023-10-01 09:57,2022-03-18 08:45,8.1.0,,,,,,,,,,,,,8.2.0,Mission Control Core,,0,3rdparty,,,,,,,,,,,,,,,,"# In THIRDPARTYREADME file- D3 has a version of 6.1.3  which is not a valid version. Correct version is  6.3.1 It is wrong in THIRDPARTYREADME maintained by community as well, so fix there as well.
 # ""Eclipse Public License - v 1.0""  to be updated to ""Eclipse Public License - v 2.0"" ",,,,,,,,,,JMC-7570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JMC-7334,,,,,,,JMC-7334,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-16 01:40;psrivastava;THIRDPARTYREADME.txt;https://bugs.openjdk.org/secure/attachment/97099/THIRDPARTYREADME.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v24r:",9223372036854775807,,,,,,,,,,,,,,"2022-03-04 09:19;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jmc/pull/385
Date: 2022-03-04 17:14:42 +0000;;;",,,,,,,,,,,,,,,,,,,,
JVM System information tables do not scroll horizontally,JMC-7441,5062280,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P4,Fixed,aptmac,aptmac,aptmac,2021-11-09 07:11,2023-07-16 18:21,2023-10-01 09:57,2023-07-14 05:53,,,,,,,,,,,,,,9.0.0,Mission Control Client,,0,,,,,,,,,,,,,,,,,"When selecting a JVM from the JVM Browser and navigating to the ""System"" tab, the tables do not scroll horizontally, and do not wrap text.

As a result it's impossible to read the text if it extends past the bounds of the table. The tooltips may also not a help here, because (in the case of the VM Arguments row) the arguments extend past the boundaries of my monitor.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-09 07:11;aptmac;2021-11-09-100351_1709x923_scrot.png;https://bugs.openjdk.org/secure/attachment/97015/2021-11-09-100351_1709x923_scrot.png",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uzdf:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2df90152,,,,,,,,,"2023-07-13 18:29;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jmc/pull/505
Date: 2023-07-14 01:24:18 +0000;;;","2023-07-13 19:42;aptmac;As mentioned in the body of my PR, this issue affects many more tables than just the System tables.

The problem is any virtual table (SWT Table initialized with SWT.VIRTUAL) will not have the entire table content prepared by the time the columns need to be sized. Virtual tables are lazily loaded, and meant for large sets of data, or mutable data. A lot of tables in JMC that use virtual tables don't fall into these categories, and the trade-off is that the table doesn't know how large the contents of the table items are, so they aren't sized properly. This can be shown best in these system tables, where the table entries are long enough that the tooltips run out-of-bounds on my double monitors.

One solution could be to resize the columns, but we'd need to know how wide to make the columns. I tried an implementation where I had a listener look for the initial SWT.Paint event and would use the swt graphics context to size the columns to the width of the longest table item, but this causes a stutter in the UI where it renders and then re-renders the table. Not a huge deal, but just enough to be jarring.

The solution I proposed in my PR is just to make these two System tab tables non-virtual, and then pack the columns. I put the packing function into ColumnManager, so that it can be re-used for other tables if this solution goes through.;;;","2023-07-14 05:53;roboduke;Changeset: eceb2792
Author:    Alex Macdonald <aptmac@openjdk.org>
Date:      2023-07-14 12:53:28 +0000
URL:       https://git.openjdk.org/jmc/commit/eceb2792dac7c686ca499d634184adda1e49c0d0
;;;",,,,,,,,,,,,,,,,,,
JMC fails on Apple M1,JMC-7440,5061528,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P3,Fixed,omikhaltcova,omikhaltcova,omikhaltcova,2021-11-01 02:09,2022-04-06 22:27,2023-10-01 09:57,2021-11-24 10:37,8.1.1,,,,,,,,,,,,,8.2.0,Mission Control Core,,0,,,,,,,,,,,,,,,,,"JMC 8.1.1 (using zulu11.52.13-ca-jdk11.0.13-macosx_x64) fails to run via Rosetta 2 on macOS Big Sur with chip Apple M1.
The diagnostic crash report and the log are attached.

!image-2021-11-01-12-03-11-121.png!

 ","Version: JMC 8.1.1
VM: zulu11.52.13-ca-jdk11.0.13-macosx_x64
OS: macOS Big Sur v 11.1
Chip: Apple M1 ",,,,,,,,,JMC-7719,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-01 02:02;omikhaltcova;1635754696951.log;https://bugs.openjdk.org/secure/attachment/96873/1635754696951.log","2021-11-01 02:03;omikhaltcova;image-2021-11-01-12-03-11-121.png;https://bugs.openjdk.org/secure/attachment/96871/image-2021-11-01-12-03-11-121.png","2021-11-01 02:02;omikhaltcova;jmc_2021-11-01-011823_zulu-macarm-03.crash;https://bugs.openjdk.org/secure/attachment/96872/jmc_2021-11-01-011823_zulu-macarm-03.crash",,,,,,arm,,,,,,,,,,,,,os_x,,,,,,"0|i2uus3:",9223372036854775807,,,,,,,,,,,,,,"2021-11-02 01:10;hirt;I don't have an M1, or even access to one, so I won't be of much help.;;;","2021-11-19 16:27;omikhaltcova;It's found out as a result of testing with the different versions of macOS that this bug is related to a macOS system error (already fixed), perhaps in Rosetta 2. The attached diagnostic report also shows a failure in the system library. JMC successfully runs on macOS Big Sur v11.4 and Monterey v12.0.1 and fails on macOS Big Sur v11.1. 
*So at the moment minimum requirements for successful run via Rosetta is macOS v 11.4+.*;;;","2021-11-19 17:25;omikhaltcova;Succeeded to build JMC for macarm, so now it can be run without Rosetta.
Tested this build on macOS v 11.1, where the build for x86_64 running via Rosetta fails, and it woks.;;;","2021-11-24 10:36;roboduke;Changeset: d218205f
Author:    Olga Mikhaltsova <omikhaltcova@openjdk.org>
Committer: Marcus Hirt <hirt@openjdk.org>
Date:      2021-11-24 18:35:22 +0000
URL:       https://git.openjdk.java.net/jmc/commit/d218205fd4113daea82de1b813d5ef1ed740983d
;;;",,,,,,,,,,,,,,,,,
Update the maven enforcer plugin,JMC-7435,5060674,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P4,Fixed,reinhapa,reinhapa,reinhapa,2021-10-19 07:46,2022-04-06 22:26,2023-10-01 09:57,2021-10-21 07:08,,,,,,,,,,,,,,8.2.0,Infrastructure,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,JMC-7716,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2upib:",9223372036854775807,,,,,,,,,,,,,,"2021-10-21 07:08;roboduke;Changeset: 1d17e0cc
Author:    Patrick Reinhart <reinhapa@openjdk.org>
Committer: Marcus Hirt <hirt@openjdk.org>
Date:      2021-10-21 14:07:51 +0000
URL:       https://git.openjdk.java.net/jmc/commit/1d17e0cc43d0a5ffef4ebdc48d91a69f65d7379a
;;;",,,,,,,,,,,,,,,,,,,,
Update the maven download plugin,JMC-7434,5060602,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P4,Fixed,reinhapa,reinhapa,reinhapa,2021-10-18 22:10,2022-04-06 22:26,2023-10-01 09:57,2021-10-19 04:34,,,,,,,,,,,,,,8.2.0,Infrastructure,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,JMC-7715,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2up2b:",9223372036854775807,,,,,,,,,,,,,,"2021-10-19 04:34;roboduke;Changeset: cf4ceb3a
Author:    Patrick Reinhart <reinhapa@openjdk.org>
Committer: Marcus Hirt <hirt@openjdk.org>
Date:      2021-10-19 11:34:16 +0000
URL:       https://git.openjdk.java.net/jmc/commit/cf4ceb3a617ec2ba700f0be1546e0f68584342e5
;;;",,,,,,,,,,,,,,,,,,,,
Update the spotless maven plugin,JMC-7433,5060570,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P4,Fixed,reinhapa,reinhapa,reinhapa,2021-10-18 09:26,2022-04-06 22:26,2023-10-01 09:57,2021-10-18 13:35,,,,,,,,,,,,,,8.2.0,Infrastructure,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,JMC-7714,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uov7:",9223372036854775807,,,,,,,,,,,,,,"2021-10-18 13:35;roboduke;Changeset: 9bb57999
Author:    Patrick Reinhart <reinhapa@openjdk.org>
Committer: Marcus Hirt <hirt@openjdk.org>
Date:      2021-10-18 20:34:46 +0000
URL:       https://git.openjdk.java.net/jmc/commit/9bb57999a1c54eb2756676aa2f84eb431bcd1fb5
;;;",,,,,,,,,,,,,,,,,,,,
Update the spotbugs maven plugin,JMC-7432,5060568,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P4,Fixed,reinhapa,reinhapa,reinhapa,2021-10-18 09:17,2022-04-06 22:28,2023-10-01 09:57,2021-12-23 08:20,,,,,,,,,,,,,,8.2.0,Infrastructure,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,JMC-7732,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uour:",9223372036854775807,,,,,,,,,,,,,,"2021-12-23 08:20;roboduke;Changeset: ae37757e
Author:    Patrick Reinhart <reinhapa@openjdk.org>
Date:      2021-12-23 16:20:08 +0000
URL:       https://git.openjdk.java.net/jmc/commit/ae37757e6cd68cafbacbe8fda03e5bbb29a726b3
;;;",,,,,,,,,,,,,,,,,,,,
Update XML parsing,JMC-7419,5060225,Bug,Resolved,JMC,Java Mission Control,software,hirt,The production time profiling and diagnostics tools-suite for the HotSpot JDK.,,P4,Fixed,eastigeevich,eastigeevich,eastigeevich,2021-10-12 07:25,2022-04-06 22:26,2023-10-01 09:57,2021-10-13 12:50,,,,,,,,,,,,,,8.2.0,Mission Control Core,,0,security,,,,,,,,,,,,,,,,"Our security vulnerabilities scanner found insecure XML parsing:

[https://github.com/openjdk/jmc/blob/master/agent/src/main/java/org/openjdk/jmc/agent/impl/DefaultTransformRegistry.java#L127]

[https://github.com/openjdk/jmc/blob/master/agent/src/main/java/org/openjdk/jmc/agent/impl/DefaultTransformRegistry.java#L155]

[https://github.com/openjdk/jmc/blob/master/agent/src/main/java/org/openjdk/jmc/agent/impl/DefaultTransformRegistry.java#L495]

 

Type of attack: XML External Entity(XXE) injection ([https://owasp.org/www-community/vulnerabilities/XML_External_Entity_(XXE)_Processing)]

Prevention: [https://cheatsheetseries.owasp.org/cheatsheets/XML_External_Entity_Prevention_Cheat_Sheet.html]

 ",,,,,,,,,,JMC-7711,JMC-7424,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2umqj:",9223372036854775807,,JMC 8.2 Sprint 2,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6c75159f,,,,,,,,,"2021-10-13 12:50;roboduke;Changeset: 90197d63
Author:    Evgeny Astigeevich <eastig@amazon.com>
Committer: Marcus Hirt <hirt@openjdk.org>
Date:      2021-10-13 19:49:55 +0000
URL:       https://git.openjdk.java.net/jmc/commit/90197d636da7a3705aa927cc9da4cd5498ad4b43
;;;",,,,,,,,,,,,,,,,,,,,
"jcmd reports ""Module jdk.jfr not found."" when ""jdk.management.jfr"" is missing",JDK-8280131,5063578,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,egahlin,webbuggrp,webbuggrp,2021-11-28 06:36,2022-11-14 11:33,2023-10-01 09:57,2022-10-21 01:16,17,18,,,,,,,,,,,,20,hotspot,,0,dcsswa,reproducer-yes,webbug,,,,,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
openjdk version ""17.0.1"" 2021-10-19
OpenJDK Runtime Environment (build 17.0.1+12-39)
OpenJDK 64-Bit Server VM (build 17.0.1+12-39, mixed mode, sharing)

openjdk version ""18-ea"" 2022-03-15
OpenJDK Runtime Environment (build 18-ea+25-1670)
OpenJDK 64-Bit Server VM (build 18-ea+25-1670, mixed mode, sharing)

A DESCRIPTION OF THE PROBLEM :
Using jcmd to access Java Flight Recorder on a process running a jlink:ed runtime containing module ""jdk.jfr"", but missing module ""jdk.management.jfr"",
jcmd reports ""Module jdk.jfr not found.""

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
The attached Java 17 source code first creates a module and two runtimes (one with and one without ""jdk.management.jfr""),
then launches the module with the two runtimes,
then runs ""jcmd <pid> JFR.check"" and prints the output.

java JcmdMissingModule.java

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
""Module jdk.management.jfr not found.""
ACTUAL -
""Module jdk.jfr not found.""

---------- BEGIN SOURCE ----------
import java.io.ByteArrayOutputStream;                                                                                          
import java.io.File;
import java.io.InputStream;                              
import java.nio.file.Files;
import java.nio.file.Path;                 
import java.util.Collections;                                                                                                  
import java.util.spi.ToolProvider;                                                                                             

/**                                      
 * jcmd prints message ""Module jdk.jfr not found."",                                                                            
 * when using slimmed jlink:ed runtime,                                                                                        
 * containing module ""jdk.jfr"".
 *                     
 * Adding ""jdk.management.jfr"" to the jlink:ed runtime,                                                                        
 * makes jcmd happy.                                                                                                           
 *
 * This java program creates source code of a module which just sleeps,
 * compiles that,
 * makes two jlink:ed runtimes (one without and one with module ""jdk.management.jfr""),
 * launches the sleeping module with the both runtimes,
 * and invokes ""jcmd <pid> JFR.check"" on theses processes,
 * and prints their output.
 */              
class JcmdMissingModule {
    static ToolProvider javac = ToolProvider.findFirst(""javac"").orElseThrow(() -> new RuntimeException(""No javac""));
    static ToolProvider jlink = ToolProvider.findFirst(""jlink"").orElseThrow(() -> new RuntimeException(""No jlink""));
                                                                                                                               
    static String module = ""sleep"";
    static String moduleInfo = ""module %s {}"".formatted(module);
    static String Main = """"""                            
        package example;                         
        class Main {                  
            public static void main(String[] args) throws InterruptedException {
                Thread.sleep(Long.MAX_VALUE);                                                                                  
            }          
        }
        """""";
                                                                                                                               
    public static void main(String[] args) throws Exception {
        Path out = Path.of(""out"");
        Path src = out.resolve(""src"");                       
        Path classes = out.resolve(""classes"");
                                                               
        del(out);
                                                                                                                               
        Files.createDirectories(src.resolve(module).resolve(""example""));
        Files.write(src.resolve(module).resolve(""module-info.java""), moduleInfo.getBytes());
        Files.write(src.resolve(module).resolve(""example"").resolve(""Main.java""), Main.getBytes());
                                                               
        // Compile module
        javac.run(System.out, System.err,                                                                                      
                ""--module-source-path"", src.toString(),
                ""--module"",             module,
                ""-d"",                   classes.toString());
                                                               
        Path javaHome = Path.of(System.getProperty(""java.home""));
        Path jmods = javaHome.resolve(""jmods"");
        Path jcmd = javaHome.resolve(""bin"").resolve(""jcmd"");
                                                               
        String reproducerModules = String.join("","", module, ""jdk.jfr"", ""jdk.management"");
        String workaroundModules = String.join("","", module, ""jdk.jfr"", ""jdk.management"", ""jdk.management.jfr"");
                                                                                                                               
        String modulePath = String.join(File.pathSeparator, jmods.toString(), classes.toString());
        String reproducer = out.resolve(""reproducer"").toString();
        String workaround = out.resolve(""workaround"").toString();
                                                               
        // Create runtimes with limited set of modules
        jlink(reproducerModules, modulePath, reproducer);                                                                      
        jlink(workaroundModules, modulePath, workaround);
                                                               
        String reproducerJava = Path.of(reproducer, ""bin"", ""java"").toString();                                                 
        String workaroundJava = Path.of(workaround, ""bin"", ""java"").toString();                                                 
                                                               
        String moduleWithMain = module + ""/example.Main"";
                                                               
        // Start processes which just sleep
        long reproducerPid = run(reproducerJava, ""--module"", moduleWithMain).pid();                                            
        long workaroundPid = run(workaroundJava, ""--module"", moduleWithMain).pid();                                            

        // Run JFR.check on the processes
        String reproducerJcmd = runAndReadOutput(jcmd.toString(), String.valueOf(reproducerPid), ""JFR.check"");                 
        String workaroundJcmd = runAndReadOutput(jcmd.toString(), String.valueOf(workaroundPid), ""JFR.check"");                 
                                                               
        // List modules
        String reproducerListModules = runAndReadOutput(reproducerJava, ""--list-modules"");                                     
        String workaroundListModules = runAndReadOutput(workaroundJava, ""--list-modules"");                                     
                                                               
        System.out.println(""""""                                                                                                 
            jcmd:
            %s                                                                                                                 
            --list-modules:                            
            %s                                            
                                                               
            jcmd:
            %s           
            --list-modules:                                                                                                    
            %s                                                                                                                 
            """""".formatted(reproducerJcmd, reproducerListModules, workaroundJcmd, workaroundListModules));                      
   }                               
                                                                                                                               
    static Process run(String... cmd) throws Exception {
        Process process = new ProcessBuilder(cmd)
            .redirectErrorStream(true)
            .start();                                                                                                          
        Runtime.getRuntime().addShutdownHook(new Thread() { public void run() { process.destroy(); } } );                      
        return process;
    }    
                                                               
    static String runAndReadOutput(String... cmd) throws Exception {                                                           
        Process process = run(cmd);                          
        process.waitFor();        
        String output = readOutput(process.getInputStream());
        return output;                        
    }                                                          
                                                               
    static String readOutput(InputStream is) throws Exception {                                                                
        var baos = new ByteArrayOutputStream();                                                                                
        is.transferTo(baos);                                                                                                   
        return baos.toString();                                                                                                
    }                                                          
                                                               
    static void jlink(String modules, String modulePath, String output) {                                                      
        jlink.run(System.out, System.err,              
                ""--add-modules"", modules,      
                ""--module-path"", modulePath,                
                ""--output"", output                             
                );                                                                                                             
    }                                          
                                                               
    static void del(Path dir) {                                
        if (dir.toFile().exists()) {                                                                                           
            try (var files = Files.walk(dir)) {                                                                                
                files.sorted(Collections.reverseOrder()).map(Path::toFile).forEach(f -> f.delete());                           
            } catch (Exception e) {}                                                                                           
        }                                                                                                                      
    }                                                                                                                          
}                                                              
---------- END SOURCE ----------

CUSTOMER SUBMITTED WORKAROUND :
Adding ""jdk.management.jfr"" to the jlink:ed runtime

FREQUENCY : always


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2022-01-18 02:41;sswsharm;JcmdMissingModule.java;https://bugs.openjdk.org/secure/attachment/97655/JcmdMissingModule.java",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v7df:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2022-01-18 02:49;sswsharm;Issue is reproduced. 
Jcmd report "" Module jdk.jfr not found"" when jdk.management.jfr is missing

OS: Windows 10
JDK 15.0.2 : Fail
JDK 17.0.1 : Fail
JDK 18ea31: Fail

Output:

"" jcmd:
11764:
Module jdk.jfr not found.
Flight Recorder can not be enabled.

--list-modules:
java.base@18-ea
java.management@18-ea
jdk.jfr@18-ea
jdk.management@18-ea
sleep


jcmd:
17348:
No available recordings.

Use jcmd 17348 JFR.start to start a recording.

--list-modules:
java.base@18-ea
java.management@18-ea
jdk.jfr@18-ea
jdk.management@18-ea
jdk.management.jfr@18-ea
sleep ""
;;;","2022-01-18 10:19;mwthomps;message is produced in this file: src/hotspot/share/jfr/jni/jfrJavaSupport.cpp.  Moving this to JFR for evaluation.;;;","2022-01-19 16:37;egahlin;When I create a modular image from command line:

$ ./jlink --module-path ../jmods/ --add-modules jdk.jfr --output /jfrjvm

and then use jcmd <pid> JFR.check against the process, it works fine. ;;;","2022-05-30 04:31;egahlin;If ""requires jdk.jfr;"" is added to the sleep module, it works fine in the reproducer.

My guess is that a modularized application only adds needed packages to the module graph. The JVM looks for the jdk.jfr package, but can't find it in the package table so it fails with ""Module jdk.jfr not found."".

Not sure why it works when jdk.management.jfr is in the image, but perhaps because jdk.management.jfr provides a service to jdk.management, and jdk.management.jfr requires jdk.jfr so it gets included. 

Seems like we should check if jdk.jfr module exists in the image, similar to the --list-modules functionality, and if so, add the jdk.jfr module to the graph. This is only needed when a jcmd <pid> JFR.* is executed the first time.



;;;","2022-10-12 22:18;egahlin;Impact = High (JFR can't be used)
Likelihood = Medium/Low (Only modularized application with jdk.jfr in image, but not jdk.management.jfr)
Workaround = Low (Specify --add-modules jdk.jfr)

(H)(M/L)(L) => P3.

Fix is to load jdk.jfr module if  ""jcmd <pid> JFR.*"" is executed. This is similar to ""jdk.management.agent"" being loaded if ""jcmd <pid> ManagementAgent.status"" is run.

Also load jdk.jfr module if -XX:StartFlightRecording or -XX:FlightRecorderOptions have been specified on command line. This similar to jdk.internal.vm.ci module being loaded if -XX:+EnableJVMCI is used.

;;;","2022-10-17 07:11;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/10723
Date: 2022-10-17 09:25:57 +0000;;;","2022-10-21 01:16;dukebot;Changeset: a345df20
Author:    Erik Gahlin <egahlin@openjdk.org>
Date:      2022-10-21 08:14:24 +0000
URL:       https://git.openjdk.org/jdk/commit/a345df20d0a85b90e6703fba5582cacc5ba38a6d
;;;",,,,,,,,,,,,,,
PointerEvent: buttons property set to 0 when mouse down,JDK-8278759,5064384,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,hmeda,webbuggrp,webbuggrp,2021-12-08 23:30,2022-05-02 04:34,2023-10-01 09:57,2022-03-01 08:03,8u291,jfx17,,,,,,,,,,,,jfx19,javafx,,0,additional-information-received,dcspn,regression,reproducer-yes,sn_111,sn_112,sn_113,webbug,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
Windows 10
JavaFX 17 

Note that it works fine with previous versions of JavaFX.

A DESCRIPTION OF THE PROBLEM :
When the provided HTML is opened in WebView and one tries to drag over the document (with mouse button down), the value of ""event.buttons"" is 0 when it should be 1 (at least this is how it works in all other major browsers).

Note that this issue is highly related to:
JDK-8278150
... but since it was closed (I presume mistakenly) I am creating a new ticket.

REGRESSION : Last worked in version 16.0.2

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Open the provided test case inside WebView.

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
When dragging with mouse over the document (with mouse button down), the value of ""event.buttons"" should be 1.
ACTUAL -
When dragging with mouse over the document (with mouse button down), the value of ""event.buttons"" is 0.

---------- BEGIN SOURCE ----------
<!doctype html>
<body style=""height: 200px"">
  <p>Click and drag & observe the console output</p>  

  <script>
    var onMove = function (e) {      
      console.warn(""e.buttons: "" + e.buttons);
    }
    
    var body = document.getElementsByTagName('body')[0];
    document.addEventListener(""pointermove"", onMove, false);
  </script>
</body>
---------- END SOURCE ----------

CUSTOMER SUBMITTED WORKAROUND :
No workaround present.

FREQUENCY : always


",,,,,,,,,,JDK-8285990,JDK-8282824,JDK-8285854,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276859,,,,,,,,,,,,,,,,,,,,,,JDK-8276859,,,,,,,,,,"2021-12-14 03:18;pnarayanaswa;WebViewLeafletSCSSE.java;https://bugs.openjdk.org/secure/attachment/97368/WebViewLeafletSCSSE.java","2021-12-14 03:18;pnarayanaswa;a.html;https://bugs.openjdk.org/secure/attachment/97367/a.html",,,,,,,x86_64,,,,,,,,,,,,,windows_10,,,,,,"0|i2vcbf:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5a8b92bd,,,,,,,,,"2021-12-14 03:18;pnarayanaswa;Mail to submitter:
============
Please can you share short clipping of the issue.;;;","2022-02-07 02:51;pnarayanaswa;Additional information from submitter:
=============================
So there is an example I've run inside JavaFX and Chrome.. 
 
As you'll notice, the console.log(e.buttons); will output 1 dragging with mouse down in Chrome.
 
But in the case of JavaFX it will output 0 (when dragging with the mouse button down).
;;;","2022-02-07 15:14;kcr;This might be related to JDK-8276859.;;;","2022-02-24 11:33;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx/pull/742
Date: 2022-02-24 18:46:21 +0000;;;","2022-03-01 08:03;dukebot;Changeset: 2e8a4a5e
Author:    Hima Bindu Meda <hima.bindu.meda@oracle.com>
Committer: Kevin Rushforth <kcr@openjdk.org>
Date:      2022-03-01 16:00:45 +0000
URL:       https://git.openjdk.java.net/jfx/commit/2e8a4a5e97bb88a5807ae5fe075b98e1d54a4ca0
;;;","2022-04-28 10:21;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx11u/pull/87
Date: 2022-04-28 17:16:40 +0000;;;","2022-04-29 10:25;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx17u/pull/44
Date: 2022-04-29 17:06:02 +0000;;;",,,,,,,,,,,,,,
"StringTokenizer(String, String, boolean) documentation bug",JDK-8278587,5064479,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,naoto,webbuggrp,webbuggrp,2021-12-10 05:23,2022-01-10 09:32,2023-10-01 09:57,2021-12-16 13:42,11,17,18,8,,,,,,,,,,19,core-libs,,0,18ea,dcsaw,hgupdate-sync,noreg-doc,reproducer-yes,webbug,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/StringTokenizer.html#%3Cinit%3E(java.lang.String,java.lang.String,boolean) said: ""Each delimiter is returned as a string of length one."" This is not correct if any of the delimiter is a valid Unicode surrogate pair since the returned string will be of length two because the delimiter is represented by two code units.

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
""Each delimiter is returned as a string of the code unit(s) of the delimiter.""

Or remove ""Each delimiter is returned as a string of length one."" and clarify that ""characters"" in StringTokenizer documentation context refers to Unicode code points like other documentation, e.g., that of String: ""The String class provides methods for dealing with Unicode code points (i.e., characters), in addition to those for dealing with Unicode code units (i.e., char values)."" - https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html.
ACTUAL -
""Each delimiter is returned as a string of length one.""

---------- BEGIN SOURCE ----------
import java.util.StringTokenizer;

public class StringTokenizerPlayground {

  public static void main(String[] args) {
    final var s = ""\uD83D\uDE00""; // Grinning Face
    final var tokenizer = new StringTokenizer(s, s, true);

    final var tokenCount = tokenizer.countTokens();

    if (tokenCount != 1) {
      throw new AssertionError();
    }

    final var token = tokenizer.nextToken();

    if (token.length() != 2) {
      throw new AssertionError();
    }

    if (!token.equals(s)) {
      throw new AssertionError();
    }
  }
}
---------- END SOURCE ----------

FREQUENCY : always


",,,,,,,,,,JDK-8278959,JDK-8279734,,,,,,,,,,,,,,,,,JDK-8278814,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-12-12 01:18;tongwan;StringTokenizerPlayground.java;https://bugs.openjdk.org/secure/attachment/97342/StringTokenizerPlayground.java",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2vcwj:",9223372036854775807,b03,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@38ded199,,,,,,,,,"2021-12-12 00:59;tongwan;The observations on Windows 10:
JDK 8: Failed,  returned a string of length one.
JDK 11: Failed.
JDK 17: Failed.
JDK 18ea+24: Failed.;;;","2021-12-14 09:15;naoto;Or something like:
```
Each delimiter is returned as a string consisting of a single Unicode code point of the delimiter.
```
with a link to `Character.html#unicode`.;;;","2021-12-16 13:42;roboduke;Changeset: 8f5fdd86
Author:    Naoto Sato <naoto@openjdk.org>
Date:      2021-12-16 21:41:38 +0000
URL:       https://git.openjdk.java.net/jdk/commit/8f5fdd864b6f1cf4a2d9d961d8d4118960f0751e
;;;","2021-12-17 05:46;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk18/pull/43
Date: 2021-12-17 13:41:17 +0000
;;;","2021-12-21 14:00;roboduke;Changeset: 9cd70906
Author:    Naoto Sato <naoto@openjdk.org>
Date:      2021-12-17 13:48:26 +0000
URL:       https://git.openjdk.java.net/jdk/commit/9cd709060cf0244ddb71225b55ea4e3e7f41860e
;;;",,,,,,,,,,,,,,,,
RunThese30M.java failed due to errors in JckStressModule.out,JDK-8278553,5064484,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,lmesnik,dcubed,dcubed,2021-12-10 06:50,2022-03-14 07:55,2023-10-01 09:57,2021-12-11 08:32,19,,,,,,,,,,,,,19,hotspot,,0,intermittent,jdk17u-na,openjdk-na,tier5,,,,,,,,,,,,,"The following test failed in the JDK19 CI:

applications/runthese/RunThese30M.java

Here's a snippet from JckStressModule.out:

Error [743] Errors during initialization of test, skipping javasoft.sqe.tests.lang.stmt438.stmt43802m1081.stmt43802m1081
java.lang.UnsupportedClassVersionError: javasoft/sqe/tests/lang/stmt438/stmt43802m1101/stmt43802m1101 (class file version 62.65535) was compiled with preview features that are unsupported. This version of the Java Runtime only recognizes preview features for class file version 63.65535
        at java.base/java.lang.ClassLoader.defineClass1(Native Method)
        at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1013)
        at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)
        at java.base/java.net.URLClassLoader.defineClass(URLClassLoader.java:524)
        at java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:427)
        at java.base/java.net.URLClassLoader$1.run(URLClassLoader.java:421)
        at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)
        at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:420)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)
        at java.base/java.lang.Class.forName0(Native Method)
        at java.base/java.lang.Class.forName(Class.java:488)
        at java.base/java.lang.Class.forName(Class.java:467)
        at applications.kitchensink.process.stress.modules.JckStressModule$TestRunner.runTest(JckStressModule.java:246)
        at applications.kitchensink.process.stress.modules.JckStressModule$TestRunner.run(JckStressModule.java:210)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
        at java.base/java.lang.Thread.run(Thread.java:833)
Error [744] Thread javasoft.sqe.tests.lang.stmt438.stmt43802m1081.stmt43802m1081  died, exception was: java.lang.NullPointerException: Cannot invoke ""java.lang.Throwable.getMessage()"" because the return value of ""java.lang.Throwable.getCause()"" is null
Error [745] Errors during initialization of test, skipping javasoft.sqe.tests.lang.stmt438.stmt43802m1101.stmt43802m1101
Error [746] Thread javasoft.sqe.tests.lang.stmt438.stmt43802m1101.stmt43802m1101  died, exception was: java.lang.NullPointerException: Cannot invoke ""java.lang.Throwable.getMessage()"" because the return value of ""java.lang.Throwable.getCause()"" is null
Exit runThese with code = 75. There are 740 errors of 2457 tests. Failure ratio is higher then 30Check logs for errors. Test failed.

Unfortunately, the tests log file only shows this:

[stress.process.err] Iteration start: Jck at Fri Dec 10 06:56:24 GMT 2021
[stress.process.err] Iteration start: NMT at Fri Dec 10 06:56:24 GMT 2021
[stress.process.err] Iteration start: MBean at Fri Dec 10 06:56:24 GMT 2021
[stress.process.err] Iteration start: Jstat at Fri Dec 10 06:56:24 GMT 2021
[stress.process.err] Iteration start: Perfmon at Fri Dec 10 06:56:24 GMT 2021
[stress.process.err] Iteration start: Compiler at Fri Dec 10 06:56:24 GMT 2021
[stress.process.err] Iteration done: Compiler at Fri Dec 10 06:56:24 GMT 2021
[stress.process.err] Iteration done: MBean at Fri Dec 10 06:56:24 GMT 2021
[stress.process.err] Iteration done: ThreadDumper at Fri Dec 10 06:56:24 GMT 2021
[stress.process.err] STATUS:Passed.OKAY
[stress.process.err] STATUS:Passed.OKAY
Got an exception, so I'll kill the stress process process
[Fri Dec 10 06:56:52 GMT 2021] Unexpected errors during GlueModule initialization: Stress process finished unexpectedly with exit code 75
java.lang.RuntimeException: Stress process finished unexpectedly with exit code 75
	at applications.kitchensink.process.glue.Main.waitUntilStressProcessReady(Main.java:422)
	at applications.kitchensink.process.glue.Main.execute(Main.java:330)
	at applications.kitchensink.process.glue.Main.main(Main.java:217)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.RuntimeException: Stress process finished unexpectedly with exit code 75
JavaTest Message: shutting down test

STATUS:Failed.`main' threw exception: java.lang.RuntimeException: Stress process finished unexpectedly with exit code 75

and I had to go digging into the test's workdir to
find the errors in JckStressModule.out.

I'm starting this bug in hotspot/test so that [~lmesnik] can check
out this failure and see if it's related to the recent JCK upgrade
in RunThese.",,,,,,,,,,JDK-8280925,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,os_x,,,,,,"0|i2vcxn:",9223372036854775807,b02,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@78d03d9a,,,,,,,,,"2021-12-10 11:10;dcubed;This failure mode has happened in three Tier5 job sets
in a row so I'm bumping the priority from P4 -> P3.;;;","2021-12-10 20:35;lmesnik;The problem is that some classes were compiled with --enable-preview mode. However, it might have been changed in the next JDK and is unsupported. So need to skip such classes.;;;","2021-12-11 19:34;dcubed;The fix for this bug is in jdk-19+2-20.;;;",,,,,,,,,,,,,,,,,,
UNIX sun/font coding misses SUSE distro detection on recent distro SUSE 15,JDK-8278549,5064478,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mbaesken,mbaesken,mbaesken,2021-12-10 04:33,2023-01-27 08:29,2023-10-01 09:57,2022-01-14 01:51,17,18,19,,,,,,,,,,,19,client-libs,,0,jdk17u-fix-request,jdk17u-fix-yes,jdk18u-fix-request,jdk18u-fix-SQE-OK-next,jdk18u-fix-yes,,,,,,,,,,,,"The font coding on UNIX, see setOsNameAndVersion in 

src/java.desktop/unix/classes/sun/font/FcFontConfiguration.java
src/java.desktop/unix/classes/sun/font/MFontConfiguration.java

uses the file /etc/SuSE-release to detect SUSE Linux. However on SUSE Linux 15 this file does not exist any more.
Instead /etc/os-release can be used as a replacement on SLES12 and SLES15 :

more /etc/os-release 
NAME=""SLES""
VERSION=""12-SP2""
VERSION_ID=""12.2""
PRETTY_NAME=""SUSE Linux Enterprise Server 12 SP2""

There the name and version information is stored (NAME=... , VERSION_ID=...).",,,,,,,,,,JDK-8283753,JDK-8283866,JDK-8285960,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8301254,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,linux,,,,,,"0|i2vcwb:",9223372036854775807,b06,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4b09ce31,,,,,,,,,"2022-01-04 06:18;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk/pull/6956
Date: 2022-01-04 14:14:46 +0000
;;;","2022-01-14 01:51;roboduke;Changeset: 84976b45
Author:    Matthias Baesken <mbaesken@openjdk.org>
Date:      2022-01-14 09:51:15 +0000
URL:       https://git.openjdk.java.net/jdk/commit/84976b45315feb6c37a9f3db6e1e62812c9b0a37
;;;","2022-03-23 06:18;mbaesken;Fix request (17u)
I would like to have the patch in jdk17u-dev too because better handling of SLES15 would be good there as well.
The patch needs a bit of adjustment,  PR :  https://github.com/openjdk/jdk17u-dev/pull/283;;;","2022-03-24 01:46;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18u/pull/51
Date: 2022-03-24 08:41:20 +0000;;;","2022-03-24 01:47;mbaesken;Fix request (18u)
I would like to have the patch in jdk18u too because better handling of SLES15 would be good there as well.
The patch applies cleanly.;;;","2022-03-24 06:34;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/283
Date: 2022-03-24 13:27:35 +0000;;;",,,,,,,,,,,,,,,
Test langtools/jdk/javadoc/tool/CheckManPageOptions.java fails after the manpage was updated,JDK-8278538,5064463,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jjg,dholmes,dholmes,2021-12-09 20:28,2021-12-16 03:07,2023-10-01 09:57,2021-12-09 21:03,18,,,,,,,,,,,,,18,tools,,0,noreg-self,tier1,ursqe-triaged,,,,,,,,,,,,,,"The javadoc manpage (nroff version) was just updated with changes made in earlier issues like JDK-8275146, and as a result of these updates the test:

langtools/jdk/javadoc/tool/CheckManPageOptions.java

is now failing.

----------System.err:(354/9931)*----------
File: /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+28-1959/src.full/open/src/jdk.javadoc/share/man/javadoc.1

found:
.IP \\[bu] 2
\\f[CB]\\-\\-add\\-modules\\f[R]

found:
.IP \\[bu] 2
\\f[CB]\\-bootclasspath\\f[R]

found:
.IP \\[bu] 2
\\f[CB]\\-\\-class\\-path\\f[R], \\f[CB]\\-classpath\\f[R], or \\f[CB]\\-cp\\f[R]
...

I suspect formatting changes have disrupted what the test is looking for.",,,,,,,,,,JDK-8278562,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275146,JDK-8273179,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,18,,,,,,,,"0|i2vcsz:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2021-12-09 20:57;jjg;
> I suspect formatting changes have disrupted what the test is looking for.

No, the formatting is OK;   there was a built-in list of command-line options that were known to be missing on the man page, which are now not missing.;;;","2021-12-09 21:03;roboduke;Changeset: 3df8dc49
Author:    Jonathan Gibbons <jjg@openjdk.org>
Date:      2021-12-10 05:02:28 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/3df8dc494d2d0e6d1003094c9e129be2cca10a3c
;;;",,,,,,,,,,,,,,,,,,,
ZGC: jdk/jfr/event/gc/detailed/TestZPageAllocationEvent.java times out in loom-repo,JDK-8278537,5064462,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mgronlun,lmesnik,lmesnik,2021-12-09 20:19,2022-03-15 10:39,2023-10-01 09:57,2022-03-10 09:39,repo-loom,,,,,,,,,,,,,repo-loom,hotspot,,0,,,,,,,,,,,,,,,,,"Test jdk/jfr/event/gc/detailed/TestZPageAllocationEvent.java times out in loom-
repo

Really, I don't see any relation to loom changes.

See stack trace:

----------------------------------------
[2021-12-09 19:39:52] [/bin/gdb, --pid=27762, -batch, -ex, thread apply all backtrace] timeout=20000
----------------------------------------
Missing separate debuginfo for /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/bin/java
Missing separate debuginfo for /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/bin/../lib/libjli.so
[New LWP 27918]
[New LWP 27857]
[New LWP 27856]
[New LWP 27839]
[New LWP 27822]
[New LWP 27816]
[New LWP 27815]
[New LWP 27806]
[New LWP 27791]
[New LWP 27790]
[New LWP 27789]
[New LWP 27788]
[New LWP 27787]
[New LWP 27786]
[New LWP 27784]
[New LWP 27783]
[New LWP 27782]
[New LWP 27779]
[New LWP 27777]
[New LWP 27775]
[New LWP 27773]
[New LWP 27771]
[New LWP 27770]
[New LWP 27769]
[New LWP 27766]
[Thread debugging using libthread_db enabled]
Using host libthread_db library ""/lib64/libthread_db.so.1"".
Missing separate debuginfo for /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
Missing separate debuginfo for /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/libjimage.so
Missing separate debuginfo for /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/libjava.so
Missing separate debuginfo for /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/libjsvml.so
Missing separate debuginfo for /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/libnio.so
Missing separate debuginfo for /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/libnet.so
Missing separate debuginfo for /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/libzip.so
Missing separate debuginfo for /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/libverify.so
0x00007f25a4b47017 in pthread_join () from /lib64/libpthread.so.0

Thread 26 (Thread 0x7f25a516c700 (LWP 27766)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3eba353 in os::PlatformEvent::park() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a3e8d095 in ObjectMonitor::wait(long, bool, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a400565e in ObjectSynchronizer::wait(Handle, long, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a3b80dbe in JVM_MonitorWait () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25855f11b8 in ?? ()
#6  0x00007f25a516b7a0 in ?? ()
#7  0x00007f25a3b8ad2c in JVM_CurrentThread () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#8  0x00007f25855ec8be in ?? ()
#9  0x0000000000000000 in ?? ()

Thread 25 (Thread 0x7f25a2523700 (LWP 27769)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebacab in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a4120d9a in ZForwarding::claim_page() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a414a2ea in ZRelocateTask::work() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a41573bc in ZTask::Task::work(unsigned int) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a410d37d in WorkerThread::run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#8  0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#9  0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 24 (Thread 0x7f25a2421700 (LWP 27770)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebacab in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a415ea7c in ZUnmapper::run_service() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a382925b in ConcurrentGCThread::run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#7  0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 23 (Thread 0x7f25a231f700 (LWP 27771)):
#0  0x00007f25a4b49de2 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebac81 in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a415ce7b in ZUncommitter::run_service() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a382925b in ConcurrentGCThread::run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#7  0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 22 (Thread 0x7f25a021d700 (LWP 27773)):
#0  0x00007f25a4b4bb3b in do_futex_wait.constprop.1 () from /lib64/libpthread.so.0
#1  0x00007f25a4b4bbcf in __new_sem_wait_slow.constprop.0 () from /lib64/libpthread.so.0
#2  0x00007f25a4b4bc6b in sem_wait@@GLIBC_2.2.5 () from /lib64/libpthread.so.0
#3  0x00007f25a3f65b92 in PosixSemaphore::wait() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a410d59b in WorkerThreads::run_task(WorkerTask*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a4160f56 in ZWorkers::run(ZTask*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a4148dd9 in ZRelocate::relocate(ZRelocationSet*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a4121dd7 in ZHeap::relocate() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#8  0x00007f25a411f573 in ZDriver::concurrent_relocate() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#9  0x00007f25a411ff07 in ZDriver::gc(ZDriverRequest const&) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#10 0x00007f25a41204c0 in ZDriver::run_service() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#11 0x00007f25a382925b in ConcurrentGCThread::run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#12 0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#13 0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#14 0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#15 0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 21 (Thread 0x7f25a011b700 (LWP 27775)):
#0  0x00007f25a4b49de2 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebac81 in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a3e6c8a9 in Monitor::wait_without_safepoint_check(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a4136005 in ZMetronome::wait_for_tick() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a411d018 in ZDirector::run_service() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a382925b in ConcurrentGCThread::run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#8  0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#9  0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 20 (Thread 0x7f25855d1700 (LWP 27777)):
#0  0x00007f25a4b49de2 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebac81 in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a3e6c8a9 in Monitor::wait_without_safepoint_check(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a4136005 in ZMetronome::wait_for_tick() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a4150849 in ZStat::run_service() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a382925b in ConcurrentGCThread::run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#8  0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#9  0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 19 (Thread 0x7f25854cf700 (LWP 27779)):
#0  0x00007f25a4b4bb3b in do_futex_wait.constprop.1 () from /lib64/libpthread.so.0
#1  0x00007f25a4b4bbcf in __new_sem_wait_slow.constprop.0 () from /lib64/libpthread.so.0
#2  0x00007f25a4b4bc6b in sem_wait@@GLIBC_2.2.5 () from /lib64/libpthread.so.0
#3  0x00007f25a3f65b92 in PosixSemaphore::wait() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a410d35b in WorkerThread::run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#8  0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 18 (Thread 0x7f2585221700 (LWP 27782)):
#0  0x00007f25a4b49de2 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebac81 in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a3e6c8a9 in Monitor::wait_without_safepoint_check(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a40e0a95 in VMThread::wait_for_operation() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a40e13f8 in VMThread::run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#8  0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 17 (Thread 0x7f258511f700 (LWP 27783)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebacab in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a3e6c932 in Monitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a3b8bcea in JVM_WaitForReferencePendingList () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25855f11b8 in ?? ()
#5  0x00007f258511e960 in ?? ()
#6  0x0000000000000000 in ?? ()

Thread 16 (Thread 0x7f258501e700 (LWP 27784)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3eba353 in os::PlatformEvent::park() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a3e8d095 in ObjectMonitor::wait(long, bool, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a400565e in ObjectSynchronizer::wait(Handle, long, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a3b80dbe in JVM_MonitorWait () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25855f11b8 in ?? ()
#6  0x00007f258501d8b0 in ?? ()
#7  0x000000080043b0b0 in ?? ()
#8  0x0000100000012818 in ?? ()
#9  0x00007f258501d798 in ?? ()
#10 0x0000000000000000 in ?? ()

Thread 15 (Thread 0x7f2584f1d700 (LWP 27786)):
#0  0x00007f25a4b4bb3b in do_futex_wait.constprop.1 () from /lib64/libpthread.so.0
#1  0x00007f25a4b4bbcf in __new_sem_wait_slow.constprop.0 () from /lib64/libpthread.so.0
#2  0x00007f25a4b4bc6b in sem_wait@@GLIBC_2.2.5 () from /lib64/libpthread.so.0
#3  0x00007f25a3f65b92 in PosixSemaphore::wait() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a413d26e in ZPageAllocator::alloc_page_stall(ZPageAllocation*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a413f0d0 in ZPageAllocator::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a41218da in ZHeap::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a413a0e4 in ZObjectAllocator::alloc_object_in_shared_page(ZPage**, unsigned char, unsigned long, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#8  0x00007f25a411c2c2 in ZCollectedHeap::allocate_new_tlab(unsigned long, unsigned long, unsigned long*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#9  0x00007f25a3e0af9e in MemAllocator::allocate_inside_tlab_slow(MemAllocator::Allocation&) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#10 0x00007f25a3e0b2f7 in MemAllocator::allocate() const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#11 0x00007f25a3a82a11 in InstanceKlass::allocate_instance(JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#12 0x00007f25a3ab31d8 in java_lang_String::create_from_str(char const*, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#13 0x00007f25a4057ae8 in JavaThread::create_system_thread_object(char const*, bool, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#14 0x00007f25a3663674 in AttachListener::init() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#15 0x00007f25a3664b3c in AttachListener::is_init_trigger() [clone .part.0] () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#16 0x00007f25a3ea36e2 in signal_thread_entry(JavaThread*, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#17 0x00007f25a4053512 in JavaThread::thread_main_inner() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#18 0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#19 0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#20 0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#21 0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 14 (Thread 0x7f2584e1c700 (LWP 27787)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebacab in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a3e6c8a9 in Monitor::wait_without_safepoint_check(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a3f6665a in ServiceThread::service_thread_entry(JavaThread*, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a4053512 in JavaThread::thread_main_inner() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#8  0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 13 (Thread 0x7f2584d1b700 (LWP 27788)):
#0  0x00007f25a4b49de2 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebac81 in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a3e6c8a9 in Monitor::wait_without_safepoint_check(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a3e60c3c in MonitorDeflationThread::monitor_deflation_thread_entry(JavaThread*, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a4053512 in JavaThread::thread_main_inner() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#8  0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 12 (Thread 0x7f2584c1a700 (LWP 27789)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebacab in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a4120c32 in ZForwarding::wait_page_released() const [clone .part.0] () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a4120d23 in ZForwarding::retain_page() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a41489e5 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a41119ab in ZLoadBarrierOopClosure::do_oop(oopDesc**) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a3b7c6b7 in JNIHandleBlock::oops_do(OopClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a405074a in JavaThread::oops_do_no_frames(OopClosure*, CodeBlobClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#8  0x00007f25a4150105 in ZStackWatermark::start_processing_impl(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#9  0x00007f25a3f9884b in StackWatermark::on_safepoint() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#10 0x00007f25a3f61f50 in SafepointMechanism::process(JavaThread*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#11 0x00007f25a3e6c9fa in Monitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#12 0x00007f25a380eca4 in CompileQueue::get() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#13 0x00007f25a3811611 in CompileBroker::compiler_thread_loop() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#14 0x00007f25a4053512 in JavaThread::thread_main_inner() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#15 0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#16 0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#17 0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#18 0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 11 (Thread 0x7f2584b19700 (LWP 27790)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebacab in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a4120c32 in ZForwarding::wait_page_released() const [clone .part.0] () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a4148a73 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a34d266b in AccessInternal::PostRuntimeDispatch<ZBarrierSet::AccessBarrier<548932ul, ZBarrierSet>, (AccessInternal::BarrierType)2, 548932ul>::oop_access_barrier(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a3aedf86 in JfrJavaThread::contextual_thread_id(JavaThread const*, bool*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a4140301 in JfrEvent<EventZPageAllocation>::write_sized_event(JfrBuffer*, Thread*, JfrThreadLocal*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a413f2c7 in ZPageAllocator::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#8  0x00007f25a41218da in ZHeap::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#9  0x00007f25a413a0e4 in ZObjectAllocator::alloc_object_in_shared_page(ZPage**, unsigned char, unsigned long, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#10 0x00007f25a413a8d1 in ZObjectAllocator::alloc_object_for_relocation(ZPageTable const*, unsigned long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#11 0x00007f25a4148a57 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#12 0x00007f25a34d266b in AccessInternal::PostRuntimeDispatch<ZBarrierSet::AccessBarrier<548932ul, ZBarrierSet>, (AccessInternal::BarrierType)2, 548932ul>::oop_access_barrier(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#13 0x00007f25a3aedf86 in JfrJavaThread::contextual_thread_id(JavaThread const*, bool*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#14 0x00007f25a4140301 in JfrEvent<EventZPageAllocation>::write_sized_event(JfrBuffer*, Thread*, JfrThreadLocal*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#15 0x00007f25a413f2c7 in ZPageAllocator::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#16 0x00007f25a41218da in ZHeap::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#17 0x00007f25a413a0e4 in ZObjectAllocator::alloc_object_in_shared_page(ZPage**, unsigned char, unsigned long, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#18 0x00007f25a413a8d1 in ZObjectAllocator::alloc_object_for_relocation(ZPageTable const*, unsigned long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#19 0x00007f25a4148a57 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#20 0x00007f25a41119ab in ZLoadBarrierOopClosure::do_oop(oopDesc**) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#21 0x00007f25a3b7c6b7 in JNIHandleBlock::oops_do(OopClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#22 0x00007f25a405074a in JavaThread::oops_do_no_frames(OopClosure*, CodeBlobClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#23 0x00007f25a4150105 in ZStackWatermark::start_processing_impl(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#24 0x00007f25a3f9884b in StackWatermark::on_safepoint() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#25 0x00007f25a3f61f50 in SafepointMechanism::process(JavaThread*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#26 0x00007f25a3778c9d in ciEnv::cache_jvmti_state() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#27 0x00007f25a3810210 in CompileBroker::invoke_compiler_on_method(CompileTask*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#28 0x00007f25a38117e8 in CompileBroker::compiler_thread_loop() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#29 0x00007f25a4053512 in JavaThread::thread_main_inner() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#30 0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#31 0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#32 0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#33 0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 10 (Thread 0x7f2584a18700 (LWP 27791)):
#0  0x00007f25a4b49de2 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebac81 in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a3e6c8a9 in Monitor::wait_without_safepoint_check(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a3ffc6ef in NMethodSweeper::sweeper_loop() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a4053512 in JavaThread::thread_main_inner() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#8  0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 9 (Thread 0x7f2584917700 (LWP 27806)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebacab in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a4120c32 in ZForwarding::wait_page_released() const [clone .part.0] () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a4148a73 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a41119ab in ZLoadBarrierOopClosure::do_oop(oopDesc**) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a3a31488 in HandleArea::oops_do(OopClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a4050736 in JavaThread::oops_do_no_frames(OopClosure*, CodeBlobClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a4150105 in ZStackWatermark::start_processing_impl(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#8  0x00007f25a3f9884b in StackWatermark::on_safepoint() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#9  0x00007f25a3f61f50 in SafepointMechanism::process(JavaThread*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#10 0x00007f25a3eba8ed in Parker::park(bool, long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#11 0x00007f25a408c2f3 in Unsafe_Park () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#12 0x00007f25855f11b8 in ?? ()
#13 0x00007f2584916648 in ?? ()
#14 0x0000080000711520 in ?? ()
#15 0x00007f2584916638 in ?? ()
#16 0x00007f25855ec8be in ?? ()
#17 0x000000080043aea0 in ?? ()
#18 0x00007f2584916618 in ?? ()
#19 0x0000000000000000 in ?? ()

Thread 8 (Thread 0x7f2584816700 (LWP 27815)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebacab in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a3e6c8a9 in Monitor::wait_without_safepoint_check(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a3e82a6a in NotificationThread::notification_thread_entry(JavaThread*, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a4053512 in JavaThread::thread_main_inner() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#8  0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 7 (Thread 0x7f2584715700 (LWP 27816)):
#0  0x00007f25a4b49de2 in pthread_cond_timedwait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebac81 in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a3e6c8a9 in Monitor::wait_without_safepoint_check(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a3e82525 in WatcherThread::sleep() const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a3e825ff in WatcherThread::run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#8  0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 6 (Thread 0x7f2584603700 (LWP 27822)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebacab in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a4120c32 in ZForwarding::wait_page_released() const [clone .part.0] () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a4148a73 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a34d266b in AccessInternal::PostRuntimeDispatch<ZBarrierSet::AccessBarrier<548932ul, ZBarrierSet>, (AccessInternal::BarrierType)2, 548932ul>::oop_access_barrier(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a3aedf86 in JfrJavaThread::contextual_thread_id(JavaThread const*, bool*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a4140301 in JfrEvent<EventZPageAllocation>::write_sized_event(JfrBuffer*, Thread*, JfrThreadLocal*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a413f2c7 in ZPageAllocator::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#8  0x00007f25a41218da in ZHeap::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#9  0x00007f25a413a0e4 in ZObjectAllocator::alloc_object_in_shared_page(ZPage**, unsigned char, unsigned long, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#10 0x00007f25a413a8d1 in ZObjectAllocator::alloc_object_for_relocation(ZPageTable const*, unsigned long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#11 0x00007f25a4148a57 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#12 0x00007f25a34d266b in AccessInternal::PostRuntimeDispatch<ZBarrierSet::AccessBarrier<548932ul, ZBarrierSet>, (AccessInternal::BarrierType)2, 548932ul>::oop_access_barrier(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#13 0x00007f25a3aedf86 in JfrJavaThread::contextual_thread_id(JavaThread const*, bool*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#14 0x00007f25a4140301 in JfrEvent<EventZPageAllocation>::write_sized_event(JfrBuffer*, Thread*, JfrThreadLocal*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#15 0x00007f25a413f2c7 in ZPageAllocator::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#16 0x00007f25a41218da in ZHeap::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#17 0x00007f25a413a0e4 in ZObjectAllocator::alloc_object_in_shared_page(ZPage**, unsigned char, unsigned long, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#18 0x00007f25a413a8d1 in ZObjectAllocator::alloc_object_for_relocation(ZPageTable const*, unsigned long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#19 0x00007f25a4148a57 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#20 0x00007f25a34d266b in AccessInternal::PostRuntimeDispatch<ZBarrierSet::AccessBarrier<548932ul, ZBarrierSet>, (AccessInternal::BarrierType)2, 548932ul>::oop_access_barrier(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#21 0x00007f25a3aedf86 in JfrJavaThread::contextual_thread_id(JavaThread const*, bool*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#22 0x00007f25a4140301 in JfrEvent<EventZPageAllocation>::write_sized_event(JfrBuffer*, Thread*, JfrThreadLocal*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#23 0x00007f25a413f2c7 in ZPageAllocator::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#24 0x00007f25a41218da in ZHeap::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#25 0x00007f25a413a0e4 in ZObjectAllocator::alloc_object_in_shared_page(ZPage**, unsigned char, unsigned long, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#26 0x00007f25a413a8d1 in ZObjectAllocator::alloc_object_for_relocation(ZPageTable const*, unsigned long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#27 0x00007f25a4148a57 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#28 0x00007f25a34d266b in AccessInternal::PostRuntimeDispatch<ZBarrierSet::AccessBarrier<548932ul, ZBarrierSet>, (AccessInternal::BarrierType)2, 548932ul>::oop_access_barrier(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#29 0x00007f25a3aedf86 in JfrJavaThread::contextual_thread_id(JavaThread const*, bool*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#30 0x00007f25a4140301 in JfrEvent<EventZPageAllocation>::write_sized_event(JfrBuffer*, Thread*, JfrThreadLocal*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#31 0x00007f25a413f2c7 in ZPageAllocator::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#32 0x00007f25a41218da in ZHeap::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#33 0x00007f25a413a0e4 in ZObjectAllocator::alloc_object_in_shared_page(ZPage**, unsigned char, unsigned long, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#34 0x00007f25a413a8d1 in ZObjectAllocator::alloc_object_for_relocation(ZPageTable const*, unsigned long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#35 0x00007f25a4148a57 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#36 0x00007f25a34d266b in AccessInternal::PostRuntimeDispatch<ZBarrierSet::AccessBarrier<548932ul, ZBarrierSet>, (AccessInternal::BarrierType)2, 548932ul>::oop_access_barrier(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#37 0x00007f25a3aedf86 in JfrJavaThread::contextual_thread_id(JavaThread const*, bool*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#38 0x00007f25a4140301 in JfrEvent<EventZPageAllocation>::write_sized_event(JfrBuffer*, Thread*, JfrThreadLocal*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#39 0x00007f25a413f2c7 in ZPageAllocator::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#40 0x00007f25a41218da in ZHeap::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#41 0x00007f25a413a0e4 in ZObjectAllocator::alloc_object_in_shared_page(ZPage**, unsigned char, unsigned long, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#42 0x00007f25a413a8d1 in ZObjectAllocator::alloc_object_for_relocation(ZPageTable const*, unsigned long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#43 0x00007f25a4148a57 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#44 0x00007f25a34d266b in AccessInternal::PostRuntimeDispatch<ZBarrierSet::AccessBarrier<548932ul, ZBarrierSet>, (AccessInternal::BarrierType)2, 548932ul>::oop_access_barrier(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#45 0x00007f25a3aedf86 in JfrJavaThread::contextual_thread_id(JavaThread const*, bool*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#46 0x00007f25a4140301 in JfrEvent<EventZPageAllocation>::write_sized_event(JfrBuffer*, Thread*, JfrThreadLocal*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#47 0x00007f25a413f2c7 in ZPageAllocator::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#48 0x00007f25a41218da in ZHeap::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#49 0x00007f25a413a0e4 in ZObjectAllocator::alloc_object_in_shared_page(ZPage**, unsigned char, unsigned long, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#50 0x00007f25a413a8d1 in ZObjectAllocator::alloc_object_for_relocation(ZPageTable const*, unsigned long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#51 0x00007f25a4148a57 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#52 0x00007f25a34d266b in AccessInternal::PostRuntimeDispatch<ZBarrierSet::AccessBarrier<548932ul, ZBarrierSet>, (AccessInternal::BarrierType)2, 548932ul>::oop_access_barrier(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#53 0x00007f25a3aedf86 in JfrJavaThread::contextual_thread_id(JavaThread const*, bool*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#54 0x00007f25a4140301 in JfrEvent<EventZPageAllocation>::write_sized_event(JfrBuffer*, Thread*, JfrThreadLocal*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#55 0x00007f25a413f2c7 in ZPageAllocator::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#56 0x00007f25a41218da in ZHeap::alloc_page(unsigned char, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#57 0x00007f25a413a0e4 in ZObjectAllocator::alloc_object_in_shared_page(ZPage**, unsigned char, unsigned long, unsigned long, ZAllocationFlags) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#58 0x00007f25a413a8d1 in ZObjectAllocator::alloc_object_for_relocation(ZPageTable const*, unsigned long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#59 0x00007f25a4148a57 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#60 0x00007f25a41119ab in ZLoadBarrierOopClosure::do_oop(oopDesc**) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#61 0x00007f25a3a31488 in HandleArea::oops_do(OopClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#62 0x00007f25a4050736 in JavaThread::oops_do_no_frames(OopClosure*, CodeBlobClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#63 0x00007f25a4150105 in ZStackWatermark::start_processing_impl(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#64 0x00007f25a3f9884b in StackWatermark::on_safepoint() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#65 0x00007f25a3f61f50 in SafepointMechanism::process(JavaThread*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#66 0x00007f25a41397d3 in ZObjArrayAllocator::finish(HeapWordImpl**) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#67 0x00007f25a3e0b289 in MemAllocator::allocate() const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#68 0x00007f25a411cc51 in ZCollectedHeap::array_allocate(Klass*, unsigned long, int, bool, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#69 0x00007f25a3aa5870 in InterpreterRuntime::newarray(JavaThread*, BasicType, int) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#70 0x00007f25855ff1eb in ?? ()
#71 0x00007f25855ec8be in ?? ()
#72 0x00007f25855ff1b1 in ?? ()
#73 0x00007f2584602660 in ?? ()
#74 0x00007f2364404ad5 in ?? ()
#75 0x00007f25846026d8 in ?? ()
#76 0x00007f2364404c78 in ?? ()
#77 0x0000000000000000 in ?? ()

Thread 5 (Thread 0x7f2584401700 (LWP 27839)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebacab in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a3e6c8a9 in Monitor::wait_without_safepoint_check(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a3b119d6 in recorderthread_entry(JavaThread*, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a4053512 in JavaThread::thread_main_inner() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#8  0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 4 (Thread 0x7f2584300700 (LWP 27856)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebacab in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a4120c32 in ZForwarding::wait_page_released() const [clone .part.0] () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a4120d23 in ZForwarding::retain_page() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a41489e5 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a41119ab in ZLoadBarrierOopClosure::do_oop(oopDesc**) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a3b7c6b7 in JNIHandleBlock::oops_do(OopClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a405074a in JavaThread::oops_do_no_frames(OopClosure*, CodeBlobClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#8  0x00007f25a4150105 in ZStackWatermark::start_processing_impl(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#9  0x00007f25a3f9884b in StackWatermark::on_safepoint() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#10 0x00007f25a3f61f50 in SafepointMechanism::process(JavaThread*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#11 0x00007f25a3e6c9fa in Monitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#12 0x00007f25a380eca4 in CompileQueue::get() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#13 0x00007f25a3811611 in CompileBroker::compiler_thread_loop() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#14 0x00007f25a4053512 in JavaThread::thread_main_inner() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#15 0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#16 0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#17 0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#18 0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 3 (Thread 0x7f25841ff700 (LWP 27857)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebacab in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a4120c32 in ZForwarding::wait_page_released() const [clone .part.0] () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a4120d23 in ZForwarding::retain_page() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a41489e5 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a41119ab in ZLoadBarrierOopClosure::do_oop(oopDesc**) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a3b7c6b7 in JNIHandleBlock::oops_do(OopClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a405074a in JavaThread::oops_do_no_frames(OopClosure*, CodeBlobClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#8  0x00007f25a4150105 in ZStackWatermark::start_processing_impl(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#9  0x00007f25a3f9884b in StackWatermark::on_safepoint() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#10 0x00007f25a3f61f50 in SafepointMechanism::process(JavaThread*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#11 0x00007f25a3e6c9fa in Monitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#12 0x00007f25a380eca4 in CompileQueue::get() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#13 0x00007f25a3811611 in CompileBroker::compiler_thread_loop() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#14 0x00007f25a4053512 in JavaThread::thread_main_inner() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#15 0x00007f25a4057db0 in Thread::call_run() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#16 0x00007f25a3eafd01 in thread_native_entry(Thread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#17 0x00007f25a4b45ea5 in start_thread () from /lib64/libpthread.so.0
#18 0x00007f25a466a9fd in clone () from /lib64/libc.so.6

Thread 2 (Thread 0x7f2323fff700 (LWP 27918)):
#0  0x00007f25a4b49a35 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1  0x00007f25a3ebacab in os::PlatformMonitor::wait(long) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#2  0x00007f25a4120c32 in ZForwarding::wait_page_released() const [clone .part.0] () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#3  0x00007f25a4120d23 in ZForwarding::retain_page() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#4  0x00007f25a41489e5 in ZRelocate::relocate_object(ZForwarding*, unsigned long) const () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#5  0x00007f25a41119ab in ZLoadBarrierOopClosure::do_oop(oopDesc**) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#6  0x00007f25a3a31488 in HandleArea::oops_do(OopClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#7  0x00007f25a4050736 in JavaThread::oops_do_no_frames(OopClosure*, CodeBlobClosure*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#8  0x00007f25a4150105 in ZStackWatermark::start_processing_impl(void*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#9  0x00007f25a3f9884b in StackWatermark::on_safepoint() () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#10 0x00007f25a3f61f50 in SafepointMechanism::process(JavaThread*, bool) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#11 0x00007f25a3e8cd7d in ObjectMonitor::wait(long, bool, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#12 0x00007f25a400565e in ObjectSynchronizer::wait(Handle, long, JavaThread*) () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#13 0x00007f25a3b80dbe in JVM_MonitorWait () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#14 0x00007f25855f11b8 in ?? ()
#15 0x00007f2323ffe780 in ?? ()
#16 0x00007f25a3b8ad2c in JVM_CurrentThread () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/lib/server/libjvm.so
#17 0x00007f25855ec8be in ?? ()
#18 0x0000000000000000 in ?? ()

Thread 1 (Thread 0x7f25a516d740 (LWP 27762)):
#0  0x00007f25a4b47017 in pthread_join () from /lib64/libpthread.so.0
#1  0x00007f25a517990a in CallJavaMainInNewThread () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/bin/../lib/libjli.so
#2  0x00007f25a5176a2d in ContinueInNewThread () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/bin/../lib/libjli.so
#3  0x00007f25a5178094 in JLI_Launch () from /opt/mach5/mesos/work_dir/jib-master/install/jdk-18-loom+8-311/linux-x64-open.jdk/jdk-18/bin/../lib/libjli.so
#4  0x00005601de9f7b03 in main ()
[Inferior 1 (process 27762) detached]
----------------------------------------
[2021-12-09 19:39:53] exit code: 0 time: 734 ms
----------------------------------------",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8283069,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vcsr:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2021-12-10 01:06;stefank;I would take a close look at JfrJavaThread::contextual_thread_id. See how Thread 6:
- allocates a page
- sends a JFR event
- which uses that contextual_thread_id
- which triggers a load barrier
- which allocates a page
- ... and repeat

That seems dangerous. Does JfrJavaThread::contextual_thread_id really need to load an oop?;;;","2022-03-10 09:39;mgronlun;Fixed in https://github.com/openjdk/loom/commit/442ea0f055f66a796431460d11c06e94a6a379ac;;;",,,,,,,,,,,,,,,,,,,
"[macos] Screen reader reads SwingSet2 JTable row selection as null, dimmed row for last column",JDK-8278526,5064445,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,asemenov,landrews,landrews,2021-12-09 16:02,2022-02-01 06:01,2023-10-01 09:57,2021-12-17 11:32,18,,,,,,,,,,,,,18,client-libs,,0,a11y,accessibility,macos,vpat,,,,,,,,,,,,,"While testing accessibility for few TableRowAccessibility fixes that were targeted for jdk18.  

Test Scenario : Test whether column values are read correctly when a row is selected.  

Step to reproduce
------------------------
1) Load SwingSet2 using jdk 18 b27 on macOS 10.15.7 Catalina
2) Enabled VoiceOver
3) Selected Table demo
4) Click on any row and observe whether all the column values are read correctly.  If you hear that last column is read as null followed by dimmed, row then the bug is reproduced.

I was expecting to read the last column as image after https://bugs.openjdk.java.net/browse/JDK-8277497 bug fix which got fixed in jdk 18 b27

Note: I dn't know from where the value dimmed is coming from.


",,,,,,,,,,JDK-8281045,JDK-8279102,JDK-8280834,JDK-8279738,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-12-09 16:02;landrews;Screen Shot 2021-12-09 at 5.36.40 PM.png;https://bugs.openjdk.org/secure/attachment/97316/Screen+Shot+2021-12-09+at+5.36.40+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vcoz:",9223372036854775807,b29,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4785f47c,,,,,,,,,"2021-12-13 08:33;kizune;Images in the SwingSet2 table demo lack any kind of accessibility hints so it was decided to be more consistent not to announce them as just images. The lack of the accessibility metadata will be addressed by the JDK-8278604;;;","2021-12-13 09:10;vdyakov;[~kizune] [~asemenov] from the user point of view is it a regression introduced in 18 or this was broken even before last changes in 18?;;;","2021-12-14 08:47;asemenov;No. This is not a regression, as before JDK18 tables were not voiced and there was no cell navigation.;;;","2021-12-14 09:03;vdyakov;This is critical enough for a11y support to have it fixed in JDK 18.
RDP2 deadline for P3s is January 20th.;;;","2021-12-17 11:32;roboduke;Changeset: 8fbe1724
Author:    Artem Semenov <asemenov@openjdk.org>
Date:      2021-12-17 19:31:51 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/8fbe1724e0f783132a65c45503addad9d98a329e
;;;","2022-01-27 01:17;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/125
Date: 2022-01-27 09:13:00 +0000;;;",,,,,,,,,,,,,,,
"serviceability/jvmti/FieldAccessWatch/FieldAccessWatch.java failed ""assert(handle != __null) failed: JNI handle should not be null""",JDK-8278519,5064434,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,amenkov,dcubed,dcubed,2021-12-09 13:46,2022-06-24 00:37,2023-10-01 09:57,2021-12-18 00:09,11,17,18,,,,,,,,,,,19,hotspot,,0,intermittent,investigate-UT,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,redhat-interest,testbug,tier7,,,,,,,"The following test failed in the JDK18 CI:

serviceability/jvmti/FieldAccessWatch/FieldAccessWatch.java

Here's a snippet from the log file:

""class: Ljava/util/ArrayList; method: grow(null)"" modified field: ""elementData"", location: 56
""class: Ljava/util/ArrayList; method: add(TE;[Ljava/lang/Object;I)V"" modified field: ""size"", location: 19
""class: Ljava/util/ArrayList; method: add(TE;)Z"" accessed field: ""modCount"", location: 2
# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/jniHandles.inline.hpp:92
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S136913/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/ec5dec9e-56d8-41a2-b66c-12296f16921f/runs/4d5bef26-6d20-44fa-bc83-40c1cc2f48ab/workspace/open/src/hotspot/share/runtime/jniHandles.inline.hpp:92), pid=30194, tid=30247
#  assert(handle != __null) failed: JNI handle should not be null
#
# JRE version: Java(TM) SE Runtime Environment (18.0+27) (fastdebug build 18-ea+27-1917)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+27-1917, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0xa9f284]  JNIHandles::resolve_non_null(_jobject*)+0x1b4
#
# Core dump will be written. Default location: Core dumps may be processed with ""/opt/core.sh %p"" (or dumping to /opt/mach5/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S136877/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/12155c17-b10d-4669-97e9-e1c9792bd9c4/runs/aca0c8ff-5ac2-4816-9a9d-204618122fbf/testoutput/test-support/jtreg_open_test_hotspot_jtreg_hotspot_serviceability/scratch/3/core.30194)
#
# An error report file with more information is saved as:
# /opt/mach5/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S136877/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/12155c17-b10d-4669-97e9-e1c9792bd9c4/runs/aca0c8ff-5ac2-4816-9a9d-204618122fbf/testoutput/test-support/jtreg_open_test_hotspot_jtreg_hotspot_serviceability/scratch/3/hs_err_pid30194.log
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#
----------System.err:(0/0)----------
----------rerun:(37/7225)*----------


Here's the crashing thread's stack:

---------------  T H R E A D  ---------------

Current thread (0x00007f9b8435eca0):  JavaThread ""UsageTracker"" daemon [_thread_in_vm, id=30247, stack(0x00007f9b60592000,0x00007f9b60693000)]

Stack: [0x00007f9b60592000,0x00007f9b60693000],  sp=0x00007f9b6068fd80,  free space=1015k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xa9f284]  JNIHandles::resolve_non_null(_jobject*)+0x1b4
V  [libjvm.so+0x1027593]  jni_SetBooleanField+0xe3
C  [libFieldAccessWatch.so+0xb9b]  handleNotification+0x1bb
V  [libjvm.so+0x126a719]  JvmtiExport::post_field_access(JavaThread*, Method*, unsigned char*, Klass*, Handle, _jfieldID*)+0x2a9
V  [libjvm.so+0xef028e]  InterpreterRuntime::post_field_access(JavaThread*, oopDesc*, ConstantPoolCacheEntry*)+0x35e
j  java.util.ArrayList.add(Ljava/lang/Object;)Z+2 java.base@18-ea
j  com.sun.management.internal.PlatformMBeanProviderImpl.init()Ljava/util/List;+30 jdk.management@18-ea
j  com.sun.management.internal.PlatformMBeanProviderImpl.<init>()V+6 jdk.management@18-ea
j  java.lang.invoke.DirectMethodHandle$Holder.newInvokeSpecial(Ljava/lang/Object;)Ljava/lang/Object;+15 java.base@18-ea
j  java.lang.invoke.Invokers$Holder.invokeExact_MT(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;+18 java.base@18-ea
j  jdk.internal.reflect.DirectConstructorHandleAccessor.invokeImpl([Ljava/lang/Object;)Ljava/lang/Object;+44 java.base@18-ea
j  jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance([Ljava/lang/Object;)Ljava/lang/Object;+68 java.base@18-ea
j  java.lang.reflect.Constructor.newInstanceWithCaller([Ljava/lang/Object;ZLjava/lang/Class;)Ljava/lang/Object;+41 java.base@18-ea
j  java.lang.reflect.Constructor.newInstance([Ljava/lang/Object;)Ljava/lang/Object;+30 java.base@18-ea
j  java.util.ServiceLoader$ProviderImpl.newInstance()Ljava/lang/Object;+19 java.base@18-ea
j  java.util.ServiceLoader$ProviderImpl.get()Ljava/lang/Object;+13 java.base@18-ea
j  java.util.ServiceLoader$3.next()Ljava/lang/Object;+58 java.base@18-ea
j  java.lang.management.ManagementFactory$PlatformMBeanFinder$1.run()Ljava/util/List;+27 java.management@18-ea
j  java.lang.management.ManagementFactory$PlatformMBeanFinder$1.run()Ljava/lang/Object;+1 java.management@18-ea
j  java.security.AccessController.executePrivileged(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;Ljava/lang/Class;)Ljava/lang/Object;+29 java.base@18-ea
j  java.security.AccessController.doPrivileged(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;)Ljava/lang/Object;+13 java.base@18-ea
j  java.security.AccessController.doPrivileged(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;[Ljava/security/Permission;)Ljava/lang/Object;+48 java.base@18-ea
j  java.lang.management.ManagementFactory$PlatformMBeanFinder.<clinit>()V+38 java.management@18-ea
v  ~StubRoutines::call_stub
V  [libjvm.so+0xf072e4]  JavaCalls::call_helper(JavaValue*, methodHandle const&, JavaCallArguments*, JavaThread*)+0x504
V  [libjvm.so+0xec6e65]  InstanceKlass::call_class_initializer(JavaThread*)+0x1e5
V  [libjvm.so+0xec9e64]  InstanceKlass::initialize_impl(JavaThread*)+0x6a4
V  [libjvm.so+0x131935f]  LinkResolver::resolve_static_call(CallInfo&, LinkInfo const&, bool, JavaThread*)+0xcf
V  [libjvm.so+0x131f6db]  LinkResolver::resolve_invoke(CallInfo&, Handle, constantPoolHandle const&, int, Bytecodes::Code, JavaThread*)+0x19b
V  [libjvm.so+0xef63f8]  InterpreterRuntime::resolve_invoke(JavaThread*, Bytecodes::Code)+0x248
V  [libjvm.so+0xef731d]  InterpreterRuntime::resolve_from_cache(JavaThread*, Bytecodes::Code)+0xbd
j  java.lang.management.ManagementFactory.getPlatformMXBean(Ljava/lang/Class;)Ljava/lang/management/PlatformManagedObject;+1 java.management@18-ea
j  java.lang.management.ManagementFactory.getRuntimeMXBean()Ljava/lang/management/RuntimeMXBean;+2 java.management@18-ea
j  java.lang.invoke.DirectMethodHandle$Holder.invokeStatic(Ljava/lang/Object;)Ljava/lang/Object;+9 java.base@18-ea
j  java.lang.invoke.LambdaForm$MH+0x0000000801004400.invoke(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;+12 java.base@18-ea
j  java.lang.invoke.Invokers$Holder.invokeExact_MT(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;+19 java.base@18-ea
j  jdk.internal.reflect.DirectMethodHandleAccessor.invokeImpl(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+41 java.base@18-ea
j  jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+23 java.base@18-ea
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+102 java.base@18-ea
j  sun.usagetracker.UsageTrackerClient$UsageTrackerRunnable$1.run()Ljava/util/List;+25 java.base@18-ea
j  sun.usagetracker.UsageTrackerClient$UsageTrackerRunnable$1.run()Ljava/lang/Object;+1 java.base@18-ea
j  java.security.AccessController.executePrivileged(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;Ljava/lang/Class;)Ljava/lang/Object;+29 java.base@18-ea
j  java.security.AccessController.doPrivileged(Ljava/security/PrivilegedAction;)Ljava/lang/Object;+5 java.base@18-ea
j  sun.usagetracker.UsageTrackerClient$UsageTrackerRunnable.getInputArguments()Ljava/util/List;+8 java.base@18-ea
j  sun.usagetracker.UsageTrackerClient$UsageTrackerRunnable.getRuntimeDetails()Ljava/lang/String;+173 java.base@18-ea
j  sun.usagetracker.UsageTrackerClient$UsageTrackerRunnable.buildMessage(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;+121 java.base@18-ea
j  sun.usagetracker.UsageTrackerClient$UsageTrackerRunnable.run()V+52 java.base@18-ea
j  java.lang.Thread.run()V+11 java.base@18-ea
v  ~StubRoutines::call_stub
V  [libjvm.so+0xf072e4]  JavaCalls::call_helper(JavaValue*, methodHandle const&, JavaCallArguments*, JavaThread*)+0x504
V  [libjvm.so+0xf07b94]  JavaCalls::call_virtual(JavaValue*, Klass*, Symbol*, Symbol*, JavaCallArguments*, JavaThread*)+0x4b4
V  [libjvm.so+0xf07fe7]  JavaCalls::call_virtual(JavaValue*, Handle, Klass*, Symbol*, Symbol*, JavaThread*)+0x77
V  [libjvm.so+0x107c66b]  thread_entry(JavaThread*, JavaThread*)+0x12b
V  [libjvm.so+0x1921e8a]  JavaThread::thread_main_inner()+0x25a
V  [libjvm.so+0x192a250]  Thread::call_run()+0x100
V  [libjvm.so+0x160c464]  thread_native_entry(Thread*)+0x104

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  java.util.ArrayList.add(Ljava/lang/Object;)Z+2 java.base@18-ea
j  com.sun.management.internal.PlatformMBeanProviderImpl.init()Ljava/util/List;+30 jdk.management@18-ea
j  com.sun.management.internal.PlatformMBeanProviderImpl.<init>()V+6 jdk.management@18-ea
j  java.lang.invoke.DirectMethodHandle$Holder.newInvokeSpecial(Ljava/lang/Object;)Ljava/lang/Object;+15 java.base@18-ea
j  java.lang.invoke.Invokers$Holder.invokeExact_MT(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;+18 java.base@18-ea
j  jdk.internal.reflect.DirectConstructorHandleAccessor.invokeImpl([Ljava/lang/Object;)Ljava/lang/Object;+44 java.base@18-ea
j  jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance([Ljava/lang/Object;)Ljava/lang/Object;+68 java.base@18-ea
j  java.lang.reflect.Constructor.newInstanceWithCaller([Ljava/lang/Object;ZLjava/lang/Class;)Ljava/lang/Object;+41 java.base@18-ea
j  java.lang.reflect.Constructor.newInstance([Ljava/lang/Object;)Ljava/lang/Object;+30 java.base@18-ea
j  java.util.ServiceLoader$ProviderImpl.newInstance()Ljava/lang/Object;+19 java.base@18-ea
j  java.util.ServiceLoader$ProviderImpl.get()Ljava/lang/Object;+13 java.base@18-ea
j  java.util.ServiceLoader$3.next()Ljava/lang/Object;+58 java.base@18-ea
j  java.lang.management.ManagementFactory$PlatformMBeanFinder$1.run()Ljava/util/List;+27 java.management@18-ea
j  java.lang.management.ManagementFactory$PlatformMBeanFinder$1.run()Ljava/lang/Object;+1 java.management@18-ea
j  java.security.AccessController.executePrivileged(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;Ljava/lang/Class;)Ljava/lang/Object;+29 java.base@18-ea
j  java.security.AccessController.doPrivileged(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;)Ljava/lang/Object;+13 java.base@18-ea
j  java.security.AccessController.doPrivileged(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;[Ljava/security/Permission;)Ljava/lang/Object;+48 java.base@18-ea
j  java.lang.management.ManagementFactory$PlatformMBeanFinder.<clinit>()V+38 java.management@18-ea
v  ~StubRoutines::call_stub
j  java.lang.management.ManagementFactory.getPlatformMXBean(Ljava/lang/Class;)Ljava/lang/management/PlatformManagedObject;+1 java.management@18-ea
j  java.lang.management.ManagementFactory.getRuntimeMXBean()Ljava/lang/management/RuntimeMXBean;+2 java.management@18-ea
j  java.lang.invoke.DirectMethodHandle$Holder.invokeStatic(Ljava/lang/Object;)Ljava/lang/Object;+9 java.base@18-ea
j  java.lang.invoke.LambdaForm$MH+0x0000000801004400.invoke(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;+12 java.base@18-ea
j  java.lang.invoke.Invokers$Holder.invokeExact_MT(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;+19 java.base@18-ea
j  jdk.internal.reflect.DirectMethodHandleAccessor.invokeImpl(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+41 java.base@18-ea
j  jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+23 java.base@18-ea
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+102 java.base@18-ea
j  sun.usagetracker.UsageTrackerClient$UsageTrackerRunnable$1.run()Ljava/util/List;+25 java.base@18-ea
j  sun.usagetracker.UsageTrackerClient$UsageTrackerRunnable$1.run()Ljava/lang/Object;+1 java.base@18-ea
j  java.security.AccessController.executePrivileged(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;Ljava/lang/Class;)Ljava/lang/Object;+29 java.base@18-ea
j  java.security.AccessController.doPrivileged(Ljava/security/PrivilegedAction;)Ljava/lang/Object;+5 java.base@18-ea
j  sun.usagetracker.UsageTrackerClient$UsageTrackerRunnable.getInputArguments()Ljava/util/List;+8 java.base@18-ea
j  sun.usagetracker.UsageTrackerClient$UsageTrackerRunnable.getRuntimeDetails()Ljava/lang/String;+173 java.base@18-ea
j  sun.usagetracker.UsageTrackerClient$UsageTrackerRunnable.buildMessage(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;+121 java.base@18-ea
j  sun.usagetracker.UsageTrackerClient$UsageTrackerRunnable.run()V+52 java.base@18-ea
j  java.lang.Thread.run()V+11 java.base@18-ea
v  ~StubRoutines::call_stub
",,,,,,,,,,JDK-8285706,JDK-8286196,JDK-8285376,JDK-8287177,JDK-8289117,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8193369,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,linux,,,,,,"0|i2vcmj:",9223372036854775807,b03,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@661b156a,,,,,,,,,"2021-12-14 18:15;sspitsyn;This assert happens on the ""UsageTracker"" daemon:
 Current thread (0x00007f9b8435eca0): JavaThread ""UsageTracker"" daemon [_thread_in_vm, id=30247, stack(0x00007f9b60592000,0x00007f9b60693000)]

The test most probably does not expect this FieldAccess watch event posted on a UT thread.
I'll check if it is the case. If so then this is a test issue.
;;;","2021-12-16 17:45;amenkov;Native part of the test sets testResultObject before each testcase and reset after it, and event handler checks if testResultObject is NULL and ignore the event if it is. But access to the testResultObject variable is not synchronized and we got a race here:
- testcase starts, testResultObject is set;
- UT thread does some actions with ArrayList and this causes event generation;
- event handler ensures testResultObject is not NULL and continue event handling;
- testcases ends and set testResultObject to NULL
- event handler tries to set testResultObject field, but it's already NULL and we got this failure.

The simplest solution is to update the test to check the thread which generates the event ignoring events from non-test threads;;;","2021-12-16 17:50;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk/pull/6874
Date: 2021-12-17 01:47:23 +0000
;;;","2021-12-18 00:09;roboduke;Changeset: 63e43030
Author:    Alex Menkov <amenkov@openjdk.org>
Date:      2021-12-18 08:08:47 +0000
URL:       https://git.openjdk.java.net/jdk/commit/63e43030ed1260d14df950342c39a377231a3f40
;;;","2022-04-25 08:23;mdoerr;Fix Request (17u):
Should get backported for parity with 17.0.4-oracle. Applies cleanly. Test has passed.;;;","2022-04-25 08:30;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/362
Date: 2022-04-25 15:25:02 +0000;;;","2022-06-21 11:35;goetz;Fix request [11u]

I backport this for parity with 11.0.17-oracle.
No risk, only a test change.
Clean backport except for Copyright.
SAP nightly testing passed.;;;","2022-06-21 11:44;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1167
Date: 2022-06-21 18:35:02 +0000;;;",,,,,,,,,,,,,
Typos in snippet for java.compiler,JDK-8278516,5064431,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jjg,jjg,jjg,2021-12-09 12:36,2021-12-15 17:51,2023-10-01 09:57,2021-12-09 13:48,18,,,,,,,,,,,,,18,tools,,0,noreg-doc,,,,,,,,,,,,,,,,"When converting some code in `StandardJavaFileManager` to use snippets
 in some places `toURI` was used instead of `toUri`. These should be fixed.",,,,,,,,,,JDK-8278523,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vclv:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2021-12-09 13:48;roboduke;Changeset: 918b3505
Author:    Jonathan Gibbons <jjg@openjdk.org>
Date:      2021-12-09 21:47:50 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/918b3505e1cbbf5ac380cbcca43aae2829c18a2d
;;;",,,,,,,,,,,,,,,,,,,,
Enable X86 maskAll instruction pattern for 32 bit JVM.,JDK-8278508,5064422,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,jbhateja,jbhateja,jbhateja,2021-12-09 09:20,2022-01-10 09:34,2023-10-01 09:57,2021-12-21 19:18,18,,,,,,,,,,,,,18,hotspot,,0,oraclejdk-na,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,,"
--N: o284  XorVMask  === _ o310 o282  [[o311 ]]  #vectormask[16]:{byte}

   --N: o310  VectorLoadMask  === _ o309  [[o284 ]]  #vectormask[16]:{byte}
   KREG  0  KREG
   KREG_K1  0  KREG_K1
   KREG_K2  0  KREG_K2
   KREG_K3  0  KREG_K3
   KREG_K4  0  KREG_K4
   KREG_K5  0  KREG_K5
   KREG_K6  0  KREG_K6
   KREG_K7  0  KREG_K7

   --N: o282  VectorMaskCast  === _ o261  [[o284 ]]  #vectormask[16]:{byte}
   VEC  0  vmaskcast
   LEGVEC  100  MoveVec2Leg

      --N: o261  ReplicateB  === _ o260  [[o312 o282 ]]  #vectorx[16]:{byte}
      RXMM0  0  RXMM0
      VEC  0  VEC
      LEGVEC  0  LEGVEC
      VECX  0  VECX
      LEGVECX  0  LEGVECX


X86 backend implementation does not enable maskAll instruction patterns for 32 bit JVM, due to which operations fall backs over replicateB operation which broadcasts the mask value in a vector and after unboxing-boxing optimization this vector eventually reaches to XorVMask which cribs since one operand is held in opmask register and other in vector.",,,,,,,,,,JDK-8279751,JDK-8279170,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86,,,,,,,,,,,,,,,,,,,"0|i2vcjv:",9223372036854775807,b29,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-12-09 12:18;dlong;[~jbhateja], this sounds like a ""bad AD file"" error, correct?  Do you have a reproducer?;;;","2021-12-09 12:18;dlong;ILW = crash on x86 = HMM = P2;;;","2021-12-09 12:21;kvn;It was found by running jdk/incubator/vector/ existing tests with 32-bit VM and -XX:UseAVX=3:
Test results: passed: 46; failed: 28

Yes, it is bad x86.ad file (missing instructions):

#  Internal Error (/jdk_git/open/src/hotspot/share/opto/matcher.cpp:1716), pid=2276604, tid=2276620
#  assert(false) failed: bad AD file


;;;","2021-12-21 19:18;roboduke;Changeset: 97c5cd7f
Author:    Jatin Bhateja <jbhateja@openjdk.org>
Date:      2021-12-22 03:17:03 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/97c5cd7facf1d3565038c078d5688c7da15ad14e
;;;",,,,,,,,,,,,,,,,,
Remove .hgtags,JDK-8278494,5064406,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,kcr,kcr,kcr,2021-12-09 04:50,2021-12-21 05:03,2023-10-01 09:57,2021-12-10 06:06,jfx18,,,,,,,,,,,,,jfx18,javafx,,0,noreg-cleanup,sn_107,,,,,,,,,,,,,,,"We've been on git for > 2 years so it's time to delete the obsolete .hgtags file. It hasn't been updated since the switch to git. It is still there in the jfx17 branch if someone wants to look at it for historical reasons.

The JDK project just removed it from the mainline jdk repo via JDK-8254318.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8254255,JDK-8254318,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vcgb:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1d1c7815,,,,,,,,,"2021-12-10 06:06;roboduke;Changeset: 85b8e96e
Author:    Kevin Rushforth <kcr@openjdk.org>
Date:      2021-12-10 14:05:12 +0000
URL:       https://git.openjdk.java.net/jfx/commit/85b8e96eb80dd066b10cd87b598875b7e7d1d511
;;;",,,,,,,,,,,,,,,,,,,,
Preserve result in native wrapper with +UseHeavyMonitors,JDK-8278489,5064402,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,rkennke,rkennke,rkennke,2021-12-09 03:42,2022-01-25 14:07,2023-10-01 09:57,2022-01-10 12:48,18,19,,,,,,,,,,,,18,hotspot,,0,,,,,,,,,,,,,,,,,"java/awt/color/ICC_ColorSpace/MTTransformReplacedProfile.java
java/awt/color/MTICC_ColorSpaceToFrom.java
sun/java2d/cmm/ColorConvertOp/MTColConvTest.java
sun/java2d/cmm/ColorConvertOp/MTPerLineTransformValidation.java
sun/java2d/cmm/ColorConvertOp/MTSafetyTest.java
sun/java2d/cmm/ColorConvertOp/MTTransformValidation.java

The above tests crash with SIGBUS, SIGSEGV or EXCEPTION_ACCESS_VIOLATION
depending on the platform. I've never seen these tests fail before so it's likely that
these failures are related to UseHeavyMonitors.",,,,,,,,,,JDK-8280304,JDK-8280623,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278479,JDK-8276901,,,,,,,,,,,,,,JDK-8279826,,,,,,,,,,,,,,,,,,x86,x86_64,,,,,,,,,,,,generic,,,,,,"0|i2vcff:",9223372036854775807,b31,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-21 08:12;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk18/pull/16
Date: 2021-12-13 20:54:55 +0000
;;;","2022-01-10 12:48;roboduke;Changeset: 92307e5a
Author:    Roman Kennke <rkennke@openjdk.org>
Date:      2022-01-10 20:47:23 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/92307e5a944f7e995780fc6f5e55713802919dfd
;;;","2022-01-12 17:06;roboduke;Changeset: 92307e5a
Author:    Roman Kennke <rkennke@openjdk.org>
Date:      2022-01-10 20:47:23 +0000
URL:       https://git.openjdk.java.net/jdk/commit/92307e5a944f7e995780fc6f5e55713802919dfd
;;;","2022-01-25 04:27;roboduke;Changeset: 92307e5a
Author:    Roman Kennke <rkennke@openjdk.org>
Date:      2022-01-10 20:47:23 +0000
URL:       https://git.openjdk.java.net/jdk18u/commit/92307e5a944f7e995780fc6f5e55713802919dfd
;;;",,,,,,,,,,,,,,,,,
RunThese test failure with +UseHeavyMonitors and +VerifyHeavyMonitors,JDK-8278479,5064391,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,coleenp,rkennke,rkennke,2021-12-09 02:12,2023-09-28 09:02,2023-10-01 09:57,2022-07-06 05:10,18,,,,,,,,,,,,,20,hotspot,,0,sync,,,,,,,,,,,,,,,,"Mach5 Tier3 with UseHeavyMonitors and VerifyHeavyMonitors forced true
failed 19 tests:

applications/runthese/RunThese30M.java

# Internal Error (t:\workspace\open\src\hotspot\share\runtime/handles.hpp:71), pid=25688, tid=48320
# assert(_handle != 0LL) failed: resolving NULL handle

<snip>

Current thread (0x00000266dc2df7b0): JavaThread ""javasoft.sqe.tests.api.java.lang.ClassNotFoundException.ClassNotFoundExcTests "" daemon [_thread_in_vm, id=48320, stack(0x000000c541500000,0x000000c541600000)]

Stack: [0x000000c541500000,0x000000c541600000]
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V [jvm.dll+0xbb1a51] os::platform_print_native_stack+0xf1 (os_windows_x86.cpp:235)
V [jvm.dll+0xdf16fe] VMError::report+0x101e (vmError.cpp:828)
V [jvm.dll+0xdf30fe] VMError::report_and_die+0x7fe (vmError.cpp:1656)
V [jvm.dll+0xdf3884] VMError::report_and_die+0x64 (vmError.cpp:1437)
V [jvm.dll+0x5329f7] report_vm_error+0xb7 (debug.cpp:280)
V [jvm.dll+0xd1f754] ObjectSynchronizer::enter+0x44 (synchronizer.cpp:435)
V [jvm.dll+0xc7517f] SharedRuntime::monitor_enter_helper+0x1ff (sharedRuntime.cpp:2124)
V [jvm.dll+0x3e0b18] Runtime1::monitorenter+0x168 (c1_Runtime1.cpp:747)
C 0x00000266e6662f57

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
v ~RuntimeStub::monitorenter_nofpu Runtime1 stub
J 34362 c1 java.lang.Throwable.printStackTrace(Ljava/lang/Throwable$PrintStreamOrWriter;)V java.base@18-internal (177 bytes) @ 0x00000266e6d3bb2e [0x00000266e6d3a9e0+0x000000000000114e]
j java.lang.Throwable.printStackTrace(Ljava/io/PrintStream;)V+9 java.base@18-internal
j javasoft.sqe.tests.api.java.lang.ClassNotFoundException.ClassNotFoundExcTests.ClassNotFoundException0008()Ljavasoft/sqe/javatest/Status;+12
j java.lang.invoke.DirectMethodHandle$Holder.invokeVirtual(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;+10 java.base@18-internal
J 33052 c2 java.lang.invoke.LambdaForm$MH+0x0000000800c08000.invoke(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; java.base@18-internal (35 bytes) @ 0x00000266ee48ffd4 [0x00000266ee48ff20+0x00000000000000b4]
J 26417 c2 java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; java.base@18-internal (108 bytes) @ 0x00000266ee13f9d8 [0x00000266ee13f560+0x0000000000000478]
j javasoft.sqe.javatest.lib.MultiTest.invokeTestCase(Ljava/lang/reflect/Method;)Ljavasoft/sqe/javatest/Status;+8
j javasoft.sqe.javatest.lib.MultiTest.run([Ljava/lang/String;Ljava/io/PrintWriter;Ljava/io/PrintWriter;)Ljavasoft/sqe/javatest/Status;+139
j javasoft.sqe.javatest.lib.MultiTest.run([Ljava/lang/String;Ljava/io/PrintStream;Ljava/io/PrintStream;)Ljavasoft/sqe/javatest/Status;+46
j javasoft.sqe.tests.api.java.lang.ClassNotFoundException.ClassNotFoundExcTests.main([Ljava/lang/String;)V+16
j java.lang.invoke.LambdaForm$DMH+0x0000000800c03400.invokeStatic(Ljava/lang/Object;Ljava/lang/Object;)V+10 java.base@18-internal
j java.lang.invoke.LambdaForm$MH+0x0000000800c8dc00.invoke(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;+33 java.base@18-internal
J 26417 c2 java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; java.base@18-internal (108 bytes) @ 0x00000266ee13f928 [0x00000266ee13f560+0x00000000000003c8]
j applications.kitchensink.process.stress.modules.JckStressModule$TestRunner$1.run()V+9
v ~StubRoutines::call_stub",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276901,JDK-8317257,,,,,,,,,,,,,,JDK-8278489,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2vccz:",9223372036854775807,b06,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-13 04:43;rkennke;I cannot reproduce the failure because the test RunThese30M.java is not part of OpenJDK.;;;","2021-12-13 13:19;rkennke;It may be related to JDK-8278489;;;","2021-12-14 11:24;mseledtsov;ILW = HLM = P3;;;","2021-12-15 13:06;coleenp;[~rkennke] how did you find this crash? I can't reproduce it locally with -XX:+UseHeavyMonitors without your fix for JDK-8278489;;;","2021-12-15 14:55;rkennke;@dcubed foud it here: https://bugs.openjdk.java.net/browse/JDK-8276901?focusedCommentId=14463312&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14463312;;;","2021-12-16 07:18;coleenp;This crash isn't fixed by the patch in JDK-8278489.

Sorry for the edits to this comment.  I can NOT reproduce this when backing out the patch for JDK-8276901.  So it IS a regression in a command line option that is now deprecated.;;;","2021-12-17 13:26;dcubed;I reproduced this failure with 'release' bits on my MBP13:

#  SIGSEGV (0xb) at pc=0x000000010f3a3bc3, pid=79236, tid=318767
#
# JRE version: Java(TM) SE Runtime Environment (18.0) (build 18-internal+0-2021-12-16-2112419.dcubed...)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (18-internal+0-2021-12-16-2112419.dcubed..., mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, bsd-amd64)
# Problematic frame:
# V  [libjvm.dylib+0x9a3bc3]  ObjectSynchronizer::enter(Handle, BasicLock*, JavaThread*)+0x13

<snip>

---------------  T H R E A D  ---------------

Current thread (0x00007fce89c03010):  JavaThread ""javasoft.sqe.tests.api.java.lang.reflect.UndeclaredThrowableException.UndeclaredThrowableTests "" daemon [_thread_in_vm, id=318767, stack(0x00007000044f4000,0x00007000045f4000)]

Stack: [0x00007000044f4000,0x00007000045f4000],  sp=0x00007000045f2b00,  free space=1018k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.dylib+0x9a3bc3]  ObjectSynchronizer::enter(Handle, BasicLock*, JavaThread*)+0x13
V  [libjvm.dylib+0x91e87c]  SharedRuntime::monitor_enter_helper(oopDesc*, BasicLock*, JavaThread*)+0x8c
V  [libjvm.dylib+0x262957]  Runtime1::monitorenter(JavaThread*, oopDesc*, BasicObjectLock*)+0x27
v  ~RuntimeStub::monitorenter_nofpu Runtime1 stub
J 467433 c1 java.lang.Throwable.printStackTrace(Ljava/lang/Throwable$PrintStreamOrWriter;)V java.base@18-internal (177 bytes) @ 0x000000011fd5725d [0x000000011fd56bc0+0x000000000000069d]
J 467781 c1 java.lang.Throwable.printStackTrace(Ljava/io/PrintWriter;)V java.base@18-internal (13 bytes) @ 0x000000011c5d77a4 [0x000000011c5d76c0+0x00000000000000e4]
j  javasoft.sqe.tests.api.java.lang.reflect.UndeclaredThrowableException.UndeclaredThrowableTests.UndeclaredThrowableException0008()Ljavasoft/sqe/javatest/Status;+19
J 469291 c1 java.lang.invoke.DirectMethodHandle$Holder.invokeVirtual(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; java.base@18-internal (14 bytes) @ 0x000000011fca68cc [0x000000011fca6840+0x000000000000008c]
J 465297 c2 java.lang.invoke.LambdaForm$MH+0x0000000800c08000.invoke(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; java.base@18-internal (35 bytes) @ 0x00000001223fb680 [0x00000001223fb5c0+0x00000000000000c0]
J 460277 c2 java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; java.base@18-internal (108 bytes) @ 0x0000000121c44aec [0x0000000121c44860+0x000000000000028c]
j  javasoft.sqe.javatest.lib.MultiTest.invokeTestCase(Ljava/lang/reflect/Method;)Ljavasoft/sqe/javatest/Status;+8
j  javasoft.sqe.javatest.lib.MultiTest.run([Ljava/lang/String;Ljava/io/PrintWriter;Ljava/io/PrintWriter;)Ljavasoft/sqe/javatest/Status;+139
j  javasoft.sqe.javatest.lib.MultiTest.run([Ljava/lang/String;Ljava/io/PrintStream;Ljava/io/PrintStream;)Ljavasoft/sqe/javatest/Status;+46
j  javasoft.sqe.tests.api.java.lang.reflect.UndeclaredThrowableException.UndeclaredThrowableTests.main([Ljava/lang/String;)V+16
J 468819 c1 java.lang.invoke.LambdaForm$DMH+0x0000000800c03400.invokeStatic(Ljava/lang/Object;Ljava/lang/Object;)V java.base@18-internal (14 bytes) @ 0x000000011b64494c [0x000000011b6448c0+0x000000000000008c]
J 468818 c1 java.lang.invoke.LambdaForm$MH+0x0000000800c8a800.invoke(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; java.base@18-internal (38 bytes) @ 0x000000011b6456fc [0x000000011b6455e0+0x000000000000011c]
J 460587 c2 jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; java.base@18-internal (92 bytes) @ 0x00000001223dd6a8 [0x00000001223dd120+0x0000000000000588]
J 468742 c1 applications.kitchensink.process.stress.modules.JckStressModule$TestRunner$1.run()V (127 bytes) @ 0x000000011b65dee4 [0x000000011b65db00+0x00000000000003e4]
v  ~StubRoutines::call_stub
V  [libjvm.dylib+0x514cf1]  JavaCalls::call_helper(JavaValue*, methodHandle const&, JavaCallArguments*, JavaThread*)+0x2a1
V  [libjvm.dylib+0x513d67]  JavaCalls::call_virtual(JavaValue*, Klass*, Symbol*, Symbol*, JavaCallArguments*, JavaThread*)+0x147
V  [libjvm.dylib+0x513e33]  JavaCalls::call_virtual(JavaValue*, Handle, Klass*, Symbol*, Symbol*, JavaThread*)+0x63
V  [libjvm.dylib+0x5b9988]  thread_entry(JavaThread*, JavaThread*)+0x98
V  [libjvm.dylib+0x9e5f09]  JavaThread::thread_main_inner()+0xc9
V  [libjvm.dylib+0x9e45cf]  Thread::call_run()+0xcf
V  [libjvm.dylib+0x887528]  thread_native_entry(Thread*)+0x148
C  [libsystem_pthread.dylib+0x6109]  _pthread_start+0x94
C  [libsystem_pthread.dylib+0x1b8b]  thread_start+0xf

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
v  ~RuntimeStub::monitorenter_nofpu Runtime1 stub
J 467433 c1 java.lang.Throwable.printStackTrace(Ljava/lang/Throwable$PrintStreamOrWriter;)V java.base@18-internal (177 bytes) @ 0x000000011fd5725d [0x000000011fd56bc0+0x000000000000069d]
J 467781 c1 java.lang.Throwable.printStackTrace(Ljava/io/PrintWriter;)V java.base@18-internal (13 bytes) @ 0x000000011c5d77a4 [0x000000011c5d76c0+0x00000000000000e4]
j  javasoft.sqe.tests.api.java.lang.reflect.UndeclaredThrowableException.UndeclaredThrowableTests.UndeclaredThrowableException0008()Ljavasoft/sqe/javatest/Status;+19
J 469291 c1 java.lang.invoke.DirectMethodHandle$Holder.invokeVirtual(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; java.base@18-internal (14 bytes) @ 0x000000011fca68cc [0x000000011fca6840+0x000000000000008c]
J 465297 c2 java.lang.invoke.LambdaForm$MH+0x0000000800c08000.invoke(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; java.base@18-internal (35 bytes) @ 0x00000001223fb680 [0x00000001223fb5c0+0x00000000000000c0]
J 460277 c2 java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; java.base@18-internal (108 bytes) @ 0x0000000121c44aec [0x0000000121c44860+0x000000000000028c]
j  javasoft.sqe.javatest.lib.MultiTest.invokeTestCase(Ljava/lang/reflect/Method;)Ljavasoft/sqe/javatest/Status;+8
j  javasoft.sqe.javatest.lib.MultiTest.run([Ljava/lang/String;Ljava/io/PrintWriter;Ljava/io/PrintWriter;)Ljavasoft/sqe/javatest/Status;+139
j  javasoft.sqe.javatest.lib.MultiTest.run([Ljava/lang/String;Ljava/io/PrintStream;Ljava/io/PrintStream;)Ljavasoft/sqe/javatest/Status;+46
j  javasoft.sqe.tests.api.java.lang.reflect.UndeclaredThrowableException.UndeclaredThrowableTests.main([Ljava/lang/String;)V+16
J 468819 c1 java.lang.invoke.LambdaForm$DMH+0x0000000800c03400.invokeStatic(Ljava/lang/Object;Ljava/lang/Object;)V java.base@18-internal (14 bytes) @ 0x000000011b64494c [0x000000011b6448c0+0x000000000000008c]
J 468818 c1 java.lang.invoke.LambdaForm$MH+0x0000000800c8a800.invoke(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; java.base@18-internal (38 bytes) @ 0x000000011b6456fc [0x000000011b6455e0+0x000000000000011c]
J 460587 c2 jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; java.base@18-internal (92 bytes) @ 0x00000001223dd6a8 [0x00000001223dd120+0x0000000000000588]
J 468742 c1 applications.kitchensink.process.stress.modules.JckStressModule$TestRunner$1.run()V (127 bytes) @ 0x000000011b65dee4 [0x000000011b65db00+0x00000000000003e4]
v  ~StubRoutines::call_stub

siginfo: si_signo: 11 (SIGSEGV), si_code: 1 (SEGV_MAPERR), si_addr: 0x0000000000000000;;;","2021-12-20 09:54;dcubed;Tried to reproduce this failure with 'fastdebug' bits on my MBP13. Did 105 runs in a loop
over this past weekend and didn't get any failures.;;;","2021-12-20 10:05;dcubed;The release bits crash on my MBP13 shows this interesting info:

(lldb) down
frame #35: 0x000000010f31e87c libjvm.dylib`SharedRuntime::monitor_enter_helper(obj=0x0000000000000000, lock=0x00007000045f30e0, current=0x00007fce89c03010) at sharedRuntime.cpp:2123:3 [opt]
   2120	  // and the model is that an exception implies the method failed.
   2121	  JRT_BLOCK_NO_ASYNC
   2122	  Handle h_obj(THREAD, obj);
-> 2123	  ObjectSynchronizer::enter(h_obj, lock, current);
   2124	  assert(!HAS_PENDING_EXCEPTION, ""Should have no exception here"");
   2125	  JRT_BLOCK_END
   2126	}
(lldb) print obj
(oopDesc *) $8 = 0x0000000000000000
(lldb) print lock
(BasicLock *) $9 = 0x00007000045f30e0
(lldb) print current
(JavaThread *) $10 = 0x00007fce89c03010

So the 'obj' passed from Runtime1::monitorenter()'s to SharedRuntime::monitor_enter_helper()
is NULL and we eventually try to use that and throw a SIGSEGV.;;;","2021-12-20 11:08;rkennke;I think I know what's up. With -UseHeavyMonitors, we would emit fast-locking code and also the relevant null_check_info. When this is called with a null lock-object, then it would raise a SIGSEGV when loading the object headr, and this would end up in the SEGV-handler, which would then throw an NPE (which presumably is handled by the program). However, the slow-path does not access the object, and thus does not raise a SEGV, and also doesn't emit a null_check_info for handling the SEGV. The program simply crashes upon encountering a null obj.

Note that this problem should be pre-existing (inherited from -UseFastLocking, which we adopted for +UseHeavyMonitors). It also looks like it affects all/most platforms (I checked x86 and aarch64).

A solution may be to emit a bogus access on the object header (maybe a simple test instruction on the header address) and also emit null_check_info, before calling into the runtime. Alternatively, we could throw an NPE from the Runtime1::monitorenter() when obj == NULL. Not quite sure what is easier.;;;","2021-12-20 11:12;dcubed;[~rkennke] - Did you want to take this bug?;;;","2022-01-11 11:18;mseledtsov;Just a note from RT Triage team: as per RDP release process all P3 bugs should be fixed by January 20th or postponed for JDK 19. If postponed please write a release note as a comment to this bug, and add a label ""release-note=yes"" to this issue.;;;","2022-07-01 07:12;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/9339
Date: 2022-06-30 22:05:14 +0000;;;","2022-07-05 14:35;coleenp;Thanks [~dcubed].  I tried to reproduce with runThese30M and couldn't either.  The bug reproduces quite easily with the test runtime/exceptionMsgs/NullPointerException with these options.;;;","2022-07-06 05:10;dukebot;Changeset: 83a5d599
Author:    Coleen Phillimore <coleenp@openjdk.org>
Date:      2022-07-06 12:07:36 +0000
URL:       https://git.openjdk.org/jdk/commit/83a5d5996bca26b5f2e97b67f9bfd0a6ad110327
;;;",,,,,,
G1 dirty card refinement by Java threads may get unnecessarily paused,JDK-8278475,5064387,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,kbarrett,kbarrett,kbarrett,2021-12-09 01:09,2022-02-07 13:05,2023-10-01 09:57,2022-02-01 07:46,18,,,,,,,,,,,,,19,hotspot,,0,gc-g1,gc-pending-review,,,,,,,,,,,,,,,"When doing dirty card refinement, if an STS suspension request is active then processing a card buffer is aborted and the remainder of the buffer is pushed on the DCQS paused list. It's not just G1ConcurrentRefineThreads that check the STS state there, Java threads do too.

When coming out of a safepoint, Java threads are activated before the STS suspension request is cleared. So a Java thread could be activated, enqueue a buffer, decide it needed to do some refinement work so obtain a buffer from the queue, notice the STS suspension request, and pause the buffer until after the *next* safepoint. And of course that could keep happening until the STS suspension request finally gets cleared.

I haven't found anything that ""fails"" because of that oddity. But it could lead to there being paused buffers that are inaccessible to refinement from the end of the safepoint where that happens until the next safepoint. And paused buffer contents are counted in num_cards, to encourage refinement work to move them back to the normal queue. This could lead to spinning by refinement threads, with there being enough oddly paused cards to indicate there is work to do, but being unable to obtain any work from the empty normal queue and the inaccessible ""next"" paused list.  That seems pretty unlikely, but still.

A possible fix might be to change the STS suspension request flag to be based on the safepoint counter. That way we don't have two different request ""flags"". That would require some reordering in safepoint entry that would need careful examination.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278389,,,,,,,,,,,,,,,JDK-8152199,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vcc3:",9223372036854775807,b08,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-12-14 12:56;kbarrett;There is an easier way to avoid this problem than messing with the STS suspension request flag.  When handling a full buffer we decide whether to do mutator refinement.  In addition to the existing tests, don't do the mutator refinement if there is an active STS suspension request.  Going in to a safepoint this will avoid wasting time transferring buffers from the queue to the next paused list.  Coming out of a safepoint, this will prevent the problem discussed by this bug.
;;;","2022-01-19 14:35;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7148
Date: 2022-01-19 22:31:19 +0000;;;","2022-02-01 07:46;roboduke;Changeset: 1f6fcbe2
Author:    Kim Barrett <kbarrett@openjdk.org>
Date:      2022-02-01 15:44:26 +0000
URL:       https://git.openjdk.java.net/jdk/commit/1f6fcbe2f3da4c63976b1564ec2170e4757fadcc
;;;",,,,,,,,,,,,,,,,,,
Invalid value set to CANDIDATEFORM structure,JDK-8278472,5064383,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,aivanov,shadowbug,shadowbug,2021-12-08 23:18,2022-04-08 10:06,2023-10-01 09:57,2022-01-28 10:19,11,17,8u131,,,,,,,,,,,18.0.1,client-libs,,0,8bpr-critical-approved,bugdb_33653414,cssn21_12_02,cssn22_01_02,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jdk18u-fix-request,jdk18u-fix-SQE-OK,jdk18u-fix-yes,licbug,noreg-cleanup,sustaining,,,"According to the Windows API reference[1], dwStyle of CANDIDATEFORM structure should be set to CFS_CANDIDATEPOS or CFS_EXCLUDE. So, CFS_POINT is wrong here.
  
See line 3914 in src\java.desktop\windows\native\libawt\windows\awt_Component.cpp [2], AwtComponent::SetCandidateWindow function:
        CANDIDATEFORM cf;
        cf.dwStyle = CFS_POINT;
        ImmGetCandidateWindow(hIMC, 0, &cf);

[1] https://docs.microsoft.com/en-us/windows/win32/api/imm/ns-imm-candidateform
[2] https://github.com/openjdk/jdk/blob/f90425a1cbbc686045c87086af586e62f05f6c49/src/java.desktop/windows/native/libawt/windows/awt_Component.cpp#L3914",,,,,,,,,,JDK-8281981,JDK-8280412,JDK-8283499,JDK-8280797,JDK-8280791,JDK-8280790,JDK-8283163,JDK-8284605,JDK-8283634,JDK-8280909,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8283109,JDK-8147842,JDK-8183504,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vcb7:",9223372036854775807,b05,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@54799779,,,,,,,,,"2021-12-21 07:01;aivanov;The incorrect value was introduced by JDK-8147842 and then used in JDK-8183504.;;;","2021-12-21 07:24;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk18/pull/54
Date: 2021-12-21 15:18:40 +0000
;;;","2022-01-19 12:38;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7146
Date: 2022-01-19 20:14:34 +0000;;;","2022-01-20 12:19;aivanov;Fix Request for 18u:

It's a low-risk change that amends an incorrect value passed in the CANDIDATEFORM structure.;;;","2022-01-20 13:41;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18u/pull/6
Date: 2022-01-20 21:36:34 +0000;;;","2022-01-28 10:19;roboduke;Changeset: cd5a9a95
Author:    Alexey Ivanov <aivanov@openjdk.org>
Date:      2022-01-28 18:19:17 +0000
URL:       https://git.openjdk.java.net/jdk18u/commit/cd5a9a95225645a46b95216edadb860df6c90824
;;;","2022-03-21 06:23;goetz;Fix request [17u]

I backport this for parity with 17.0.4-oracle.
Small and trivial fix, low risk.
Clean backport.
SAP nightly testing passed.;;;","2022-03-21 06:41;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/267
Date: 2022-03-21 13:34:41 +0000;;;","2022-03-22 08:11;goetz;Fix request [11u]

I backport this for parity with 11.0.16-oracle.
Small and trivial fix, low risk.
Clean backport. 
SAP nightly testing passed.;;;","2022-03-22 08:17;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/934
Date: 2022-03-22 15:11:04 +0000;;;",,,,,,,,,,,
Test java/nio/channels/FileChannel/LargeGatheringWrite.java times out,JDK-8278469,5064381,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,bpb,dholmes,dholmes,2021-12-08 18:19,2023-07-29 02:40,2023-10-01 09:57,2022-07-07 15:39,18,19,20,,,,,,,,,,,19,core-libs,,0,intermittent,noreg-self,tier2,tier7,ursqe-triaged,,,,,,,,,,,,"----------System.out:(5/155)----------
Seed from RandomFactory = 7973809281479571012L
Writing 5368709122 bytes of data...
Wrote 2147483647 bytes
Wrote 2147483647 bytes
Timeout refired 960 times
----------System.err:(0/0)----------
----------rerun:(36/8290)*----------",,,,,,,,,,JDK-8291235,JDK-8290096,JDK-8291397,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8289470,,,,,,,,,,,,,,,JDK-8289526,JDK-8290252,JDK-8278369,,,,,,,,,,,,,,,,aarch64,x86_64,,,,,,,,,,,,generic,,,,,,"0|i2vcar:",9223372036854775807,b31,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,,,"2022-06-30 06:17;dcubed;Here's a log file snippet from the jdk-20+5-181-tier2 sighting: 

java/nio/channels/FileChannel/LargeGatheringWrite.java

#section:main
----------messages:(6/253)----------
command: main -Xmx4G LargeGatheringWrite
reason: User specified action: run main/othervm/timeout=240 -Xmx4G LargeGatheringWrite 
Mode: othervm [/othervm specified]
Timeout information:
--- Timeout information end.
elapsed time (seconds): 1004.847
----------configuration:(0/0)----------
----------System.out:(15/427)----------
Seed from RandomFactory = 8443461428284579298L
Writing 5368709122 bytes of data...
Wrote 5368709122 bytes
Total of 5368709122 bytes written
Checking length 1073741824
Checking length 1073741824
Checking length 536870912
Checking length 536870912
Checking length 536870912
Timeout refired 960 times
Checking length 536870912
Checking length 536870912
Checking length 536870912
Checking length 1
Checking length 1
----------System.err:(1/16)----------
STATUS:Passed.
----------rerun:(40/5953)*----------

<snip>

result: Error. Program `c:\ade\mesos\work_dir\jib-master\install\jdk-20+5-181\windows-x64.jdk\jdk-20\bin\java' timed out (timeout set to 960000ms, elapsed time including timeout handling was 1004842ms).


Please note that the test PASSed while the timeout handler was running.;;;","2022-06-30 08:56;dcubed;Here's a log file snippet from the jdk-20+5-182-tier2 sighting: 

java/nio/channels/FileChannel/LargeGatheringWrite.java 


#section:main
----------messages:(6/253)----------
command: main -Xmx4G LargeGatheringWrite
reason: User specified action: run main/othervm/timeout=240 -Xmx4G LargeGatheringWrite 
Mode: othervm [/othervm specified]
Timeout information:
--- Timeout information end.
elapsed time (seconds): 1083.406
----------configuration:(0/0)----------
----------System.out:(6/199)----------
Seed from RandomFactory = 5069676580147580464L
Writing 5368709122 bytes of data...
Timeout refired 960 times
Wrote 5368709122 bytes
Total of 5368709122 bytes written
Checking length 1073741824
----------System.err:(0/0)----------
----------rerun:(40/5953)*----------

Please note that this sighting did not pass while the timeout handler was running.;;;","2022-07-03 23:07;alanb;[~bpb] This test has started to timeout very frequently on Windows from about June 30, both openjdk/jdk19 and openjdk/jdk so may be an infrastructure issue rather than a JDK or test issue. I think it will need attention to understand why the execution times increased and maybe to see if the test case be dialled down to run in less time.;;;","2022-07-04 14:38;dholmes;We seem to have a lot of windows tests timing out at the moment - see also JDK-8289526 and JDK-8278369. I suspect this is all the same underlying problem.;;;","2022-07-06 07:06;dcubed;Here's a log file snippet for the jdk-20+5-210-tier7 sighting: 

java/nio/channels/FileChannel/LargeGatheringWrite.java

#section:main
----------messages:(6/253)----------
command: main -Xmx4G LargeGatheringWrite
reason: User specified action: run main/othervm/timeout=240 -Xmx4G LargeGatheringWrite 
Mode: othervm [/othervm specified]
Timeout information:
--- Timeout information end.
elapsed time (seconds): 1121.444
----------configuration:(0/0)----------
----------System.out:(15/428)----------
Seed from RandomFactory = -1465090764079936852L
Writing 5368709122 bytes of data...
Wrote 5368709122 bytes
Total of 5368709122 bytes written
Checking length 1073741824
Checking length 1073741824
Timeout refired 960 times
Checking length 536870912
Checking length 536870912
Checking length 536870912
Checking length 536870912
Checking length 536870912
Checking length 536870912
Checking length 1
Checking length 1
----------System.err:(1/16)----------
STATUS:Passed.
----------rerun:(43/6516)*----------

The test PASSed while the timeout handler was running. ;;;","2022-07-07 08:29;bpb;[~dcubed] Thanks for adding the hostname to the comment: very helpful!

[~alanb] I broached the subject on #mach5support a couple of days ago and there was no response; I shall try again.;;;","2022-07-07 08:32;bpb;Linked JDK-8289526 to which this issue is almost certainly related as it is quite probably also to JDK-8278369 which is also linked.;;;","2022-07-07 13:43;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/9416
Date: 2022-07-07 20:36:43 +0000;;;","2022-07-07 15:32;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk19/pull/122
Date: 2022-07-07 22:25:10 +0000;;;","2022-07-07 15:39;dukebot;Changeset: 11319c2a
Author:    Brian Burkhalter <bpb@openjdk.org>
Date:      2022-07-07 22:36:08 +0000
URL:       https://git.openjdk.org/jdk19/commit/11319c2aeb16ef2feb0ecab0e2811a52e845739d
;;;","2022-07-08 07:27;dcubed;The fix for this bug is integrated in jdk-19+31-2177.;;;","2022-07-08 08:08;dcubed;The fix for this bug has not yet been sync'ed from JDK19.;;;",,,,,,,,,
"""spurious markup"" warnings in snippets when building `docs-reference`",JDK-8278466,5064378,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jjg,jjg,jjg,2021-12-08 16:20,2021-12-15 17:51,2023-10-01 09:57,2021-12-08 18:54,18,,,,,,,,,,,,,18,tools,,0,noreg-doc,,,,,,,,,,,,,,,,"
.../jdk/jdk.ref/open/src/java.compiler/share/classes/javax/tools/JavaFileManager.java:85: warning: spurious markup
 *     // @link substring=""create"" target=""URI#create"" : @link substring=normalize target=""URI#normalize"" : @link substring=getPath target=""URI#getPath"" :
         ^
.../jdk/jdk.ref/open/src/java.compiler/share/classes/javax/tools/StandardJavaFileManager.java:79: warning: spurious markup
 *             // @link substring=FileInputStream target=""java.io.FileInputStream#FileInputStream(File)"" : @link regex=""File\W"" target=""File#File(java.net.URI)"" : @link substring=fileObject target=FileObject :  @link substring=toURI target=""FileObject#toUri()"" :
                 ^
.../jdk/jdk.ref/open/src/java.compiler/share/classes/javax/tools/StandardJavaFileManager.java:90: warning: spurious markup
 *             // @link substring=FileOutputStream target=""java.io.FileOutputStream#FileOutputStream(File)"" : @link regex=""File\W"" target=""File#File(java.net.URI)"" : @link substring=fileObject target=FileObject :  @link substring=toURI target=""FileObject#toUri()"" :
                 ^
3 warnings
",,,,,,,,,,JDK-8278735,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vca3:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,,,"2021-12-08 18:54;roboduke;Changeset: d1706828
Author:    Jonathan Gibbons <jjg@openjdk.org>
Date:      2021-12-09 02:53:52 +0000
URL:       https://git.openjdk.java.net/jdk/commit/d1706828fb6a95ecad2bab4112b2e1a7d3319df8
;;;",,,,,,,,,,,,,,,,,,,,
[test] Serialization WritePrimitive test revised for readFully test fails,JDK-8278463,5064372,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,rriggs,rriggs,rriggs,2021-12-08 13:11,2021-12-15 17:51,2023-10-01 09:57,2021-12-08 15:00,18,,,,,,,,,,,,,18,core-libs,,0,,,,,,,,,,,,,,,,,"The test added to jdk/java/io/Serializable/OldTests/WritePrimitive.java fails with:

Regression test for testing of serialization/deserialization of primitives 

TEST FAILED: java.io.EOFException
	at java.base/java.io.ObjectInputStream$BlockDataInputStream.readByte(ObjectInputStream.java:3376)
	at java.base/java.io.ObjectInputStream$BlockDataInputStream.readUTFChar(ObjectInputStream.java:3768)
	at java.base/java.io.ObjectInputStream$BlockDataInputStream.readUTFBody(ObjectInputStream.java:3678)
	at java.base/java.io.ObjectInputStream$BlockDataInputStream.readUTF(ObjectInputStream.java:3474)
	at java.base/java.io.ObjectInputStream.readUTF(ObjectInputStream.java:1248)
	at WritePrimitive.main(WritePrimitive.java:94)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
	at java.base/java.lang.Thread.run(Thread.java:833)

Bytes read: 68, Input remaining: 136
...",,,,,,,,,,JDK-8278731,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276806,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vc8r:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7e74daa7,,,,,,,,,"2021-12-08 15:00;roboduke;Changeset: 3cec700a
Author:    Roger Riggs <rriggs@openjdk.org>
Date:      2021-12-08 22:59:38 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3cec700a5caa2243772e4b01c40630cb044b76fc
;;;",,,,,,,,,,,,,,,,,,,,
Define jtreg jdk_desktop test group time-based sub-tasks for use by headful testing.,JDK-8278456,5064361,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prr,prr,prr,2021-12-08 11:14,2023-07-10 00:59,2023-10-01 09:57,2021-12-10 13:04,,,,,,,,,,,,,,19,client-libs,,0,jdk11u-sap-interest,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,testbug,,,,,,,,,,,,"test/jdk/TEST.groups defines the jdk_desktop group as a list of more-or-less functional sub-groups. 
Some of these test groups have few tests and/or run in a very short time.
Others, notably jdk_awt may take almost 2 hours to run the headful tests

Whilst *headless* test tasks can be run in parallel on a system, *headful* tests must run sequentially. 

So with a total test execution time of up to 3 hrs this is a lot.

The proposal here is that jdk_desktop will run the same set of tests as before, but it be split into 3 subgroups which are roughly expected to take equal amounts of wall clock time. These sub-groups will reference the existing test groups. 

The primary benefit then is greater throughput when multiple machines are available to aborb the tasks in parallel. This will help us in that way at Oracle and should not affect any existing uses of the test targets since none are removed. 
",,,,,,,,,,JDK-8310278,JDK-8309785,JDK-8309540,JDK-8309535,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8309563,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vc6b:",9223372036854775807,b02,,,,,,,,,,,,,"2021-12-09 09:43;prr;Running the existing desktop group as one single group the wall clock times for running these tests on each platform are
as below number in () is the number of tests run which varies by platform since some tests are platform-specific
and on macOS in particular a lot of AWT tests are excluded (problem listed).

windows : 3h 53m (1258)
linux        : 3h 9m (1197)
mac arm : 2h 45m  (1040)
mac x64 : 2h 50m (1057)

Splitting it the 3 (proposed) groups part1/part2/part3 take

Windows x64   : 1h 21m (462),      58m (481),   1h 33m (315) - total = 3h 52m
Linux x64     : 1h  5m (445),    1h 4m (510),   1h 15m (242) - total = 3h 24m
macOS x64     : 1h  8m (430),    1h 2m (487),      38m (140) - total = 2h 48m
macOS aarch64 : 1h 10m (424),    1h 2m (478),      37m (139) - total = 2h 49m 



So the split saves 2 hours wall clock time (given enough resources) which approximately halves run time
time out reduction from 12hrs to 4hrs also makes a huge difference when ""stuff happens"".
It is now pretty much at the level of the time needed for a previously 100% successful job.

The hardware is ""varied"" but with built-in waits in many tests system performance is not going to make tests run hugely faster.
It just needs a system with ""enough"" CPU/threads/RAM not to get bogged down.
macos group 3 will trend towards the time taken by windows/linux once we can exclude fewer tests there.

The final total is NOT wall clock time it is just for comparison to show that total test time is pretty much the same as if you run them seqeuentially alrthough there's obviously set up over head in the split scheme
;;;","2021-12-10 13:04;roboduke;Changeset: 81c56c70
Author:    Phil Race <prr@openjdk.org>
Date:      2021-12-10 21:02:28 +0000
URL:       https://git.openjdk.java.net/jdk/commit/81c56c700a47c7f1b7855052de17eb88fac84674
;;;","2023-06-16 02:45;goetz;Fix request [17u]

I backport this for parity with 17.0.8-oracle.
No risk, only a test change.
Clean backport. SAP nighlty testing passed;;;","2023-06-16 02:58;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1453
Date: 2023-06-16 09:51:58 +0000;;;",,,,,,,,,,,,,,,,,
timeouts in test  java/time/test/java/time/format/TestZoneTextPrinterParser.java,JDK-8278434,5064336,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,naoto,mbaesken,mbaesken,2021-12-08 08:07,2023-05-26 07:19,2023-10-01 09:57,2022-01-03 18:49,18,19,,,,,,,,,,,,19,core-libs,,0,hgupdate-sync,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,redhat-interest,,,,,,,,,,,"We run into several timeouts on slower machines in our openjdk fastdebug tests in the test java/time/test/java/time/format/TestZoneTextPrinterParser.java .
Timeouts occur on both Linux and Windows.

Stack whne timeout occurs is as follows :

""MainThread"" #26 prio=5 os_prio=0 cpu=701818.96ms elapsed=721.04s tid=0x00007fff80573330 nid=3038682 runnable  [0x00007fff39a6b000]
   java.lang.Thread.State: RUNNABLE
Thread: 0x00007fff80573330  [0x2e5dda] State: _at_safepoint _at_poll_safepoint 0
   JavaThread state: _thread_blocked
	at sun.util.resources.Bundles.findBundleOf(java.base@18.0.0.1-internal/Bundles.java:160)
	at sun.util.resources.Bundles.loadBundleOf(java.base@18.0.0.1-internal/Bundles.java:145)
	at sun.util.resources.Bundles.of(java.base@18.0.0.1-internal/Bundles.java:106)
	at sun.util.resources.LocaleData$1.run(java.base@18.0.0.1-internal/LocaleData.java:185)
	at sun.util.resources.LocaleData$1.run(java.base@18.0.0.1-internal/LocaleData.java:182)
	at java.security.AccessController.executePrivileged(java.base@18.0.0.1-internal/AccessController.java:776)
	at java.security.AccessController.doPrivileged(java.base@18.0.0.1-internal/AccessController.java:318)
	at sun.util.resources.LocaleData.getBundle(java.base@18.0.0.1-internal/LocaleData.java:182)
	at sun.util.resources.LocaleData.getTimeZoneNames(java.base@18.0.0.1-internal/LocaleData.java:113)
	at sun.util.locale.provider.LocaleResources.getTimeZoneNames(java.base@18.0.0.1-internal/LocaleResources.java:280)
	at sun.util.locale.provider.TimeZoneNameProviderImpl.getDisplayNameArray(java.base@18.0.0.1-internal/TimeZoneNameProviderImpl.java:127)
	at sun.util.cldr.CLDRTimeZoneNameProviderImpl.deriveFallbackName(java.base@18.0.0.1-internal/CLDRTimeZoneNameProviderImpl.java:157)
	at sun.util.cldr.CLDRTimeZoneNameProviderImpl.deriveFallbackNames(java.base@18.0.0.1-internal/CLDRTimeZoneNameProviderImpl.java:135)
	at sun.util.cldr.CLDRTimeZoneNameProviderImpl.getDisplayNameArray(java.base@18.0.0.1-internal/CLDRTimeZoneNameProviderImpl.java:111)
	at sun.util.locale.provider.TimeZoneNameProviderImpl.getGenericDisplayName(java.base@18.0.0.1-internal/TimeZoneNameProviderImpl.java:113)
	at sun.util.locale.provider.TimeZoneNameUtility$TimeZoneNameGetter.getName(java.base@18.0.0.1-internal/TimeZoneNameUtility.java:277)
	at sun.util.locale.provider.TimeZoneNameUtility$TimeZoneNameGetter.getObject(java.base@18.0.0.1-internal/TimeZoneNameUtility.java:229)
	at sun.util.locale.provider.TimeZoneNameUtility$TimeZoneNameGetter.getObject(java.base@18.0.0.1-internal/TimeZoneNameUtility.java:215)
	at sun.util.locale.provider.LocaleServiceProviderPool.getLocalizedObjectImpl(java.base@18.0.0.1-internal/LocaleServiceProviderPool.java:275)
	at sun.util.locale.provider.LocaleServiceProviderPool.getLocalizedObject(java.base@18.0.0.1-internal/LocaleServiceProviderPool.java:236)
	at sun.util.locale.provider.TimeZoneNameUtility.retrieveDisplayNamesImpl(java.base@18.0.0.1-internal/TimeZoneNameUtility.java:197)
	at sun.util.locale.provider.TimeZoneNameUtility.retrieveDisplayName(java.base@18.0.0.1-internal/TimeZoneNameUtility.java:150)
	at java.util.TimeZone.getDisplayName(java.base@18.0.0.1-internal/TimeZone.java:402)
	at test.java.time.format.TestZoneTextPrinterParser.test_printText(TestZoneTextPrinterParser.java:89)
	at java.lang.invoke.LambdaForm$DMH/0x0000000801030800.invokeVirtual(java.base@18.0.0.1-internal/LambdaForm$DMH)
	at java.lang.invoke.LambdaForm$MH/0x0000000801038000.invoke(java.base@18.0.0.1-internal/LambdaForm$MH)
	at java.lang.invoke.Invokers$Holder.invokeExact_MT(java.base@18.0.0.1-internal/Invokers$Holder)
	at jdk.internal.reflect.DirectMethodHandleAccessor.invokeImpl(java.base@18.0.0.1-internal/DirectMethodHandleAccessor.java:154)
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(java.base@18.0.0.1-internal/DirectMethodHandleAccessor.java:104)
	at java.lang.reflect.Method.invoke(java.base@18.0.0.1-internal/Method.java:577)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:599)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:174)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:822)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:147)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at org.testng.TestRunner$$Lambda$84/0x000000080102e828.accept(Unknown Source)
	at java.util.ArrayList.forEach(java.base@18.0.0.1-internal/ArrayList.java:1511)
	at org.testng.TestRunner.privateRun(TestRunner.java:764)
	at org.testng.TestRunner.run(TestRunner.java:585)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1218)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1140)
	at org.testng.TestNG.runSuites(TestNG.java:1069)
	at org.testng.TestNG.run(TestNG.java:1037)
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:94)
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:54)
	at java.lang.invoke.LambdaForm$DMH/0x0000000801002000.invokeStatic(java.base@18.0.0.1-internal/LambdaForm$DMH)
	at java.lang.invoke.LambdaForm$MH/0x0000000801003400.invoke(java.base@18.0.0.1-internal/LambdaForm$MH)
	at java.lang.invoke.Invokers$Holder.invokeExact_MT(java.base@18.0.0.1-internal/Invokers$Holder)
	at jdk.internal.reflect.DirectMethodHandleAccessor.invokeImpl(java.base@18.0.0.1-internal/DirectMethodHandleAccessor.java:155)
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(java.base@18.0.0.1-internal/DirectMethodHandleAccessor.java:104)
	at java.lang.reflect.Method.invoke(java.base@18.0.0.1-internal/Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.lang.Thread.run(java.base@18.0.0.1-internal/Thread.java:833)

The occuring timeouts might be related to the change https://bugs.openjdk.java.net/browse/JDK-8275721   touching
src/java.base/share/classes/sun/util/cldr/CLDRTimeZoneNameProviderImpl.java , see  https://github.com/openjdk/jdk/commit/543d1a8cf41d32dca161c9d8041f133a71bf0ecb  .
At least after the change the timeouts occur MUCH more frequently.
",,,,,,,,,,JDK-8279992,JDK-8280638,JDK-8304351,JDK-8304625,JDK-8305381,JDK-8304352,JDK-8308879,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275721,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,linux,windows,,,,,"0|i2vc0r:",9223372036854775807,b04,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@a9a7756,,,,,,,Verified,,"2021-12-08 09:42;naoto;The fix to JDK-8275721 changed the lookup order of time zone names bundle. That could have led to the slower performance.;;;","2021-12-09 09:20;naoto;Further info from the submitter. Two JCK tests fail as well on some configurations:
---
we see that in our automated test infrastructure these two JCK18 tests fail since 8. December. 

api/java_text/DateFormatSymbols/ZoneStrings.html
api/java_text/SimpleDateFormat/Ctor.html

api/java_text/DateFormatSymbols/ZoneStrings.html throws an OutOfMemoryError and timeouts after 40 minutes in our testinfrastructure.

When I run this test on the commandline it passes without issues. It might be that it only happens when the test are executed in agent mode with one single VM.
I could reproduce the issues when I reduce the heap o the VM. 

Without -Xmx param the the VM passes the test in 2,5 minutes. 
> java -cp classes javasoft.sqe.tests.api.java.text.DateFormatSymbols.ZoneStringsTests
getZoneStrings2000: Passed. test cases: 1017; all passed
getZoneStrings2001: Passed. test cases: 1017; all passed
getZoneStrings2002: Passed. test cases: 1017; all passed
setZoneStrings2000: Passed. test cases: 1017; all passed
setZoneStrings2001: Passed. test cases: 3051; all passed
setZoneStrings2002: Passed. test cases: 3051; all passed
STATUS:Passed.test cases: 6; all passed

It took 3 Minutes with -Xmx500m...

When I reduced to 100m it did throw a OOM and seemed to hang... I killed it after 20 minutes...
> java -Xmx100m -cp classes javasoft.sqe.tests.api.java.text.DateFormatSymbols.ZoneStringsTests
java.lang.OutOfMemoryError: Java heap space
        at java.base/java.util.regex.Pattern.compile(Pattern.java:1763)
        at java.base/java.util.regex.Pattern.<init>(Pattern.java:1440)
        at java.base/java.util.regex.Pattern.compile(Pattern.java:1079)
        at java.base/java.lang.String.replaceAll(String.java:2935)
        at java.base/sun.util.cldr.CLDRTimeZoneNameProviderImpl.regionFormatFallback(CLDRTimeZoneNameProviderImpl.java:242)
        at java.base/sun.util.cldr.CLDRTimeZoneNameProviderImpl.deriveFallbackName(CLDRTimeZoneNameProviderImpl.java:166)
        at java.base/sun.util.cldr.CLDRTimeZoneNameProviderImpl.deriveFallbackNames(CLDRTimeZoneNameProviderImpl.java:135)
        at java.base/sun.util.cldr.CLDRTimeZoneNameProviderImpl.getZoneStrings(CLDRTimeZoneNameProviderImpl.java:125)
        at java.base/sun.util.locale.provider.TimeZoneNameUtility.loadZoneStrings(TimeZoneNameUtility.java:86)
        at java.base/sun.util.locale.provider.TimeZoneNameUtility.getZoneStrings(TimeZoneNameUtility.java:72)
        at java.base/java.text.DateFormatSymbols.getZoneStringsImpl(DateFormatSymbols.java:850)
        at java.base/java.text.DateFormatSymbols.getZoneStringsWrapper(DateFormatSymbols.java:844)
        at java.base/java.text.DateFormatSymbols.hashCode(DateFormatSymbols.java:667)
        at java.base/java.lang.Object.toString(Object.java:256)
        at javasoft.sqe.jck.lib.TestInvoker$3.next(TestInvoker.java:207)
        at javasoft.sqe.jck.lib.TestInvoker$3.next(TestInvoker.java:198)
        at javasoft.sqe.jck.lib.TestInvoker.executeTest(TestInvoker.java:286)
        at javasoft.sqe.jck.lib.TestInvoker.executeTest(TestInvoker.java:218)
        at javasoft.sqe.jck.lib.TestInvoker.executeTest(TestInvoker.java:274)
        at javasoft.sqe.tests.api.java.text.DateFormatSymbols.ZoneStringsTests$Invoker.executeWithoutExceptions(ZoneStringsTests.java:44)
        at javasoft.sqe.tests.api.java.text.DateFormatSymbols.ZoneStringsTests.getZoneStrings2000(ZoneStringsTests.java:107)
        at java.base/java.lang.invoke.DirectMethodHandle$Holder.invokeVirtual(DirectMethodHandle$Holder)
        at java.base/java.lang.invoke.LambdaForm$MH/0x0000000801002400.invoke(LambdaForm$MH)
        at java.base/java.lang.invoke.Invokers$Holder.invokeExact_MT(Invokers$Holder)
        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invokeImpl(DirectMethodHandleAccessor.java:154)
        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
        at java.base/java.lang.reflect.Method.invoke(Method.java:577)
        at javasoft.sqe.javatest.lib.MultiTest.invokeTestCase(MultiTest.java:406)
        at javasoft.sqe.javatest.lib.MultiTest.run(MultiTest.java:195)
        at javasoft.sqe.javatest.lib.MultiTest.run(MultiTest.java:127)
        at javasoft.sqe.tests.api.java.text.DateFormatSymbols.ZoneStringsTests.main(ZoneStringsTests.java:93)

With -Xmx200m the test passed after 45 minutes...
> java -Xmx200m -cp classes javasoft.sqe.tests.api.java.text.DateFormatSymbols.ZoneStringsTests
getZoneStrings2000: Passed. test cases: 1017; all passed
getZoneStrings2001: Passed. test cases: 1017; all passed
getZoneStrings2002: Passed. test cases: 1017; all passed
setZoneStrings2000: Passed. test cases: 1017; all passed
setZoneStrings2001: Passed. test cases: 3051; all passed
setZoneStrings2002: Passed. test cases: 3051; all passed
STATUS:Passed.test cases: 6; all passed

To me it looks like the test now consumes substantial more memory... Probably there is a memory leak? 
I am not sure if it is really related to the change, but that is the only change on December 7 that seems to be related to this problems for me.;;;","2021-12-10 16:45;naoto;The main cause of the performance degradation seems to be two folds; one is to fallback not only its immediate parent, but up until Locale.ROOT, the other part is due to reordering of fallback mechanisms in `CLDRTimeZoneNameProviderImpl.deriveFallbackNames`. The degradation coming from the former cause cannot be avoided (otherwise the original UTC bug comes back), but reordering can be changed not to prioritize `regionFormatFallback` over to `COMPAT`'s names.
BTW as to the JCK tests, I am not sure `-Xmx=100m` would be an appropriate value for the runtime these days, thus seeing OOME would be not so surprising to me.
My plan for this issue will be to address the cause #2 of the degradation, to lower the priority for `regionFormatFallback`, as `COMPAT`'s names would be more appropriate, if available.;;;","2022-01-03 18:49;roboduke;Changeset: 8dc4437d
Author:    Naoto Sato <naoto@openjdk.org>
Date:      2022-01-04 02:48:23 +0000
URL:       https://git.openjdk.java.net/jdk/commit/8dc4437d002db5d025b47f48e7420e3bae55bdec
;;;","2022-01-13 13:57;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18/pull/100
Date: 2022-01-13 21:52:59 +0000;;;","2022-01-17 17:57;roboduke;Changeset: 064ee6ae
Author:    Naoto Sato <naoto@openjdk.org>
Date:      2022-01-13 22:05:52 +0000
URL:       https://git.openjdk.java.net/jdk/commit/064ee6ae135366d59e9485b449a41d2b55811bbe
;;;","2022-01-25 04:29;roboduke;Changeset: 064ee6ae
Author:    Naoto Sato <naoto@openjdk.org>
Date:      2022-01-13 22:05:52 +0000
URL:       https://git.openjdk.java.net/jdk18u/commit/064ee6ae135366d59e9485b449a41d2b55811bbe
;;;","2023-03-29 01:28;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1228
Date: 2023-03-29 08:23:21 +0000;;;","2023-03-30 05:34;goetz;Fix request [17u]

I backport this for parity with 17.0.8-oracle.
Medium risk, important component. Part of several changes this has to go along with.
Clean backport.
Test passes. SAP nightly testing passed.;;;","2023-05-24 07:52;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1894
Date: 2023-05-24 14:44:33 +0000;;;","2023-05-24 08:00;lucy;Fix request [11u] 

This is a backport for parity with 11.0.20-oracle. 

Did not apply cleanly. Conflicts in the copyright year and in the list of bugs.
Tests (GHA and SAP internal) pass, final review received.;;;",,,,,,,,,,
Several tests use terminally deprecated System.runFinalization method,JDK-8278430,5064332,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,hmeda,kcr,kcr,2021-12-08 07:25,2022-04-26 08:09,2023-10-01 09:57,2022-04-22 10:47,jfx18,,,,,,,,,,,,,jfx19,javafx,,0,noreg-self,sn_116,test_sprint,testbug,,,,,,,,,,,,,"The System.runFinalization and Runtime.runFinalization methods are terminally deprecated by JEP 421 (JDK-8274609). Several JavaFX tests call System.runFinalization method when testing for memory leaks.

To see this, run the following:

$ gradle --info -PLINT=removal test

See the attached log file for the list of calls to runFinalization.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278426,JDK-8274609,JDK-8276447,JDK-8285502,,,,,,,,,,,,,,,,,,,,,,"2021-12-08 07:24;kcr;removal.log;https://bugs.openjdk.org/secure/attachment/97305/removal.log",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbzv:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1d1c7815,,,,,,,,,"2021-12-08 07:33;kcr; Eventually, we need to remove all calls to runFinalization. It is likely that many, perhaps most, of these calls can be safely removed now without making the tests more unstable. However, it is possible that some of the tests are checking objects outside JavaFX (e.g., in Swing or AWT) that still override the finalize method and won't be reclaimed until finalize is called. We need to both examine the tests to see whether such is likely, and then run the test in a loop many times before we consider removing the calls. For those calls we don't remove, we need to add a `SuppressWarnings` annotation.
;;;","2022-04-21 08:07;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx/pull/781
Date: 2022-04-21 15:03:04 +0000;;;","2022-04-22 10:49;dukebot;Changeset: 166d5c2f
Author:    Hima Bindu Meda <hmeda@openjdk.org>
Committer: Kevin Rushforth <kcr@openjdk.org>
Date:      2022-04-22 17:47:23 +0000
URL:       https://git.openjdk.java.net/jfx/commit/166d5c2f248aec2117c0023194bfe480bf110eb5
;;;",,,,,,,,,,,,,,,,,,
ObjectInputStream.readFully range check incorrect,JDK-8278428,5064329,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,rriggs,rriggs,rriggs,2021-12-08 06:50,2022-01-21 09:57,2023-10-01 09:57,2021-12-08 12:39,,,,,,,,,,,,,,18,core-libs,,0,regression,,,,,,,,,,,,,,,,"ObjectInputStream.readFully(byte[], off, len) throws IndexOutOfBoundsException when passed the length is less than the offset.
It is treating the length as the toOffset.
The replacement of the range check should have used checkFromIndexSize instead of checkFromToIndex.

java.lang.IndexOutOfBoundsException: Range [4, 0) out of bounds for length 10
	at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:100)
	at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckFromToIndex(Preconditions.java:112)
	at java.base/jdk.internal.util.Preconditions.checkFromToIndex(Preconditions.java:349)
	at java.base/java.util.Objects.checkFromToIndex(Objects.java:385)
	at java.base/java.io.ObjectInputStream.readFully(ObjectInputStream.java:1207)
	at javasoft.sqe.tests.api.java.io.Serialization.ObjectInputStream.ReadFullyTests.ReadFully0007(ReadFullyTests.java:276)
	at javasoft.sqe.tests.api.java.io.Serialization.ObjectInputStream.ReadFullyTests.run(ReadFullyTests.java:66)",,,,,,,,,,JDK-8278724,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8279988,,,,,,,,,,,,,,,JDK-8276806,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbz7:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7e74daa7,,,,,,,Verified,,"2021-12-08 12:39;roboduke;Changeset: 8e8fadf2
Author:    Roger Riggs <rriggs@openjdk.org>
Date:      2021-12-08 20:37:41 +0000
URL:       https://git.openjdk.java.net/jdk/commit/8e8fadf2d4e45f53286dd8424d95f733a12cd1a0
;;;",,,,,,,,,,,,,,,,,,,,
ImagePool uses terminally deprecated System.runFinalization method,JDK-8278426,5064327,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,lkostyra,kcr,kcr,2021-12-08 06:40,2022-11-29 06:10,2023-10-01 09:57,2022-10-19 23:21,jfx18,,,,,,,,,,,,,jfx20,javafx,,0,noreg-cleanup,sn_129,,,,,,,,,,,,,,,"The System.runFinalization and Runtime.runFinalization methods are terminally deprecated by JEP 421 (JDK-8274609). ImagePool.pruneCache calls System.runFinalization which results in a ""removal"" warning.

$ gradle --info -PLINT=removal sdk
...
modules/javafx.graphics/src/main/java/com/sun/scenario/effect/impl/ImagePool.java:259: warning: [removal] runFinalization() in System has been deprecated and marked for removal
        System.runFinalization();
              ^
modules/javafx.graphics/src/main/java/com/sun/scenario/effect/impl/ImagePool.java:261: warning: [removal] runFinalization() in System has been deprecated and marked for removal
        System.runFinalization();
              ^

The only purpose of calling runFinalization was to cause finalize to be called on JavaFX images. Since the JavaFX runtime no longer uses finalization anywhere, the calls to runFinalization are unnecessary and should be removed.

NOTE: several tests also call System.runFinalization; I will file a separate bug for the tests.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276447,JDK-8274609,,,,,,,,,,,,,,JDK-8278430,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbyr:",9223372036854775807,b05,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4143e3f7,,,,,,,,,"2022-10-19 08:01;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jfx/pull/918
Date: 2022-10-17 14:02:52 +0000;;;","2022-10-19 23:21;dukebot;Changeset: 91e1a278
Author:    Lukasz Kostyra <lukasz.kostyra@oracle.com>
Committer: Ambarish Rapte <arapte@openjdk.org>
Date:      2022-10-20 06:18:39 +0000
URL:       https://git.openjdk.org/jfx/commit/91e1a278ac0087d7fa767342824023488e652761
;;;",,,,,,,,,,,,,,,,,,,
TreeTableCellStartEditTest uses deprecated TreeTableCell methods,JDK-8278425,5064326,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mhanl,kcr,kcr,2021-12-08 06:19,2021-12-21 05:03,2023-10-01 09:57,2021-12-10 05:46,jfx18,,,,,,,,,,,,,jfx18,javafx,,0,noreg-self,testbug,,,,,,,,,,,,,,,"The following calls to deprecated methods (see JDK-8270314) were added as part of the fix to JDK-8188026:

modules/javafx.controls/src/test/java/test/javafx/scene/control/cell/TreeTableCellStartEditTest.java:
   109          treeTableCell.updateTreeTableColumn((TreeTableColumn) treeTableColumn);
   110          treeTableCell.updateTreeTableRow(treeTableRow);

They should be replaced with calls to updateTableColumn and updateTableRow, respectively.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8270314,JDK-8188026,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbyj:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@67282485,,,,,,,,,"2021-12-08 06:48;fastegal;good catch :) 

Looks like a subtle merge issue, though: the PR for the startEdit bug started on 8. July (and was integrated in Oct) while the rename/deprecation started on 13. July (and was integrated on 20. July) .. wondering if we could have done anything during the longer review to prevent this?;;;","2021-12-08 06:56;kcr;To see the warning:

$ gradle --info -PLINT=deprecation :controls:test
...
modules/javafx.controls/src/test/java/test/javafx/scene/control/cell/TreeTableCellStartEditTest.java:109: warning: [deprecation] updateTreeTableColumn(TreeTableColumn<S,T>) in TreeTableCell has been deprecated
        treeTableCell.updateTreeTableColumn((TreeTableColumn) treeTableColumn);
                     ^
  where S,T are type-variables:
    S extends Object declared in class TreeTableCell
    T extends Object declared in class TreeTableCell
modules/javafx.controls/src/test/java/test/javafx/scene/control/cell/TreeTableCellStartEditTest.java:110: warning: [deprecation] updateTreeTableRow(TreeTableRow<S>) in TreeTableCell has been deprecated
        treeTableCell.updateTreeTableRow(treeTableRow);
                     ^
  where S is a type-variable:
    S extends Object declared in class TreeTableCell
;;;","2021-12-08 07:00;kcr;> Looks like a subtle merge issue

Yes, it looks like you are right.

> wondering if we could have done anything during the longer review to prevent this? 

Hard to say. One thing to note is that this is typically only seen with ""gradle -PLINT=deprecation"", which I run only occasionally, although an IDE would show it (probably not in this case, though, given the subtle merge issue).;;;","2021-12-09 16:22;mhanl;Yeah, I can confirm that it was a subtle merge issue. I usually don't merge the master branch into a pending PR, therefore my IDE could not notice it either.;;;","2021-12-10 05:29;kcr;Thanks for confirming.;;;","2021-12-10 05:46;roboduke;Changeset: 79151937
Author:    Marius Hanl <mhanl@openjdk.org>
Committer: Kevin Rushforth <kcr@openjdk.org>
Date:      2021-12-10 13:45:59 +0000
URL:       https://git.openjdk.java.net/jfx/commit/79151937b68ff4684f09b44979da67cf6c9ade0b
;;;",,,,,,,,,,,,,,,
Replace use of deprecated single string variant of Runtime.exec method,JDK-8278422,5064323,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,lkostyra,kcr,kcr,2021-12-08 06:07,2023-05-23 11:09,2023-10-01 09:57,2023-05-10 01:57,jfx18,,,,,,,,,,,,,jfx21,javafx,,0,noreg-cleanup,sn_143,,,,,,,,,,,,,,,"JavaFX uses the recently-deprecated (see JDK-8276408) single string variant of the Runtime::exec method in the following places:

modules/javafx.graphics/src/main/java/com/sun/javafx/application/HostServicesDelegate.java:
   137                  if (osName.startsWith(""Mac OS"")) {
   138                      Runtime.getRuntime().exec(
   139                              ""open "" + uri);
   140                  } else if (osName.startsWith(""Windows"")) {
   141                      Runtime.getRuntime().exec(
   142                              ""rundll32 url.dll,FileProtocolHandler "" + uri);

We should replace these calls with Runtime::exec(String[])",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276408,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbxv:",9223372036854775807,b17,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1d1c7815,,,,,,,,,"2021-12-08 07:02;kcr;To see this, run:

$ gradle --info -PLINT=deprecation sdk
...
modules/javafx.graphics/src/main/java/com/sun/javafx/application/HostServicesDelegate.java:138: warning: [deprecation] exec(String) in Runtime has been deprecated
                    Runtime.getRuntime().exec(
                                        ^
modules/javafx.graphics/src/main/java/com/sun/javafx/application/HostServicesDelegate.java:141: warning: [deprecation] exec(String) in Runtime has been deprecated
                    Runtime.getRuntime().exec(
                                        ^
;;;","2023-05-09 07:18;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jfx/pull/1130
Date: 2023-05-09 14:12:09 +0000;;;","2023-05-10 01:57;dukebot;Changeset: d8da8d8c
Author:    Lukasz Kostyra <lkostyra@openjdk.org>
Committer: Nir Lisker <nlisker@openjdk.org>
Date:      2023-05-10 08:55:49 +0000
URL:       https://git.openjdk.org/jfx/commit/d8da8d8c9d9945196e90adbc7343c5b528905623
;;;",,,,,,,,,,,,,,,,,,
"JFR jcmd option contract ""This value cannot be changed once JFR has been initialized"" is not enforced",JDK-8278419,5064319,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,mgronlun,mgronlun,mgronlun,2021-12-08 05:54,2022-02-01 12:30,2023-10-01 09:57,2021-12-09 01:25,18,,,,,,,,,,,,,18,hotspot,,0,,,,,,,,,,,,,,,,,"Several options are exposed via the jcmd JFR.configure command, and their descriptions make it quite clear that ""This value cannot be changed once JFR has been initialized"".
IIRC, it used to be the case that these values were prevented from being set after initialization, but somehow the proper enforcements are no longer in place.

For example:

The option ""stackdepth="" is used to configure the default depth for capturing stacktraces. The option is available on the command-line, like -XX:FlightRecorderOptions:stackdepth=64.

The option is also exposed via jcmd, via the JFR.configure command, for example:

jcmd <pid> JFR.configure stackdepth=64

The contract specified for the option when using jcmd JFR.configure during runtime is as follows:

Option:
stackdepth

Description:
(Optional) Stack depth for stack traces. Setting this value greater than the default of 64 may cause a performance degradation. This value cannot be changed once JFR has been initialized. (LONG, 64));

Not enforcing this condition is problematic because the stacktrace buffers are allocated with the value specified on startup, but the stacktrace capture code will use the current depth value.",,,,,,,,,,JDK-8278737,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbwz:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,Verified,,"2021-12-09 01:25;roboduke;Changeset: 1ea766db
Author:    Markus Grönlund <mgronlun@openjdk.org>
Date:      2021-12-09 09:23:39 +0000
URL:       https://git.openjdk.java.net/jdk/commit/1ea766db5519f03e36fc5b0c446cf34b172bb349
;;;",,,,,,,,,,,,,,,,,,,,
Crash during execution of ClassInitBarrier test,JDK-8278416,5064316,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,snazarki,snazarki,snazarki,2021-12-08 05:34,2021-12-20 02:22,2023-10-01 09:57,2021-12-10 04:38,13.0.10,,,,,,,,,,,,,13.0.10,hotspot,,0,jdk13u-fix-request,jdk13u-fix-yes,oracle-triage-11,oracle-triage-18,,,,,,,,,,,,,The crash is caused by missing aarch64 implementation of JDK-8227260 (JNI upcalls should bypass class initialization barrier in c2i adapter). It was not implemented in time due to lack of link between 8227260 and 8223173 (Implement fast class initialization checks on AARCH64).,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8227260,JDK-8223173,,,,,,,,,"2021-12-08 05:44;snazarki;hs_err_pid8573.log;https://bugs.openjdk.org/secure/attachment/97299/hs_err_pid8573.log",,,,,,,,arm,,,,,,,,,,,,,linux,,,,,,"0|i2vbwb:",9223372036854775807,b04,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-12-09 02:39;dlong;ILW copied from JDK-8227260:
Revised ILW = crash / hang (H); affects JNI upcalls to methods in not-yet-initialized classes with JIT-compiled code (M); disable compilation (M) = HMM = P2 ;;;","2021-12-10 04:38;roboduke;Changeset: b5225403
Author:    Sergey Nazarkin <snazarki@openjdk.org>
Committer: Yuri Nesterenko <yan@openjdk.org>
Date:      2021-12-10 12:36:52 +0000
URL:       https://git.openjdk.java.net/jdk13u-dev/commit/b52254032483a38af83c37a18273fa9e794c0794
;;;","2021-12-20 02:22;roboduke;Changeset: b5225403
Author:    Sergey Nazarkin <snazarki@openjdk.org>
Committer: Yuri Nesterenko <yan@openjdk.org>
Date:      2021-12-10 12:36:52 +0000
URL:       https://git.openjdk.java.net/jdk13u/commit/b52254032483a38af83c37a18273fa9e794c0794
;;;",,,,,,,,,,,,,,,,,,
"[TESTBUG] vmTestbase/nsk/stress/stack/stack018.java fails with ""java.lang.Error: TEST_RFE""",JDK-8278415,5064315,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,eastigeevich,eastigeevich,eastigeevich,2021-12-08 05:28,2021-12-15 17:33,2023-10-01 09:57,2021-12-10 10:28,18,,,,,,,,,,,,,19,hotspot,,0,,,,,,,,,,,,,,,,,"Test 'vmTestbase/nsk/stress/stack/stack018.java' fails with errors ""Thread: 1/10: java.lang.Error: TEST_RFE: try deeper invocations!"" on the fastdebug version on Amazon Linux 2 (AArch64/Graviton2).

The test measures a number of recursive invocations until stack overflow. It measures the maximal recursion depth until the stack overflows. It starts from 100. This values is enough to cause stack overflow on the fastdebug version. This results maxDepth not to be set and to be 0.

Threads run after that don't have recursive calls and don't have stack overflow.  They fail with ""Thread: 1/10: java.lang.Error: TEST_RFE: try deeper invocations!"".",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,linux,,,,,,"0|i2vbw3:",9223372036854775807,b02,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-10 10:28;roboduke;Changeset: afd065b3
Author:    Evgeny Astigeevich <eastig@amazon.com>
Committer: Paul Hohensee <phh@openjdk.org>
Date:      2021-12-10 18:27:36 +0000
URL:       https://git.openjdk.java.net/jdk/commit/afd065b3684f7b87563961c2b7a6ee6a354dbdf9
;;;",,,,,,,,,,,,,,,,,,,,
C2 crash when allocating array of size too large,JDK-8278413,5064312,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,roland,roland,roland,2021-12-08 04:45,2022-08-15 08:47,2023-10-01 09:57,2021-12-20 01:43,18,,,,,,,,,,,,,18,hotspot,,0,c2,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,,"Following test case:

    private static int test1() {
        int length = Integer.MAX_VALUE;
        try {
            array = new long[length];
        } catch (OutOfMemoryError outOfMemoryError) {
            barrier = 0x42;
            length = field;
        }
        return length;
    }

causes c2 crash.",,,,,,,,,,JDK-8279105,JDK-8279741,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8292301,,,,,,,,,,,,,,,JDK-8279062,JDK-8279204,JDK-8279125,JDK-8279219,JDK-8279021,,,,,,"2021-12-09 02:17;roland;TestFailedAllocationBadGraph.java;https://bugs.openjdk.org/secure/attachment/97311/TestFailedAllocationBadGraph.java",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbvf:",9223372036854775807,b29,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-12-09 00:03;chagedorn;ILW = C2 crash, only edge case with huge arrays, disable compilation of affected method = HLM = P3;;;","2021-12-09 00:08;chagedorn;Hi [~roland], what command line did you use to reproduce this?;;;","2021-12-09 02:17;roland;The error I get is:
#  Internal Error (/home/roland/jdk-jdk/src/hotspot/share/opto/loopnode.cpp:5779), pid=353662, tid=353677
#  assert(real_LCA != __null) failed: must always find an LCA
;;;","2021-12-09 02:18;roland;[~chagedorn] I attached the jtreg test I'm using (with the actual command line).;;;","2021-12-09 03:28;chagedorn;Thanks Roland! Looks like the debug code for printing the wrong LCA is not correct and needs an update, too.;;;","2021-12-20 01:43;roboduke;Changeset: deaf75a5
Author:    Roland Westrelin <roland@openjdk.org>
Date:      2021-12-20 09:41:56 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/deaf75a58587f80046204de7559ff50b3b770bed
;;;",,,,,,,,,,,,,,,
"Implement UseHeavyMonitors consistently, s390 port",JDK-8278411,5064309,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,amitkumar,rkennke,rkennke,2021-12-08 04:17,2023-05-22 00:53,2023-10-01 09:57,2023-05-16 08:27,18,,,,,,,,,,,,,21,hotspot,,0,oraclejdk-na,,,,,,,,,,,,,,,,"In JDK-8276901 I implemented the flag UseHeavyMonitors consistently, however I left out the s390 port because I have no access to such hardware.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276901,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,s390x,,,,,,,,,,,,,generic,,,,,,"0|i2vbur:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-08 18:05;dholmes;Note some issues have been found with JDK-8276901 post integration.;;;","2023-05-15 01:33;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/13978
Date: 2023-05-15 08:25:19 +0000;;;","2023-05-16 08:27;dukebot;Changeset: 41ee125a
Author:    Amit Kumar <amitkumar@openjdk.org>
Committer: Martin Doerr <mdoerr@openjdk.org>
Date:      2023-05-16 15:25:19 +0000
URL:       https://git.openjdk.org/jdk/commit/41ee125a0f6cf17c20d148bf2c06db1707e4d889
;;;",,,,,,,,,,,,,,,,,,
SuspendibleThreadSet::_suspend_all should be volatile/atomic,JDK-8278389,5064284,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,tschatzl,kbarrett,kbarrett,2021-12-07 23:20,2022-08-08 08:31,2023-10-01 09:57,2021-12-16 04:30,11,17,18,,,,,,,,,,,18,hotspot,,0,gc-pending-review,jdk17u-fix-request,jdk17u-fix-yes,redhat-interest,,,,,,,,,,,,,"SuspendibleThreadSet::should_yield() just returns the value of the _suspend_all flag, which is a simple static variable. That variable is set under a lock, but possibly read concurrently by other threads without any locking.

[For considerations of backporting] This is *probably* effectively harmless, as any loops involving should_yield checks probably won't have the check hoisted out of the loop due to sufficiently opaque loop bodies.
",,,,,,,,,,JDK-8278933,JDK-8280446,JDK-8279726,JDK-8292050,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278475,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbp7:",9223372036854775807,b29,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-12-16 04:30;roboduke;Changeset: aec1b039
Author:    Thomas Schatzl <tschatzl@openjdk.org>
Date:      2021-12-16 12:29:57 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/aec1b039b35b73db17c943cdd86949a92e64fcb6
;;;","2021-12-20 02:03;shade;I still think it would be safer to backport, rather than hope all uses of should_yield are safe. I think it might affect all GCs, since should_yield is used from shared strdedup code (although it is hard to proactively come up with a scenario where how it would fail).;;;","2022-01-04 06:05;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/54
Date: 2022-01-04 14:00:26 +0000
;;;","2022-01-18 00:33;shade;Fix Request (17u)

This fortifies GC code in face of concurrent suspends. G1, Shenandoah, Z (?) might be affected by native compilers hoisting unprotected reads out of the loop. Applies cleanly.;;;",,,,,,,,,,,,,,,,,
Bytecodes::result_type() for arraylength returns T_VOID instead of T_INT,JDK-8278384,5064277,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,hseigel,dlong,dlong,2021-12-07 20:48,2022-01-10 07:03,2023-10-01 09:57,2021-12-17 07:12,11,17,18,8,,,,,,,,,,19,hotspot,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jdk18u-fix-request,jdk18u-fix-SQE-OK,jdk18u-fix-yes,noreg-hard,redhat-interest,,,,,,,,"Mostly this is harmless, because we have workarounds in the code like the following:

    case Bytecodes::_arraylength:
      // The return type of arraylength is wrong in the bytecodes table (T_VOID).
      stack->pop(1);
      stack->push(bci, T_INT);

however, I did get a crash in compiler/c1/CanonicalizeArrayLength.java when running with -XX:+DeoptimizeALot -XX:+VerifyStack because of this problem.",,,,,,,,,,JDK-8279015,JDK-8279697,JDK-8279696,JDK-8279006,JDK-8279691,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbnn:",9223372036854775807,b03,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-17 07:12;roboduke;Changeset: 769f14db
Author:    Harold Seigel <hseigel@openjdk.org>
Date:      2021-12-17 15:11:16 +0000
URL:       https://git.openjdk.java.net/jdk/commit/769f14db847813f5a3601e9ec21e6cadbd99ee96
;;;","2021-12-20 05:56;hseigel;Fix Request (18u)
This bug could potentially cause unexpected and intermittent failures that would be difficult to find.  The fix is a small change to correctly specify the return type of the arraylength bytecode.  The patch applied cleanly and was tested by running Mach tiers 1-2 on Linux, Mac OS, Solaris, and Windows and Mach5 tiers 3-5 on Linux x64.;;;","2021-12-20 13:16;zgu;Fix Request (17u)

A clean backport for parity with Oracle 17.0.3. 

It fixed a potential hard to find bug.
;;;","2021-12-20 13:20;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/16
Date: 2021-12-20 21:15:16 +0000
;;;","2021-12-21 23:22;shade;Harold, 18u would not open for a while now, did you mean to push it to openjdk/jdk18?;;;","2021-12-22 06:07;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk11u-dev/pull/730
Date: 2021-12-22 14:01:49 +0000
;;;","2021-12-22 06:27;zgu;Fix Request (11u)

Backport for parity with Oracle 11.0.15. It fixed a potential hard to find bug.

The original patch does not apply cleanly, 11u patch has been reviewed by @shade.;;;","2022-01-10 05:30;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18u/pull/4
Date: 2022-01-10 13:25:05 +0000;;;",,,,,,,,,,,,,
[GCC 11] Address::make_raw() does not initialize rspec,JDK-8278381,5064272,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,phh,phh,phh,2021-12-07 18:21,2022-03-29 09:57,2023-10-01 09:57,2021-12-10 09:53,18,,,,,,,,,,,,,19,hotspot,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk15u-fix-request,jdk15u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jdk18u-fix-request,jdk18u-fix-SQE-OK-next,jdk18u-fix-yes,,,,,,,,"Filed on behalf of Dan Lutker, lutkerd@amazon.com.

In assembler_x86.cpp and assembler_arm_32.cpp, Address::make_raw() does not initialize rspec. Fix is to initialize it to RelocationHolder::none.",,,,,,,,,,JDK-8281596,JDK-8281277,JDK-8281118,JDK-8281598,JDK-8281461,JDK-8283885,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86,,,,,,,,,,,,,,,,,,,"0|i2vbmj:",9223372036854775807,b02,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-10 09:53;roboduke;Changeset: 4f594e6a
Author:    Dan Lutker <lutkerd@amazon.com>
Committer: Paul Hohensee <phh@openjdk.org>
Date:      2021-12-10 17:52:54 +0000
URL:       https://git.openjdk.java.net/jdk/commit/4f594e6a28ad85d46d3252fb960f1c116f414899
;;;","2022-02-01 09:26;phh;Fix Request (17u).

Trivial gcc 11 compatibility patch, no semantic effect, applies cleanly.
;;;","2022-02-01 09:26;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/141
Date: 2022-02-01 17:20:54 +0000;;;","2022-02-01 14:08;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/804
Date: 2022-02-01 22:01:30 +0000;;;","2022-02-02 05:25;phh;Fix Request (11u).

Trivial gcc 11 compatibility patch, no semantic effect, applies cleanly.;;;","2022-02-02 14:20;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk15u-dev/pull/169
Date: 2022-02-02 22:06:08 +0000;;;","2022-02-04 06:30;phh;Fix Request (15u).

Trivial gcc 11 compatibility patch, no semantic effect, applies cleanly. ;;;","2022-03-24 07:46;hseigel;Fix Request (18u)

This fix initializes uninitialized data.  It's a very small low-risk fix.  The patch applied cleanly and was tested with Mach5 tiers 1 and 2 on Linux, Mac OS, and Windows.
;;;","2022-03-29 09:54;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18u/pull/77
Date: 2022-03-29 16:46:28 +0000;;;",,,,,,,,,,,,
Zero VM is broken due to UseRTMForStackLocks was not declared after JDK-8276901,JDK-8278379,5064268,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jiefu,jiefu,jiefu,2021-12-07 16:02,2021-12-13 19:20,2023-10-01 09:57,2021-12-07 22:45,18,,,,,,,,,,,,,18,hotspot,,0,tencent-interest,,,,,,,,,,,,,,,,"

```
/home/jvm/jdk/src/hotspot/share/runtime/arguments.cpp: In static member function 'static bool Arguments::check_vm_args_consistency()':
/home/jvm/jdk/src/hotspot/share/runtime/arguments.cpp:2030:27: error: 'UseRTMForStackLocks' was not declared in this scope
   if (UseHeavyMonitors && UseRTMForStackLocks) {
                           ^~~~~~~~~~~~~~~~~~~
```",,,,,,,,,,JDK-8278702,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276901,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbln:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-07 22:45;roboduke;Changeset: 5266e7d7
Author:    Jie Fu <jiefu@openjdk.org>
Date:      2021-12-08 06:45:01 +0000
URL:       https://git.openjdk.java.net/jdk/commit/5266e7d780efee11309260ce96ae0c5b4836effb
;;;",,,,,,,,,,,,,,,,,,,,
JavacTrees.searchMethod finds incorrect match,JDK-8278373,5064258,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jlahoda,jjg,jjg,2021-12-07 13:05,2022-01-24 23:56,2023-10-01 09:57,2022-01-10 00:34,,,,,,,,,,,,,,18,tools,,0,release-note=yes,,,,,,,,,,,,,,,,"In javadoc, in either a snippet or a raw `@link`, attempts to link to
    PrintStream#println(String)
link to 
    PrintStream#println(Object)
instead.

Demo source and output attached.
",,,,,,,,,,JDK-8280297,JDK-8279778,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8279474,,,,,,,,,,,,,,,,,,,,,,,,,"2021-12-07 13:06;jjg;LinkDemo.html;https://bugs.openjdk.org/secure/attachment/97298/LinkDemo.html","2021-12-07 13:05;jjg;LinkDemo.java;https://bugs.openjdk.org/secure/attachment/97297/LinkDemo.java",,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbjf:",9223372036854775807,b31,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,,,"2021-12-07 13:16;jjg;
I'm guessing the problem is in the latter part of `JavacTrees.searchMethod`, perhaps at `hasParameterTypes` line 665.  Maybe in `JavacTrees.hasParameterTypes`:775, with call of `types.isSubtypes`.  
;;;","2021-12-07 13:19;jjg;Confirmed; that `JavacTrees.hasParameterTypes` is returning `true` for both the calls in the demo.   In other words, `JavacTrees.searchMethod` is returning the wrong value, because it finds a ""compatible"" match without checking for an exact match first.;;;","2021-12-07 13:21;jjg;Transferring to tools/javac.;;;","2021-12-08 07:00;prappo;I wonder if there are any mislinked symbols in the JDK API Documentation.;;;","2022-01-04 09:23;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk18/pull/79
Date: 2022-01-04 17:19:44 +0000
;;;","2022-01-10 00:34;roboduke;Changeset: 642ab34a
Author:    Jan Lahoda <jlahoda@openjdk.org>
Date:      2022-01-10 08:33:46 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/642ab34a60172f4b629f953e146b54b9c7269033
;;;","2022-01-10 09:07;roboduke;Changeset: 642ab34a
Author:    Jan Lahoda <jlahoda@openjdk.org>
Date:      2022-01-10 08:33:46 +0000
URL:       https://git.openjdk.java.net/jdk/commit/642ab34a60172f4b629f953e146b54b9c7269033
;;;",,,,,,,,,,,,,,
JNI critical region violation in CTextPipe.m:363,JDK-8278367,5064251,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,prr,shadowbug,shadowbug,2021-12-07 10:28,2022-05-25 23:08,2023-10-01 09:57,2022-05-19 10:58,11,17,18,8,,,,,,,,,,19,client-libs,,0,bugdb_33646775,parfait,sn_117,sn_118,,,,,,,,,,,,,JNI critical region violation in CTextPipe.m:363,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,other,,,,,,"0|i2vbhv:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4b09ce31,,,,,,,,,"2021-12-07 13:19;prr;This is a minor functional bug which is entirely theoretical.
If an exception is thrown it is because of a JDK internal error that should never happen and will prevent this code block from executing properly.;;;","2022-05-02 11:38;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8506
Date: 2022-05-02 18:32:19 +0000;;;","2022-05-19 10:58;dukebot;Changeset: ac6a7d7b
Author:    Phil Race <prr@openjdk.org>
Date:      2022-05-19 17:57:29 +0000
URL:       https://git.openjdk.java.net/jdk/commit/ac6a7d7b36fc79161320b6e4082cff8fb4924811
;;;",,,,,,,,,,,,,,,,,,
[lworld] nmethod assembly snippet in hs_err file misses method name and parameters,JDK-8278352,5064232,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,thartmann,fparain,fparain,2021-12-07 08:14,2021-12-08 06:40,2023-10-01 09:57,2021-12-08 06:40,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,lw3,lworld,,,,,,,,,,,,,,,"New test runtime/ErrorHandling/MachCodeFramesInErrorFile.java added in last merge with main line is failing:

java.lang.RuntimeException: 0 < 2
	at jdk.test.lib.Asserts.fail(Asserts.java:594)
	at MachCodeFramesInErrorFile.run(MachCodeFramesInErrorFile.java:161)
	at MachCodeFramesInErrorFile.main(MachCodeFramesInErrorFile.java:105)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
	at java.base/java.lang.Thread.run(Thread.java:833)


The test fails when parsing the hs_error file, trying to recognize a particular pattern.

The test is using this expression:

        Matcher matcher = Pattern.compile(""\\[MachCode\\]\\s*\\[Verified Entry Point\\]\\s*  # \\{method\\} \\{[^}]*\\} '([^']+)' '([^']+)' in '([^']+)'"", Pattern.DOTALL).matcher(hsErr);

to look for the following kind of sequence in the hs_error file:

[MachCode]
[Verified Entry Point]
  # {method} {0x00007f8694401bf8} 'crashInJava3' '(J)V' in 'MachCodeFramesInErrorFile$Crasher'


With Valhalla, the output in the hs_error file is quite different:

[MachCode]
[Entry Point]
[Inline Entry Point]
[Verified Entry Point]
[Verified Inline Entry Point]
[Verified Inline Entry Point (RO)]
 ;; N1: #       out( B1 ) <- in( B5 B4 B8 )  Freq: 1
 ;; B1: #       out( B5 B2 ) <- BLOCK HEAD IS JUNK  Freq: 1


and doesn't match the expression expected by the test.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbdn:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-12-08 04:21;thartmann;Moving this to compiler because in addition to the problem with the test, there's also a bug in the assembly printing (method name and arguments are omitted).;;;",,,,,,,,,,,,,,,,,,,,
[lworld] Compiler test failures after merge with mainline,JDK-8278350,5064230,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,thartmann,fparain,fparain,2021-12-07 07:09,2021-12-08 02:41,2023-10-01 09:57,2021-12-08 02:41,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,c2,lworld,noreg-self,,,,,,,,,,,,,,"After latest merge with mainline, compiler/valhalla/inlinetypes/TestCallingConvention.java fails in scenario #1 and #5 with the following errors:

Scenario #1
===========

Failed IR Rules (1)
------------------
- Method ""public compiler.valhalla.inlinetypes.MyValueEmpty compiler.valhalla.inlinetypes.TestCallingConvention.test46(compiler.valhalla.inlinetypes.TestCallingConvention$EmptyContainer,compiler.valhalla.inlinetypes.TestCallingConvention$MixedContainer,compiler.valhalla.inlinetypes.MyValueEmpty)"":
  * @IR rule 1: ""@compiler.lib.ir_framework.IR(applyIf={}, failOn={""(.*precise compiler/valhalla/inlinetypes/MyValue.*\\\\R(.*(?i:mov|xorl|nop|spill).*\\\\R)*.*_new_instance_Java)"", ""(\\\\d+ (.*Load(B|C|S|I|L|F|D|P|N).*)+ ===.*@compiler/valhalla/inlinetypes/.*)"", ""(\\\\d+ (.*Store(B|C|S|I|L|F|D|P|N).*)+ ===.*@compiler/valhalla/inlinetypes/.*)"", ""(\\\\d+ (.*CallStaticJava.*)+ ===.*uncommon_trap.*(unstable_if|predicate))""}, applyIfAnd={}, applyIfOr={}, counts={}, applyIfNot={})""
    - failOn: Graph contains forbidden nodes:
        Regex 2: (\\d+ (.*Load(B|C|S|I|L|F|D|P|N).*)+ ===.*@compiler/valhalla/inlinetypes/.*)
        Matched forbidden node:
          33  LoadI  === _  7  32  [[ 39 ]]  @compiler/valhalla/inlinetypes/TestCallingConvention$MixedContainer:exact+12 *, name=val, idx=4; #int !jvms: TestCallingConvention::test46 @ bci:-1 (line 1046)


Scenario #5
===========

Failed IR Rules (1)
------------------
- Method ""public compiler.valhalla.inlinetypes.MyValueEmpty compiler.valhalla.inlinetypes.TestCallingConvention.test46(compiler.valhalla.inlinetypes.TestCallingConvention$EmptyContainer,compiler.valhalla.inlinetypes.TestCallingConvention$MixedContainer,compiler.valhalla.inlinetypes.MyValueEmpty)"":
  * @IR rule 1: ""@compiler.lib.ir_framework.IR(applyIf={}, failOn={""(.*precise compiler/valhalla/inlinetypes/MyValue.*\\\\R(.*(?i:mov|xorl|nop|spill).*\\\\R)*.*_new_instance_Java)"", ""(\\\\d+ (.*Load(B|C|S|I|L|F|D|P|N).*)+ ===.*@compiler/valhalla/inlinetypes/.*)"", ""(\\\\d+ (.*Store(B|C|S|I|L|F|D|P|N).*)+ ===.*@compiler/valhalla/inlinetypes/.*)"", ""(\\\\d+ (.*CallStaticJava.*)+ ===.*uncommon_trap.*(unstable_if|predicate))""}, applyIfAnd={}, applyIfOr={}, counts={}, applyIfNot={})""
    - failOn: Graph contains forbidden nodes:
        Regex 2: (\\d+ (.*Load(B|C|S|I|L|F|D|P|N).*)+ ===.*@compiler/valhalla/inlinetypes/.*)
        Matched forbidden node:
          33  LoadI  === _  7  32  [[ 39 ]]  @compiler/valhalla/inlinetypes/TestCallingConvention$MixedContainer:exact+12 *, name=val, idx=4; #int !jvms: TestCallingConvention::test46 @ bci:-1 (line 1046)

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbd7:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-12-07 07:19;fparain;Test compiler.valhalla.inlinetypes.TestMethodHandles failes with a slightly different error:

Failed IR Rules (1)
------------------
- Method ""public compiler.valhalla.inlinetypes.MyValue3 compiler.valhalla.inlinetypes.TestMethodHandles.test1() throws java.lang.Throwable"":
  * @IR rule 1: ""@compiler.lib.ir_framework.IR(applyIf={""InlineTypeReturnedAsFields"", ""true""}, failOn={""(.*precise compiler/valhalla/inlinetypes/MyValue.*\\\\R(.*(?i:mov|xorl|nop|spill).*\\\\R)*.*_new_instance_Java)"", ""(\\\\d+ (.*Store(B|C|S|I|L|F|D|P|N).*)+ ===.*@compiler/valhalla/inlinetypes/.*)"", ""(\\\\d+ (.*CallStaticJava.*)+ ===.*)""}, applyIfAnd={}, applyIfOr={}, counts={}, applyIfNot={})""
    - failOn: Graph contains forbidden nodes:
        Regex 3: (\\d+ (.*CallStaticJava.*)+ ===.*)
        Matched forbidden node:
          326  CallStaticJava  ===  5  6  7  8  1 ( 23  23  1  1  1  1  1  10  1  23 ) [[ 327  328  329 ]] # Static  java.lang.invoke.MethodHandleImpl::assertSame void ( java/lang/Object *, java/lang/Object * ) 0x00000008000dac00::invokeVirtual @ bci:8 Invokers$Holder::invokeExact_MT @ bci:19 TestMethodHandles::test1 @ bci:4 (line 163) !jvms: 0x00000008000dac00::invokeVirtual @ bci:8 Invokers$Holder::invokeExact_MT @ bci:19 TestMethodHandles::test1 @ bci:4 (line 163);;;","2021-12-08 01:25;thartmann;These are test bugs due to missing @ForceInline statements. We also need to increase the number of warmup iterations after JDK-8276546 was merged in because IR verification is now enabled with CICompileThreshold=100.;;;",,,,,,,,,,,,,,,,,,,
JarSigner javadoc example uses SHA-1,JDK-8278349,5064229,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,weijun,mullan,mullan,2021-12-07 06:49,2023-01-23 15:37,2023-10-01 09:57,2023-01-13 09:58,,,,,,,,,,,,,,21,security-libs,,0,noreg-doc,,,,,,,,,,,,,,,,"The example in the class summary of jdk.security.jarsigner.JarSigner uses SHA-1 and SHA1withDSA, which are considered weak algorithms. This should be changed to something stronger such as SHA-256 and SHA256withRSA.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbcz:",9223372036854775807,b06,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2ec284e3,,,,,,,,,"2023-01-13 08:32;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/11992
Date: 2023-01-13 16:23:13 +0000;;;","2023-01-13 09:58;dukebot;Changeset: 4ec36598
Author:    Eirik Bjorsnos <eirbjo@gmail.com>
Committer: Weijun Wang <weijun@openjdk.org>
Date:      2023-01-13 17:55:07 +0000
URL:       https://git.openjdk.org/jdk/commit/4ec3659845486ee9f9227cdfb3f8b47f19462b19
;;;",,,,,,,,,,,,,,,,,,,
[macos12] javax/swing/JTree/4908142/bug4908142.java fails in macos12,JDK-8278348,5064228,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,psadhukhan,dcubed,dcubed,2021-12-07 06:47,2023-01-30 06:24,2023-10-01 09:57,2022-05-12 02:28,15,17,18,19,,,,,,,,,,19,client-libs,,0,aarch64,jdk11u-na,jdk17u-na,jdk8u-na,macos,macos12,ProblemList,regression,regression_8242174,sn_116,test_sprint,testbug,tier4,tier5,,,"The following test failed in the JDK18 CI:

javax/swing/JTree/4908142/bug4908142.java

Here's a snippet from the log file:

#section:main
----------messages:(5/182)----------
command: main bug4908142
reason: User specified action: run main bug4908142 
Mode: othervm
Additional options from @modules: --add-modules java.desktop
elapsed time (seconds): 5.737
----------configuration:(3/40)----------
Boot Layer
  add modules: java.desktop

----------System.out:(0/0)----------
----------System.err:(11/657)----------
java.lang.Error: The selected index should be ""aad"", but not ade
	at bug4908142.main(bug4908142.java:96)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.Error: The selected index should be ""aad"", but not ade
JavaTest Message: shutting down test

STATUS:Failed.`main' threw exception: java.lang.Error: The selected index should be ""aad"", but not ade
----------rerun:(42/6550)*----------",,,,,,,,,,JDK-8289150,JDK-8289154,JDK-8289139,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278265,,,,,,,JDK-8273573,JDK-8290057,,,,,,,,,,,,,,JDK-8242174,JDK-8283524,JDK-8172065,JDK-8284924,JDK-8301358,,,,,,"2021-12-07 08:10;psadhukhan;screen1.png;https://bugs.openjdk.org/secure/attachment/97294/screen1.png",,,,,,,,aarch64,x86_64,,,,,,,,,,,,os_x,,,,,,"0|i2vbcr:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5a9b3fd3,,,,,,,,,"2021-12-07 06:50;dcubed;The fix for the following bug:

JDK-8172065 javax/swing/JTree/4908142/bug4908142.java The selected index should be ""aad""

is in jdk-18+27-1872 and this latest failure was spotted in jdk-18+27-1885-tier4.;;;","2021-12-07 08:11;psadhukhan;Seems like some Notification system dialog is open (attached screenshot from failure handler) which has taken the focus from the test so key events are not delivered properly.;;;","2021-12-07 10:59;dcubed;The second sighting is for the same test machine and the screenshot shows
the System Preferences dialog open.;;;","2021-12-08 06:47;dcubed;[~tbell] - The third sighting is on a different test machine, but again there is a
""System Preferences"" dialog open on the desktop. Any idea what the heck is
going on with these test machines?;;;","2021-12-08 11:50;dcubed;The latest sighting happened on a test machine where screen1.png shows a clear desktop
except for the macOS dock.

[~tbell] and [~psadhukhan] - I'm no longer convinced that the open ""System Preferences""
dialog has anything to do with this failure mode.

We have now had 4 sightings in two days. The JDK18 code fork is tomorrow so I don't
think this issue is going to be tracked down before that deadline. I'm going to look at
ProblemListing this test on macosx-aarch64.;;;","2021-12-11 06:06;dcubed;The latest failure on macosx-x64 does not contain a pop-up of any kind.
I'm going to look at ProblemListing this test on macosx-x64.;;;","2022-01-19 23:17;psadhukhan;It seems to be a regression/aftereffect of 
JDK-8242174: [macos] The NestedModelessDialogTest test make the macOS unstable
specially introduction of 
CGEventSourceRef source = CGEventSourceCreate(kCGEventSourceStateHIDSystemState);
which seems to take upto 3secs in macos12 at certain times like this where there are repeated keys


---------System.err:(65/6199)----------
2022-01-11 17:41:01.327 java[2487:147078] java keyCode 41 keyPressed 1
2022-01-11 17:41:01.327 java[2487:147078]  Before autoDelay CFAbsoluteTimeGetCurrent 663615661.327149
2022-01-11 17:41:01.327 java[2487:147078]  After autoDelay CFAbsoluteTimeGetCurrent 663615661.327190
2022-01-11 17:41:01.327 java[2487:147053]   CGEventSourceCreate 0x6000038cb300, CFAbsoluteTimeGetCurrent 663615661.327363
2022-01-11 17:41:01.327 java[2487:147053] CGkeyCode 0 CFAbsoluteTimeGetCurrent 663615661.327490
2022-01-11 17:41:01.327 java[2487:147053] CGEventCreateKeyboardEvent CFAbsoluteTimeGetCurrent 663615661.327705
2022-01-11 17:41:01.327 java[2487:147053] CGEventPost CFAbsoluteTimeGetCurrent 663615661.327763
2022-01-11 17:41:01.327 java[2487:147053]  After CFRelease CFAbsoluteTimeGetCurrent 663615661.327788
2022-01-11 17:41:01.327 java[2487:147078]  After performOnMainThreadWaiting CFAbsoluteTimeGetCurrent 663615661.327830

2022-01-11 17:41:01.386 java[2487:147078] java keyCode 41 keyPressed 0
2022-01-11 17:41:01.386 java[2487:147078]  Before autoDelay CFAbsoluteTimeGetCurrent 663615661.386578
2022-01-11 17:41:01.386 java[2487:147078]  After autoDelay CFAbsoluteTimeGetCurrent 663615661.386626
2022-01-11 17:41:04.381 java[2487:147053]   CGEventSourceCreate 0x6000038c8660, CFAbsoluteTimeGetCurrent 663615664.381792  <=========
2022-01-11 17:41:04.381 java[2487:147053] CGkeyCode 0 CFAbsoluteTimeGetCurrent 663615664.381915
2022-01-11 17:41:04.381 java[2487:147053] CGEventCreateKeyboardEvent CFAbsoluteTimeGetCurrent 663615664.381961
2022-01-11 17:41:04.382 java[2487:147053] CGEventPost CFAbsoluteTimeGetCurrent 663615664.382031
2022-01-11 17:41:04.382 java[2487:147053]  After CFRelease CFAbsoluteTimeGetCurrent 663615664.382064
2022-01-11 17:41:04.382 java[2487:147078]  After performOnMainThreadWaiting CFAbsoluteTimeGetCurrent 663615664.382127
;;;","2022-03-02 12:09;dcubed;[~prr] - The screen1.png files for the latest pair of failures is showing no
signs of anything open on the desktop. Both of the most recent failures
have happened on the same machine.;;;","2022-03-11 04:52;psadhukhan;Since it's an aftereffect/regression of JDK-8242174 and also being awt issue, not sure on the remedy here, assigning to author for future course of action.;;;","2022-03-15 19:29;serb;Not sure how it could be a regression of JDK-8242174 since the current issue was reported more than a year later. If some code works slowly then you should report this to apple providing a native test case. But taking into account that the problem is reproduced on the old version of macOS and works fine on the new one - the bug could be fixed already, I suggest just to update the systems and close this bug.;;;","2022-03-15 21:03;psadhukhan;More than a year later as it's on a new macos version osx12.. It fails in 12.0.1, 12.2 as of now...
Maybe that  
CGEventSourceRef source = CGEventSourceCreate(kCGEventSourceStateHIDSystemState);
is handled differently in new macos version.

I have already proved (by mach5 jobs in confidential comment) it's a regression of JDK-8242174 and without that fix, it works consistently.

Also, JDK-8273573 is also affected by that fix..;;;","2022-04-14 22:33;psadhukhan;[~dcubed]it seems you had problemlisted these 2 closed test also so why it is being run?

As I see, you had problemlisted in this manner where you specified os version which seem to not working
javax/swing/JList/4908142/bug4908142.java 8278265,8278348 macosx-12.0.1,macosx-12.1,macosx-12.2,macosx-12.2.1

Guess you will like to specify ""macos-all"";;;","2022-04-16 06:30;dcubed;The updated ProblemList fix (JDK-8284924 ) is in jdk-19+19-1240.;;;","2022-04-16 16:29;dcubed;So the updated ProblemList fix (JDK-8284924) did not work for
Mac_OS_X_12.1. Sigh...;;;","2022-05-04 04:22;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8532
Date: 2022-05-04 11:16:17 +0000;;;","2022-05-12 02:28;dukebot;Changeset: be97b4bc
Author:    Prasanta Sadhukhan <psadhukhan@openjdk.org>
Date:      2022-05-12 09:25:42 +0000
URL:       https://git.openjdk.java.net/jdk/commit/be97b4bc83d4d3b2edfe6d9157a8d5bc079bdade
;;;","2022-09-26 02:30;goetz;11u-na, 17u-na:
Removes tests from ProblemList that are not listed in 11u/17u;;;","2022-10-13 10:36;phh;8u-na. Same for 8u.;;;",,,
java/nio/file/Files/probeContentType/Basic.java fails on Linux SLES15 machine,JDK-8278346,5064226,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mbaesken,mbaesken,mbaesken,2021-12-07 06:36,2022-10-19 18:46,2023-10-01 09:57,2021-12-08 06:04,18,,,,,,,,,,,,,18,core-libs,,0,jdk11u-critical-request,jdk11u-critical-yes,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,testbug,,,,,,,,,,,"The test java/nio/file/Files/probeContentType/Basic.java fails on a SLES15 Linux machine with this output :
Content type: application/x-bzip; expected: [application/bz2, application/x-bzip2]
Content type: application/x-genesis-rom; expected: [text/markdown]
Content type: application/x-php; expected: [text/plain, text/php]
Content type: application/x-rar; expected: [application/rar, application/vnd.rar]
java.lang.RuntimeException: Test failed!
        at Basic.main(Basic.java:192)
        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
        at java.base/java.lang.reflect.Method.invoke(Method.java:577)
        at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
        at java.base/java.lang.Thread.run(Thread.java:833)

For see the strange 'application/x-genesis-rom' mapping see also
markdown files ending in .md get marked as 'application/x-genesis-rom'
https://bugs.launchpad.net/ubuntu/+source/shared-mime-info/+bug/611763

The other mappings look okay to me but sems we need to add them to the test.
",,,,,,,,,,JDK-8278709,JDK-8282050,JDK-8295700,JDK-8295460,JDK-8288306,JDK-8288466,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8273655,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,linux,,,,,,"0|i2vbcb:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,,,"2021-12-08 06:04;roboduke;Changeset: fd8cb2da
Author:    Matthias Baesken <mbaesken@openjdk.org>
Date:      2021-12-08 14:03:56 +0000
URL:       https://git.openjdk.java.net/jdk/commit/fd8cb2dae87e5726e89a1789e5a1ddd461c4400d
;;;","2022-02-16 00:36;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/165
Date: 2022-02-16 08:31:40 +0000;;;","2022-02-16 00:46;mbaesken;Fix Request (17u)
I would like to have the patch in 17u as well, because the issue is present there too. The patch applies cleanly.;;;","2022-06-01 18:33;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u/pull/41
Date: 2022-06-02 01:27:14 +0000;;;","2022-06-03 08:26;andrew;Critical Fix Request [11u]

Test continues to show failures on some platforms after backport of JDK-8273655 and the fixes in JDK-8285720 & JDK-8274171. Patch applies clean and test passes here on RHEL 8 as before: https://github.com/openjdk/jdk11u/pull/41

Test will regress from 11.0.15 on some platforms without this so we should fix this in 11.0.16.  See discussion on https://github.com/openjdk/jdk11u-dev/pull/1111;;;",,,,,,,,,,,,,,,,
sun/security/pkcs12/KeytoolOpensslInteropTest.java test fails because of different openssl output,JDK-8278344,5064223,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,mbaesken,mbaesken,mbaesken,2021-12-07 06:08,2022-10-13 05:13,2023-10-01 09:57,2021-12-12 23:50,17,18,,,,,,,,,,,,19,security-libs,,0,hgupdate-sync,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,,,,,,,,,,,,"KeytoolOpensslInteropTest.java  fails with the output below.
Seems on our SUSE Linux 15 (openssl is
~> openssl version
OpenSSL 1.1.0i-fips  14 Aug 2018
)  we get a slightly different output with a blank missing after ""MAC:"" :

:stdErr:
Mon Dec 06 21:54:48 CET 2021
stdout: [];
stderr: [MAC:sha256 Iteration 10000
PKCS7 Data
Shrouded Keybag: PBES2, PBKDF2, AES-256-CBC, Iteration 10000, PRF hmacWithSHA256
Shrouded Keybag: PBES2, PBKDF2, AES-256-CBC, Iteration 10000, PRF hmacWithSHA256
PKCS7 Encrypted data: PBES2, PBKDF2, AES-256-CBC, Iteration 10000, PRF hmacWithSHA256
Certificate bag
Certificate bag
]
exitValue = 0

java.lang.RuntimeException: 'MAC: sha256, Iteration 10000' missing from stdout/stderr 
",,,,,,,,,,JDK-8279780,JDK-8279678,JDK-8280567,JDK-8293151,JDK-8293152,JDK-8292967,JDK-8293153,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8279385,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,linux,,,,,,"0|i2vbbn:",9223372036854775807,b02,,,,,,,,,,,Verified,,"2021-12-12 23:50;roboduke;Changeset: 8b5ff4bd
Author:    Matthias Baesken <mbaesken@openjdk.org>
Date:      2021-12-13 07:48:20 +0000
URL:       https://git.openjdk.java.net/jdk/commit/8b5ff4bdffc8f32317d67b00c085071d6c772b30
;;;","2022-01-05 05:05;mbaesken;Fix Request (17u)
I would like to have the patch in 17u as well, because the issue is present there too. The patch applies cleanly.;;;","2022-01-07 14:31;clanger;[~mbaesken], could you also backport this test fix to 18? I think you can just push the backport to jdk18 as it is a test fix which is allowed during RDP1.;;;","2022-01-10 01:16;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18/pull/90
Date: 2022-01-10 09:09:13 +0000;;;","2022-01-10 09:07;roboduke;Changeset: 06b4d494
Author:    Matthias Baesken <mbaesken@openjdk.org>
Date:      2022-01-10 11:41:14 +0000
URL:       https://git.openjdk.java.net/jdk/commit/06b4d494bf7bfec7db83351f0df372cba2b22bae
;;;","2022-01-20 05:07;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/109
Date: 2022-01-20 13:02:24 +0000;;;","2022-08-24 22:38;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1343
Date: 2022-08-25 05:32:00 +0000;;;","2022-08-26 01:14;clanger;Fix Request (11u)
Backport needed to fix a test failure that shows up in our CI after the fix for https://bugs.openjdk.org/browse/JDK-8267880. No risk, testfix only. Passed SAP Testing and GHA. Will integrate together with its follow-up JDK-8279385, if approved.;;;",,,,,,,,,,,,,
ServerSocket::isClosed may return false after accept throws,JDK-8278339,5064217,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,alanb,alanb,alanb,2021-12-07 03:35,2022-04-13 04:19,2023-10-01 09:57,2021-12-07 06:24,18,,,,,,,,,,,,,18,core-libs,,0,regression,,,,,,,,,,,,,,,,"A side effect of JDK-8278270 is that isClosed will return false while close is in progress. This may be observed in cases where accept wakes up due to an async close and the code tests isClosed.

The SOCKS code used in the test sun/security/x509/URICertStore/ExtensionsWithLDAP.java seems to do this, this test is now failing intermittently.",,,,,,,,,,JDK-8278674,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vbab:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,Verified,,"2021-12-07 06:24;roboduke;Changeset: 69d8669f
Author:    Alan Bateman <alanb@openjdk.org>
Date:      2021-12-07 14:22:35 +0000
URL:       https://git.openjdk.java.net/jdk/commit/69d8669fb3f1e4db2fbb3366a1349dd0285f5b0f
;;;","2022-04-13 04:19;sqetools;verified;;;",,,,,,,,,,,,,,,,,,,
Use int64_t to represent byte quantities consistently in JfrObjectAllocationSample,JDK-8278336,5064214,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mgronlun,mgronlun,mgronlun,2021-12-07 02:08,2023-05-17 08:14,2023-10-01 09:57,2021-12-08 03:20,16,17,18,,,,,,,,,,,18,hotspot,,0,amazon-interest,datadog-interest,,,,,,,,,,,,,,,"Today, there are some uses of intptr_t and size_t intermixed with int64_t, which can lead to truncation on specific platforms.",,,,,,,,,,JDK-8278708,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8272363,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16,,,,,,,,"0|i2vb9n:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2021-12-08 03:20;roboduke;Changeset: e5cb84e9
Author:    Markus Grönlund <mgronlun@openjdk.org>
Date:      2021-12-08 11:18:24 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e5cb84e9a1bca321f22d6e3ce13a6026342b4b85
;;;",,,,,,,,,,,,,,,,,,,,
some TraceDeoptimization code not included in PRODUCT build,JDK-8278329,5064207,Bug,Resolved,JDK,JDK,software,duke,,,P5,Fixed,tholenstein,tholenstein,tholenstein,2021-12-07 00:54,2022-01-12 16:49,2023-10-01 09:57,2022-01-10 02:52,18,19,,,,,,,,,,,,19,hotspot,,0,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,,,"After ""JDK-8154011: Make TraceDeoptimization a diagnostic flag"" some code is not included in the PRODUCT build. 

Remove all the #ifndef PRODUCT guards around TraceDeoptimization checks and make sure to be consistent. 

The DEOPT PACKING messages are controlled by PrintDeoptimizationDetails, but DEOPT UNPACKING is controlled by TraceDeoptimization. Therefore it would sense to make PrintDeoptimizationDetails a diagnostic flag as well. 

See vfameArray.cpp:443
#ifndef PRODUCT
  if (PrintDeoptimizationDetails) {
    [...]
  } else if (TraceDeoptimization) {
    [...]
  }
#endif

Make sure that performance is not impacted by the change. 
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8154011,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vb83:",9223372036854775807,b05,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-12-07 02:18;chagedorn;ILW = Using TraceDeoptimization flag in release builds misses some extra information printed in debug builds, low, no workaround = LLH = P5;;;","2022-01-10 02:52;roboduke;Changeset: 1f101b04
Author:    Tobias Holenstein <tobias.holenstein@oracle.com>
Committer: Tobias Hartmann <thartmann@openjdk.org>
Date:      2022-01-10 10:50:07 +0000
URL:       https://git.openjdk.java.net/jdk/commit/1f101b04f4d7c166cc0a830383e4e08025df5c74
;;;",,,,,,,,,,,,,,,,,,,
Socket close is not thread safe and other cleanup,JDK-8278326,5064202,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,alanb,alanb,alanb,2021-12-06 23:24,2023-08-07 22:24,2023-10-01 09:57,2023-01-12 01:39,18,21,,,,,,,,,,,,21,core-libs,,0,noreg-hard,,,,,,,,,,,,,,,,"java.net.Socket is not specified to be thread safe but it is required to support async close. If you create an unbound Socket and close it at around the time that another thread is binding, connecting, or anything else that creates the underlying socket then it can leak. 

Related is that ServerSocket.implAccept can be overridden to provide the Socket to accept. Its behavior is unspecified when called with a Socket that isn't newly created/unbound and there are number of silly scenarios that can arise. This also needs to coordinated with Socket.close so that accept doesn't return a closed Socket that is connected to an underlying socket.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276955,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vb6z:",9223372036854775807,b06,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2023-01-05 09:44;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/11863
Date: 2023-01-05 14:39:28 +0000;;;","2023-01-12 01:39;dukebot;Changeset: 4b573343
Author:    Alan Bateman <alanb@openjdk.org>
Date:      2023-01-12 09:38:31 +0000
URL:       https://git.openjdk.org/jdk/commit/4b573343a6eb05b8b469177935d48c48957aff64
;;;",,,,,,,,,,,,,,,,,,,
Update the --generate-cds-archive jlink plugin usage message,JDK-8278324,5064198,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ccheung,ccheung,ccheung,2021-12-06 21:12,2021-12-15 17:51,2023-10-01 09:57,2021-12-08 08:11,18,,,,,,,,,,,,,18,tools,,0,,,,,,,,,,,,,,,,,"Update the --generate-cds-archive jlink plugin usage message to the following:

Generate CDS archive if the runtime image supports the CDS feature.",,,,,,,,,,JDK-8278714,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vb63:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3da653bd,,,,,,,,,"2021-12-08 08:11;roboduke;Changeset: 79165b73
Author:    Calvin Cheung <ccheung@openjdk.org>
Date:      2021-12-08 16:10:06 +0000
URL:       https://git.openjdk.java.net/jdk/commit/79165b738d6d1336740631c855960a235b9ecfe4
;;;",,,,,,,,,,,,,,,,,,,,
Debian packaging doesn't work,JDK-8278311,5064181,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,asemenyuk,asemenyuk,asemenyuk,2021-12-06 10:57,2022-07-21 03:23,2023-10-01 09:57,2021-12-08 18:33,18,,,,,,,,,,,,,18,tools,,0,jdk17u-fix-request,jdk17u-fix-yes,sn_107,,,,,,,,,,,,,,"When using jpackage to build .deb installer it fails with the following output:
---
[01:27:34.326] Command [PID: 3393]:
    fakeroot dpkg-deb --verbose -b /tmp/jdk.jpackage690833074685393155/images /home/asemenyu/servicetest_1.0_amd64.deb
[01:27:34.326] Output:
    dpkg-deb: error: parsing file '/tmp/jdk.jpackage690833074685393155/images/DEBIAN/control' near line 2 package 'servicetest':
     error in 'Version' field string '1.0_WITH_RELEASE': invalid character in version number
[01:27:34.326] Returned: 2
---

Seems to be a regression from JDK-8276084",,,,,,,,,,JDK-8278734,JDK-8290792,JDK-8289950,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276084,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,linux_ubuntu,,,,,,"0|i2vb2b:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3656b41f,,,,,,,,,"2021-12-06 11:01;asemenyuk;The fix for JDK-8276084 introduced APPLICATION_VERSION_WITH_RELEASE parameter in src/jdk.jpackage/linux/classes/jdk/jpackage/internal/resources/template.control template file.
There is APPLICATION_VERSION parameter in this template file. I.e. APPLICATION_VERSION is a substring of APPLICATION_VERSION_WITH_RELEASE of the parameter name. jpackage code expanding paremetrs at OverridableResource class doesn't handle the case when the name of a parameter is a substring of other parameter names. This code needs to be fixed.;;;","2021-12-08 18:33;roboduke;Changeset: 8ef1a232
Author:    Alexey Semenyuk <asemenyuk@openjdk.org>
Date:      2021-12-09 02:31:29 +0000
URL:       https://git.openjdk.java.net/jdk/commit/8ef1a232b100dbac72356ca4844d01964f3d5287
;;;","2022-07-19 02:13;goetz;Fix request [17u]

I backport this for parity with 17.0.5-oracle.
Clean backport.
Test passes. SAP nightly testing passed.;;;","2022-07-19 02:28;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/563
Date: 2022-07-19 09:16:07 +0000;;;",,,,,,,,,,,,,,,,,
[windows] use of uninitialized OSThread::_state,JDK-8278309,5064176,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,stuefe,stuefe,stuefe,2021-12-06 09:30,2022-02-10 06:53,2023-10-01 09:57,2021-12-08 01:19,11,17,18,,,,,,,,,,,18,hotspot,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk13u-fix-request,jdk13u-fix-yes,jdk15u-fix-request,jdk15u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,redhat-interest,sap-interest,threads,,,,,,"On Windows, we use `OSThread::_state` in `os::create_thread` before it has been initialized. This causes asserts to fire in `Thread::is_JavaThread_protected` (`assert(target->is_handshake_safe_for(current_thread)`)

Only happens if the following is true:
- We log os=info level, thereby firing the ""Thread started.."" log output the parent thread of a newly started child thread writes. Since JDK-8268773, we also print the thread name. `Thread::name()` uses `Thread::is_JavaThread_protected`, but on Windows the thread state has not been set yet.
- This is an assert, so only debug, but in debug newly malloced memory is poisened with ""F1F1F1F1..."", which hides the error since  `Thread::is_JavaThread_protected` compares the thread state like this:
```
  if (target->osthread() == NULL || target->osthread()->get_state() <= INITIALIZED) {
    return true;
  }
```
and the compiler interprets the ""F1F1F1F1""-filled enum as a signed integer and hence a negative large value. Changing the init pattern to 0x01, or adding an explicit cast to unsigned, causes the assert to fire as soon as logging is switched on.

",,,,,,,,,,JDK-8278614,JDK-8278565,JDK-8280017,JDK-8279000,JDK-8281600,JDK-8278707,JDK-8281602,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278074,,,,,,,,,,,,,,,,,,,,,,JDK-8268773,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,windows,,,,,,"0|i2vb17:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-06 20:37;dholmes;Ugghh! We have two different places where we construct and then initialize the OSThread on Windows and one of them is broken. Ideally we would always use create_os_thread() or at least the same logic. Unclear why Windows skips the ALLOCATED state.
;;;","2021-12-06 20:49;dholmes;Trivial fix:

 // Allocate the OSThread object
  OSThread* osthread = new OSThread(NULL, NULL);
  if (osthread == NULL) {
    return false;
  }
+osthread->set_state(ALLOCATED);;;;","2021-12-06 21:53;stuefe;[~dholmes] Yes, that's the fix I plan to do. Just wanted to have a negative before having the fix, since it's not possible to have a regression test atm since we cannot influence the heap init word via command line. So I set init word to 0x01: https://github.com/tstuefe/jdk/runs/4434547750?check_suite_focus=true , and I also was curious if anything else breaks. Now I can do the patch and see it working :);;;","2021-12-07 11:24;hseigel;ILW = MLM = P4;;;","2021-12-08 01:19;roboduke;Changeset: 54993b13
Author:    Thomas Stuefe <stuefe@openjdk.org>
Date:      2021-12-08 09:18:58 +0000
URL:       https://git.openjdk.java.net/jdk/commit/54993b13078ceb05736bb0e1d7ed7415c390442e
;;;","2021-12-14 22:23;stuefe;Fix Request:

This is a potential bug, even if it seems benign, and the fix is very trivial. I'd like to fix this therefore in JDK 11 and JDK 17. Oracle already backported it to 11 and 17.

JDK11: does not apply cleanly, but the required changes are trivial.
JDK17: applies cleanly.

Risk: none. Fix is very trivial.

Thanks, Thomas;;;","2022-01-13 01:01;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/86
Date: 2022-01-13 08:56:32 +0000;;;","2022-02-10 06:25;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk13u-dev/pull/325
Date: 2022-02-10 14:20:17 +0000;;;","2022-02-10 06:27;yan;Fix request (13u, 15u):

the fix applies cleanly to 15u, and skara-cleanly to 13u. ;;;","2022-02-10 06:49;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk15u-dev/pull/173
Date: 2022-02-10 14:41:50 +0000;;;",,,,,,,,,,,
compiler/uncommontrap/TraceDeoptimizationNoRealloc.java fails with release VMs after JDK-8154011,JDK-8278291,5064159,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jiefu,jiefu,jiefu,2021-12-06 03:10,2022-03-22 10:07,2023-10-01 09:57,2021-12-06 05:45,18,,,,,,,,,,,,,18,hotspot,,0,noreg-self,oracle-triage-18,tencent-interest,tier6,ursqe-triaged,,,,,,,,,,,,"STDERR:
Error: VM option 'TraceDeoptimization' is diagnostic and must be enabled via -XX:+UnlockDiagnosticVMOptions.
Error: The unlock option must precede 'TraceDeoptimization'.
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278362,,,,,,,JDK-8154011,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vaxf:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-12-06 04:51;chagedorn;ILW = Test failure due to missing UnlockDiagnosticVMOptions flag, single test with product build only, no workaround = MLH = P4;;;","2021-12-06 05:45;roboduke;Changeset: 6994d809
Author:    Jie Fu <jiefu@openjdk.org>
Date:      2021-12-06 13:44:22 +0000
URL:       https://git.openjdk.java.net/jdk/commit/6994d809371e80c1e24cd296c48c7f75886577b7
;;;","2021-12-07 10:54;dcubed;This fix is in jdk-18+27-1866.;;;",,,,,,,,,,,,,,,,,,
Initial nroff manpage generation for JDK 19,JDK-8278275,5064132,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,dholmes,dholmes,dholmes,2021-12-05 17:36,2022-07-18 19:28,2023-10-01 09:57,2021-12-13 13:38,19,,,,,,,,,,,,,19,infrastructure,,0,build-infra,doc,manage,noreg-doc,,,,,,,,,,,,,"The manpages initially have JDK 18 version information, so we should regenerate them all.

NOTE: this should be done after the final manpage update for JDK 18 -  JDK-8273179",,,,,,,,,,,,,,,,,,,,,,,,,JDK-8273179,,,,JDK-8290489,,,,,,,,,,JDK-8272067,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2varf:",9223372036854775807,b02,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-12-13 13:38;roboduke;Changeset: 624f3094
Author:    David Holmes <dholmes@openjdk.org>
Date:      2021-12-13 21:36:24 +0000
URL:       https://git.openjdk.java.net/jdk/commit/624f3094b89976a0be0a1d1d4ce304f4be38fb9e
;;;",,,,,,,,,,,,,,,,,,,,
ServerSocket is not thread safe,JDK-8278270,5064123,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,alanb,alanb,alanb,2021-12-05 08:23,2023-08-07 22:24,2023-10-01 09:57,2021-12-07 00:50,18,,,,,,,,,,,,,18,core-libs,,0,,,,,,,,,,,,,,,,,"There are several thread safety issues in java.net.ServerSocket. These can be fixed by:

1. Changing impl to be a final field.
2. Promote closeLock to be a general ""state lock"" and require it to set the (volatile) created, bound, and closed fields.
3. Use the state lock when binding so that it can coordinate with async close of the ServerSocket.",,,,,,,,,,JDK-8278662,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276955,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vapf:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2021-12-07 00:50;roboduke;Changeset: 24877ac0
Author:    Alan Bateman <alanb@openjdk.org>
Date:      2021-12-07 08:49:18 +0000
URL:       https://git.openjdk.java.net/jdk/commit/24877ac0788d3db9f2e9c7492a0d3e42244e7e06
;;;",,,,,,,,,,,,,,,,,,,,
ARM32: several vector test failures for ASHR,JDK-8278267,5064118,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,haosun,haosun,haosun,2021-12-05 03:31,2022-01-25 14:05,2023-10-01 09:57,2022-01-10 12:48,18,,,,,,,,,,,,,18,hotspot,,0,oraclejdk-na,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,,"In tier3 test on ARM32 platform, the following test cases failed:

jdk/incubator/vector/ByteMaxVectorTests.java
jdk/incubator/vector/Int64VectorTests.java
jdk/incubator/vector/Short64VectorTests.java
jdk/incubator/vector/Byte64VectorTests.java
jdk/incubator/vector/IntMaxVectorTests.java
jdk/incubator/vector/ShortMaxVectorTests.java

Here is part of the error message:

test ByteMaxVectorTests.ASHRByteMaxVectorTests(byte[-i * 5], byte[cornerCaseValue(i)]): failure
java.lang.AssertionError: (-15, 127) at index #3 expected [-1] but found [-128]
      at org.testng.Assert.fail(Assert.java:99)
      at org.testng.Assert.failNotEquals(Assert.java:1037)
      at org.testng.Assert.assertEqualsImpl(Assert.java:140)
      at org.testng.Assert.assertEquals(Assert.java:122)
      at org.testng.Assert.assertEquals(Assert.java:841)
      at ByteMaxVectorTests.assertArraysEquals(ByteMaxVectorTests.java:357)
      at ByteMaxVectorTests.ASHRByteMaxVectorTests(ByteMaxVectorTests.java:2255)
      at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
      at java.base/java.lang.reflect.Method.invoke(Method.java:577)
      at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)
      at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:599)
      at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:174)
      at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
      at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:822)
      at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:147)
      at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
      at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
      at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
      at org.testng.TestRunner.privateRun(TestRunner.java:764)
      at org.testng.TestRunner.run(TestRunner.java:585)
      at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
      at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
      at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
      at org.testng.SuiteRunner.run(SuiteRunner.java:286)
      at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
      at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
      at org.testng.TestNG.runSuitesSequentially(TestNG.java:1218)
      at org.testng.TestNG.runSuitesLocally(TestNG.java:1140)
      at org.testng.TestNG.runSuites(TestNG.java:1069)
      at org.testng.TestNG.run(TestNG.java:1037)
      at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:94)
      at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:54)
      at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
      at java.base/java.lang.reflect.Method.invoke(Method.java:577)
      at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)

      at java.base/java.lang.Thread.run(Thread.java:833)
",,,,,,,,,,JDK-8280303,JDK-8280621,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277239,JDK-8262916,JDK-8213134,,,,,,,,,,,,,,,,arm,,,,,,,,,,,,,linux,,,,,,"0|i2vaob:",9223372036854775807,b31,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-12-06 01:27;chagedorn;ILW = Wrong execution of compiled code, only with ARM32 and vector intrinsics?, no known workaround = HLH = P2;;;","2021-12-16 16:41;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk18/pull/41
Date: 2021-12-17 00:38:07 +0000
;;;","2022-01-10 12:48;roboduke;Changeset: bbc1ddb4
Author:    Hao Sun <haosun@openjdk.org>
Committer: Dean Long <dlong@openjdk.org>
Date:      2022-01-10 20:46:28 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/bbc1ddb4744bfb15c4e3ab0bed14f7ad0d17b7e5
;;;","2022-01-12 17:06;roboduke;Changeset: bbc1ddb4
Author:    Hao Sun <haosun@openjdk.org>
Committer: Dean Long <dlong@openjdk.org>
Date:      2022-01-10 20:46:28 +0000
URL:       https://git.openjdk.java.net/jdk/commit/bbc1ddb4744bfb15c4e3ab0bed14f7ad0d17b7e5
;;;","2022-01-25 04:26;roboduke;Changeset: bbc1ddb4
Author:    Hao Sun <haosun@openjdk.org>
Committer: Dean Long <dlong@openjdk.org>
Date:      2022-01-10 20:46:28 +0000
URL:       https://git.openjdk.java.net/jdk18u/commit/bbc1ddb4744bfb15c4e3ab0bed14f7ad0d17b7e5
;;;",,,,,,,,,,,,,,,,
JFR: TestPrintXML can't handle missing timestamps,JDK-8278262,5064111,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,egahlin,alanb,alanb,2021-12-04 09:07,2022-06-25 02:13,2023-10-01 09:57,2022-05-12 11:23,19,repo-loom,,,,,,,,,,,,19,hotspot,,0,,,,,,,,,,,,,,,,,"This test has been failing in the loom repo for some time with:

java.lang.Exception: Event doesn't match
	at jdk.jfr.tool.TestPrintXML.main(TestPrintXML.java:110)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:1493)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vamr:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2022-01-18 05:03;egahlin;Hard to diagnose with current output. We should print the XML contents that failed. 

I will file separate bug (JDK-8280189) to fix this in main and then we can revisit this bug if it happens again.;;;","2022-01-18 23:07;alanb;Thanks. Once JDK-8280189 is integrated into the main line then I might pull the commit into the loom repo and get updated output. ;;;","2022-05-11 23:10;alanb;The sightings in the loom repo were with the jtreg main wrapper (a special build of jtreg that is able to run tests in the context of a virtual thread). This testing mode is not in the main line, the sighting in main line was the regular jtreg build.;;;","2022-05-12 02:50;egahlin;I have seen it as well (when running tests locally). I will look into it.;;;","2022-05-12 02:55;mgronlun;27479       <struct name=""parkedClass"">
27480         <struct name=""classLoader"">
27481           <struct name=""type"" xsi:nil=""true""/>
27482           <value name=""name"">bootstrap</value>
27483         </struct>
27484         <value name=""name"">java/util/concurrent/locks/ReentrantLock$NonfairSync</value>
27485         <struct name=""package"">
27486           <value name=""name"">java/util/concurrent/locks</value>
27487           <struct name=""module"">
27488             <value name=""name"">java.base</value>
27489             <value name=""version"">19-ea</value>
27490             <value name=""location"">jrt:/java.base</value>
27491             <struct name=""classLoader"">
27492               <struct name=""type"" xsi:nil=""true""/>
27493               <value name=""name"">bootstrap</value>
27494             </struct>
27495           </struct>
27496           <value name=""exported"">true</value>
27497         </struct>
27498         <value name=""modifiers"">48</value>
27499         <value name=""hidden"">false</value>
27500       </struct>
27501       <value name=""timeout"">PT-2562047788015215H-30M-8S</value>
27502       <value name=""until"">-999999999-01-01T00:00+18:00</value>
27503       <value name=""address"">3490992544</value>
27504     </event>

The until field here looks strange. It might be causing problems in the compare:

 <value name=""until"">-999999999-01-01T00:00+18:00</value>;;;","2022-05-12 04:06;mgronlun;The intermittent frequency of this failure is because the recording must include a jdk.ThreadPark event. For that to be the case, the duration of the park must exceed 10 ms (threshold in profile.jfc).;;;","2022-05-12 04:23;mgronlun;To increase the probability of reproducing, the following can be applied:

diff --git a/src/hotspot/share/prims/unsafe.cpp b/src/hotspot/share/prims/unsafe.cpp
index dd0dca74c85..e6c213a2baa 100644
--- a/src/hotspot/share/prims/unsafe.cpp
+++ b/src/hotspot/share/prims/unsafe.cpp
@@ -756,7 +756,7 @@ static void post_thread_park_event(EventThreadPark* event, const oop obj, jlong
   assert(event->should_commit(), ""invariant"");
   event->set_parkedClass((obj != NULL) ? obj->klass() : NULL);
   event->set_timeout(timeout_nanos);
-  event->set_until(until_epoch_millis);
+  event->set_until(min_jlong);
   event->set_address((obj != NULL) ? (u8)cast_from_oop<uintptr_t>(obj) : 0);
   event->commit();
 }

Also set the threshold value for jdk.ThreadPark from 10 ms to 0 ms (in profile.jfc).;;;","2022-05-12 07:21;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8681
Date: 2022-05-12 13:59:09 +0000;;;","2022-05-12 11:23;dukebot;Changeset: 71183437
Author:    Erik Gahlin <egahlin@openjdk.org>
Date:      2022-05-12 18:21:52 +0000
URL:       https://git.openjdk.java.net/jdk/commit/711834373790fe6e8df69a3309514500eb230959
;;;",,,,,,,,,,,,
runtime/SelectionResolution/* tests failing in loom repo,JDK-8278261,5064110,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,coleenp,alanb,alanb,2021-12-04 09:00,2022-02-10 15:59,2023-10-01 09:57,2022-02-10 15:59,repo-loom,,,,,,,,,,,,,repo-loom,hotspot,,0,,,,,,,,,,,,,,,,,"loom repo

The following tests have been failing intermittently in tier3

runtime/SelectionResolution/AbstractMethodErrorTest.java	
runtime/SelectionResolution/InvokeVirtualICCE.java
runtime/SelectionResolution/InvokeVirtualSuccessTest.java
runtime/SelectionResolution/InvokeInterfaceICCE.java

with a SEGV in ~MetadataOnStackMark during ClassLoaderDataGraph::purge",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vamj:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2022-01-09 00:49;alanb;Several fixes and been integrated into the loom repo in the last week, also several fixes have come from the main line (including JDK-8278239). I can no longer duplicate the issue in the loom repo.;;;","2022-02-02 12:36;alanb;[~coleenp] I think most of the sightings have been serial GC. I found one parallel GC.;;;","2022-02-10 05:06;alanb;runtime/cds/appcds/LotsOfClasses.java is failing frequently now, maybe that will help get some idea what this issue is about.;;;","2022-02-10 05:27;coleenp;Great, thanks.  I have it reproducing locally now on the loom repo but not on the clean repo.  Investigating.;;;","2022-02-10 15:59;coleenp;commit 2accdb721f4f4107c982fc6a415dc8ec3bf09950 (upstream/fibers)
Merge: 0cbd0b5d10d 58b44753fa0
Author: Coleen Phillimore <coleen.phillimore@oracle.com>
Date:   Thu Feb 10 18:02:22 2022 -0500

    Merge pull request #88 from coleenp/onstack
    
    8278261: runtime/SelectionResolution/* tests failing in loom repo

;;;",,,,,,,,,,,,,,,,
JavaFX shared libraries not stripped on Linux or macOS,JDK-8278260,5064109,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,kcr,kcr,kcr,2021-12-04 06:59,2022-08-16 14:12,2023-10-01 09:57,2021-12-16 05:08,8,jfx11,jfx17,,,,,,,,,,,jfx18,javafx,,0,noreg-build,sn_108,,,,,,,,,,,,,,,"The JavaFX shared libraries on Linux (.so files) and macOS (.dylib files) include local symbols, even for Release builds. The build should stripped local symbols from the .so or .dylib files when building with ""gradle -PCONF=Release"".

This can be done by running ""strip -x"" on the shared libraries after linking.",,,,,,,,,,JDK-8281656,JDK-8282673,JDK-8281974,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8292391,JDK-8292506,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vamb:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1556b386,,,,,,,,,"2021-12-04 08:01;kcr;This should be done for all shared libraries in the javafx.graphics, javafx.media, and javafx.web modules. The jfxwebkit library, in particular, is much larger than it needs to be.

Linux:
libjfxwebkit.so: 105 MB (unstripped)
libjfxwebkit.so: 87 MB (strip -x)

macOS:
libjfxwebkit.dylib: 96 MB (unstripped)
libjfxwebkit.dylib: 70 MB (strip -x)
;;;","2021-12-16 05:08;roboduke;Changeset: 1ebf7a24
Author:    Kevin Rushforth <kcr@openjdk.org>
Date:      2021-12-16 13:07:09 +0000
URL:       https://git.openjdk.java.net/jfx/commit/1ebf7a24144b198e62b9b343821fdb155b9d703e
;;;","2022-02-11 08:56;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx17u/pull/31
Date: 2022-02-11 16:48:27 +0000;;;","2022-02-16 05:45;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx11u/pull/71
Date: 2022-02-16 13:39:59 +0000;;;",,,,,,,,,,,,,,,,,
test/jdk/jdk/jfr/jcmd/TestJcmdStartWithOptions.java failing loom repo,JDK-8278257,5064106,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mgronlun,alanb,alanb,2021-12-04 00:01,2022-03-10 06:57,2023-10-01 09:57,2022-03-10 06:57,repo-loom,,,,,,,,,,,,,repo-loom,hotspot,,0,,,,,,,,,,,,,,,,,"loom repo, tier5

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/workspace/open/src/hotspot/share/runtime/jniHandles.inline.hpp:94), pid=12132, tid=12861
#  assert(result != __null) failed: NULL read from jni handle
#


Stack: [0x00007f5fa49c2000,0x00007f5fa4ac3000],  sp=0x00007f5fa4ac1ca0,  free space=1023k
Thread 0x00007f5f54085040 [12861]
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x10b11c0]  find_exclusion_thread_idx(Handle)+0x160
V  [libjvm.so+0x10b7f77]  JfrJavaSupport::on_thread_start(JavaThread*, _jobject*)+0xc7
V  [libjvm.so+0x11302bc]  send_java_thread_start_event(JavaThread*, _jobject*)+0x4c
V  [libjvm.so+0x11307d7]  JfrThreadLocal::on_start(Thread*)+0xa7
V  [libjvm.so+0x1aaa165]  Thread::call_run()+0x85
V  [libjvm.so+0x176fb14]  thread_native_entry(Thread*)+0x104",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2valn:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Enable ""missing-explicit-ctor"" check in the jdk.unsupported.desktop module",JDK-8278251,5064093,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,serb,serb,serb,2021-12-03 12:53,2021-12-15 17:51,2023-10-01 09:57,2021-12-08 13:17,17,18,,,,,,,,,,,,18,client-libs,,0,noreg-build,,,,,,,,,,,,,,,,"The ""missing-explicit-ctor"" check was disabled by the JDK-8071961 and later was fixed by the JDK-8250853. So we can re-enable this check again.",,,,,,,,,,JDK-8278726,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8250853,JDK-8071961,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2vair:",9223372036854775807,b28,,,,,,,,,,,,,"2021-12-08 13:17;roboduke;Changeset: 6e7b7f35
Author:    Sergey Bylokhov <serb@openjdk.org>
Date:      2021-12-08 21:15:55 +0000
URL:       https://git.openjdk.java.net/jdk/commit/6e7b7f352e66c767b16e1e98a162e7fea79126c6
;;;",,,,,,,,,,,,,,,,,,,,
KeyStoreSpi::engineGetAttributes does not throws KeyStoreException,JDK-8278247,5064087,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,weijun,weijun,weijun,2021-12-03 11:31,2021-12-08 17:45,2023-10-01 09:57,2021-12-03 11:53,,,,,,,,,,,,,,18,security-libs,,0,noreg-doc,,,,,,,,,,,,,,,,The specification of KeyStoreSpi::engineGetAttributes shows a KeyStoreException could be thrown but it's actually not. The @throws line should be removed.,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278250,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275748,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vahf:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2ec284e3,,,,,,,,,"2021-12-03 11:53;roboduke;Changeset: e1cde19d
Author:    Weijun Wang <weijun@openjdk.org>
Date:      2021-12-03 19:52:18 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e1cde19dbdbbca365ecfea6d1e2e85a42ed8bde0
;;;",,,,,,,,,,,,,,,,,,,,
vmTestbase/nsk/jvmti/RedefineClasses/StressRedefine failed with EXCEPTION_ACCESS_VIOLATION at 0x000000000000000d,JDK-8278239,5064078,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,coleenp,dcubed,dcubed,2021-12-03 08:27,2022-02-01 16:46,2023-10-01 09:57,2021-12-22 09:20,18,,,,,,,,,,,,,18,hotspot,,0,intermittent,jdk17u-fix-request,jdk17u-fix-yes,tier6,zgc,,,,,,,,,,,,"The following test failed in the JDK18 CI:

vmTestbase/nsk/jvmti/RedefineClasses/StressRedefine/TestDescription.java

Here's a snippet from the log file:

Got expected exception: java.lang.reflect.InvocationTargetException
Got expected exception: java.lang.reflect.InvocationTargetException
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000000000000d, pid=43520, tid=48028
#
# JRE version: Java(TM) SE Runtime Environment (18.0+26) (fastdebug build 18-ea+26-1792)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+26-1792, mixed mode, sharing, tiered, compressed class ptrs, z gc, windows-amd64)
# Problematic frame:
# C  0x000000000000000d
#
# Core dump will be written. Default location: T:\\testoutput\\test-support\\jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jvmti_quick\\scratch\\0\\hs_err_pid43520.mdmp
#
# An error report file with more information is saved as:
# T:\\testoutput\\test-support\\jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jvmti_quick\\scratch\\0\\hs_err_pid43520.log
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#
s() is successfully done
>>>>>>>> Invoke RedefineClasses():
	new class byte count=2287
t:\\workspace\\open\\test\\hotspot\\jtreg\\vmTestbase\\nsk\\jvmti\\RedefineClasses\\StressRedefine\\stressRedefine.cpp: Failed to call RedefineClasses():
	the function returned error 60: JVMTI_ERROR_INVALID_CLASS_FORMAT
	For more info about this error see the JVMTI spec.
>>>>>>>> Invoke RedefineClasses():
	new class byte count=2287
<<<<<<<< RedefineClasses() is successfully done
>>>>>>>> Invoke RedefineClasses():
	new class byte count=2287
<<<<<<<< RedefineClasses() is successfully done
>>>>>>>> Invoke RedefineClasses():
	new class byte count=2287
<<<<<<<< RedefineClasses() is successfully done
>>>>>>>> Invoke RedefineClasses():
	new class byte count=2287
<<<<<<<< RedefineClasses() is successfully done
t:\\workspace\\open\\test\\hotspot\\jtreg\\vmTestbase\\nsk\\jvmti\\RedefineClasses\\StressRedefine\\stressRedefine.cpp: Failed to call RedefineClasses():
	the function returned error 60: JVMTI_ERROR_INVALID_CLASS_FORMAT
	For more info about this error see the JVMTI spec.
<<<<<<<< RedefineClasses() is successfully done
<<<<<<<< RedefineClasses() is successfully done
----------System.err:(11/3315)*----------


Here's the crashing thread's stack:

---------------  T H R E A D  ---------------

Current thread (0x00000275aeaa4e60):  WorkerThread ""ZWorker#0"" [stack: 0x00000093d3500000,0x00000093d3600000] [id=48028]

Stack: [0x00000093d3500000,0x00000093d3600000],  sp=0x00000093d35ff4a8,  free space=1021k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  0x000000000000000d


siginfo: EXCEPTION_ACCESS_VIOLATION (0xc0000005), data execution prevention violation at address 0x000000000000000d

That looks like a bad jump or call to 0x000000000000000d. Ouch!

There are a couple of other unresolved bugs for this same test:

JDK-8269633 vmTestbase/nsk/jvmti/RedefineClasses/StressRedefine/TestDescription.java crashed with oopDesc::size_given_klass+0x6

JDK-8274154 vmTestbase/nsk/jvmti/RedefineClasses/StressRedefine/TestDescription.java timed out",,,,,,,,,,JDK-8279574,JDK-8279388,JDK-8279245,JDK-8279756,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8269633,JDK-8274154,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,windows,,,,,,"0|i2vaff:",9223372036854775807,b30,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@661b156a,,,,,,,Verified,,"2021-12-07 01:48;sspitsyn;There are several JVMTI errors in the log like below (I'm not sure if they are expected):

>>>>>>>> Invoke RedefineClasses():
	new class byte count=2287
t:\\workspace\\open\\test\\hotspot\\jtreg\\vmTestbase\\nsk\\jvmti\\RedefineClasses\\StressRedefine\\stressRedefine.cpp: Failed to call RedefineClasses():
	the function returned error 60: JVMTI_ERROR_INVALID_CLASS_FORMAT
	For more info about this error see the JVMTI spec.
>>>>>>>> Invoke RedefineClasses():
	new class byte count=2287
t:\\workspace\\open\\test\\hotspot\\jtreg\\vmTestbase\\nsk\\jvmti\\RedefineClasses\\StressRedefine\\stressRedefine.cpp: Failed to call RedefineClasses():
	the function returned error 62: JVMTI_ERROR_FAILS_VERIFICATION
	For more info about this error see the JVMTI spec.

The hs_err dump does not have a stack trace. Current thread is:
  Current thread (0x00000275aeaa4e60):  WorkerThread ""ZWorker#0"" [stack: 0x00000093d3500000,0x00000093d3600000] [id=48028]

This can be a ZGC problem.;;;","2021-12-08 16:07;sspitsyn;The test intentionally redefines with the corrupted bytecodes, so RedefineClasses returns errors:
  JVMTI_ERROR_INVALID_CLASS_FORMAT and JVMTI_ERROR_FAILS_VERIFICATION

However, these errors normally should not cause crashes.
The crash happens on a ZGC thread, so at least, it seems that the ZGC is missing some assert.
The hs_err dump has no stack trace, so it is not easy to understand the context of the crash.
I wonder if we need a fix on ZGC side.;;;","2021-12-08 17:21;sspitsyn;Made it P3 as it can be a regression.;;;","2021-12-16 11:19;sspitsyn;Kevin Walls helped by extracting more info with hs_err_pid43520.mdmp.
Below are extra details from Kevin.

The failing stack trace is:
 	000000000000000d()	Unknown
>	jvm.dll!Dependencies::DepStream::argument(int i) Line 945	C++
 	jvm.dll!Dependencies::DepStream::argument(int i) Line 941	C++
 	jvm.dll!Dependencies::DepStream::context_type() Line 973	C++
 	jvm.dll!nmethod::flush_dependencies(bool delete_immediately) Line 1580	C++
 	[Inline Frame] jvm.dll!ZNMethodUnlinkClosure::_unlink(nmethod *) Line 293	C++
 	jvm.dll!ZNMethodUnlinkClosure::do_nmethod(nmethod * nm) Line 325	C++
 	jvm.dll!ZNMethodTableIteration::nmethods_do(NMethodClosure * cl) Line 69	C++
 	jvm.dll!ZNMethodUnlinkTask::work() Line 368	C++
 	jvm.dll!ZTask::Task::work(unsigned int worker_id) Line 36	C++
 	[Inline Frame] jvm.dll!WorkerTaskDispatcher::worker_run_task() Line 67	C++
 	jvm.dll!WorkerThread::run() Line 159	C++
 	jvm.dll!Thread::call_run() Line 363	C++
 	jvm.dll!thread_native_entry(Thread * thread) Line 544	C++

the method we crash in:
Metadata* Dependencies::DepStream::argument(int i) {
  Metadata* result = recorded_metadata_at(argument_index(i));
  if (result == NULL) { // Explicit context argument can be compressed
    int ctxkj = dep_context_arg(type());  // -1 if no explicit context arg
    if (ctxkj >= 0 && i == ctxkj && ctxkj+1 < argument_count()) {
941      result = ctxk_encoded_as_null(type(), argument(ctxkj+1));
    }
  }
945   assert(result == NULL || result->is_klass() || result->is_method(), ""must be""); <---- crash/wild jump in this line...
  return result;
}
This disassembly of that last line makes sense, it says we have a bad ""result"" pointer.
   945:   assert(result == NULL || result->is_klass() || result->is_method(), ""must be"");
00007FFED31D8600 48 85 C0             test       rax,rax  		
00007FFED31D8603 74 3E                  je          Dependencies::DepStream::argument+123h (07FFED31D8643h)    null check
00007FFED31D8605 48 8B 13             mov      rdx,qword ptr [rbx]
00007FFED31D8608 48 8B CB            mov      rcx,rbx
00007FFED31D860B FF 52 08            call        qword ptr [rdx+8]    ...bad jump for result->is_klass() so likely a bad result value.
00007FFED31D860E 84 C0                 test       al,al
Source of bad jump loaded from RBX	00000277C8736760	..which does contain 0xd which we jump to.

The nmethod being processed earlier in the stack is 0x00000275be08a810
I can dump the fields of this in the SA, but no obvious name.
I thought that was in constmethoddata, but that field does not work in this nmethod...
At the crash, rax and rbx both hold 00000277C8736760
..which is the result of:   result = ctxk_encoded_as_null(type(), argument(ctxkj+1));
..and is readable data, but not a valid nmethod.
;;;","2021-12-16 11:29;kevinw;Just to add that I realised that we have the nmethod at 0x00000275be08a810 name as it is referenced in the hs_err:

R8 =0x00000275be08b170 is at entry_point+1904 in (nmethod*)0x00000275be08a810
Compiled method (c2)   33467 2603       4       java.lang.invoke.LambdaForm$MH/0x0000000800d62000::invoke (86 bytes)
...
 dependencies   [0x00000275be08b170,0x00000275be08b198] = 40
 
Where that dependencies data is:

        0x275be08b170           : 0x1101040103010201
        0x275be08b178           : 0xa01090106010501
        0x275be08b180           : 0xe010d010c010b01
        0x275be08b188           : 0x1007101507020f01
        0x275be08b190           : 0x0
        0x275be08b198           : 0xa000000001
		
;;;","2021-12-16 19:29;sspitsyn;This can be a ZGC or Compiler bug.
I moving this to GC team for evaluation. Feel free to move it back if you think it is not a ZGC issue.;;;","2021-12-17 01:41;stefank;This is a bug that happens when RedefineClasses runs after mark_end but before ZGC has unlinked the nmethods.

VM_RedefineClasses::doit checks all nmethods that are alive, but not those that are unloading. See:
- MetadataOnStackMark -> CodeCache::metadata_do
- flush_dependent_code -> mark_all_nmethods_for_evol_deoptimization
- (probably more)

at the end of doit() we then call ClassLoaderDataGraph::clean_deallocate_lists(false);. Since metadata in unloading nmethods were not visited, they will be deallocated by that call!

After this, the ZGC nmethod unlinking code will walk these deallocated metadata and crash here:
void ZUnload::unlink() {
...
  ZNMethod::unlink(_workers, unloading_occurred);

I think we need to reevaluate what nmethods are visited by RedefineClasses.;;;","2021-12-20 15:01;coleenp;This isn't a bug in JDK 11 or below.  Also the code is very different from the current code, but it's still not a bug on JDK 11.
It's a bug on JDK 17 and should be backported there.;;;","2021-12-20 15:03;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk/pull/6900
Date: 2021-12-20 22:59:39 +0000
;;;","2021-12-21 12:54;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk18/pull/63
Date: 2021-12-21 20:51:04 +0000
;;;","2021-12-22 09:20;roboduke;Changeset: 2be3e7ef
Author:    Coleen Phillimore <coleenp@openjdk.org>
Date:      2021-12-22 17:19:00 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/2be3e7ef1cff1aae6faf1f4f0545d561af48d0ba
;;;","2022-01-04 07:01;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/56
Date: 2022-01-04 14:56:25 +0000
;;;","2022-01-04 23:01;goetz;Fix request [17u]

I backport this for parity with 17.0.3-oracle.
Clean backport.
SAP nightly testing passes.;;;",,,,,,,,
[macos] tools/jpackage tests timeout due to /usr/bin/osascript,JDK-8278233,5064071,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,almatvee,dcubed,dcubed,2021-12-03 07:46,2022-07-22 10:59,2023-10-01 09:57,2021-12-14 16:00,18,,,,,,,,,,,,,18,tools,,0,intermittent,jdk17u-fix-request,jdk17u-fix-yes,macos,problemlist,regression,regression_8276837,sn_107,sn_108,tier2,,,,,,,"The following test timed out in the JDK18 CI:

tools/jpackage/share/MultiNameTwoPhaseTest.java

The test run contains errors like this:

[11:45:37.245] Running /usr/bin/osascript
[11:51:07.189] Command [PID: 5566]:
    /usr/bin/osascript /var/folders/93/pf04s4c922qcyb7v8xr1y5h8000_dc/T/jdk.jpackage4183342526789260831/config/Hello-dmg-setup.scpt
[11:51:07.190] Output:
    /var/folders/93/pf04s4c922qcyb7v8xr1y5h8000_dc/T/jdk.jpackage4183342526789260831/config/Hello-dmg-setup.scpt:192:204: execution error: Finder got an error: AppleEvent timed out. (-1712)
[11:51:07.190] Returned: 1

[11:51:07.190] java.io.IOException: Command [/usr/bin/osascript, /var/folders/93/pf04s4c922qcyb7v8xr1y5h8000_dc/T/jdk.jpackage4183342526789260831/config/Hello-dmg-setup.scpt] exited with 1 code
	at jdk.jpackage/jdk.jpackage.internal.Executor.executeExpectSuccess(Executor.java:90)
	at jdk.jpackage/jdk.jpackage.internal.IOUtils.exec(IOUtils.java:215)
	at jdk.jpackage/jdk.jpackage.internal.IOUtils.exec(IOUtils.java:193)
	at jdk.jpackage/jdk.jpackage.internal.IOUtils.exec(IOUtils.java:172)
	at jdk.jpackage/jdk.jpackage.internal.MacDmgBundler.buildDMG(MacDmgBundler.java:404)
	at jdk.jpackage/jdk.jpackage.internal.MacDmgBundler.bundle(MacDmgBundler.java:90)
	at jdk.jpackage/jdk.jpackage.internal.MacDmgBundler.execute(MacDmgBundler.java:579)
	at jdk.jpackage/jdk.jpackage.internal.Arguments.generateBundle(Arguments.java:689)
	at jdk.jpackage/jdk.jpackage.internal.Arguments.processArguments(Arguments.java:561)
	at jdk.jpackage/jdk.jpackage.main.Main.execute(Main.java:91)
	at jdk.jpackage/jdk.jpackage.main.Main.main(Main.java:52)

There are five runs of /usr/bin/osascript and
all have similar errors. I suspect that the issues with
/usr/bin/osascript are what caused the test run to
take so long.

The test did PASS while the timeout handler was running:

[12:03:44.970] [       OK ] MultiNameTwoPhaseTest.test([MultiNameTest, ](length=2)); checks=36
[12:03:44.970] [==========] 5 tests ran
[12:03:44.971] [  PASSED  ] 5 tests
----------System.err:(1/15)----------
STATUS:Passed.
----------rerun:(39/8387)*----------

It could be that these /usr/bin/osascript errors are ""normal""
and this test just needs a longer timeout.",,,,,,,,,,JDK-8278879,JDK-8279721,JDK-8290890,JDK-8289979,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276837,JDK-8248248,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,os_x,,,,,,"0|i2vadv:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3656b41f,,,,,,,,,"2021-12-06 07:20;herrick;This is an intermittent timeout in osascript that was supposed to be fixed by JDK-8248248;;;","2021-12-08 09:44;dcubed;tools/jpackage/share/IconTest.java has reach 4 timeouts in less than a week so
I'm going to look at ProblemListing it on macosx-x64 to reduce the noise in the CI.;;;","2021-12-08 09:48;dcubed;Here's a log file snippet from the 18+27-1846-tier2 sighting:

tools/jpackage/share/IconTest.java

[18:28:45.915] Running /usr/bin/osascript
[18:45:54.213] Command [PID: 2998]:
    /usr/bin/osascript /var/folders/tl/0gwf6kb567s_1_q9jh8vh2v00000gp/T/jdk.jpackage186151433922985113/config/IconTest-dmg-setup.scpt
[18:45:54.213] Output:
    /var/folders/tl/0gwf6kb567s_1_q9jh8vh2v00000gp/T/jdk.jpackage186151433922985113/config/IconTest-dmg-setup.scpt:194:206: execution error: Finder got an error: AppleEvent timed out. (-1712)
[18:45:54.214] Returned: 1

[18:45:54.214] java.io.IOException: Command [/usr/bin/osascript, /var/folders/tl/0gwf6kb567s_1_q9jh8vh2v00000gp/T/jdk.jpackage186151433922985113/config/IconTest-dmg-setup.scpt] exited with 1 code
	at jdk.jpackage/jdk.jpackage.internal.Executor.executeExpectSuccess(Executor.java:90)
	at jdk.jpackage/jdk.jpackage.internal.IOUtils.exec(IOUtils.java:215)
	at jdk.jpackage/jdk.jpackage.internal.IOUtils.exec(IOUtils.java:193)
	at jdk.jpackage/jdk.jpackage.internal.IOUtils.exec(IOUtils.java:172)
	at jdk.jpackage/jdk.jpackage.internal.MacDmgBundler.buildDMG(MacDmgBundler.java:404)
	at jdk.jpackage/jdk.jpackage.internal.MacDmgBundler.bundle(MacDmgBundler.java:90)
	at jdk.jpackage/jdk.jpackage.internal.MacDmgBundler.execute(MacDmgBundler.java:579)
	at jdk.jpackage/jdk.jpackage.internal.Arguments.generateBundle(Arguments.java:689)
	at jdk.jpackage/jdk.jpackage.internal.Arguments.processArguments(Arguments.java:561)
	at jdk.jpackage/jdk.jpackage.main.Main.execute(Main.java:91)
	at jdk.jpackage/jdk.jpackage.main.Main.main(Main.java:52);;;","2021-12-08 20:19;almatvee;Looks like regression from JDK-8276837. JDK-8276837 introduced overwrite of IOUtils:exec() which passes Executor.INFINITE_TIMEOUT instead of actual timeout value and thus it disables timeouts.;;;","2021-12-08 20:45;vdyakov;so let's fix it in the forked 18.;;;","2021-12-14 16:00;roboduke;Changeset: 918e3397
Author:    Alexander Matveev <almatvee@openjdk.org>
Date:      2021-12-14 23:59:11 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/918e3397858c425e9c3b82c9a918b7626603a59c
;;;","2022-07-21 04:14;goetz;Fix request [17u]

I backport this for parity with 17.0.5-oracle.
Clean backport except for ProblemList.
SAP nightly testing passed.;;;","2022-07-21 04:18;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/577
Date: 2022-07-21 11:09:22 +0000;;;",,,,,,,,,,,,,
[macos] Wrong chars emitted when entering certain char-sequence of Indic language,JDK-8278232,5063269,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,psadhukhan,webbuggrp,webbuggrp,2021-11-22 23:26,2022-03-14 02:00,2023-10-01 09:57,2022-01-27 01:01,11,17,9,,,,,,,,,,,19,client-libs,,0,dcs-nr,dcspn,macos,reproducer-yes,sn_111,webbug,,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
MacOS Monterey 12.0.1 (21A559)

A DESCRIPTION OF THE PROBLEM :
javax.swing.* and java.awt.* emits wrong chars when entered specific allowed char-combination of Indic languages (especially sanskrit)

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
In any JTextField or TextField, try entering valid sanskrit Consonant combination like 'स्तु' using MacOS inbuilt 'Devanagari QWERTY' keyboard. 

Correct keys to get 'स्तु' (in Safari browser/etc) -- where there is no bug:
s f t u

Bug exists in JDK java.swing|awt.*. 
If one enters above char-sequence ' s f t  u' , JTextField shows 'स््ु' -- which is is wrong.

To get correct char-sequence, one needs to type two DELETE-key-strokes and type again 't u' , which now emits correct key-combo 'स्तु' in JTextField/TextField



---------- BEGIN SOURCE ----------
/* Below case sample swing TextField app. In which , one needs to type above char-sequence to get the bug reproduced */
package org.gvn;
import javax.swing.*;
public class Main {
    public static void main(String[] args) {
        JFrame f=new JFrame();//creating instance of JFrame
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTextField b=new JTextField(""click"");
        b.setBounds(130,100,100, 40);

        f.add(b);

        f.setSize(400,500);
        f.setLayout(null);
        f.setVisible(true);

    }
}  
---------- END SOURCE ----------

FREQUENCY : always


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8283019,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-12-03 07:39;pnarayanaswa;Capture.PNG;https://bugs.openjdk.org/secure/attachment/97268/Capture.PNG","2021-12-03 07:41;pnarayanaswa;KeyEventDemo.java;https://bugs.openjdk.org/secure/attachment/97269/KeyEventDemo.java","2021-12-03 07:02;pnarayanaswa;Main.java;https://bugs.openjdk.org/secure/attachment/97267/Main.java",,,,,,aarch64,,,,,,,,,,,,,os_x,,,,,,"0|i2v5gr:",9223372036854775807,b08,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4b09ce31,,,,,,,,,"2022-01-06 01:50;psadhukhan;It seems to have regressed from jdk9b52 onwards and most probably fix causing the regression is JDK-8068283;;;","2022-01-06 03:10;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk/pull/6979
Date: 2022-01-06 11:03:26 +0000
;;;","2022-01-27 01:01;roboduke;Changeset: 94380d0e
Author:    Prasanta Sadhukhan <psadhukhan@openjdk.org>
Date:      2022-01-27 08:59:34 +0000
URL:       https://git.openjdk.java.net/jdk/commit/94380d0e464a491977ed2b5f1998a55cfe73c3c6
;;;","2022-03-11 02:13;pnarayanaswa;Mail to submitter:
=============
The issue has been resolved in JDK version:19[b08]

Please share your feedback checking in the latest Early Access build[1].

[1] https://jdk.java.net/19/;;;","2022-03-14 01:59;pnarayanaswa;Additional Information from submitter:
===========================
Bug is fixed for sequence स्तु ( s t fu ) sequence of chars(dvitva-akshara-sequence).  Great work. Kudos to team in fixing it.

But the bug still not fixed for other cases like simple consonant-ending words like:  रामन् ( english-chars needed reproduce same bug for रामन् in MacOS are:  r a m a n f ). With this bug not fixed for consonant-ending  case, the buggy display looks like: रामन ्


This bug manifests  (both dvitta-akshara-case and consonant-ending-case) in each and every Indic language that maps most of the exact Devanagari-Chars( IMHO Tamil will have special case of handling —as I am not familiar with Tamil alphabets). For example, here is the bug that still exists in Telugu/Kannada(I think it will there for other Indic langs as mentioned above) with bug-fix code changes in https://github.com/openjdk/jdk/commit/94380d0e464a491977ed2b5f1998a55cfe73c3c6 (as the bug fix only handle UTF region of devanagari 0x900 - 0x97F):

For example (not exhaustive  for affected Indic langs):

In Kannada: ರಾಮ ್    ರಾಮ್    (Telugu UTF range: U+0C00..U+0C7F)
In  Telugu:    రామన ్   రామన్  (Kannada UTF range: U+0C80..U+0CFF )

With same logic, all other Indic langs will have to handle those UTF-ranges (for both dvitta-akshara-case and consonant-ending-case)

;;;",,,,,,,,,,,,,,,,
org.jcp.xml.dsig.internal.dom.Utils.parseIdFromSameDocumentURI throws StringIndexOutOfBoundsException when calling substring method,JDK-8278186,5063644,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,weijun,webbuggrp,webbuggrp,2021-11-29 05:36,2022-08-09 09:01,2023-10-01 09:57,2021-12-15 09:02,8,,,,,,,,,,,,,19,security-libs,,0,8bpr-critical-approved,dcsaw,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jdk18u-fix-request,jdk18u-fix-SQE-OK,jdk18u-fix-yes,regression,reproducer-yes,webbug,,,,,"ADDITIONAL SYSTEM INFORMATION :
Linux, jdk 8

A DESCRIPTION OF THE PROBLEM :
For the method org.jcp.xml.dsig.internal.dom.Utils.parseIdFromSameDocumentURI, 
the unit test we generated in the attached snapshot.

Maybe you would think the input parameter is invalid, but we should consider all possible situations and deal all possible exceptions.

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
This is the test case we generate
@Test
  public void test_parseIdFromSameDocumentURI{
      java.lang.String string0 = ""0xpointer(id(=G6^Wr*m81i?Ah{^PCS(@r8-/(bwu9;InjsXk882M&lb%)`f"";      org.jcp.xml.dsig.internal.dom.Utils.parseIdFromSameDocumentURI(string0);
  }

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
do not throw StringIndexOutOfBoundsException
ACTUAL -
throw StringIndexOutOfBoundsException

---------- BEGIN SOURCE ----------
public static String parseIdFromSameDocumentURI(String uri) {
        if (uri.length() == 0) {
            return null;
        }
        String id = uri.substring(1);
        if (id.startsWith(""xpointer(id("")) {
            int i1 = id.indexOf('\'');
            int i2 = id.indexOf('\'', i1+1);
            id = id.substring(i1+1, i2);
        }
        return id;
    }
---------- END SOURCE ----------

CUSTOMER SUBMITTED WORKAROUND :
public static String parseIdFromSameDocumentURI(String uri) {
        if (uri.length() == 0) {
            return null;
        }
        String id = uri.substring(1);
        if (id.startsWith(""xpointer(id("")) {
            int i1 = id.indexOf('\'');
            int i2 = id.indexOf('\'', i1+1);
            if (i1 + 1 >= 0 && i2 <= id.length() && i2 - i1 - 1 >= 0) {
                id = id.substring(i1+1, i2);
            }
        }
        return id;
    }

FREQUENCY : occasionally


",,,,,,,,,,JDK-8282747,JDK-8284384,JDK-8282759,JDK-8284599,JDK-8283153,JDK-8282787,JDK-8283374,JDK-8283305,JDK-8282791,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8283109,,,,,,,,,,"2021-12-02 22:27;tongwan;202111291937561.png;https://bugs.openjdk.org/secure/attachment/97260/202111291937561.png",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v7s3:",9223372036854775807,b03,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2ee0b2af,,,,,,,Verified,,"2021-12-02 03:18;tongwan;The source code of String parseIdFromSameDocumentURI(String uri) can be found at:
https://github.com/apache/santuario-xml-security-java/blob/master/src/main/java/org/apache/jcp/xml/dsig/internal/dom/Utils.java#L85

It looks like not an issue in Java.;;;","2021-12-03 13:48;mullan;[~tongwan] The source code also exists in the JDK: https://github.com/openjdk/jdk/blob/master/src/java.xml.crypto/share/classes/org/jcp/xml/dsig/internal/dom/Utils.java#L89

Please re-open the bug and we can evaluate it further.;;;","2021-12-07 07:56;weijun;[~mullan] This is indeed a bug. Are we going to fix it in OpenJDK or ask the upstream repo to fix it first?;;;","2021-12-15 09:02;roboduke;Changeset: 1f1db838
Author:    Weijun Wang <weijun@openjdk.org>
Date:      2021-12-15 17:00:55 +0000
URL:       https://git.openjdk.java.net/jdk/commit/1f1db838ab7d427170d59a8b55fdb45c4d80c359
;;;","2022-03-04 02:40;coffeys;Fix Request
better string processing checks in dsig (Santuario) code. Hope to contribute this code back to Santuario also.;;;","2022-03-07 03:36;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18u/pull/34
Date: 2022-03-07 11:30:23 +0000;;;","2022-03-14 08:20;goetz;Fix request [17u]

I backport this for parity with 17.0.4-oracle.
Simple change, low risk. 
Clean backport.
Test passes. SAP nightly testing passed.;;;","2022-03-14 08:30;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/253
Date: 2022-03-14 15:23:17 +0000;;;","2022-03-17 06:55;goetz;Fix request [11u]

I backport this for parity with 11.0.16-oracle.
The functional change applied clean, but I had 
to rework the new test.  
Test passes.;;;","2022-03-17 08:33;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/909
Date: 2022-03-17 13:56:31 +0000;;;",,,,,,,,,,,
Enable all doclint warnings for build of java.desktop,JDK-8278175,5064005,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,darcy,darcy,darcy,2021-12-02 16:22,2022-01-21 15:46,2023-10-01 09:57,2021-12-03 18:14,18,,,,,,,,,,,,,18,infrastructure,,0,noreg-build,,,,,,,,,,,,,,,,"With the ability to suppress doclint warnings in source code (JDK-8189591), all the doclint warnings can be enabled in the build of the java.desktop module.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8280488,JDK-8189591,,,,,,,,,,,,,,JDK-8278179,JDK-8278254,JDK-8278273,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9z7:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-12-03 18:14;roboduke;Changeset: 02ee337a
Author:    Joe Darcy <darcy@openjdk.org>
Date:      2021-12-04 02:12:35 +0000
URL:       https://git.openjdk.java.net/jdk/commit/02ee337ae0d163ae44b1691eb9de12c5608ba178
;;;",,,,,,,,,,,,,,,,,,,,
runtime/cds/appcds/LambdaWithJavaAgent.java fails with release VMs,JDK-8278174,5064004,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jiefu,jiefu,jiefu,2021-12-02 15:27,2021-12-08 17:44,2023-10-01 09:57,2021-12-02 22:00,18,,,,,,,,,,,,,18,hotspot,,0,cds,tencent-interest,tier6,,,,,,,,,,,,,,"[STDERR]
Error: VM option 'AllowArchivingWithJavaAgent' is diagnostic and must be enabled via -XX:+UnlockDiagnosticVMOptions.
Error: The unlock option must precede 'AllowArchivingWithJavaAgent'.
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.

[2021-12-02T21:48:45.275016688Z] Waiting for completion for process 308209
[2021-12-02T21:48:45.275393307Z] Waiting for completion finished for process 308209
STDERR:
 stdout: [];
 stderr: [Error: VM option 'AllowArchivingWithJavaAgent' is diagnostic and must be enabled via -XX:+UnlockDiagnosticVMOptions.
Error: The unlock option must precede 'AllowArchivingWithJavaAgent'.
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.
]
 exitValue = 1

java.lang.RuntimeException: 'Loading classes to share' missing from stdout/stderr

    at jdk.test.lib.process.OutputAnalyzer.shouldContain(OutputAnalyzer.java:221)
    at jdk.test.lib.cds.CDSTestUtils.checkDump(CDSTestUtils.java:273)
    at jdk.test.lib.cds.CDSTestUtils.createArchiveAndCheck(CDSTestUtils.java:297)
    at LambdaWithJavaAgent.main(LambdaWithJavaAgent.java:76)
    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
    at java.base/java.lang.reflect.Method.invoke(Method.java:577)
    at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
    at java.base/java.lang.Thread.run(Thread.java:833)
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9yz:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-02 22:00;roboduke;Changeset: 473ececa
Author:    Jie Fu <jiefu@openjdk.org>
Date:      2021-12-03 06:00:14 +0000
URL:       https://git.openjdk.java.net/jdk/commit/473ececaf5df8392e76d022d7126770526be31f7
;;;","2021-12-03 07:58;dcubed;The fix for this bug is in jdk-18+27-1834.;;;",,,,,,,,,,,,,,,,,,,
java/nio/channels/FileChannel/BlockDeviceSize.java should only run on Linux,JDK-8278172,5064002,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,bpb,bpb,bpb,2021-12-02 14:18,2022-01-10 05:42,2023-10-01 09:57,2021-12-03 08:01,18,,,,,,,,,,,,,18,core-libs,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,,,,,,,,,,,,"A tag @requires (os.family == ""linux"") should be added.",,,,,,,,,,JDK-8279494,JDK-8279693,JDK-8279187,JDK-8279165,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8150539,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,linux,,,,,,"0|i2v9yj:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,,,"2021-12-03 08:01;roboduke;Changeset: 0d938ced
Author:    Brian Burkhalter <bpb@openjdk.org>
Date:      2021-12-03 16:00:27 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0d938cedcaf55886058b94dc280a8f7181c79fdf
;;;","2022-01-04 06:17;goetz;Fix request [17u]

I backport this for parity with 17.0.3-oracle.
No risk, only a test change.
Clean backport.
Test passes.;;;","2022-01-04 06:21;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/55
Date: 2022-01-04 14:17:28 +0000
;;;","2022-01-05 09:50;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk11u-dev/pull/742
Date: 2022-01-05 17:44:19 +0000
;;;","2022-01-05 09:57;zgu;Fix Request (11u)

A clean backport for parity with Oracle 11.0.15. It is a test only backport, therefore, no risk.

Test passes.
;;;",,,,,,,,,,,,,,,,
[vectorapi] Mask incorrectly computed for zero extending cast,JDK-8278171,5064001,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,psandoz,psandoz,psandoz,2021-12-02 14:13,2022-04-25 10:55,2023-10-01 09:57,2021-12-03 09:08,18,,,,,,,,,,,,,18,core-libs,,0,vectorapi,,,,,,,,,,,,,,,,When performing a zero extended cast the implementation incorrectly computes the mask to extend in place and remove the sign extension.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9yb:",9223372036854775807,b27,,,,,,,,,,,Verified,,"2021-12-03 09:08;roboduke;Changeset: 2e30fa93
Author:    merykitty <anhmdq99@gmail.com>
Committer: Paul Sandoz <psandoz@openjdk.org>
Date:      2021-12-03 17:07:11 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2e30fa936dd5fffceb17d338271f5e725c85801c
;;;","2022-04-25 10:55;sqetools;verified;;;",,,,,,,,,,,,,,,,,,,
Add a few missing words to the specification of Files.mismatch,JDK-8278168,5063997,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prappo,prappo,prappo,2021-12-02 12:36,2021-12-08 17:45,2023-10-01 09:57,2021-12-03 01:55,17,,,,,,,,,,,,,18,core-libs,,0,noreg-doc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9xf:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,,,"2021-12-03 01:55;roboduke;Changeset: d1cad246
Author:    Pavel Rappo <prappo@openjdk.org>
Date:      2021-12-03 09:54:23 +0000
URL:       https://git.openjdk.java.net/jdk/commit/d1cad2463a3f70d4ff9246d5bbae268bfa6717d7
;;;",,,,,,,,,,,,,,,,,,,,
java/nio/channels/Channels/TransferTo.java timed out,JDK-8278166,5063995,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,bpb,dcubed,dcubed,2021-12-02 12:31,2022-04-13 07:12,2023-10-01 09:57,2021-12-07 08:49,18,,,,,,,,,,,,,18,core-libs,,0,tier2,ursqe-triaged,,,,,,,,,,,,,,,"The following test timed out in the JDK18 CI:

java/nio/channels/Channels/TransferTo.java

Here's a snippet from the log file:

#section:testng
----------messages:(6/218)----------
command: testng TransferTo
reason: User specified action: run testng/othervm/timeout=180 TransferTo 
Mode: othervm [/othervm specified]
Timeout information:
--- Timeout information end.
elapsed time (seconds): 960.986
----------configuration:(0/0)----------
----------System.out:(2/74)----------
Seed from RandomFactory = -8368732576438635671L
Timeout refired 720 times
----------System.err:(0/0)----------
----------rerun:(35/7380)*----------

<snip>

result: Error. Program `/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+27-1818/macosx-x64.jdk/jdk-18.jdk/Contents/Home/bin/java' timed out (timeout set to 720000ms, elapsed time including timeout handling was 960606ms).
",,,,,,,,,,JDK-8278686,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276808,JDK-8278369,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,os_x,,,,,,"0|i2v9wz:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,Verified,,"2021-12-07 08:49;roboduke;Changeset: 7ea4b19f
Author:    Brian Burkhalter <bpb@openjdk.org>
Date:      2021-12-07 16:47:24 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7ea4b19f544cabb70590793ef59d5a8be05deeb1
;;;",,,,,,,,,,,,,,,,,,,,
Clarify that ZipInputStream does not access the CEN fields for a ZipEntry,JDK-8278165,5063993,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,lancea,ihse,ihse,2021-12-02 11:50,2022-09-21 23:08,2023-10-01 09:57,2022-09-16 11:53,,,,,,,,,,,,,,20,core-libs,,0,noreg-doc,,,,,,,,,,,,,,,,"When reading a zip file using ZipInputStream, POSIX permissions are ignored. In contrast, if the zip file is opened using ZipFile, the POSIX permissions are properly read.

This contrasting behavior is not documented, which makes it hard for a developer to understand that using ZipInputStream will result in broken code, but using ZipFile will not.",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8293756,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9wj:",9223372036854775807,b16,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@62714d2c,,,,,,,,,"2022-09-13 10:28;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/10102
Date: 2022-08-31 16:06:57 +0000;;;","2022-09-16 11:53;dukebot;Changeset: a8f0f575
Author:    Lance Andersen <lancea@openjdk.org>
Date:      2022-09-16 18:52:25 +0000
URL:       https://git.openjdk.org/jdk/commit/a8f0f575abab53e89fc315a68394b556543cbb2e
;;;",,,,,,,,,,,,,,,,,,,
--with-cacerts-src variable resolved after GenerateCacerts recipe setup,JDK-8278163,5063990,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,aleonard,aleonard,aleonard,2021-12-02 11:18,2022-02-23 11:26,2023-10-01 09:57,2021-12-03 00:29,18,,,,,,,,,,,,,18,infrastructure,,0,jdk17u-fix-request,jdk17u-fix-yes,reproducible-build,,,,,,,,,,,,,,"--with-cacerts-src variable sets GENDATA_CACERTS_SRC post recipe setup,
meaning although the recipe is correct the target dependency will be wrong.",,,,,,,,,,JDK-8282318,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278080,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9vv:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-12-03 00:29;roboduke;Changeset: 45da3aea
Author:    Andrew Leonard <aleonard@openjdk.org>
Date:      2021-12-03 08:28:37 +0000
URL:       https://git.openjdk.java.net/jdk/commit/45da3aea22fd85f214e661b2c98631cb91ddb55d
;;;","2022-02-15 08:58;aleonard;Fix Request jdk17u
This is a dependent fix for https://bugs.openjdk.java.net/browse/JDK-8278080, which was an issue resolved post JDK-8278080 being merged.
;;;","2022-02-17 04:43;goetz;Hi [~aleonard] please make a dependent pull request next time so you can push the changes at the same time. See https://mail.openjdk.java.net/pipermail/jdk-dev/2021-March/005232.html;;;","2022-02-18 01:06;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/168
Date: 2022-02-18 09:02:00 +0000;;;","2022-02-18 01:32;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/169
Date: 2022-02-18 09:26:58 +0000;;;","2022-02-18 08:52;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/170
Date: 2022-02-18 16:47:49 +0000;;;","2022-02-19 12:01;aleonard;Fully successfully tested latest PR now i've correctly patched the Skara created backport PR.
;;;","2022-02-22 08:45;aleonard;PR now ""Ready""
;;;",,,,,,,,,,,,,
Heap segments should handle alignment constraints in a deterministic fashion,JDK-8278151,5063967,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mcimadamore,mcimadamore,mcimadamore,2021-12-02 05:33,2021-12-15 06:28,2023-10-01 09:57,2021-12-15 06:28,repo-panama,,,,,,,,,,,,,,tools,,0,foreign-memaccess+abi,,,,,,,,,,,,,,,,"Alignment checks on heap layouts can ""leak"" VM implementation-dependent alignment decisions. This is discussed here:

https://mail.openjdk.java.net/pipermail/panama-dev/2021-November/015852.html

The solution is to define a ""maximum"" alignment for heap segments, which depends on the element size of the Java array backing the heap segment. For instance, a segment backed by a byte[] cannot produce addresses which are more aligned than 1-byte.

This definition of notional alignment gives us back predictability.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9qr:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2251e2f8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
compiler/codecache/CodeCacheFullCountTest.java failing in loom repo,JDK-8278149,5063966,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,coleenp,alanb,alanb,2021-12-02 05:07,2022-04-07 07:49,2023-10-01 09:57,2022-03-07 05:44,repo-loom,,,,,,,,,,,,,repo-loom,hotspot,,0,noreg-self,,,,,,,,,,,,,,,,"This is a new test in jdk-18+26, fails when merged with loom repo.

---------System.err:(11/620)---------
java.lang.RuntimeException: codecache shortage did not occur.
at CodeCacheFullCountTest.runTest(CodeCacheFullCountTest.java:71)
at CodeCacheFullCountTest.main(CodeCacheFullCountTest.java:43)
at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
at java.base/java.lang.reflect.Method.invoke(Method.java:577)
at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
at java.base/java.lang.Thread.run(Thread.java:1493)

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8284404,JDK-8279573,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9qj:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2022-02-26 05:16;coleenp;After fixing JDK-8279573, we can unproblem list this test in the loom repo.;;;","2022-03-07 01:46;alanb;The loom repo has been sync'ed up to jdk-19+12 so the changes for JDK-8279573 are in the loom repo now.;;;","2022-03-07 05:44;coleenp;Thanks Alan, removed the test from the ProblemList.txt now.

commit 89e70fc271d607bdb5f73d3b2bb578e35e61776a (HEAD -> fibers, upstream/fibers)
Author: Coleen Phillimore <coleen.phillimore@oracle.com>
Date:   Mon Mar 7 13:43:29 2022 +0000

    8278149: compiler/codecache/CodeCacheFullCountTest.java failing in loom repo

;;;",,,,,,,,,,,,,,,,,,
Javadoc for MemorySegment::set/MemorySegment::setAtIndex is missing throws tag,JDK-8278144,5063960,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mcimadamore,mcimadamore,mcimadamore,2021-12-02 04:12,2021-12-08 17:45,2023-10-01 09:57,2021-12-03 05:24,18,,,,,,,,,,,,,18,core-libs,,0,,,,,,,,,,,,,,,,,"When calling MemorySegment::set/MemorySegment::setAtIndex on a read-only segment, an UnsupportedOperationException is thrown. This exception is not documented in the javadoc for these methods.",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278145,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9p7:",9223372036854775807,b27,,,,,,,,,,,,,"2021-12-03 05:24;roboduke;Changeset: 3f28a214
Author:    Maurizio Cimadamore <mcimadamore@openjdk.org>
Date:      2021-12-03 13:23:36 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3f28a21414be32375dc0f4b12d349826bacd4810
;;;",,,,,,,,,,,,,,,,,,,,
LIR_OpLoadKlass::_info shadows the field of the same name from LIR_Op,JDK-8278141,5063956,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,shade,shade,shade,2021-12-02 03:40,2023-07-09 23:40,2023-10-01 09:57,2021-12-03 07:45,17,18,,,,,,,,,,,,18,hotspot,,0,c1,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-11,oracle-triage-17,oracle-triage-18,sonarcloud-found,,,,,,,,,,"SonarCloud complains about code added in JDK-8277417:
 Field ""_info"" shadows a field of the same name in base class ""LIR_Op""

class LIR_OpLoadKlass: public LIR_Op {
  friend class LIR_OpVisitState;

 private:
  LIR_Opr _obj;
  CodeEmitInfo* _info; <--- here

From the look of it, it seems risky to have two inconsistent fields here. Depending on which base class we use to access it, we might have different _info-s referenced.",,,,,,,,,,JDK-8311655,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277417,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9ob:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-12-02 06:35;chagedorn;ILW = Recently added field shadowing in subclass could lead inconsistent use, low, no workaround = MLH = P4;;;","2021-12-03 07:45;roboduke;Changeset: 0e7b6bcd
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-12-03 15:43:51 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0e7b6bcd8260293c3d39417f04b9b1e4409aa20a
;;;","2023-07-03 04:36;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1530
Date: 2023-07-03 11:32:15 +0000;;;","2023-07-03 11:32;shade;Fix Request (17u)

Clean followup to JDK-8277417. Applies cleanly. Tests pass.;;;",,,,,,,,,,,,,,,,,
OpenJDK8 fails to start on Windows 8.1 after upgrading compiler to VS2017,JDK-8278138,5063952,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jnordstrom,myano,myano,2021-12-02 03:11,2022-07-08 01:04,2023-10-01 09:57,2022-05-17 01:59,8,,,,,,,,,,,,,8u351,infrastructure,,0,jdk8u-fix-request,jdk8u-fix-yes,,,,,,,,,,,,,,,"If building OpenJDK8 with Visual Studio 2017, ""jdk\bin\java.exe"" command fails to start on  Windows 8.1 fcs.
On Windows 8.1 fcs, the dlls which vcruntime140.dll depends on aren't installed, such as api-ms-win-crt-stdio-l1-1-0.dll, so ""jdk\bin\java.exe"" command can't find the dependent dlls on loading vcruntime140.dll.
The dlls are installed to Windows 8.1 by Microsoft Visual C++ 2015 Redistributable or Windows Update (KB2999226 or KB3118401).

A similar problem was reported and fixed in JDK-8202557. This fix puts the required dlls into ""jdk\jre\bin"", so ""jdk\jre\bin\java.exe"" command was successful.
However, the dlls in ""jdk\jre\bin"" are not searched when ""jdk\bin\java.exe"" command loads vcruntime140.dll.

This problem doesn't occur on Windows 10 because the dlls are preinstalled.
Also, this problem doesn't affect jdk9 or later. That is because jre isn't created and the dlls are put into ""jdk\bin"".

This problem does not occur in environments which os's dlls can be loaded, but jdk should load the dll from its own binary directory.",,,,,,,,,,JDK-8287014,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8280780,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,windows_8,,,,,,"0|i2v9nf:",9223372036854775807,b01,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2022-01-13 19:01;dholmes;Sounds to me like JDK-8202557 was incomplete and needed to copy the missing DLL's into jdk/bin as well.  [~erikj] ?;;;","2022-01-14 05:55;erikj;Yes, it would seem so. ;;;","2022-03-28 23:46;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk8u-dev/pull/25
Date: 2022-03-29 06:43:24 +0000;;;","2022-04-25 23:31;jnordstrom;Fix Request
Executing binaries, f.i. java.exe from the ""bin"" directory of an OpenJDK8 ""j2sdk-image"", compiled with Visual Studio 2017 fails on Windows 8.1 FCS (i.e. an installation without suitable Universal C Runtime Windows Update). However, binaries in the ""jre/bin"" directory succeeds. This is due to the relevant C runtime DLLs only being copied to the ""jre/bin"" directory. This fix makes sure the correct DLLs are also copied to the ""bin"" directory. No new DLL files are introduced in the resulting image by this fix, they are merely duplicated in the ""bin"" directory.
The error has been reproduced on Windows 8.1, and the fix has been verified to function correctly. 

Review: https://git.openjdk.java.net/jdk8u-dev/pull/25;;;",,,,,,,,,,,,,,,,,
JFR: PrettyWriter uses incorrect year specifier,JDK-8278137,5063951,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,shade,shade,shade,2021-12-02 03:05,2021-12-08 17:45,2023-10-01 09:57,2021-12-03 07:43,18,,,,,,,,,,,,,18,hotspot,,0,sonarcloud-found,,,,,,,,,,,,,,,,"Found by SonarCloud, actually. 

For this commit:
https://github.com/openjdk/jdk/commit/ee3576a48b700df3d8ad4bd447346d4102b20818

It says:

""Week Year (""YYYY"") should not be used for date formatting

Few developers are aware of the difference between Y for ""Week year"" and y for Year when formatting and parsing a date with SimpleDateFormat or DateTimeFormatter. That's likely because for most dates, Week year and Year are the same, so testing at any time other than the first or last week of the year will yield the same value for both y and Y. But in the last week of December and the first week of January, you may get unexpected results.""

See also ErrorProne rule: https://errorprone.info/bugpattern/MisusedWeekYear",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8256735,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9n7:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2021-12-03 07:43;roboduke;Changeset: 53a43427
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-12-03 15:42:18 +0000
URL:       https://git.openjdk.java.net/jdk/commit/53a4342783d94cead4d26e5b29d286421b9432c3
;;;",,,,,,,,,,,,,,,,,,,,
runtime/whitebox/TestHiddenClassIsAlive.java failing in loom repo,JDK-8278132,5063945,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,alanb,alanb,alanb,2021-12-02 02:32,2021-12-19 23:54,2023-10-01 09:57,2021-12-19 23:54,repo-loom,,,,,,,,,,,,,repo-loom,hotspot,,0,,,,,,,,,,,,,,,,,"loom repo, tier4

----------messages:(4/311)----------
command: main -Xbootclasspath/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI TestHiddenClassIsAlive
reason: User specified action: run main/othervm -Xbootclasspath/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI TestHiddenClassIsAlive 
Mode: othervm [/othervm specified]
elapsed time (seconds): 29.049
----------configuration:(0/0)----------
----------System.out:(0/0)----------
----------System.err:(11/658)----------
java.lang.RuntimeException: Hidden class should be alive
	at TestHiddenClassIsAlive.main(TestHiddenClassIsAlive.java:57)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:1493)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9lv:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-19 23:54;alanb;This test is fixed in the loom repo to keep the hidden class alive.;;;",,,,,,,,,,,,,,,,,,,,
runtime/cds/appcds/dynamicArchive/* tests failing in loom repo,JDK-8278131,5063944,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ccheung,alanb,alanb,2021-12-02 02:26,2023-05-31 09:49,2023-10-01 09:57,2021-12-15 18:33,repo-loom,,,,,,,,,,,,,19,hotspot,,0,,,,,,,,,,,,,,,,,"loom repo, tier4, -Xcomp

runtime/cds/appcds/dynamicArchive/HelloDynamicCustom.java
runtime/cds/appcds/dynamicArchive/LambdaCustomLoader.java
runtime/cds/appcds/dynamicArchive/OldClassAndInf.java
runtime/cds/appcds/dynamicArchive/PrintSharedArchiveAndExit.java
runtime/cds/appcds/dynamicArchive/RegularHiddenClass.java",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8308596,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9ln:",9223372036854775807,b03,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-09 23:17;ccheung;The tests ran fine without the -Xcomp vm option.

The failure is that some classes were supposed to be loaded from the dynamic CDS archive but were loaded from jar.
With class unloading tracing enabled, those classes were unloaded before the dynamic archive was written.

Take the OldClassAndInf.java test as an example, the following trace output was seen in the dump time log:
class OldSuper
java.net.URLClassLoader@27716f4
class ChildOldSuper
java.net.URLClassLoader@27716f4
class GChild
java.net.URLClassLoader@27716f4
[12.340s][info ][cds] Regenerate MethodHandle Holder classes...
[14.940s][info ][class,unload] unloading class GChild 0x0000000801001410
[14.940s][info ][class,unload] unloading class ChildOldSuper 0x0000000801001208
[14.940s][info ][class,unload] unloading class OldSuper 0x0000000801001000
[14.948s][trace][class,unload] unlinking class (sibling): OldSuper
[22.705s][info ][cds         ] Regenerate MethodHandle Holder classes...done
;;;","2021-12-10 00:14;alanb;I think there is more aggressive sweeping of the code cache in the loom repo. Could GC'ing of the code caching lead to class unloading earlier than the main line? Can these tests be made a bit more reliable to ensure that the classes it is testing are not unloaded?;;;","2021-12-10 11:35;iklam;If this is a generic problem, we probably should push the fix into mainline and then it can be synced down to the loom repo.;;;","2021-12-15 18:33;roboduke;Changeset: 0dbe4c5d
Author:    Calvin Cheung <ccheung@openjdk.org>
Date:      2021-12-16 02:32:44 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0dbe4c5d516a5e43934cb18f3becaf2a7f90999f
;;;",,,,,,,,,,,,,,,,,
Failure in jdk/javadoc/tool/CheckManPageOptions.java after JDK-8274639,JDK-8278130,5063943,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,hannesw,tschatzl,tschatzl,2021-12-02 02:25,2022-02-10 14:28,2023-10-01 09:57,2021-12-02 03:35,18,,,,,,,,,,,,,18,tools,,0,tier1,ursqe-triaged,,,,,,,,,,,,,,,"After JDK-8274639 had been checked in, jdk/javadoc/tool/CheckManPageOptions.java fails with

Error: The following options are defined by the tool or doclet, but not defined in the man page:
    --link-modularity-mismatch",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9lf:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,Verified,,"2021-12-02 03:35;roboduke;Changeset: b79554bb
Author:    Hannes Wallnöfer <hannesw@openjdk.org>
Date:      2021-12-02 11:33:46 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b79554bb5cef14590d427543a40efbcc60c66548
;;;",,,,,,,,,,,,,,,,,,,,
Some preallocated OOMEs are missing stack trace,JDK-8278125,5063937,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,yyang,yyang,yyang,2021-12-02 01:58,2023-05-19 02:05,2023-10-01 09:57,2021-12-22 18:16,11,17,18,8,,,,,,,,,,19,hotspot,,0,amazon-interest,memory,,,,,,,,,,,,,,,"Our customer found that the PreallocatedOutOfMemoryErrorCount is 4 by default. It ought to pre-allocate 4 OOMEs with stack trace, but in fact, no matter how many OOMEs are thrown, only 2 OOMEs have proper stack trace.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8279526,JDK-8279196,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9k3:",9223372036854775807,b04,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-02 04:36;dholmes;Yes I can verify that is the case:

 > java17 -Xms8M -Xmx8M  ThrowOOME
Caught oom 0
java.lang.OutOfMemoryError: Java heap space
        at ThrowOOME.oome(ThrowOOME.java:21)
        at ThrowOOME.main(ThrowOOME.java:6)
Caught oom 1
java.lang.OutOfMemoryError: Java heap space
        at ThrowOOME.oome(ThrowOOME.java:21)
        at ThrowOOME.main(ThrowOOME.java:6)
Caught oom 2
java.lang.OutOfMemoryError: Java heap space
Caught oom 3
java.lang.OutOfMemoryError: Java heap space
Caught oom 4
java.lang.OutOfMemoryError: Java heap space
Caught oom 5
java.lang.OutOfMemoryError: Java heap space

Though looking at the code I can't see why that would be the case.
;;;","2021-12-02 04:58;yyang;Hi David, I guess this is because PreallocatedOutOfMemoryErrorCount is consumed multiple times in a single OOM event. I've come up with a proposed fix for this. Thanks!;;;","2021-12-07 11:23;hseigel;ILW = MLM = P4;;;","2021-12-22 18:16;roboduke;Changeset: ad1dc9c2
Author:    Yi Yang <yyang@openjdk.org>
Date:      2021-12-23 02:14:52 +0000
URL:       https://git.openjdk.java.net/jdk/commit/ad1dc9c2ae5463363aff20072a3f2ca4ea23acd2
;;;","2021-12-22 18:37;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk18/pull/67
Date: 2021-12-23 02:32:58 +0000
;;;","2021-12-23 05:36;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk18u/pull/3
Date: 2021-12-23 13:32:04 +0000
;;;",,,,,,,,,,,,,,,
serviceability/jvmti/thread/GetFrameCount/framecnt01/framecnt01.java failing in loom repo,JDK-8278124,5063936,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,sspitsyn,alanb,alanb,2021-12-02 01:18,2022-04-20 13:57,2023-10-01 09:57,2021-12-23 18:00,repo-loom,,,,,,,,,,,,,repo-loom,hotspot,,0,intermittent,noreg-self,,,,,,,,,,,,,,,"loom repo, tier4

Thread #VirtualThread-Frozen: number of frames expected: 14, got: 9
----------System.err:(12/816)----------
java.lang.RuntimeException: Check failed for VirtualThread[#18,VirtualThread-Frozen]/waiting false 14
	at framecnt01.checkFrames(framecnt01.java:49)
	at framecnt01.main(framecnt01.java:85)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:1493)

JavaTest Message: Test threw exception: java.lang.RuntimeException: Check failed for VirtualThread[#18,VirtualThread-Frozen]/waiting false 14
JavaTest Message: shutting down test",,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8283101,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9jv:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@661b156a,,,,,,,,,"2021-12-23 07:31;sspitsyn;This is a test bug. It has a lack of synchronization.
We have problem with this virtual thread:
        Thread vThread1 = Thread.ofVirtual().name(""VirtualThread-Frozen"").start(() -> {
            vThread1Started = true;
            LockSupport.park();
        });

The expected frames are:
 0: jdk/internal/vm/Continuation: yield0(Ljdk/internal/vm/ContinuationScope;Ljdk/internal/vm/Continuation;)Z
 1: jdk/internal/vm/Continuation: yield(Ljdk/internal/vm/ContinuationScope;)Z
 2: java/lang/VirtualThread: yieldContinuation()Z
 3: java/lang/VirtualThread: park()V
 4: java/lang/System$2: parkVirtualThread()V
 5: jdk/internal/misc/VirtualThreads: park()V
 6: java/util/concurrent/locks/LockSupport: park()V
 7: framecnt01: lambda$main$1()V
 8: framecnt01$$Lambda$10.0x0000000801001418: run()V
 9: java/lang/VirtualThread: run(Ljava/lang/Runnable;)V
10: java/lang/VirtualThread$VThreadContinuation: lambda$new$0(Ljava/lang/VirtualThread;Ljava/lang/Runnable;)V
11: java/lang/VirtualThread$VThreadContinuation$$Lambda$7.0x0000000801049888: run()V
12: jdk/internal/vm/Continuation: enter0()V
13: jdk/internal/vm/Continuation: enter(Ljdk/internal/vm/Continuation;Z)V

But sometimes two or even six top frames can be absent.
The check in native agent has to be relaxed a little bit.;;;","2021-12-23 17:59;sspitsyn;The suggested fix is:

diff --git a/test/hotspot/jtreg/serviceability/jvmti/thread/GetFrameCount/framecnt01/framecnt01.java b/test/hotspot/jtreg/serviceability/jvmti/thread/GetFrameCount/framecnt01/framecnt01.java
index 34ce335533f..91047cc0e33 100644
--- a/test/hotspot/jtreg/serviceability/jvmti/thread/GetFrameCount/framecnt01/framecnt01.java
+++ b/test/hotspot/jtreg/serviceability/jvmti/thread/GetFrameCount/framecnt01/framecnt01.java
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2003, 2018, Oracle and/or its affiliates. All rights reserved.
+ * Copyright (c) 2003, 2021, Oracle and/or its affiliates. All rights reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  *
  * This code is free software; you can redistribute it and/or modify it
@@ -80,7 +80,7 @@ public class framecnt01 {
             Thread.sleep(1);
         }
         // Let vthread1 to park
-        Thread.sleep(10);
+        Thread.sleep(100); // 10 is not enough as it intermittently fails with smaller frames count
 
         checkFrames(vThread1, false, 14);
         LockSupport.unpark(vThread1);
;;;",,,,,,,,,,,,,,,,,,,
serviceability/dcmd/vm/ClassLoaderStatsTest.java failing with java.lang.AssertionError: Should have a hidden class,JDK-8278123,5063935,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,lmesnik,alanb,alanb,2021-12-02 01:15,2022-05-11 23:16,2023-10-01 09:57,2022-05-10 15:29,19,,,,,,,,,,,,,19,core-svc,,0,noreg-self,,,,,,,,,,,,,,,,"loom repo, tier4

java.lang.AssertionError: Should have a hidden class
	at org.testng.Assert.fail(Assert.java:99)
	at ClassLoaderStatsTest.run(ClassLoaderStatsTest.java:100)
	at ClassLoaderStatsTest.jmx(ClassLoaderStatsTest.java:165)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:599)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:174)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:822)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:147)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.testng.TestRunner.privateRun(TestRunner.java:764)
	at org.testng.TestRunner.run(TestRunner.java:585)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1218)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1140)
	at org.testng.TestNG.runSuites(TestNG.java:1069)
	at org.testng.TestNG.run(TestNG.java:1037)
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:94)
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:54)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:1493)

===============================================
serviceability/dcmd/vm/ClassLoaderStatsTest.java
Total tests run: 1, Passes: 0, Failures: 1, Skips: 0
===============================================",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9jn:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@22f3cc74,,,,,,,,,"2021-12-02 08:49;cjplummer;Could this be related to JDK-8271623? ;;;","2021-12-20 23:32;alanb;It might be that the hidden class has been GC'ed/unloaded. Maybe the test can be changed to created it with the NESTMATE|STRONG options. Alternatively have TestClass could have a static field that keeps the class alive.;;;","2022-02-16 11:09;sspitsyn;The assert below is at the line marked with ""<<< !!! THIS IS FIRED !!! >>>"":

    public void run(CommandExecutor executor) throws ClassNotFoundException {

        // create a classloader and load our special classes
        dummyloader = new DummyClassLoader();
        Class<?> c = Class.forName(""TestClass"", true, dummyloader);
        if (c.getClassLoader() != dummyloader) {
            Assert.fail(""TestClass defined by wrong classloader: "" + c.getClassLoader());
        }

        OutputAnalyzer output = executor.execute(""VM.classloader_stats"");
        Iterator<String> lines = output.asLines().iterator();
        while (lines.hasNext()) {
            String line = lines.next();
            Matcher m = clLine.matcher(line);
            if (m.matches()) {
                // verify that DummyClassLoader has loaded 1 regular class and 2 hidden classes
                if (m.group(4).equals(""ClassLoaderStatsTest$DummyClassLoader"")) {
                    System.out.println(""DummyClassLoader line: "" + line);
                    if (!m.group(1).equals(""1"")) {
                        Assert.fail(""Should have loaded 1 class: "" + line);
                    }
                    checkPositiveInt(m.group(2));
                    checkPositiveInt(m.group(3));

                    String next = lines.next();
                    System.out.println(""DummyClassLoader next: "" + next);
                    if (!next.contains(""hidden classes"")) {
                        Assert.fail(""Should have a hidden class"");     <<< !!! THIS IS FIRED !!! >>>
                    }
                    Matcher m2 = hiddenLine.matcher(next);
                    m2.matches();
                    if (!m2.group(1).equals(""1"")) {
                        Assert.fail(""Should have loaded 1 hidden class, but found : "" + m2.group(1));
                    }
                    checkPositiveInt(m2.group(2));
                    checkPositiveInt(m2.group(3));
                }
            }
        }
    }

I see this output in the log:
ClassLoader         Parent              CLD*               Classes   ChunkSz   BlockSz  Type
0x0000000800092960  0x0000000800093288  0x00007f9174311510     234    232320    229953  jdk.internal.loader.ClassLoaders$AppClassLoader
0x0000000000000000  0x0000000000000000  0x00007f9174206a50    1974   1279488   1208938  <boot class loader>
                                                                87     47872     38641   + hidden classes
0x000000080101b3f8  0x0000000800092960  0x00007f90f81c6530       1      1536       909  ClassLoaderStatsTest$DummyClassLoader
0x0000000800093288  0x0000000000000000  0x00007f9174304150       0         0         0  jdk.internal.loader.ClassLoaders$PlatformClassLoader
Total = 4                                                     2296   1561216   1478441  
ChunkSz: Total size of all allocated metaspace chunks
BlockSz: Total size of all allocated metaspace blocks (each chunk has several blocks)

There is a line with the pattern ""hidden classes"" there. But it seems to be in an unexpected order.
Should we consider this one as a test bug?
But I can be wrong if the line with the pattern ""hidden classes"" belongs to different class loader.
;;;","2022-02-16 11:42;cjplummer;It's not the order. It's looking for ""hidden classes"" for DummyClassLoader. Here's passing output, and you can see the expected ""hidden classes"" line:

ClassLoader         Parent              CLD*               Classes   ChunkSz   BlockSz  Type
0x000000080101f408  0x00000008000863d8  0x0000fffb883cece0       1      1024       514  ClassLoaderStatsTest$DummyClassLoader
                                                                 1       256       128   + hidden classes
0x0000000000000000  0x0000000000000000  0x0000fffbf4018a30    1854    592896    559020  <boot class loader>
                                                                77     29824     18933   + hidden classes
0x00000008000863d8  0x0000000800086cc0  0x0000fffbf42d4bd0     325    201984    198975  jdk.internal.loader.ClassLoaders$AppClassLoader
0x0000000800086cc0  0x0000000000000000  0x0000fffbf42d30d0       0         0         0  jdk.internal.loader.ClassLoaders$PlatformClassLoader

This is probably yet another test failing due to unexpected GC. There is nothing in the test class keeping the hidden class live:

    static {
        try {
            // Create a hidden non-strong class
            byte[] klassBuf = readClassFile(DIR + File.separator + HCName);
            Class<?> hc = defineHiddenClass(klassBuf);
        } catch (Throwable e) {
            throw new RuntimeException(""Unexpected exception in TestClass: "" + e.getMessage());
        }
    }
;;;","2022-02-16 15:39;sspitsyn;Then it seems to be a test bug if the test does not expect class unloading. One way to prove that unloading the hidden class happens is to use the JVMTI extention event EXT_EVENT_CLASS_UNLOAD. The same can be used to fix the test to correct the expectations.
I do not see from scratch this event is skipped for hidden classes but need to double check it.;;;","2022-02-16 17:08;cjplummer;I'd suggest just assigning hc to a static, and if the problem goes away then you're done. The fix should be pushed directly to the jdk repo.;;;","2022-02-25 03:04;dlong;I can reproduce this in jdk19 with a little help from some stress options: XX:+FullGCALot -XX:+SafepointALot -XX:+ScavengeALot -XX:+DeoptimizeALot.

;;;","2022-03-10 23:24;alanb;Ron disabled the code that triggers the GC of the code cache a few weeks ago so that it only runs when there continuations:
  https://github.com/openjdk/loom/commit/a32667a52065f8e49e0fe4e39f9ee4d719b2680f

If removed from the problem list then I suspect this test will pass, like like the main line. However, as Dean points outs, it looks like this test has an issue anywhere and it could happen in the main line too.

;;;","2022-04-27 16:54;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8438
Date: 2022-04-27 23:49:56 +0000;;;","2022-05-10 15:29;dukebot;Changeset: aaeb08ec
Author:    Leonid Mesnik <lmesnik@openjdk.org>
Date:      2022-05-10 22:28:12 +0000
URL:       https://git.openjdk.java.net/jdk/commit/aaeb08eca422776eef5955473734aad75cb2829a
;;;",,,,,,,,,,,
runtime/modules/LoadUnloadModuleStress.java has duplicate -Xmx,JDK-8278116,5063926,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,shade,shade,shade,2021-12-01 23:16,2021-12-22 03:29,2023-10-01 09:57,2021-12-02 23:21,11,17,18,,,,,,,,,,,18,hotspot,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,redhat-interest,testbug,,,,,,,,,,,"Spotted by Andrey here:
 https://github.com/openjdk/jdk/pull/6574#issuecomment-983959564

Seems to be that way since initial integration in JDK-8142968.",,,,,,,,,,JDK-8279147,JDK-8279132,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8142968,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9hn:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-02 23:21;roboduke;Changeset: bef5c7a2
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-12-03 07:19:48 +0000
URL:       https://git.openjdk.java.net/jdk/commit/bef5c7a2865e53778e9e476e57c31c0b0f98bcb1
;;;","2021-12-21 01:16;shade;Fix Request (17u)

Improves testing, applies cleanly, test passes.;;;","2021-12-21 01:18;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/21
Date: 2021-12-21 09:14:52 +0000
;;;","2021-12-21 08:55;shade;Fix Request (11u)

Same reason as for 17u. Applies with minor config. Affected test passes.;;;","2021-12-21 09:00;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk11u-dev/pull/728
Date: 2021-12-21 16:54:51 +0000
;;;",,,,,,,,,,,,,,,,
gc/stress/gclocker/TestGCLockerWithSerial.java has duplicate -Xmx,JDK-8278115,5063925,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,shade,shade,shade,2021-12-01 23:11,2022-04-06 04:51,2023-10-01 09:57,2021-12-02 23:21,11,17,18,,,,,,,,,,,18,hotspot,,0,gc-serial,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,redhat-interest,testbug,,,,,,,,,"Spotted by Andrey here:
 https://github.com/openjdk/jdk/pull/6574#issuecomment-983959564

Seems to be that way all the way back to JDK-8177968. Should be -Xms, like other GCLocker tests.",,,,,,,,,,JDK-8281252,JDK-8279133,JDK-8281311,JDK-8279146,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8177968,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9hf:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-12-02 23:21;roboduke;Changeset: 0fbd2713
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-12-03 07:20:39 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0fbd2713f1b47c343172fa34be021706c957520e
;;;","2021-12-21 01:16;shade;Fix Request (17u)

Improves testing, applies cleanly, test passes.;;;","2021-12-21 01:17;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/20
Date: 2021-12-21 09:12:25 +0000
;;;","2021-12-21 08:48;shade;Fix Request (11u)

Same reason as for 17u. Applies with minor conflict, test passes.;;;","2021-12-21 08:52;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk11u-dev/pull/727
Date: 2021-12-21 16:47:11 +0000
;;;",,,,,,,,,,,,,,,,
gc/metaspace/TestPerfCountersAndMemoryPools.java fails with Used out of sync: expected 1028976 to equal 1029224,JDK-8278109,5063920,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,lmesnik,lmesnik,lmesnik,2021-12-01 19:34,2022-06-25 02:12,2023-10-01 09:57,2022-05-09 11:31,19,repo-loom,,,,,,,,,,,,repo-loom,hotspot,,0,loom,noreg-self,,,,,,,,,,,,,,,"Test gc/metaspace/TestPerfCountersAndMemoryPools.java fails with Used out of sync: expected 1028976 to equal 1029224

Seems, it tries to load class
'java.util.concurrent.locks.AbstractQueuedSynchronizer$ExclusiveNode'
between checks of PerfCounters.findByName(...) and pool.getUsage().getUsed().

So the counts are different.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9gb:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-12-01 19:38;lmesnik;The bug is reproduced only in loom however it is a generic test bug.
It might be hit by any unexpected classloading.;;;","2022-02-07 16:40;sspitsyn;Leonid, I've added noreg-self label as you said it is a test bug.;;;","2022-03-07 12:11;coleenp;This test is passing with and without the wrapper for me locally.;;;","2022-04-26 13:02;lmesnik;Fixed in repo-loom by
https://github.com/openjdk/loom/commit/debffc4a7d0b8ad54bd9be1c3c0fc22cae18fec4;;;","2022-04-26 13:37;lmesnik;The problem is not directly related to the loom itsefl, but rather a test bug. So I'm going to fix this issue in jdk 19 using this bugid.;;;","2022-04-26 13:48;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8408
Date: 2022-04-26 20:42:47 +0000;;;","2022-05-09 11:31;lmesnik;fixed in loom repo;;;",,,,,,,,,,,,,,
two sun/security/pkcs11/Signature tests failed with AssertionError,JDK-8278099,5063908,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,valeriep,dcubed,dcubed,2021-12-01 13:40,2022-02-22 09:20,2023-10-01 09:57,2021-12-02 11:29,18,,,,,,,,,,,,,18,security-libs,,0,CPU22_04-critical-approved,CPU22_04-critical-SQE-OK,jdk17u-fix-request,jdk17u-fix-yes,noreg-sqe,tier2,,,,,,,,,,,"The following tests failed in the JDK18 CI:

sun/security/pkcs11/Signature/SignatureTestPSS2.java
sun/security/pkcs11/Signature/SigInteropPSS2.java

Here's a snippet from the SignatureTestPSS2.java log file:

----------System.err:(23/1377)----------
java.lang.AssertionError
	at jdk.crypto.cryptoki/sun.security.pkcs11.wrapper.CK_MECHANISM.setParameter(CK_MECHANISM.java:167)
	at jdk.crypto.cryptoki/sun.security.pkcs11.P11PSSSignature.ensureInitialized(P11PSSSignature.java:234)
	at jdk.crypto.cryptoki/sun.security.pkcs11.P11PSSSignature.engineUpdate(P11PSSSignature.java:559)
	at java.base/java.security.Signature$Delegate.engineUpdate(Signature.java:1393)
	at java.base/java.security.Signature.update(Signature.java:902)
	at java.base/java.security.Signature.update(Signature.java:871)
	at SignatureTestPSS2.checkSignature(SignatureTestPSS2.java:115)
	at SignatureTestPSS2.test(SignatureTestPSS2.java:92)
	at SignatureTestPSS2.runTest(SignatureTestPSS2.java:85)
	at SignatureTestPSS2.main(SignatureTestPSS2.java:71)
	at PKCS11Test.premain(PKCS11Test.java:174)
	at PKCS11Test.testNSS(PKCS11Test.java:550)
	at PKCS11Test.main(PKCS11Test.java:210)
	at SignatureTestPSS2.main(SignatureTestPSS2.java:56)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.AssertionError
JavaTest Message: shutting down test

----------System.out:(5/190)----------
Beginning test run SignatureTestPSS2...
nssLibDir: /usr/lib64/
Running test with provider SunPKCS11-NSS (security manager disabled) ...
[KEYSIZE = 2048]
Testing against SHA224withRSASSA-PSS
result: Failed. Execution failed: `main' threw exception: java.lang.AssertionError


Here's a snippet from the SigInteropPSS2.java log file:

----------System.out:(5/174)----------
Beginning test run SigInteropPSS2...
nssLibDir: /usr/lib64/
Running test with provider SunPKCS11-NSS (security manager disabled) ...
	Sign: SunPKCS11-NSS
	Verify: SunRsaSign
----------System.err:(22/1288)----------
java.lang.AssertionError
	at jdk.crypto.cryptoki/sun.security.pkcs11.wrapper.CK_MECHANISM.setParameter(CK_MECHANISM.java:167)
	at jdk.crypto.cryptoki/sun.security.pkcs11.P11PSSSignature.ensureInitialized(P11PSSSignature.java:234)
	at jdk.crypto.cryptoki/sun.security.pkcs11.P11PSSSignature.engineUpdate(P11PSSSignature.java:559)
	at java.base/java.security.Signature$Delegate.engineUpdate(Signature.java:1393)
	at java.base/java.security.Signature.update(Signature.java:902)
	at java.base/java.security.Signature.update(Signature.java:871)
	at SigInteropPSS2.runTest(SigInteropPSS2.java:82)
	at SigInteropPSS2.main(SigInteropPSS2.java:71)
	at PKCS11Test.premain(PKCS11Test.java:174)
	at PKCS11Test.testNSS(PKCS11Test.java:550)
	at PKCS11Test.main(PKCS11Test.java:210)
	at SigInteropPSS2.main(SigInteropPSS2.java:48)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.AssertionError
JavaTest Message: shutting down test

STATUS:Failed.`main' threw exception: java.lang.AssertionError
----------rerun:(37/7856)*----------",,,,,,,,,,JDK-8281464,JDK-8282262,JDK-8279320,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278120,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,linux,,,,,,"0|i2v9dn:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7cafbd52,,,,,,,,,"2021-12-01 14:13;valeriep;The particular assert check (see below) is too strict when the PKCS#11 library supports other PSS-related mechanisms besides CKM_RSA_PKCS_PSS.
at jdk.crypto.cryptoki/sun.security.pkcs11.wrapper.CK_MECHANISM.setParameter(CK_MECHANISM.java:167) 

Should be removed.;;;","2021-12-02 08:54;alanb;More sightings in JDK-8278120.;;;","2021-12-02 11:29;roboduke;Changeset: 669c90e2
Author:    Valerie Peng <valeriep@openjdk.org>
Date:      2021-12-02 19:28:42 +0000
URL:       https://git.openjdk.java.net/jdk/commit/669c90e23b2397fa9fb4388e8380c95c3b19eb48
;;;","2021-12-22 08:03;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/30
Date: 2021-12-22 15:59:49 +0000
;;;","2021-12-22 08:12;goetz;Fix request [17u]

I backport this fix because the issue is in 17 as well. 
We saw it in our nightly tests.
No risk, only removes an assertion.
SAP nightly tests passed.;;;",,,,,,,,,,,,,,,,
compiler/codecache/stress/UnexpectedDeoptimizationAllTest.java failing in loom repo,JDK-8278093,5063895,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,rbackman,alanb,alanb,2021-12-01 10:42,2022-02-03 10:01,2023-10-01 09:57,2022-02-03 10:01,repo-loom,,,,,,,,,,,,,repo-loom,hotspot,,0,,,,,,,,,,,,,,,,,"compiler/codecache/stress/UnexpectedDeoptimizationAllTest.java is failing in the loom repo. Here's an extract from the hs_err log.

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007f7d6ba74139, pid=30567, tid=30601
#
# JRE version: Java(TM) SE Runtime Environment (18.0) (fastdebug build 18-internal+0-2021-12-01-1551489.alan.bateman.loom)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-internal+0-2021-12-01-1551489.alan.bateman.loom, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, parallel gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0xd40139]  frame frame::sender_for_compiled_frame<true>(RegisterMap*) const+0x169

:

Stack: [0x00007f7d278f8000,0x00007f7d279f9000],  sp=0x00007f7d279f3ef0,  free space=1007k
Thread 0x00007f7d642a14c0 [30601]
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xd40139]  frame frame::sender_for_compiled_frame<true>(RegisterMap*) const+0x169
V  [libjvm.so+0xd3eab5]  frame::sender(RegisterMap*) const+0x295
V  [libjvm.so+0x18eed9a]  SharedRuntime::reresolve_call_site(JavaThread*)+0x9a
V  [libjvm.so+0x18ef5e0]  SharedRuntime::handle_wrong_method(JavaThread*)+0x1f0
v  ~RuntimeStub::wrong_method_stub 0x00007f7d4d5d829b
J 45952% c1 compiler.codecache.stress.Helper.callMethod(Ljava/util/concurrent/Callable;I)I (64 bytes) @ 0x00007f7d551dd3f4 [0x00007f7d551dd1a0+0x0000000000000254]
j  compiler.codecache.stress.CodeCacheStressRunner.test()Z+16
j  compiler.codecache.stress.CodeCacheStressRunner$$Lambda$31+0x0000000801003c98.call()Ljava/lang/Object;+4
j  jdk.test.lib.TimeLimitedRunner.call()Ljava/lang/Void;+30
j  compiler.codecache.stress.CodeCacheStressRunner.runTest()V+26
j  compiler.codecache.stress.UnexpectedDeoptimizationAllTest.main([Ljava/lang/String;)V+14
j  java.lang.invoke.LambdaForm$DMH+0x0000000801001800.invokeStatic(Ljava/lang/Object;Ljava/lang/Object;)V+10 java.base@18-internal
j  java.lang.invoke.LambdaForm$MH+0x0000000801002c00.invoke(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;+33 java.base@18-internal
j  java.lang.invoke.Invokers$Holder.invokeExact_MT(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;+20 java.base@18-internal
j  jdk.internal.reflect.DirectMethodHandleAccessor.invokeImpl(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+55 java.base@18-internal
j  jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+23 java.base@18-internal
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+102 java.base@18-internal
j  com.sun.javatest.regtest.agent.MainWrapper$MainThread.run()V+172
j  java.lang.Thread.run()V+20 java.base@18-internal
v  ~StubRoutines::call_stub 0x00007f7d4d5d0d4a
V  [libjvm.so+0x102ff64]  JavaCalls::call_helper(JavaValue*, methodHandle const&, JavaCallArguments*, JavaThread*)+0x504
V  [libjvm.so+0x1030814]  JavaCalls::call_virtual(JavaValue*, Klass*, Symbol*, Symbol*, JavaCallArguments*, JavaThread*)+0x4b4
V  [libjvm.so+0x1030c67]  JavaCalls::call_virtual(JavaValue*, Handle, Klass*, Symbol*, Symbol*, JavaThread*)+0x77
V  [libjvm.so+0x11b0beb]  thread_entry(JavaThread*, JavaThread*)+0x12b
V  [libjvm.so+0x1a8e3aa]  JavaThread::thread_main_inner()+0x25a
V  [libjvm.so+0x1a97bc0]  Thread::call_run()+0x100
V  [libjvm.so+0x175cf24]  thread_native_entry(Thread*)+0x104",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v9ar:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2022-02-03 10:01;alanb;Rickard has fixed the issue with this commit:
  https://github.com/openjdk/loom/commit/10d3be1d6271c559fa89940a3435c857186cca06
so I think we can close the issue.;;;",,,,,,,,,,,,,,,,,,,,
Deserialization filter and filter factory property error reporting under specified,JDK-8278087,5063883,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,rriggs,rriggs,rriggs,2021-12-01 09:17,2022-08-09 09:03,2023-10-01 09:57,2021-12-21 07:09,18,,,,,,,,,,,,,19,core-libs,,0,hgupdate-sync,release-note=yes,,,,,,,,,,,,,,,"The effects of invalid values of `jdk.serialFilter` and `jdk.serialFilterFactory` properties are under specified. The behavior for invalid values of the two properties is different, use an unconventional exception type, `ExceptionInInitializerError` and leave the `OIF.Config` class uninitialized. 

When the value of the `jdk.serialFilter` or `jdk.serialFilterFactory` system property or security property is invalid, the exception message should be an aid to correct the error and deserialization should be disabled.

This fix is likely to supersede the fix for JDK-8277571 and JDK-8276609.
",,,,,,,,,,JDK-8279745,JDK-8279065,,,,,,,,,,,,,,,,,JDK-8278088,,,,,,,,,,,,JDK-8276609,,,,,,,JDK-8277322,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v997:",9223372036854775807,b03,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7e74daa7,,,,,,,Verified,,"2021-12-21 07:09;rriggs;Changeset: f90425a1
Author: Roger Riggs <rriggs@openjdk.org>
Date: 2021-12-21 14:24:44 +0000
URL: https://git.openjdk.java.net/jdk/commit/f90425a1cbbc686045c87086af586e62f05f6c49;;;","2021-12-21 07:40;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk18/pull/55
Date: 2021-12-21 15:35:55 +0000
;;;","2021-12-21 14:04;roboduke;Changeset: db3d6d77
Author:    Roger Riggs <rriggs@openjdk.org>
Date:      2021-12-21 15:42:36 +0000
URL:       https://git.openjdk.java.net/jdk/commit/db3d6d772411c4e7bc81d6411abb139462e1581f
;;;","2022-01-19 12:32;roboduke;Changeset: f90425a1
Author:    Roger Riggs <rriggs@openjdk.org>
Date:      2021-12-21 14:24:44 +0000
URL:       https://git.openjdk.java.net/jdk/commit/f90425a1cbbc686045c87086af586e62f05f6c49
;;;",,,,,,,,,,,,,,,,,
[REDO] ImageIO.write() method will throw IndexOutOfBoundsException ,JDK-8278086,5063880,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jdv,vdyakov,vdyakov,2021-12-01 08:57,2022-10-12 23:08,2023-10-01 09:57,2022-10-05 22:26,11,15,16,8,,,,,,,,,,20,client-libs,,0,dcspn,regression_8262297,reproducer-yes,sn_126,sn_128,webbug,,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
Windows x64 19042.804 OpenJDK Runtime Environment AdoptOpenJDK (build 15.0.2+7)
WSL Kail Linux OpenJDK Runtime Environment (build 11.0.10+9-post-Debian-1)

A DESCRIPTION OF THE PROBLEM :
With some specific images, ImageIO.write() method will throw IndexOutOfBoundsException which isn't declared to be thrown.

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
My source code ""MyChange.java"" was pasted below.
And I uploaded the input image to https://i.ibb.co/Js518Zx/image.png.


EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
throw IOException or declare this method maybe throw IndexOutOfBoundsException
ACTUAL -
Exception in thread ""main"" java.lang.IndexOutOfBoundsException
        at java.base/java.io.RandomAccessFile.writeBytes(Native Method)
        at java.base/java.io.RandomAccessFile.write(RandomAccessFile.java:561)
        at java.desktop/javax.imageio.stream.FileImageOutputStream.write(FileImageOutputStream.java:124)
        at java.desktop/com.sun.imageio.plugins.bmp.BMPImageWriter.write(BMPImageWriter.java:654)
        at java.desktop/javax.imageio.ImageWriter.write(ImageWriter.java:613)
        at java.desktop/javax.imageio.ImageIO.doWrite(ImageIO.java:1628)
        at java.desktop/javax.imageio.ImageIO.write(ImageIO.java:1554)
        at test.MyChange.main(MyChange.java:16)

---------- BEGIN SOURCE ----------

package test;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;

import javax.imageio.ImageIO;

public class MyChange {
    public static void main(String[] args) {
        File inputFile = new File(""0.png"");
        try (InputStream is = new FileInputStream(inputFile)) {
            BufferedImage image = ImageIO.read(is);
            ImageIO.write(image, ""bmp"", new File(""0.bmp""));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

---------- END SOURCE ----------

FREQUENCY : always


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8262297,,,,,,,,,,,,,,,JDK-8278047,,,,,,,,,,,,,,,,,,,,,,,,,"2021-12-01 08:57;vdyakov;0.png;https://bugs.openjdk.org/secure/attachment/97240/0.png","2021-12-01 08:57;vdyakov;MyChange.java;https://bugs.openjdk.org/secure/attachment/97241/MyChange.java",,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v98j:",9223372036854775807,b19,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@377c353d,,,,,,,,,"2022-09-06 03:04;jdv;Observation:

According to https://docs.microsoft.com/en-us/windows/win32/api/wingdi/ns-wingdi-bitmapv5header, standard bpp supported are 0, 1, 4, 8, 16, 24 and 32.

But https://docs.microsoft.com/en-us/dotnet/desktop/winforms/advanced/types-of-bitmaps?view=netframeworkdesktop-4.8#bmp also mentions about 15bpp.

All the tests captured in https://bugs.openjdk.org/browse/JDK-8278047 are using 15bpp.

https://github.com/openjdk/jdk/blob/master/src/java.desktop/share/classes/com/sun/imageio/plugins/bmp/BMPImageWriter.java#L361 also mentions that we encode USHORT_555_RGB format. So we might hit 15bpp cases.;;;","2022-09-06 04:52;jdv;We use 16bit DataBuffer to store RGB555 ushort format and while calculating bpp we round it off to 16 in BMPImageWriter : https://github.com/openjdk/jdk/blob/master/src/java.desktop/share/classes/com/sun/imageio/plugins/bmp/BMPImageWriter.java#L472. This is the reason we dont see any IOOBE in case of tests present in https://bugs.openjdk.org/browse/JDK-8278047.

If i allow bpp15 also in canEncodeImage(), none of the test in https://bugs.openjdk.org/browse/JDK-8278047 fail.;;;","2022-09-25 23:50;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/10419
Date: 2022-09-26 06:45:58 +0000;;;","2022-10-05 22:25;dukebot;Changeset: 6029120a
Author:    Jayathirth D V <jdv@openjdk.org>
Date:      2022-10-06 05:23:38 +0000
URL:       https://git.openjdk.org/jdk/commit/6029120a5f53061f386d5dc72c76adf03ab28840
;;;",,,,,,,,,,,,,,,,,
C2: expand_dtrace_alloc_probe doesn't take effect in macro.cpp,JDK-8278079,5063871,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ddong,ddong,ddong,2021-12-01 07:32,2022-01-03 23:20,2023-10-01 09:57,2021-12-03 05:32,11,17,18,8,,,,,,,,,,18,hotspot,,0,c2,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,,"expand_fast_path is always false when alloc probe is enabled, which make expand_dtrace_alloc_probe can't take effect",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8237581,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v96j:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-12-02 07:18;chagedorn;ILW = expand_dtrace_alloc_probe has no effect, low?, no workaround = MLH = P4;;;","2021-12-03 05:32;roboduke;Changeset: f7237793
Author:    Denghui Dong <ddong@openjdk.org>
Date:      2021-12-03 13:31:06 +0000
URL:       https://git.openjdk.java.net/jdk/commit/f7237793ffa3a5a804fea49f165c8b9f1935cfac
;;;",,,,,,,,,,,,,,,,,,,
Cannot reference super before supertype constructor has been called,JDK-8278078,5063870,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,asotona,asotona,asotona,2021-12-01 07:07,2021-12-08 17:44,2023-10-01 09:57,2021-12-02 07:31,18,,,,,,,,,,,,,18,tools,,0,,,,,,,,,,,,,,,,,"Pull request #4376 regressed compilation of all inner classes using <enclosing class>.super pattern in their constructor argument to fail with:
 error: cannot reference super before supertype constructor has been called

Following source fragment can be used as a minimal test case:
    class EnclClass {
        class InnerClass extends Exception {
            InnerClass() {
                super(EnclClass.super.toString());
            }
        }
    }

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8261006,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,b07,18,,,,,,,,"0|i2v96b:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,,,"2021-12-02 07:31;roboduke;Changeset: 8d9cb2ef
Author:    Adam Sotona <asotona@openjdk.org>
Date:      2021-12-02 15:29:26 +0000
URL:       https://git.openjdk.java.net/jdk/commit/8d9cb2efe655cc3945b3fe51a5e7d90f48b688e6
;;;",,,,,,,,,,,,,,,,,,,,
Update javadoc page with new options in JDK 18,JDK-8278077,5063869,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,hannesw,hannesw,hannesw,2021-12-01 07:05,2021-12-13 03:03,2023-10-01 09:57,2021-12-06 07:52,18,,,,,,,,,,,,,18,tools,,0,,,,,,,,,,,,,,,,,"Two new options are being added to the javadoc tool in 18 that have not yet been added to the javadoc manpage:

    --add-script <file>
              Add a script file to the generated documentation
    --link-modularity-mismatch (warn|info)
              Report external documentation with wrong modularity as either 
              warning or informational message. The default behaviour is to
              report a warning. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8274801,JDK-8275786,JDK-8274639,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v963:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"typos in MemorySegment::set, MemorySegment::setAtIndex javadoc",JDK-8278071,5063864,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mcimadamore,mcimadamore,mcimadamore,2021-12-01 05:47,2021-12-08 17:44,2023-10-01 09:57,2021-12-02 02:42,18,,,,,,,,,,,,,18,core-libs,,0,noreg-doc,,,,,,,,,,,,,,,,"The IndexOutOfBounds @throws clause for the setter dereference methods in MemorySegment appear to be truncated:

* @throws IndexOutOfBoundsException when the dereference operation falls outside the <em>spatial bounds</em> of the
*/

Probably result of some copy and paste error.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v94z:",9223372036854775807,b27,,,,,,,,,,,,,"2021-12-02 02:42;roboduke;Changeset: 16cfbc4f
Author:    Maurizio Cimadamore <mcimadamore@openjdk.org>
Date:      2021-12-02 10:41:36 +0000
URL:       https://git.openjdk.java.net/jdk/commit/16cfbc4f4c0e979160cc8fb946453fa8afa5d1cc
;;;",,,,,,,,,,,,,,,,,,,,
JQuery v3.4.1 references still exists in Oracle JDK 11.0.13,JDK-8278069,5063860,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,ewhelan,shadowbug,shadowbug,2021-12-01 04:48,2022-01-10 02:48,2023-10-01 09:57,2021-12-07 03:21,11.0.9-oracle,,,,,,,,,,,,,11.0.15-oracle,tools,,0,11bpr-critical-approved,bugdb_33624246,jdk11u-na,noreg-other,,,,,,,,,,,,,"JQuery was upgraded to v3.5.1 in JDK-8245981, however there is still one remaining file which refers to JQuery v3.4.1

The related file is jdk.javadoc/share/classes/jdk/javadoc/internal/doclets/formats/html/resources/jquery/external/jquery/jquery.js 

This file should contain the JQuery 3.5.1 source instead",,,,,,,,,,JDK-8279126,JDK-8278511,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278435,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v943:",9223372036854775807,b01,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2021-12-07 05:36;goetz;11u notice

In OpenJDK 11.0.14 the mentioned file contains the proper sources.  Flagging jdk11u-na.;;;",,,,,,,,,,,,,,,,,,,,
Fix next-line modifier (snippet markup),JDK-8278068,5063859,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,prappo,prappo,prappo,2021-12-01 04:48,2021-12-13 19:18,2023-10-01 09:57,2021-12-07 10:59,18,,,,,,,,,,,,,18,tools,,0,,,,,,,,,,,,,,,,,"One remnant from the previous design iteration is the current behavior of the next-line modifier `:`. Currently, `:` is allowed on the per-tag as opposed to per-line basis. For example:

// @tag1 : @tag2
// @tag1 : @tag2 :
// @tag1 @tag2 :

So, currently, *each* tag on a line can apply either to the same line or the next line. However, JEP 413 defines that the `:` modifier should only work on the per-line basis: either all tags apply to the next line or none of them.",,,,,,,,,,JDK-8278693,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v93v:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2021-12-07 10:59;roboduke;Changeset: a8a1fbce
Author:    Pavel Rappo <prappo@openjdk.org>
Date:      2021-12-07 18:58:08 +0000
URL:       https://git.openjdk.java.net/jdk/commit/a8a1fbce5b8efe014b2dac16b83e60de4cf65a3e
;;;",,,,,,,,,,,,,,,,,,,,
serviceability/jvmti/thread/GetStackTrace/getstacktr08/getstacktr08.java failing in loom repo,JDK-8278056,5063844,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,sspitsyn,alanb,alanb,2021-12-01 02:13,2021-12-17 01:48,2023-10-01 09:57,2021-12-17 01:48,repo-loom,,,,,,,,,,,,,repo-loom,hotspot,,0,noreg-self,,,,,,,,,,,,,,,,"loom repo, tier4.

FATAL ERROR in native method: Wrong object class or methodID passed to JNI call
	at getstacktr08.nativeChain(Native Method)
	at getstacktr08$TestThread.chain3(getstacktr08.java:104)
	at getstacktr08$TestThread.chain2(getstacktr08.java:100)
	at getstacktr08$TestThread.chain1(getstacktr08.java:96)
	at getstacktr08$TestThread.run(getstacktr08.java:92)
	at java.lang.Thread.run(java.base@18-internal/Thread.java:1493)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v90j:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@661b156a,,,,,,,,,"2021-12-17 01:47;sspitsyn;This is a test bug. Wrong class was used to make a JNI call.
The suggested fix is:

diff --git a/test/hotspot/jtreg/serviceability/jvmti/thread/GetStackTrace/getstacktr08/getstacktr08.java b/test/hotspot/jtreg/serviceability/jvmti/thread/GetStackTrace/getstacktr08/getstacktr08.java
index 5eaf3f4e872..935c08f11d0 100644
--- a/test/hotspot/jtreg/serviceability/jvmti/thread/GetStackTrace/getstacktr08/getstacktr08.java
+++ b/test/hotspot/jtreg/serviceability/jvmti/thread/GetStackTrace/getstacktr08/getstacktr08.java
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2003, 2018, Oracle and/or its affiliates. All rights reserved.
+ * Copyright (c) 2003, 2021, Oracle and/or its affiliates. All rights reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  *
  * This code is free software; you can redistribute it and/or modify it
@@ -63,7 +63,7 @@ public class getstacktr08 {
     }
 
     native static void getReady(Class clz, byte bytes[]);
-    native static void nativeChain();
+    native static void nativeChain(Class clz);
 
     public static void main(String args[]) throws Exception {
         ClassLoader cl = getstacktr08.class.getClassLoader();
@@ -101,7 +101,7 @@ public class getstacktr08 {
         }
 
         static void chain3() {
-            nativeChain();
+            nativeChain(TestThread.class);
         }
 
         static void chain4() {
diff --git a/test/hotspot/jtreg/serviceability/jvmti/thread/GetStackTrace/getstacktr08/libgetstacktr08.cpp b/test/hotspot/jtreg/serviceability/jvmti/thread/GetStackTrace/getstacktr08/libgetstacktr08.cpp
index e63f4db3359..e434cfe0b68 100644
--- a/test/hotspot/jtreg/serviceability/jvmti/thread/GetStackTrace/getstacktr08/libgetstacktr08.cpp
+++ b/test/hotspot/jtreg/serviceability/jvmti/thread/GetStackTrace/getstacktr08/libgetstacktr08.cpp
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2003, 2018, Oracle and/or its affiliates. All rights reserved.
+ * Copyright (c) 2003, 2021, Oracle and/or its affiliates. All rights reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  *
  * This code is free software; you can redistribute it and/or modify it
@@ -39,7 +39,7 @@ static frame_info expected_platform_frames[] = {
     {""Lgetstacktr08$TestThread;"", ""checkPoint"", ""()V""},
     {""Lgetstacktr08$TestThread;"", ""chain5"", ""()V""},
     {""Lgetstacktr08$TestThread;"", ""chain4"", ""()V""},
-    {""Lgetstacktr08;"", ""nativeChain"", ""()V""},
+    {""Lgetstacktr08;"", ""nativeChain"", ""(Ljava/lang/Class;)V""},
     {""Lgetstacktr08$TestThread;"", ""chain3"", ""()V""},
     {""Lgetstacktr08$TestThread;"", ""chain2"", ""()V""},
     {""Lgetstacktr08$TestThread;"", ""chain1"", ""()V""},
@@ -51,7 +51,7 @@ static frame_info expected_virtual_frames[] = {
     {""Lgetstacktr08$TestThread;"", ""checkPoint"", ""()V""},
     {""Lgetstacktr08$TestThread;"", ""chain5"", ""()V""},
     {""Lgetstacktr08$TestThread;"", ""chain4"", ""()V""},
-    {""Lgetstacktr08;"", ""nativeChain"", ""()V""},
+    {""Lgetstacktr08;"", ""nativeChain"", ""(Ljava/lang/Class;)V""},
     {""Lgetstacktr08$TestThread;"", ""chain3"", ""()V""},
     {""Lgetstacktr08$TestThread;"", ""chain2"", ""()V""},
     {""Lgetstacktr08$TestThread;"", ""chain1"", ""()V""},
@@ -177,9 +177,9 @@ Java_getstacktr08_getReady(JNIEnv *jni, jclass cls, jclass clazz, jbyteArray byt
 }
 
 JNIEXPORT void JNICALL
-Java_getstacktr08_nativeChain(JNIEnv *jni, jclass cls) {
+Java_getstacktr08_nativeChain(JNIEnv *jni, jclass cls, jclass clazz) {
   if (mid_chain4 != NULL) {
-    jni->CallStaticVoidMethod(cls, mid_chain4);
+    jni->CallStaticVoidMethod(clazz, mid_chain4);
   }
   if (!compare_stack_trace(jvmti, jni, get_current_thread(jvmti, jni), 3)) {
     jni->ThrowNew(jni->FindClass(""java/lang/RuntimeException""), ""Stacktrace differs from expected."");
;;;",,,,,,,,,,,,,,,,,,,,
serviceability/jvmti/vthread/ContStackDepthTest/ContStackDepthTest.java failing in loom repo with Xcomp,JDK-8278053,5063841,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,rpressler,alanb,alanb,2021-12-01 02:07,2022-07-27 03:41,2023-10-01 09:57,2022-06-21 09:51,19,repo-loom,,,,,,,,,,,,19,hotspot,,0,intermittent,loom,,,,,,,,,,,,,,,"loom repo, tier4. This test fails intermittently with:

#  Internal Error (<top>/workspace/open/src/hotspot/share/prims/jvmtiThreadState.cpp:601), pid=11953, tid=12203
#  assert(_cur_stack_depth == num_frames) failed: cur_stack_depth out of sync _cur_stack_depth: 14 num_frames: 18

With -Xcomp runs it seems to fail more frequently, the stack trace is the same:

Stack: [0x00007fc964b85000,0x00007fc964c86000],  sp=0x00007fc964c840b0,  free space=1020k
Thread 0x00007fc9743a5150 [9507]
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x11cacdc]  JvmtiThreadState::decr_cur_stack_depth()+0xdc
V  [libjvm.so+0x118d5c0]  JvmtiExport::post_method_exit_inner(JavaThread*, methodHandle&, JvmtiThreadState*, bool, frame, jvalue&)+0x210
V  [libjvm.so+0x11906bb]  JvmtiExport::post_method_exit(JavaThread*, Method*, frame)+0x1fb
V  [libjvm.so+0xec0d61]  InterpreterRuntime::post_method_exit(JavaThread*)+0x91
j  jdk.internal.vm.Continuation.enter0()V+9 java.base@19-internal
j  jdk.internal.vm.Continuation.enter(Ljdk/internal/vm/Continuation;Z)V+1 java.base@19-internal
J 3648  jdk.internal.vm.Continuation.enterSpecial(Ljdk/internal/vm/Continuation;Z)V java.base@19-internal (0 bytes) @ 0x00007fc969e017e9 [0x00007fc969e01760+0x0000000000000089]
j  jdk.internal.vm.Continuation.run()V+117 java.base@19-internal
j  ContFramePopTest.runTest()V+43
j  ContFramePopTest.main([Ljava/lang/String;)V+49
J 3149 c2 java.lang.invoke.LambdaForm$DMH+0x0000000801002000.invokeStatic(Ljava/lang/Object;Ljava/lang/Object;)V java.base@19-internal (14 bytes) @ 0x00007fc969ccced8 [0x00007fc969ccce80+0x0000000000000058]
J 3206 c2 java.lang.invoke.LambdaForm$MH+0x0000000801003400.invoke(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; java.base@19-internal (38 bytes) @ 0x00007fc969d36170 [0x00007fc969d360a0+0x00000000000000d0]
J 3207 c2 java.lang.invoke.Invokers$Holder.invokeExact_MT(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; java.base@19-internal (24 bytes) @ 0x00007fc969d3bab8 [0x00007fc969d3b960+0x0000000000000158]
j  jdk.internal.reflect.DirectMethodHandleAccessor.invokeImpl(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+55 java.base@19-internal
j  jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+23 java.base@19-internal
J 1132 c2 java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; java.base@19-internal (108 bytes) @ 0x00007fc96992f3c0 [0x00007fc96992f120+0x00000000000002a0]
j  com.sun.javatest.regtest.agent.MainWrapper$MainThread.run()V+172
J 3104 c2 java.lang.Thread.run()V java.base@19-internal (26 bytes) @ 0x00007fc969ce20e8 [0x00007fc969ce2060+0x0000000000000088]
v  ~StubRoutines::call_stub 0x00007fc9695a5d4a
V  [libjvm.so+0xed30c7]  JavaCalls::call_helper(JavaValue*, methodHandle const&, JavaCallArguments*, JavaThread*)+0x4e7
V  [libjvm.so+0xed39ec]  JavaCalls::call_virtual(JavaValue*, Klass*, Symbol*, Symbol*, JavaCallArguments*, JavaThread*)+0x26c
V  [libjvm.so+0xed3af7]  JavaCalls::call_virtual(JavaValue*, Handle, Klass*, Symbol*, Symbol*, JavaThread*)+0x77
V  [libjvm.so+0x1004c99]  thread_entry(JavaThread*, JavaThread*)+0x89
V  [libjvm.so+0x174d3ca]  JavaThread::thread_main_inner()+0x1ea
V  [libjvm.so+0x1754990]  Thread::call_run()+0x100
V  [libjvm.so+0x1492844]  thread_native_entry(Thread*)+0x104",,,,,,,,,,JDK-8291279,JDK-8291127,JDK-8288920,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8288949,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v8zv:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@661b156a,,,,,,,,,"2022-01-29 08:11;alanb;serviceability/jvmti/vthread/ContFramePopTest/ContFramePopTest.java is also failing, several sightings in tier7. Here's one:

https://mach5.us.oracle.com:10060/api/v1/results/albatem-loom-20220129-1133-28618637-tier7-comp-open_test_hotspot_jtreg_hotspot_serviceability-linux-x64-debug-95-1643459819-191/log
https://mach5.us.oracle.com:10060/api/v1/results/albatem-loom-20220129-1133-28618637-tier7-comp-open_test_hotspot_jtreg_hotspot_serviceability-linux-x64-debug-95-1643459819-191/artifacts/hs_err_pid2156414.log;;;","2022-04-20 13:20;sspitsyn;This bug is reproducible.
Here is the hs_err dump:

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/scratch/sspitsyn/loom5/open/src/hotspot/share/prims/jvmtiThreadState.cpp:628), pid=21241, tid=23984
#  assert(_cur_stack_depth == num_frames) failed: cur_stack_depth out of sync _cur_stack_depth: 22 num_frames: 21
#
# JRE version: Java(TM) SE Runtime Environment (19.0) (fastdebug build 19-internal-2022-04-16-0209416.sspitsyn...)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 19-internal-2022-04-16-0209416.sspitsyn..., compiled mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0x1392524]  JvmtiThreadState::cur_stack_depth()+0xc4
#
# Core dump will be written. Default location: /scratch/sspitsyn/tst/loom5/JTwork/scratch/core.21241
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#

---------------  S U M M A R Y ------------

Command Line: -Dtest.vm.opts=-Xcomp -XX:-VerifyContinuations -XX:+CheckUnhandledOops -Xcheck:jni -Dtest.tool.vm.opts=-J-Xcomp -J-XX:-VerifyContinuations -J-XX:+CheckUnhandledOops -J-Xcheck:jni -Dtest.compiler.opts= -Dtest.java.opts= -Dtest.jdk=/scratch/sspitsyn/loom5/build/linux-x64-debug/images/jdk -Dcompile.jdk=/scratch/sspitsyn/loom5/build/linux-x64-debug/images/jdk -Dtest.timeout.factor=1.0 -Dtest.nativepath=/scratch/sspitsyn/loom5/build/linux-x64-debug/images/test/hotspot/jtreg/native -Dtest.root=/scratch/sspitsyn/loom5/open/test/hotspot/jtreg -Dtest.name=serviceability/jvmti/vthread/ContStackDepthTest/ContStackDepthTest.java -Dtest.file=/scratch/sspitsyn/loom5/open/test/hotspot/jtreg/serviceability/jvmti/vthread/ContStackDepthTest/ContStackDepthTest.java -Dtest.src=/scratch/sspitsyn/loom5/open/test/hotspot/jtreg/serviceability/jvmti/vthread/ContStackDepthTest -Dtest.src.path=/scratch/sspitsyn/loom5/open/test/hotspot/jtreg/serviceability/jvmti/vthread/ContStackDepthTest -Dtest.classes=/scratch/sspitsyn/tst/loom5/JTwork/classes/serviceability/jvmti/vthread/ContStackDepthTest/ContStackDepthTest.d -Dtest.class.path=/scratch/sspitsyn/tst/loom5/JTwork/classes/serviceability/jvmti/vthread/ContStackDepthTest/ContStackDepthTest.d -Dtest.modules=java.base/jdk.internal.vm --add-modules=java.base --add-exports=java.base/jdk.internal.vm=ALL-UNNAMED -Xcomp -XX:-VerifyContinuations -XX:+CheckUnhandledOops -Xcheck:jni -Djava.library.path=/scratch/sspitsyn/loom5/build/linux-x64-debug/images/test/hotspot/jtreg/native --enable-preview -agentlib:ContStackDepthTest com.sun.javatest.regtest.agent.MainWrapper /scratch/sspitsyn/tst/loom5/JTwork/serviceability/jvmti/vthread/ContStackDepthTest/ContStackDepthTest.d/main.1.jta

Host: hotspot-oraclelinux-01, Intel(R) Xeon(R) Platinum 8167M CPU @ 2.00GHz, 32 cores, 235G, Oracle Linux Server release 7.8
Time: Wed Apr 20 20:14:45 2022 GMT elapsed time: 37.864246 seconds (0d 0h 0m 37s)

---------------  T H R E A D  ---------------

Current thread (0x00007feef833fb50):  JavaThread ""MainThread"" [_thread_in_vm, id=23984, stack(0x00007fee797bb000,0x00007fee798bc000)]

Stack: [0x00007fee797bb000,0x00007fee798bc000],  sp=0x00007fee798b9280,  free space=1016k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x1392524]  JvmtiThreadState::cur_stack_depth()+0xc4
V  [libjvm.so+0x134cec9]  JvmtiExport::post_method_exit_inner(JavaThread*, methodHandle&, JvmtiThreadState*, bool, frame, jvalue&) [clone .part.0]+0xb9
V  [libjvm.so+0x135041e]  JvmtiExport::post_method_exit(JavaThread*, Method*, frame)+0x1ae
V  [libjvm.so+0xfc740b]  InterpreterRuntime::post_method_exit(JavaThread*)+0xbb
j  java.lang.Object.<init>()V+0 java.base@19-internal
j  java.lang.invoke.MethodType.<init>(Ljava/lang/Class;[Ljava/lang/Class;)V+1 java.base@19-internal
j  java.lang.invoke.MethodType.makeImpl(Ljava/lang/Class;[Ljava/lang/Class;Z)Ljava/lang/invoke/MethodType;+17 java.base@19-internal
j  java.lang.invoke.MethodHandleNatives.findMethodHandleType(Ljava/lang/Class;[Ljava/lang/Class;)Ljava/lang/invoke/MethodType;+3 java.base@19-internal
v  ~StubRoutines::call_stub 0x00007feee6dd0d47
V  [libjvm.so+0xfdd554]  JavaCalls::call_helper(JavaValue*, methodHandle const&, JavaCallArguments*, JavaThread*)+0x504
V  [libjvm.so+0xfde708]  JavaCalls::call_static(JavaValue*, Klass*, Symbol*, Symbol*, JavaCallArguments*, JavaThread*)+0x318
V  [libjvm.so+0x19f03f2]  SystemDictionary::find_method_handle_type(Symbol*, Klass*, JavaThread*)+0xfc2
V  [libjvm.so+0x7605e8]  BootstrapInfo::resolve_bss_name_and_type(JavaThread*)+0xd8
V  [libjvm.so+0x766f03]  BootstrapInfo::resolve_bsm(JavaThread*)+0x1183
V  [libjvm.so+0x19f2c4e]  SystemDictionary::invoke_bootstrap_method(BootstrapInfo&, JavaThread*)+0x4e
V  [libjvm.so+0x1407965]  LinkResolver::resolve_dynamic_call(CallInfo&, BootstrapInfo&, JavaThread*)+0x25
V  [libjvm.so+0x1407ec6]  LinkResolver::resolve_invokedynamic(CallInfo&, constantPoolHandle const&, int, JavaThread*)+0x136
V  [libjvm.so+0xfc99aa]  InterpreterRuntime::resolve_invokedynamic(JavaThread*)+0x26a
V  [libjvm.so+0xfce810]  InterpreterRuntime::resolve_from_cache(JavaThread*, Bytecodes::Code)+0x1a0
j  ContStackDepthTest.lambda$static$0()V+21
J 5765  jdk.internal.vm.Continuation.enterSpecial(Ljdk/internal/vm/Continuation;ZZ)V java.base@19-internal (0 bytes) @ 0x00007feee7bbc355 [0x00007feee7bbc2c0+0x0000000000000095]
j  jdk.internal.vm.Continuation.run()V+152 java.base@19-internal
j  ContStackDepthTest.getNextFib()Ljava/math/BigInteger;+3
j  ContStackDepthTest.fibTest()V+41
J 5435 c1 ContStackDepthTest.main([Ljava/lang/String;)V (79 bytes) @ 0x00007feedfa9a594 [0x00007feedfa9a280+0x0000000000000314]
J 5441 c1 java.lang.invoke.LambdaForm$DMH+0x0000000801002400.invokeStatic(Ljava/lang/Object;Ljava/lang/Object;)V java.base@19-internal (14 bytes) @ 0x00007feedfb0e7d4 [0x00007feedfb0e3c0+0x0000000000000414]
J 5574 c1 java.lang.invoke.LambdaForm$MH+0x0000000801003800.invoke(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; java.base@19-internal (38 bytes) @ 0x00007feedfac5714 [0x00007feedfac5120+0x00000000000005f4]
J 5577 c1 java.lang.invoke.Invokers$Holder.invokeExact_MT(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; java.base@19-internal (24 bytes) @ 0x00007feedfbac15c [0x00007feedfbab9e0+0x000000000000077c]
j  jdk.internal.reflect.DirectMethodHandleAccessor.invokeImpl(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+55 java.base@19-internal
j  jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+23 java.base@19-internal
J 2920 c2 java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object; java.base@19-internal (108 bytes) @ 0x00007feee78cf658 [0x00007feee78cf380+0x00000000000002d8]
J 5281 c1 com.sun.javatest.regtest.agent.MainWrapper$MainThread.run()V (476 bytes) @ 0x00007feedfb8eecc [0x00007feedfb8d660+0x000000000000186c]
J 5277 c1 java.lang.Thread.run()V java.base@19-internal (19 bytes) @ 0x00007feedfa858c4 [0x00007feedfa85720+0x00000000000001a4]
v  ~StubRoutines::call_stub 0x00007feee6dd0d47
V  [libjvm.so+0xfdd554]  JavaCalls::call_helper(JavaValue*, methodHandle const&, JavaCallArguments*, JavaThread*)+0x504
V  [libjvm.so+0xfdde04]  JavaCalls::call_virtual(JavaValue*, Klass*, Symbol*, Symbol*, JavaCallArguments*, JavaThread*)+0x4b4
V  [libjvm.so+0xfde277]  JavaCalls::call_virtual(JavaValue*, Handle, Klass*, Symbol*, Symbol*, JavaThread*)+0x77
V  [libjvm.so+0x1159c4b]  thread_entry(JavaThread*, JavaThread*)+0x12b
V  [libjvm.so+0x1a5717a]  JavaThread::thread_main_inner()+0x21a
V  [libjvm.so+0x1a64a10]  Thread::call_run()+0x100
V  [libjvm.so+0x1710274]  thread_native_entry(Thread*)+0x104;;;","2022-04-20 13:30;sspitsyn;This happens in the context of the indy bootstrap method execution.
The JvmtiExport::post_method_exit() is triggered by return from Java method:
 java.lang.Object.<init>()
This is for post-19-integration.;;;","2022-04-22 15:14;cjplummer;FYI the assert has been removed. I didn't realize that it was still detecting issues, and it's something that long ago we decided we did not want in jdk due to performance concerns. So you'll need to re-add it to reproduce this problem.;;;","2022-06-08 17:46;lmesnik;The assertion is still in place for debug builds.
The problem is that method exit is not generated for jdk/internal/vm/Continuation.yield after yield0

So the cur_stack_depth is incorrect. 

Note that it should not affect JDK users, because all these methods don't work inside of virtual threads because of transitions. So might be need to see how the same scenario is tested with virtual threads. To test that cur_stack_depth is correctly synced when the virtual thread is used.

;;;","2022-06-14 05:24;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk19/pull/12
Date: 2022-06-14 08:02:21 +0000;;;","2022-06-21 09:51;dukebot;Changeset: 97200a78
Author:    Ron Pressler <rpressler@openjdk.org>
Committer: Serguei Spitsyn <sspitsyn@openjdk.org>
Date:      2022-06-21 16:48:33 +0000
URL:       https://git.openjdk.org/jdk19/commit/97200a78b176ccc8781acb67db2af2f62572d46a
;;;",,,,,,,,,,,,,,
serviceability/jvmti/thread/GetCurrentContendedMonitor/contmon01/contmon01.java failing in loom repo,JDK-8278052,5063840,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,sspitsyn,alanb,alanb,2021-12-01 02:04,2021-12-16 11:10,2023-10-01 09:57,2021-12-16 11:10,repo-loom,,,,,,,,,,,,,repo-loom,hotspot,,0,,,,,,,,,,,,,,,,,"loom repo, tier4.

Check #4: verifying a contended monitor of auxiliary thread ...
FATAL ERROR in native method: Bad global or local ref passed to JNI
	at contmon01.checkMonitor(Native Method)
	at contmon01.test(contmon01.java:129)
	- locked <0x00000000b2685228> (a java.lang.Object)
	at contmon01.main(contmon01.java:89)
	at java.lang.invoke.LambdaForm$DMH/0x0000000801002000.invokeStatic(java.base@18-internal/LambdaForm$DMH)
	at java.lang.invoke.LambdaForm$MH/0x0000000801003400.invoke(java.base@18-internal/LambdaForm$MH)
	at java.lang.invoke.Invokers$Holder.invokeExact_MT(java.base@18-internal/Invokers$Holder)
	at jdk.internal.reflect.DirectMethodHandleAccessor.invokeImpl(java.base@18-internal/DirectMethodHandleAccessor.java:155)
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(java.base@18-internal/DirectMethodHandleAccessor.java:104)
	at java.lang.reflect.Method.invoke(java.base@18-internal/Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.lang.Thread.run(java.base@18-internal/Thread.java:1493)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278055,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v8zn:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@661b156a,,,,,,,,,"2021-12-16 00:41;sspitsyn;Removed 'intermittent' label as it is always failed with the flag -Xcheck:jni. ;;;","2021-12-16 11:10;sspitsyn;Suggested fix is:

http://cr.openjdk.java.net/~sspitsyn/webrevs/loom/jvmti-ContendedMonitor.1/

diff --git a/src/hotspot/share/prims/jvmtiEnv.cpp b/src/hotspot/share/prims/jvmtiEnv.cpp
index bf34bca7eba..92f6176c0e7 100644
--- a/src/hotspot/share/prims/jvmtiEnv.cpp
+++ b/src/hotspot/share/prims/jvmtiEnv.cpp
@@ -1492,9 +1492,7 @@ JvmtiEnv::GetCurrentContendedMonitor(jthread thread, jobject* monitor_ptr) {
   if (java_lang_VirtualThread::is_instance(thread_oop)) {
     // there is no monitor info to collect if target virtual thread is unmounted
     if (java_thread != NULL) {
-      VThreadGetCurrentContendedMonitorClosure op(this,
-                                                  Handle(calling_thread, thread_oop),
-                                                  monitor_ptr);
+      GetCurrentContendedMonitorClosure op(calling_thread, this, monitor_ptr, true); // is_virtual
       Handshake::execute(&op, java_thread);
       err = op.result();
     } else {
@@ -1511,7 +1509,7 @@ JvmtiEnv::GetCurrentContendedMonitor(jthread thread, jobject* monitor_ptr) {
     err = get_current_contended_monitor(calling_thread, java_thread, monitor_ptr, false);
   } else {
     // get contended monitor information with handshake
-    GetCurrentContendedMonitorClosure op(calling_thread, this, monitor_ptr);
+    GetCurrentContendedMonitorClosure op(calling_thread, this, monitor_ptr, false); // !is_virtual
     Handshake::execute(&op, java_thread);
     err = op.result();
   }
diff --git a/src/hotspot/share/prims/jvmtiEnvBase.cpp b/src/hotspot/share/prims/jvmtiEnvBase.cpp
index 237cbdc99fa..8973cda84e6 100644
--- a/src/hotspot/share/prims/jvmtiEnvBase.cpp
+++ b/src/hotspot/share/prims/jvmtiEnvBase.cpp
@@ -2192,7 +2192,7 @@ GetCurrentContendedMonitorClosure::do_thread(Thread *target) {
     _result = ((JvmtiEnvBase *)_env)->get_current_contended_monitor(_calling_thread,
                                                                     jt,
                                                                     _owned_monitor_ptr,
-                                                                    false);
+                                                                    _is_virtual);
   }
 }
 
@@ -2309,18 +2309,6 @@ VThreadGetOwnedMonitorInfoClosure::do_thread(Thread *target) {
   }
 }
 
-void
-VThreadGetCurrentContendedMonitorClosure::do_thread(Thread *target) {
-  JavaThread* java_thread = JavaThread::cast(target);
-
-  if (!java_thread->is_exiting() && java_thread->threadObj() != NULL) {
-    _result = ((JvmtiEnvBase *)_env)->get_current_contended_monitor((JavaThread*)target,
-                                                                    java_thread,
-                                                                    _owned_monitor_ptr,
-                                                                    true);
-  }
-}
-
 void
 VThreadGetThreadClosure::do_thread(Thread *target) {
   assert(target->is_Java_thread(), ""just checking"");
diff --git a/src/hotspot/share/prims/jvmtiEnvBase.hpp b/src/hotspot/share/prims/jvmtiEnvBase.hpp
index 48a6088919f..5b1875f0e37 100644
--- a/src/hotspot/share/prims/jvmtiEnvBase.hpp
+++ b/src/hotspot/share/prims/jvmtiEnvBase.hpp
@@ -512,19 +512,21 @@ public:
 
 };
 
-// HandshakeClosure to get current contended monitor.
+// HandshakeClosure to get current contended monitor. It is used for both platform and virtual threads.
 class GetCurrentContendedMonitorClosure : public JvmtiHandshakeClosure {
 private:
   JavaThread *_calling_thread;
   JvmtiEnv *_env;
   jobject *_owned_monitor_ptr;
+  bool _is_virtual;
 
 public:
-  GetCurrentContendedMonitorClosure(JavaThread* calling_thread, JvmtiEnv *env, jobject *mon_ptr)
+  GetCurrentContendedMonitorClosure(JavaThread* calling_thread, JvmtiEnv *env, jobject *mon_ptr, bool is_virtual)
     : JvmtiHandshakeClosure(""GetCurrentContendedMonitor""),
       _calling_thread(calling_thread),
       _env(env),
-      _owned_monitor_ptr(mon_ptr) {}
+      _owned_monitor_ptr(mon_ptr),
+      _is_virtual(is_virtual) {}
   void do_thread(Thread *target);
 };
 
@@ -760,25 +762,6 @@ public:
   jvmtiError result() { return _result; }
 };
 
-// HandshakeClosure to get virtual thread current contended monitor.
-class VThreadGetCurrentContendedMonitorClosure : public HandshakeClosure {
-private:
-  JvmtiEnv *_env;
-  Handle _vthread_h;
-  jobject *_owned_monitor_ptr;
-  jvmtiError _result;
-
-public:
-  VThreadGetCurrentContendedMonitorClosure(JvmtiEnv *env, Handle vthread_h, jobject *mon_ptr)
-    : HandshakeClosure(""VThreadGetCurrentContendedMonitor""),
-      _env(env),
-      _vthread_h(vthread_h),
-      _owned_monitor_ptr(mon_ptr),
-      _result(JVMTI_ERROR_THREAD_NOT_ALIVE) {}
-  jvmtiError result() { return _result; }
-  void do_thread(Thread *target);
-};
-
 // HandshakeClosure to get virtual thread thread at safepoint.
 class VThreadGetThreadClosure : public HandshakeClosure {
 private:
diff --git a/test/hotspot/jtreg/serviceability/jvmti/thread/GetCurrentContendedMonitor/contmon01/libcontmon01.cpp b/test/hotspot/jtreg/serviceability/jvmti/thread/GetCurrentContendedMonitor/contmon01/libcontmon01.cpp
index 9018ecb6535..4d7d90ee8e1 100644
--- a/test/hotspot/jtreg/serviceability/jvmti/thread/GetCurrentContendedMonitor/contmon01/libcontmon01.cpp
+++ b/test/hotspot/jtreg/serviceability/jvmti/thread/GetCurrentContendedMonitor/contmon01/libcontmon01.cpp
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2018, Oracle and/or its affiliates. All rights reserved.
+ * Copyright (c) 2018, 2021, Oracle and/or its affiliates. All rights reserved.
  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  *
  * This code is free software; you can redistribute it and/or modify it
@@ -61,7 +61,7 @@ Java_contmon01_checkMonitor(JNIEnv *jni, jclass cls, jint point, jthread thread,
   }
   check_jvmti_status(jni, err, ""Error in GetCurrentContendedMonitor"");
   if (jni->IsSameObject(lock, monitor) == JNI_FALSE) {
-    LOG(""(IsSameObject#%d) unexpected monitor object: 0x%p\n"", point, monitor);
+    LOG(""(IsSameObject#%d) unexpected monitor object: %p\n"", point, monitor);
     fatal(jni, ""Unexpected monitor object."");
   }
 }
;;;",,,,,,,,,,,,,,,,,,,
Armenian text isn't rendered on macOS if text layout is performed,JDK-8278050,5063838,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,dbatrak,dbatrak,dbatrak,2021-12-01 01:55,2022-01-03 14:38,2023-10-01 09:57,2021-12-15 23:15,17,18,,,,,,,,,,,,19,client-libs,,0,macos,,,,,,,,,,,,,,,,"Rectangles are drawn instead of correct glyphs, if Armenian text is rendered on macOS with text layout applied (e.g. if kerning is requested). Same text is drawn as expected, if rendered 'directly'.

Reproducer:
```
import javax.swing.*;
import java.awt.*;
import java.awt.font.TextAttribute;
import java.util.Map;

public class FontFallbackIssueVisual {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            JFrame f = new JFrame();
            f.add(new MyComponent());
            f.setSize(200, 200);
            f.setLocationRelativeTo(null);
            f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
            f.setVisible(true);
        });
    }

    private static class MyComponent extends JComponent {
        @Override
        protected void paintComponent(Graphics g) {
            String text = ""\u0561\u0577\u056D\u0561\u0580\u0570""; // Armenian text
            Font font = new Font(Font.SERIF, Font.PLAIN, 24);
            g.setFont(font);
            g.drawString(text, 50, 60);
            g.setFont(font.deriveFont(Map.of(TextAttribute.KERNING, TextAttribute.KERNING_ON)));
            g.drawString(text, 50, 110);
        }
    }
}
```
",macOS 12.0.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,os_x,,,,,,"0|i2v8z7:",9223372036854775807,b03,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4b09ce31,,,,,,,,,"2021-12-15 23:15;roboduke;Changeset: 0bddd8af
Author:    Dmitry Batrak <dbatrak@openjdk.org>
Date:      2021-12-16 07:14:35 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0bddd8af61b6c731f16b857c09de57ceefd72d06
;;;",,,,,,,,,,,,,,,,,,,,
Few javax/imageio test regressed after JDK-8262297 fix,JDK-8278047,5063835,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,jdv,psadhukhan,psadhukhan,2021-12-01 01:40,2022-01-26 11:35,2023-10-01 09:57,2021-12-01 02:23,18,,,,,,,,,,,,,18,client-libs,,0,,,,,,,,,,,,,,,,,"Few javax/imageio test fails after JDK-8262297

javax/imageio/plugins/shared/RepeatingWriteTest.java
javax/imageio/plugins/shared/BitDepth.java
javax/imageio/plugins/bmp/WritingColorChangeTest.java
javax/imageio/plugins/bmp/TestCompressionBI_BITFIELDS.java	
javax/imageio/plugins/bmp/NoExtraBytesTest.java
javax/imageio/plugins/bmp/EmbeddedFormatTest.java
javax/imageio/plugins/bmp/BMPPluginTest.java
javax/imageio/plugins/bmp/BMPSubsamplingTest.java",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8262297,JDK-8278086,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v8yj:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@377c353d,,,,,,,Verified,,"2021-12-01 01:45;psadhukhan;Most of the test fail with 
java.io.IOException\: Image can not be encoded with compression type BI_RGB and 15 bits per pixel;;;","2021-12-01 01:52;jdv;Looks like we have 8 test cases where we are trying to write 15bpp BMP images and after JDK-8262297 all of them are failing.
We need to update these test cases to not encode 15bpp BMP images or supporting 15bpp BMP images is valid use case. This needs more investigation. Since ImageIO tests are quite stable and this one will create continuous failure i am planning to backout changes done under JDK-8262297. ;;;","2021-12-01 02:23;roboduke;Changeset: 84aa0a19
Author:    Jayathirth D V <jdv@openjdk.org>
Date:      2021-12-01 10:22:17 +0000
URL:       https://git.openjdk.java.net/jdk/commit/84aa0a191b085a3d7cb338fd5e67281d0e4b57be
;;;",,,,,,,,,,,,,,,,,,
"Code completion not woking after some statements such as ""if"" or ""while""",JDK-8278039,5063686,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jlahoda,webbuggrp,webbuggrp,2021-11-29 13:13,2022-05-18 23:16,2023-10-01 09:57,2022-05-13 04:06,11,17,18,9,,,,,,,,,,19,tools,,0,dcsad,reproducer-yes,webbug,,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :

jshell> String s = """"
s.conta + TAB - works
(s.conta + TAB - works
for (s.conta + TAB - works
if (s.conta + TAB - does not work
while (s.conta + TAB - does not work


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v81f:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@ef6d34f,,,,,,,,,"2021-11-30 20:45;adev;The issue is reproducible. Pressing tab does not show correct code completion in jshell for ""while"" and ""if"" statements.;;;","2022-02-01 07:51;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7308
Date: 2022-02-01 15:44:53 +0000;;;","2022-05-13 04:06;dukebot;Changeset: 6a1b0989
Author:    Jan Lahoda <jlahoda@openjdk.org>
Date:      2022-05-13 11:03:17 +0000
URL:       https://git.openjdk.java.net/jdk/commit/6a1b09898d484324a142c20c9802b95e6cdc8388
;;;",,,,,,,,,,,,,,,,,,
riscv: Fix callee-saved float register definitions: should be SOE,JDK-8278034,5063820,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,xlinzheng,xlinzheng,xlinzheng,2021-11-30 18:34,2021-11-30 23:05,2023-10-01 09:57,2021-11-30 23:05,repo-riscv-port,,,,,,,,,,,,,repo-riscv-port,hotspot,,0,,,,,,,,,,,,,,,,,"There are unnecessary float register spills before leaf calls and it seems that callee-saved float registers' definitions should be SOE so the register allocator may firstly use these SOE registers as allocation candidates to prevent spills before leaf calls. I have looked through F8-F9, F18-F27 usages and found they are not used in any stub so it could be safe. Tested all cases.

This fix is nearly the same as JDK-8253048 on the aarch64 platform and receives an identical result.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,riscv,,,,,,,,,,,,,linux,,,,,,"0|i2v8v7:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
riscv: Fix MacroAssembler::atomic_incw: store condition instruction has wrong operand order,JDK-8278033,5063819,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,xlinzheng,xlinzheng,xlinzheng,2021-11-30 18:33,2021-11-30 19:02,2023-10-01 09:57,2021-11-30 19:02,repo-riscv-port,,,,,,,,,,,,,repo-riscv-port,hotspot,,0,,,,,,,,,,,,,,,,,"This is a trivial fix for this typo. This could reproduce before JDK18 by using `-XX:+PrintBiasedLockingStatistics`; however, after the removal of BiasedLocking, this function has no usage now. But we might fix it as well for future usage since it is a quite fundamental function.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,riscv,,,,,,,,,,,,,linux,,,,,,"0|i2v8uz:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
MultiThreadedRefCounter should not use relaxed atomic decrement,JDK-8278031,5063817,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mgronlun,kbarrett,kbarrett,2021-11-30 16:24,2021-12-08 17:46,2023-10-01 09:57,2021-12-06 01:30,18,,,,,,,,,,,,,18,hotspot,,0,,,,,,,,,,,,,,,,,"JDK-8275730 changed MultiThreadedRefCounter to use relaxed atomics to increment and decrement the counter.  The rationale was that it's ""just a counter"".  But that isn't true; it's a reference counter, which has additional semantics that impose stronger requirements on the atomic operations.  In particular, the decrement operation must be a release operation, and must be followed by an acquire barrier when the counter reaches zero.  This is needed to ensure any possible accesses in one thread ""happen before"" deleting the object in a different thread.  Without those barriers all kinds of bad data races are possible.

https://www.boost.org/doc/libs/1_57_0/doc/html/atomic/usage_examples.html#boost_atomic.usage_examples.example_reference_counters
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275730,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v8uj:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2021-12-06 01:30;roboduke;Changeset: d14f06a9
Author:    Markus Grönlund <mgronlun@openjdk.org>
Date:      2021-12-06 09:29:28 +0000
URL:       https://git.openjdk.java.net/jdk/commit/d14f06a9630d2cd2a929d0e44ebe4bb10e20dbd4
;;;",,,,,,,,,,,,,,,,,,,,
[test-library] Warnings cleanup of the test library,JDK-8278028,5063798,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,rriggs,rriggs,rriggs,2021-11-30 14:58,2023-07-11 02:43,2023-10-01 09:57,2021-12-14 12:01,,,,,,,,,,,,,,19,core-libs,,0,,,,,,,,,,,,,,,,,Compilation warnings of the test library introduce noise in test output and should be addressed or suppressed.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v8qb:",9223372036854775807,b02,,,,,,,,,,,,,"2021-12-14 12:01;roboduke;Changeset: 03f647f4
Author:    Roger Riggs <rriggs@openjdk.org>
Date:      2021-12-14 19:54:54 +0000
URL:       https://git.openjdk.java.net/jdk/commit/03f647f4bb640bf5df1c461eec9860c7ac3eb076
;;;",,,,,,,,,,,,,,,,,,,,
X509Key.decode exception while using JSafeJCE FIPS provider,JDK-8278027,5063786,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jnibedita,shadowbug,shadowbug,2021-11-30 14:28,2023-01-10 21:24,2023-10-01 09:57,2022-11-02 08:31,8u271,,,,,,,,,,,,,17.0.7-oracle,security-libs,,0,8bpr-critical-approved,bugdb_33622641,regression,release-note=yes,,,,,,,,,,,,,"Oracle Reports product failing since upgrading to 8u281 in this environment. If the FIPS provider is disabled, the product works ok.

java.security.InvalidKeyException: IOException: Could not decode parameters.
        at sun.security.x509.X509Key.decode(X509Key.java:397)
        at sun.security.x509.X509Key.readObject(X509Key.java:419)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)",,,,,,,,,,JDK-8298086,JDK-8299629,JDK-8299924,JDK-8297765,JDK-8296129,JDK-8296116,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8297698,,,,,,,,,,,,,,,JDK-8297838,JDK-8242556,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v8nn:",9223372036854775807,b01,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@35a9b277,,,,,,,,,"2021-12-01 05:54;coffeys;The X509Key.decode code could be enhanced to include the stacktrace of the cause of the InvalidKeyException. I suspect we'll get a better understanding of the issue from such a stacktrace.;;;","2022-08-25 03:46;coffeys;internal reproducer set up with JSafeJCE provider. JDK-8242556 is responsible for the change of behaviour here. Up until that fix, DSA AlgorithmParameters requests which were made in sun.security.x509.AlgorithmId.decodeParams()  and which has the algid instance variable constructed with OID type rather than the textual representation OID value. The 3rd party provider in this scenario, does't register for the UUID format OID (via aliases field) -- see output below. (i.e only takes requests for ""DSA"" AlgorithmParameters types)

==
Provider: SUN.putService(): SUN: AlgorithmParameters.DSA -> sun.security.provider.DSAParameters
  aliases: [1.2.840.10040.4.1, 1.3.14.3.2.12, OID.1.2.840.10040.4.1]
  attributes: {ImplementedIn=Software}


Provider: JsafeJCE.putService(): JsafeJCE: AlgorithmParameters.DSA -> DSA
==
as a result of JDK-8242556, JsafeJCE now takes more AlgorithmParameters.DSA operations and seems to barf at some requests :

Exception in thread ""main"" java.security.UnrecoverableKeyException: Could not decode parameters.
	at sun.security.provider.KeyProtector.recover(KeyProtector.java:325)
	at sun.security.provider.JavaKeyStore.engineGetKey(JavaKeyStore.java:143)
	at sun.security.provider.JavaKeyStore$JKS.engineGetKey(JavaKeyStore.java:57)
	at sun.security.provider.KeyStoreDelegator.engineGetKey(KeyStoreDelegator.java:96)
	at sun.security.provider.JavaKeyStore$DualFormatJKS.engineGetKey(JavaKeyStore.java:71)
	at java.security.KeyStore.getKey(KeyStore.java:1023)
	at com.rsa.sslj.x.co.<init>(Unknown Source)
	at com.rsa.sslj.x.ch.engineInit(Unknown Source)
	at javax.net.ssl.KeyManagerFactory.init(KeyManagerFactory.java:256)
	at DecodeErr.main(DecodeErr.java:77)

(cause captured in debugger:)
stackTrace = {StackTraceElement[16]@1831} 
 0 = {StackTraceElement@1833} ""com.rsa.cryptoj.o.ms.engineInit(Unknown Source)""
 1 = {StackTraceElement@1834} ""java.security.AlgorithmParameters.init(AlgorithmParameters.java:293)""
 2 = {StackTraceElement@1835} ""sun.security.x509.AlgorithmId.decodeParams(AlgorithmId.java:150)""
 3 = {StackTraceElement@1836} ""sun.security.x509.AlgorithmId.<init>(AlgorithmId.java:132)""
 4 = {StackTraceElement@1837} ""sun.security.x509.AlgorithmId.parse(AlgorithmId.java:416)""
 5 = {StackTraceElement@1838} ""sun.security.pkcs.PKCS8Key.parseKey(PKCS8Key.java:132)""
 6 = {StackTraceElement@1839} ""sun.security.provider.KeyProtector.recover(KeyProtector.java:323)""
 7 = {StackTraceElement@1840} ""sun.security.provider.JavaKeyStore.engineGetKey(JavaKeyStore.java:143)""
 8 = {StackTraceElement@1841} ""sun.security.provider.JavaKeyStore$JKS.engineGetKey(JavaKeyStore.java:57)""
 9 = {StackTraceElement@1842} ""sun.security.provider.KeyStoreDelegator.engineGetKey(KeyStoreDelegator.java:96)""
 10 = {StackTraceElement@1843} ""sun.security.provider.JavaKeyStore$DualFormatJKS.engineGetKey(JavaKeyStore.java:71)""
 11 = {StackTraceElement@1844} ""java.security.KeyStore.getKey(KeyStore.java:1023)""
 12 = {StackTraceElement@1845} ""com.rsa.sslj.x.co.<init>(Unknown Source)""
 13 = {StackTraceElement@1846} ""com.rsa.sslj.x.ch.engineInit(Unknown Source)""
 14 = {StackTraceElement@1847} ""javax.net.ssl.KeyManagerFactory.init(KeyManagerFactory.java:256)""
 15 = {StackTraceElement@1848} ""DecodeErr.main(DecodeErr.java:77)""

===

Not sure why JsafeJCE doesn't handle such a request but we should look at altering the fix to restore 8u261 behaviour in this area.

;;;","2022-08-26 01:41;coffeys;reproducer details. First - Set up JsafeJCE FIPS env in the JDK.
Using just ""security.provider.1=com.rsa.jsafe.provider.JsafeJCE"" for provider config is enough for this test case. (1 provider)

$ cat DecodeErr3.java 
import java.security.*;

import sun.security.pkcs.PKCS8Key;
import sun.security.util.DerValue;

public class DecodeErr3 {
    public static void main(String[] args) throws Exception {
        KeyPairGenerator keyPairGen = KeyPairGenerator.getInstance(args[0]);
        keyPairGen.initialize(Integer.parseInt(args[1]));
        KeyPair pair = keyPairGen.generateKeyPair();
        PKCS8Key.parseKey(new DerValue(pair.getPrivate().getEncoded()));
    }
}

$ ./jdk1.8.0_341/bin/javac -XDignore.symbol.file=true DecodeErr3.java
$ ./jdk1.8.0_341/bin/java DecodeErr3 DSA 2048
Exception in thread ""main"" java.io.IOException: Could not decode parameters.
	at com.rsa.cryptoj.o.ms.engineInit(Unknown Source)
	at java.security.AlgorithmParameters.init(AlgorithmParameters.java:293)
	at sun.security.x509.AlgorithmId.decodeParams(AlgorithmId.java:150)
	at sun.security.x509.AlgorithmId.<init>(AlgorithmId.java:132)
	at sun.security.x509.AlgorithmId.parse(AlgorithmId.java:416)
	at sun.security.pkcs.PKCS8Key.parseKey(PKCS8Key.java:132)
	at DecodeErr3.main(DecodeErr3.java:13);;;","2022-09-23 06:36;coffeys;JSafeJCE support confirmed that this is a known issue and have fixed it in Crypto-J7.0.

The bug was fixed in BSFCRYJ-4956 - Update to the DH and DSA parameter decoding to support no algorithm OID.


;;;",,,,,,,,,,,,,,,,,
~13% variation in Renaissance-Scrabble,JDK-8278020,5063767,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,iklam,ecaspole,ecaspole,2021-11-30 12:31,2022-01-24 23:56,2023-10-01 09:57,2022-01-06 15:07,17,18,,,,,,,,,,,,19,hotspot,,0,cds,hgupdate-sync,jdk17u-fix-request,jdk17u-fix-yes,perf-regression,redhat-interest,,,,,,,,,,,"There is a variability of ~13% on x64 and 49% on ARM week to week with Renaissance-Scrabble. This variability is also seen in sequential CI pipeline builds, then it will flip again in a few builds.

Running with -Xshare:off makes the high scores and the low scores more or less meet in the middle.

I haven't yet found the earliest time where this started to happen.",,,,,,,,,,JDK-8279680,JDK-8278867,JDK-8279776,JDK-8279694,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8238048,,,,,,,,,,,,,,,,,,x86,,,,,,,,,,,,,linux,,,,,,"0|i2v8jf:",9223372036854775807,b03,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-30 15:50;iklam;[~ecaspole] found that in the slow cases, a lot of time is reported by JMH perfasm at the following instruction (with https://github.com/jvm-profiling-tools/async-profiler)

 Column 1: cycles (125424 events)
 Column 2: l1d_pend_miss.pending_cycles (56716 events)
 Column 3: CYCLE_ACTIVITY.CYCLES_L2_MISS (66170 events)

  0.08%  0.02%  0.03%          0x00007f488cda2dc8:  mov  0x10(%r10),%r11d
 12.26%  16.97%  16.23%     0x00007f488cda2dcc:  lea  0x1b8(%r10,%r11,8),%r11 <<<<<<<<< HERE

The ""lea"" is just an addition of the various operands: r11 = r10 + r11 * 8 + 0x1b8.
The memory stall is probably from the previous load: r11 = *((Klass*)r10)->_vtable_len.

Since the _table_len is only offset 24 from the beginning of the Klass, it may be subject to false sharing. We could swap Klass::_vtable_len with Klass::_modifier_flags, which is at offset 164.

Decoding VtableStub itbl[0]@12
--------------------------------------------------------------------------------
  0x00007f0314b2e780:   mov    0x8(%rax),%rbx
  0x00007f0314b2e784:   mov    (%rax),%rax
  0x00007f0314b2e787:   mov    0x8(%rsi),%r10d
  0x00007f0314b2e78b:   movabs $0x800000000,%r11
  0x00007f0314b2e795:   add    %r11,%r10
  0x00007f0314b2e798:   mov    0x10(%r10),%r11d             // r11 = *((Klass*)r10)->_vtable_len
  0x00007f0314b2e79c:   lea    0x1b8(%r10,%r11,8),%r11 <<<<<<<<< HERE
  0x00007f0314b2e7a4:   mov    (%r11),%r10
  0x00007f0314b2e7a7:   cmp    %r10,%rbx
  0x00007f0314b2e7aa:   je     0x00007f0314b2e7c1
  0x00007f0314b2e7ac:   test   %r10,%r10
  0x00007f0314b2e7af:   je     0x00007f0314b2e809
  0x00007f0314b2e7b5:   add    $0x10,%r11
  0x00007f0314b2e7b9:   mov    (%r11),%r10
  0x00007f0314b2e7bc:   cmp    %r10,%rbx
  0x00007f0314b2e7bf:   jne    0x00007f0314b2e7ac
  0x00007f0314b2e7c1:   mov    0x8(%rsi),%r10d
  0x00007f0314b2e7c5:   movabs $0x800000000,%r11
  0x00007f0314b2e7cf:   add    %r11,%r10
  0x00007f0314b2e7d2:   mov    0x10(%r10),%r11d
  0x00007f0314b2e7d6:   lea    0x1b8(%r10,%r11,8),%r11
  0x00007f0314b2e7de:   lea    (%r10),%r10
  0x00007f0314b2e7e1:   mov    (%r11),%rbx
  0x00007f0314b2e7e4:   cmp    %rbx,%rax
  0x00007f0314b2e7e7:   je     0x00007f0314b2e7fe
  0x00007f0314b2e7e9:   test   %rbx,%rbx
  0x00007f0314b2e7ec:   je     0x00007f0314b2e809
  0x00007f0314b2e7f2:   add    $0x10,%r11
  0x00007f0314b2e7f6:   mov    (%r11),%rbx
  0x00007f0314b2e7f9:   cmp    %rbx,%rax
  0x00007f0314b2e7fc:   jne    0x00007f0314b2e7e9
  0x00007f0314b2e7fe:   mov    0x8(%r11),%r11d
  0x00007f0314b2e802:   mov    (%r10,%r11,1),%rbx
  0x00007f0314b2e806:   jmpq   *0x40(%rbx)
  0x00007f0314b2e809:   jmpq   0x00007f03149e5180
;;;","2021-11-30 15:51;iklam;Another possibility is that the compiler fails to devirtualize some critical invokeinterface instructions, so we end up excessively calling the VtableStub.

;;;","2021-12-06 09:31;iklam;The _vtable_len field was moved by JDK-8238048. It's now at offset 24 in Klass. Modification of another object that sits just below the Klass may cause false sharing of the cache line and result in dcache misses when loading the Klass::_vtable_len field.

Moving Klass::_vtable_len to a higher offset should fix the false sharing issue. This seems to be harmless. [~ecaspole] ran all benchmarks and did not observe any negative side effects.;;;","2021-12-07 11:16;hseigel;ILW = MHM = P3;;;","2021-12-20 02:07;shade;I think the commit went to JDK 19, so this issue was not automatically closed. Ioi, wouldn't you like to fix it in JDK 18 as well (thus closing this bug)?;;;","2022-01-06 15:05;iklam;Fix was pushed while main bug was targeted to 18. Reset the main bug to fixed in 19 and copied the Robo Duke entry here.;;;","2022-01-06 15:05;iklam;Changeset: 4ba980ba
Author: Ioi Lam <iklam@openjdk.org>
Date: 2021-12-15 20:06:56 +0000
URL: https://git.openjdk.java.net/jdk/commit/4ba980ba439f94a6b5015e64382a6c308476d63f;;;","2022-01-06 15:11;iklam;[~shade] I've fixed the fix versions according to https://openjdk.java.net/guide/index.html#how-to-fix-an-incorrect-backport-creation-in-jbs

Now this (main) bug is marked as Resolved with FixVersion = 19. I will attempt to do a backport to JDK 18 using the backport issue (JDK-8278867);;;","2022-01-06 16:01;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk18/pull/87
Date: 2022-01-06 23:57:06 +0000
;;;","2022-01-07 03:11;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/64
Date: 2022-01-07 11:06:41 +0000
;;;","2022-01-07 03:57;shade;Fix Request (17u)

This resolves the recent regression in 17u. Applies cleanly, passes tests.;;;","2022-01-10 09:07;roboduke;Changeset: 967ef0c4
Author:    Ioi Lam <iklam@openjdk.org>
Date:      2022-01-07 05:30:20 +0000
URL:       https://git.openjdk.java.net/jdk/commit/967ef0c48252957f9bec42965fe02414fd2c77cb
;;;","2022-01-19 12:30;roboduke;Changeset: 4ba980ba
Author:    Ioi Lam <iklam@openjdk.org>
Date:      2021-12-15 20:06:56 +0000
URL:       https://git.openjdk.java.net/jdk/commit/4ba980ba439f94a6b5015e64382a6c308476d63f
;;;",,,,,,,,
[vectorapi] Remove test run script ,JDK-8278014,5063759,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,psandoz,psandoz,psandoz,2021-11-30 10:58,2022-03-07 02:54,2023-10-01 09:57,2021-12-01 08:13,18,,,,,,,,,,,,,18,core-libs,,0,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,,,,,,,,,,,,,,"Remove the script test/jdk/jdk/incubator/vector/{run, build}-tests.sh and used variables defined in test/jdk/jdk/incubator/vector/config.sh

jtreg should be used to build and run the tests.",,,,,,,,,,JDK-8282735,JDK-8280865,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,16,,,,,,,,"0|i2v8hn:",9223372036854775807,b27,,,,,,,,,,,,,"2021-12-01 08:13;roboduke;Changeset: 9b3e6720
Author:    Paul Sandoz <psandoz@openjdk.org>
Date:      2021-12-01 16:12:46 +0000
URL:       https://git.openjdk.java.net/jdk/commit/9b3e67205913daa1960373a4ab33422137082696
;;;","2022-03-04 03:28;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/195
Date: 2022-03-04 11:21:58 +0000;;;","2022-03-05 01:50;mdoerr;Fix Request (17u):
Should get backported for parity with 17.0.4-oracle. Applies cleanly. No new test failures observed (our nightly tests).;;;",,,,,,,,,,,,,,,,,,
"runtime/cds/appcds/loaderConstraints/DynamicLoaderConstraintsTest.java#custom-cl-zgc failed ""assert(ZAddress::is_marked(addr)) failed: Should be marked""",JDK-8277998,5063740,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,ccheung,dcubed,dcubed,2021-11-30 08:50,2022-01-10 18:06,2023-10-01 09:57,2021-12-08 08:00,18,,,,,,,,,,,,,18,hotspot,,0,cds,intermittent,tier2,zgc,,,,,,,,,,,,,"The following test failed in the JDK18 CI:

runtime/cds/appcds/loaderConstraints/DynamicLoaderConstraintsTest.java#custom-cl-zgc

Here's a snippet from the log file:

[0.205s][info][class,load              ] java.lang.invoke.LambdaForm$Holder
[0.209s][info][class,load              ] java.lang.Shutdown source: shared objects file
[0.209s][info][class,load              ] java.lang.Shutdown$Lock source: shared objects file
# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/zBarrier.cpp:41
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S137615/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/83568f57-04bd-460f-88fd-51627cffb523/runs/fe04011a-4797-4735-bb60-897ff406a555/workspace/open/src/hotspot/share/gc/z/zBarrier.cpp:41), pid=16076, tid=43011
#  assert(ZAddress::is_marked(addr)) failed: Should be marked
#
# JRE version: Java(TM) SE Runtime Environment (18.0+26) (fastdebug build 18-ea+26-1760)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+26-1760, mixed mode, sharing, tiered, compressed class ptrs, z gc, bsd-aarch64)
# Core dump will be written. Default location: core.16076
#
# An error report file with more information is saved as:
# /System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S147880/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/a38438c2-b97e-46f3-83d1-5e9ba0649a3e/runs/f7a128b3-9614-4f19-8479-6244d160faf4/testoutput/test-support/jtreg_open_test_hotspot_jtreg_hotspot_tier2_runtime/scratch/2/hs_err_pid16076.log
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#
];
 stderr: []
 exitValue = 134

java.lang.RuntimeException: Expected to get exit value of [0]

	at jdk.test.lib.process.OutputAnalyzer.shouldHaveExitValue(OutputAnalyzer.java:489)
	at jdk.test.lib.cds.CDSTestUtils$Result.assertNormalExit(CDSTestUtils.java:195)
	at DynamicLoaderConstraintsTest.doTest(DynamicLoaderConstraintsTest.java:166)
	at DynamicLoaderConstraintsTest.doTest(DynamicLoaderConstraintsTest.java:117)
	at DynamicArchiveTestBase.runTest(DynamicArchiveTestBase.java:74)
	at DynamicLoaderConstraintsTest.main(DynamicLoaderConstraintsTest.java:108)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.RuntimeException: Expected to get exit value of [0]


Here's the crashing thread's stack:

---------------  T H R E A D  ---------------

Current thread (0x000000011f00d980):  VMThread ""VM Thread"" [stack: 0x000000016ee6c000,0x000000016f06f000] [id=43011]

Stack: [0x000000016ee6c000,0x000000016f06f000],  sp=0x000000016f06e520,  free space=2057k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.dylib+0x106b3ac]  VMError::report_and_die(int, char const*, char const*, char*, Thread*, unsigned char*, void*, void*, char const*, int, unsigned long)+0x5d8
V  [libjvm.dylib+0x106bae4]  VMError::report_and_die(Thread*, void*, char const*, int, char const*, char const*, char*)+0x40
V  [libjvm.dylib+0x59bbd8]  report_vm_error(char const*, int, char const*, char const*, ...)+0x80
V  [libjvm.dylib+0x10c40e8]  unsigned long ZBarrier::mark<false, true, false, true>(unsigned long)+0x98
V  [libjvm.dylib+0xfdb940]  oop ZBarrier::barrier<&(ZBarrier::is_good_or_null_fast_path(unsigned long)), &(ZBarrier::load_barrier_on_oop_slow_path(unsigned long))>(oop volatile*, oop)+0xa0
V  [libjvm.dylib+0x81832c]  AccessInternal::PostRuntimeDispatch<ZBarrierSet::AccessBarrier<548932ull, ZBarrierSet>, (AccessInternal::BarrierType)2, 548932ull>::oop_access_barrier(void*)+0x94
V  [libjvm.dylib+0x84aab4]  InstanceKlass::signers() const+0x34
V  [libjvm.dylib+0xf9340c]  SystemDictionaryShared::check_for_exclusion_impl(InstanceKlass*)+0x28c
V  [libjvm.dylib+0xf93134]  SystemDictionaryShared::check_for_exclusion(InstanceKlass*, DumpTimeClassInfo*)+0x188
V  [libjvm.dylib+0xf9543c]  SystemDictionaryShared::check_excluded_classes()+0x250
V  [libjvm.dylib+0x663620]  DynamicArchiveBuilder::doit()+0xd8
V  [libjvm.dylib+0x663418]  VM_PopulateDynamicDumpSharedSpace::doit()+0xac
V  [libjvm.dylib+0x1071b80]  VM_Operation::evaluate()+0x104
V  [libjvm.dylib+0x108d350]  VMThread::evaluate_operation(VM_Operation*)+0xe0
V  [libjvm.dylib+0x108de34]  VMThread::inner_execute(VM_Operation*)+0x33c
V  [libjvm.dylib+0x108d074]  VMThread::loop()+0xb4
V  [libjvm.dylib+0x108ce5c]  VMThread::run()+0xc0
V  [libjvm.dylib+0xfc5f28]  Thread::call_run()+0x21c
V  [libjvm.dylib+0xd98584]  thread_native_entry(Thread*)+0x160
C  [libsystem_pthread.dylib+0x74ec]  _pthread_start+0x94

VM_Operation (0x000000016d5d2788): PopulateDumpSharedSpace, mode: safepoint, requested by thread 0x000000011a012420",,,,,,,,,,JDK-8278711,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278602,JDK-8274753,JDK-8278299,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,os_x,,,,,,"0|i2v8df:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,Verified,,"2021-12-06 03:43;stefank;I'm changing the subcomponent to Runtime. The assert says that the CDS code is reading a Klass that has not been kept alive. Is there any code that ensures that the Klasses in _dumptime_table and _dumptime_lambda_proxy_class_dictionary are kept alive when we are executing outside a safepoint?;;;","2021-12-06 09:55;iklam;[~stefank] It seems like LambdaFormInvokers::reload_class might be a possible culprit. After the class is parsed, we don't do anything to keep the class alive. The class is not added to the system dictionary (of the boot class loader).

https://github.com/openjdk/jdk/blob/70bad89b012eb200ca1e76f384a6e5fb307cf26d/src/hotspot/share/cds/lambdaFormInvokers.cpp#L163

  InstanceKlass* result = KlassFactory::create_from_stream(&st,
                                                   class_name,
                                                   cld,
                                                   cl_info,
                                                   CHECK);
>>>> suggested fix
    add result.java_mirror() into a GrowableArrayCHeap<OopHandle, mtClassShared> to keep the class alive
<<<<<

  {
    MutexLocker mu_r(THREAD, Compile_lock); // add_to_hierarchy asserts this.
    SystemDictionary::add_to_hierarchy(result);
  }
;;;","2021-12-06 09:58;iklam;This problem is similar to JDK-8274753;;;","2021-12-08 08:00;roboduke;Changeset: e4852c6f
Author:    Calvin Cheung <ccheung@openjdk.org>
Date:      2021-12-08 15:59:37 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e4852c6f0aa25e7d40c577d507aedc7916ee8d50
;;;",,,,,,,,,,,,,,,,,
Typo in javadoc of java.util.zip.ZipEntry#setTime,JDK-8277986,5063728,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jpai,jpai,jpai,2021-11-30 06:23,2021-12-07 22:41,2023-10-01 09:57,2021-11-30 17:18,,,,,,,,,,,,,,18,core-libs,,0,noreg-doc,,,,,,,,,,,,,,,,"The javadoc of java.util.zip.ZipEntry#setTime(long time) currently states:

""If the entry is output to a ZIP file or ZIP file formatted output stream the last modification time set by this method will be stored into the date and time fields of the zip file entry and encoded in standard MS-DOS date and time format. The default TimeZone is used to convert the epoch time to the MS-DOS data and time.""

The last sentence should instead be "".... MS-DOS date and time""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v8ar:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@62714d2c,,,,,,,,,"2021-11-30 17:18;roboduke;Changeset: 0a01baaf
Author:    Jaikiran Pai <jpai@openjdk.org>
Date:      2021-12-01 01:17:07 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0a01baaf2dd31a0fe2bc8b1327fb072cc3909eeb
;;;",,,,,,,,,,,,,,,,,,,,
G1: Compare max_parallel_refinement_threads to UINT_MAX,JDK-8277985,5063726,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,lkorinth,lkorinth,lkorinth,2021-11-30 04:42,2021-12-08 17:44,2023-10-01 09:57,2021-12-02 08:00,18,,,,,,,,,,,,,18,hotspot,,0,gc-g1,,,,,,,,,,,,,,,,"in g1Arguments.cpp:

  // Verify that the maximum parallelism isn't too high to eventually overflow
  // the refcount in G1CardSetContainer.
  uint max_parallel_refinement_threads = G1ConcRefinementThreads + G1DirtyCardQueueSet::num_par_ids();
  uint const divisor = 3;  // Safe divisor; we increment by 2 for each claim, but there is a small initial value.
  if (max_parallel_refinement_threads > UINTPTR_MAX / divisor) {
    vm_exit_during_initialization(""Too large parallelism for remembered sets."");
  }


max_parallel_refinement_threads will always be less than UINTPTR_MAX on platforms where pointers are larger than unsigned. Use the intended UINT_MAX instead.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v8ab:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-12-02 08:00;roboduke;Changeset: 7c4ef3ab
Author:    Leo Korinth <lkorinth@openjdk.org>
Date:      2021-12-02 15:59:50 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7c4ef3abaff55b29dddc50f2aea8a04a3214f9fb
;;;",,,,,,,,,,,,,,,,,,,,
String Deduplication table is never cleaned up due to bad dead_factor_for_cleanup,JDK-8277981,5063723,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,shade,shade,shade,2021-11-30 03:50,2021-12-07 13:39,2023-10-01 09:57,2021-12-01 04:08,17,18,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,redhat-interest,regression,,,,,,,,,,,,"Reported here: https://twitter.com/nickebbitt/status/1465617649547849733

Seems to reproduce with Shenandoah, but it is actually a generic bug in string dedup code.

$ cat TestLotsaStrings.java

import java.util.Random;

public class TestLotsaStrings {
	static int counter = 1_000_000_000;

	private static String newString() {
		counter++;
		if (counter >= 2_000_000_000) counter = 1_000_000_000;
		return ""str"" + counter;
	}

	static Random r = new Random();
	static String[] strings = new String[1024*1024];
	static volatile Object sink;

	public static void main(String... args) {
		for (int c = 0; c < strings.length; c++) {
			strings[c] = newString();
		}
		while (true) {
			for (int c = 0; c < 100; c++) {
				int i = r.nextInt(strings.length);
				strings[i] = newString();
			}
			for (int c = 0; c < 1024; c++) {
				sink = new byte[64*1024];
			}
		}
	}
}


$  build/linux-x86_64-server-fastdebug/images/jdk/bin/java -XX:+UseShenandoahGC -XX:+UseStringDeduplication  -XX:NativeMemoryTracking=summary -Xmx1g -Xlog:gc TestLotsaStrings

...

$ while true; do jcmd $pid VM.native_memory summary | grep ""Total:""; sleep 1; done
...
Total: reserved=2556143KB, committed=1178839KB
Total: reserved=2556348KB, committed=1179044KB
Total: reserved=2556520KB, committed=1179216KB
Total: reserved=2556727KB, committed=1179423KB
Total: reserved=2556947KB, committed=1179643KB
Total: reserved=2557110KB, committed=1179806KB

$ while true; do jcmd $pid VM.native_memory summary | grep ""String Dedup""; sleep 1; done
-      String Deduplication (reserved=36860KB, committed=36860KB)
-      String Deduplication (reserved=37021KB, committed=37021KB)
-      String Deduplication (reserved=37236KB, committed=37236KB)
-      String Deduplication (reserved=37401KB, committed=37401KB)
-      String Deduplication (reserved=37620KB, committed=37620KB)
-      String Deduplication (reserved=37785KB, committed=37785KB)

Seems to leak about 200 KB/sec in string dedup storage. Bisection points to JDK-8254598 as the starting point. Before that change, the ""Total"" was very stable.

Adding more cleanup logs reveals that StringDedup::Config::should_cleanup_table always returns ""false"", because _dead_factor_for_cleanup is 5.0, and dead_count is always smaller than entry_count * _dead_factor_for_cleanup!

[17.188s][debug][stringdedup] Table: 1152775 values in 96001 buckets, 104004 dead (0)
[17.188s][debug][stringdedup] Cleanup: dead_count 104004
[17.188s][debug][stringdedup] Cleanup: entry_count 1152775
[17.188s][debug][stringdedup] Cleanup: _minimum_dead_for_cleanup 100
[17.188s][debug][stringdedup] Cleanup: _dead_factor_for_cleanup 5.000000
[17.188s][debug][stringdedup] Cleanup: (dead_count > _minimum_dead_for_cleanup) = true
[17.188s][debug][stringdedup] Cleanup: (dead_count > (entry_count * _dead_factor_for_cleanup) = false

Because here:

void StringDedup::Config::initialize() {
  ...
  _dead_factor_for_cleanup = percent_of(StringDeduplicationCleanupDeadPercent, 100);
  ...
}

...where:

// Returns numerator/denominator as percentage value from 0 to 100. If denominator
// is zero, return 0.0.
template<typename T>
inline double percent_of(T numerator, T denominator) {
  return denominator != 0 ? (double)numerator / denominator * 100.0 : 0.0;
}

So converting StringDeduplicationCleanupDeadPercent (default is 5) to ""factor"" yields the same 5.0.

Which means the table is never cleaned up by that trigger.

After a simple fix (see PR), the table is finally cleaned up in this test:

; lots of dead
[183.057s][debug][stringdedup] Table: 1103660 values in 96001 buckets, 56064 dead (0) 

; finally triggers
[183.231s][debug][stringdedup] Cleanup: dead_count 56063
[183.231s][debug][stringdedup] Cleanup: entry_count 1104658
[183.231s][debug][stringdedup] Cleanup: _minimum_dead_for_cleanup 100
[183.231s][debug][stringdedup] Cleanup: _dead_factor_for_cleanup 0.050000
[183.231s][debug][stringdedup] Cleanup: (dead_count > _minimum_dead_for_cleanup) = true
[183.231s][debug][stringdedup] Cleanup: (dead_count > (entry_count * _dead_factor_for_cleanup) = true
[183.231s][debug][stringdedup] Cleanup: should cleanup
[183.231s][debug][stringdedup] Cleanup started

[183.355s][info ][stringdedup] Concurrent String Deduplication 998/31936.0B (new), 0/0.0B (deduped), avg 0.0%, 1.147ms of 125.556ms
[183.355s][debug][stringdedup]   Last Process: 1/1.147ms, Idle: 1/173.195ms, Blocked: 2/3.639ms
[183.355s][debug][stringdedup]   Last Cleanup Table: 1/120.706ms
[183.356s][debug][stringdedup]     Inspected:             998
[183.356s][debug][stringdedup]       Known:                 0(  0.0%)
[183.356s][debug][stringdedup]       Shared:                0(  0.0%)
[183.356s][debug][stringdedup]       New:                 998(100.0%) 31936.0B
[183.356s][debug][stringdedup]       Replaced:              0(  0.0%)
[183.356s][debug][stringdedup]       Deleted:           56063(5617.5%)
[183.356s][debug][stringdedup]     Deduplicated:            0(  0.0%)     0.0B(  0.0%)
[183.356s][debug][stringdedup]     Skipped: 0 (dead), 0 (incomplete), 0 (shared)
[183.356s][debug][stringdedup]   Total Process: 1105/5734.652ms, Idle: 1105/174234.419ms, Blocked: 74/113.146ms
[183.356s][debug][stringdedup]   Total Resize Table: 3/202.247ms
[183.356s][debug][stringdedup]   Total Cleanup Table: 20/2623.522ms
[183.356s][debug][stringdedup]     Inspected:         2164403
[183.356s][debug][stringdedup]       Known:              1821(  0.1%)
[183.356s][debug][stringdedup]       Shared:                0(  0.0%)
[183.356s][debug][stringdedup]       New:             2162582( 99.9%) 67598.9K
[183.356s][debug][stringdedup]       Replaced:              0(  0.0%)
[183.356s][debug][stringdedup]       Deleted:         1113987( 51.5%)
[183.356s][debug][stringdedup]     Deduplicated:           44(  0.0%)  1320.0B(  0.0%)
[183.356s][debug][stringdedup]     Skipped: 2908 (dead), 0 (incomplete), 0 (shared)

; woot, squeaky clean
[183.356s][debug][stringdedup] Table: 1048595 values in 96001 buckets, 0 dead (2)
",,,,,,,,,,JDK-8278376,JDK-8278100,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8254598,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v89n:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-12-01 04:07;roboduke;Changeset: 8d7958e4
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-12-01 12:06:07 +0000
URL:       https://git.openjdk.java.net/jdk/commit/8d7958e46969fd59df7bc6dd1cbe31ae63686b05
;;;","2021-12-01 05:59;shade;Fix Request (17u)

This fixes a critical regression in JDK 17 that manifests like a native memory leak in String Dedup table. Due to a simple math problem, the table is never cleaned up. Patch applies cleanly, tier{1,2,3} pass with -XX:+UseStringDeduplication. I would like to have it in 17.0.2, if possible.;;;",,,,,,,,,,,,,,,,,,,
ObjectMethods::bootstrap throws NPE when lookup is null,JDK-8277980,5063722,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,vromero,kganapureddy,kganapureddy,2021-11-30 03:18,2022-02-07 02:29,2023-10-01 09:57,2021-12-08 14:51,18,,,,,,,,,,,,,18,core-libs,,0,conformance,regression,tck-red-18,,,,,,,,,,,,,,"It's noticed couple of JCK test failures with current JDK mainline sources, and the fix possibly part of JDK18-ea26.

The tests are conforming to the spec updated in recent CSR - https://bugs.openjdk.java.net/browse/JDK-8272852 (ObjectMethods::bootstrap should specify NPE if any argument except lookup is null)

It looks like a regression caused by https://bugs.openjdk.java.net/browse/JDK-8261847 - Where makeString() method using ""lookup"" for string construction which can be technically null.
",,,,,,,,,,JDK-8278730,,,,,,,,,,,,,,,,,,JDK-8278316,,,,,,,,,,,,,,,,,,,,,,,,,,JCK-7317058,,,,,,,,,,,,,,,JDK-8261847,JDK-8272852,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v89f:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4c088d55,,,,,,,Verified,,"2021-12-08 14:51;roboduke;Changeset: 03bf55f6
Author:    Vicente Romero <vromero@openjdk.org>
Date:      2021-12-08 22:49:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/03bf55f62065f8f9c8ade1eff8ca6eaeabe51450
;;;",,,,,,,,,,,,,,,,,,,,
Incorrect references to --enable-reproducible-builds in docs,JDK-8277977,5063717,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mkartashev,mkartashev,mkartashev,2021-11-30 01:43,2021-12-07 07:54,2023-10-01 09:57,2021-11-30 05:02,17,18,,,,,,,,,,,,18,infrastructure,,0,,,,,,,,,,,,,,,,,"The description of reproducible builds in doc/building.html and doc/building.md suggests to use the  --enable-reproducible-builds option, but in reality the option spelling is singular, not plural: --enable-reproducible-build. There's also a reference to --disable-reproducible-builds (again, plural) in the build scripts.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,17,,,,,,,,"0|i2v88b:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-11-30 05:02;roboduke;Changeset: 01cefc94
Author:    Maxim Kartashev <maxim.kartashev@jetbrains.com>
Committer: Magnus Ihse Bursie <ihse@openjdk.org>
Date:      2021-11-30 13:01:17 +0000
URL:       https://git.openjdk.java.net/jdk/commit/01cefc94c766b87d426cf1dec89a8867454faf0e
;;;",,,,,,,,,,,,,,,,,,,,
"Test jdk/sun/security/ssl/SSLSessionImpl/NoInvalidateSocketException.java fails with ""tag mismatch""",JDK-8277970,5063706,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,djelinski,dholmes,dholmes,2021-11-29 23:22,2023-07-16 23:11,2023-10-01 09:57,2022-10-12 08:35,17,18,20,,,,,,,,,,,20,security-libs,,0,bugdb_34905070,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jdk19u-fix-request,jdk19u-fix-yes,problemlist,tier2,,,,,,,,"Test:

jdk/sun/security/ssl/SSLSessionImpl/NoInvalidateSocketException.java

is failing with ""tag mismatch"":

Caused by: javax.crypto.AEADBadTagException: Tag mismatch
at java.base/com.sun.crypto.provider.GaloisCounterMode$GCMDecrypt.doFinal(GaloisCounterMode.java:1591)
at java.base/com.sun.crypto.provider.GaloisCounterMode.engineDoFinal(GaloisCounterMode.java:454)
at java.base/javax.crypto.Cipher.doFinal(Cipher.java:2501)
at java.base/sun.security.ssl.SSLCipher$T13GcmReadCipherGenerator$GcmReadCipher.decrypt(SSLCipher.java:1933)
at java.base/sun.security.ssl.SSLSocketInputRecord.decodeInputRecord(SSLSocketInputRecord.java:260)
at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:181)
at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)
",,,,,,,,,,JDK-8296473,JDK-8296474,JDK-8299166,JDK-8299165,JDK-8295929,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8279649,,,,,,,JDK-8280158,JDK-8287739,JDK-8278388,JDK-8277999,JDK-8313084,,,,,,,,,,,JDK-8274736,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v85v:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@35a9b277,,,,,,,Verified,,"2021-12-08 09:14;jnimeh;My suspicion here is that we have a truncated/partial read happening on the reader thread which causes the AEADBadTagException to occur rather than a socket exception (trying to read on an already closed socket).  Normally this kind of exception would rightfully cause the session to be invalidated since the cipher's own integrity protection mechanisms are being tripped.  In this case though it's really a lower-layer socket/timing issue underneath the protocol.

We may be able to bypass the session invalidation check in these cases since we run multiple iterations of the test.  What isn't clear to me at this point is how frequent this truncated read happens.  I ran hundreds of iterations of this test in Mach5 on Linux x64, Windows x64 and MacOS before committing the fix and test and never saw this, but the timing on this is delicate so on a different machine with slightly different characteristics could uncover something that I didn't see in all the places I ran the test.;;;","2021-12-23 11:16;dcubed;Here's a log file snippet for the jdk-18+30-2015-tier2 sighting: 

sun/security/ssl/SSLSessionImpl/NoInvalidateSocketException.java 

----------System.err:(39/5264)---------- 
javax.net.ssl|ALL|11|Server Reader Thread|2021-12-23 18:33:59.226 GMT|SSLSessionImpl.java:219|Session initialized: Session(1640284439220|SSL_NULL_WITH_NULL_NULL) 
javax.net.ssl|ALL|11|Server Reader Thread|2021-12-23 18:33:59.263 GMT|SSLSessionImpl.java:947|Negotiating session: Session(1640284439220|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|E0|Main Client Thread|2021-12-23 18:33:59.275 GMT|SSLSessionImpl.java:219|Session initialized: Session(1640284439274|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|11|Server Reader Thread|2021-12-23 18:33:59.365 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284439220|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|01|Client Reader Thread|2021-12-23 18:33:59.370 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284439274|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|21|Server Reader Thread|2021-12-23 18:34:01.302 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284439220|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|01|Client Reader Thread|2021-12-23 18:34:01.324 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284439274|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|31|Server Reader Thread|2021-12-23 18:34:03.194 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284439220|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|01|Client Reader Thread|2021-12-23 18:34:03.211 GMT|SSLSessionImpl.java:1221|Invalidated session: Session(1640284439274|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|41|Server Reader Thread|2021-12-23 18:34:05.027 GMT|SSLSessionImpl.java:219|Session initialized: Session(1640284445026|SSL_NULL_WITH_NULL_NULL) 
javax.net.ssl|ALL|41|Server Reader Thread|2021-12-23 18:34:05.030 GMT|SSLSessionImpl.java:947|Negotiating session: Session(1640284445026|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|E0|Main Client Thread|2021-12-23 18:34:05.047 GMT|SSLSessionImpl.java:219|Session initialized: Session(1640284445047|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|41|Server Reader Thread|2021-12-23 18:34:05.073 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284445026|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|01|Client Reader Thread|2021-12-23 18:34:05.080 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284445047|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|51|Server Reader Thread|2021-12-23 18:34:06.910 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284445026|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|01|Client Reader Thread|2021-12-23 18:34:06.933 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284445047|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|61|Server Reader Thread|2021-12-23 18:34:08.749 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284445026|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|71|Server Reader Thread|2021-12-23 18:34:10.589 GMT|SSLSessionImpl.java:219|Session initialized: Session(1640284450588|SSL_NULL_WITH_NULL_NULL) 
javax.net.ssl|ALL|71|Server Reader Thread|2021-12-23 18:34:10.597 GMT|SSLSessionImpl.java:947|Negotiating session: Session(1640284450588|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|E0|Main Client Thread|2021-12-23 18:34:10.608 GMT|SSLSessionImpl.java:219|Session initialized: Session(1640284450608|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|71|Server Reader Thread|2021-12-23 18:34:10.629 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284450588|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|01|Client Reader Thread|2021-12-23 18:34:10.638 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284450608|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|81|Server Reader Thread|2021-12-23 18:34:12.487 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284450588|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|01|Client Reader Thread|2021-12-23 18:34:12.489 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284450608|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|91|Server Reader Thread|2021-12-23 18:34:14.258 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284450588|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|01|Client Reader Thread|2021-12-23 18:34:14.262 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284450608|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|A1|Server Reader Thread|2021-12-23 18:34:16.177 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284450588|TLS_AES_256_GCM_SHA384) 
javax.net.ssl|ALL|01|Client Reader Thread|2021-12-23 18:34:16.179 GMT|SSLSessionImpl.java:252|Session initialized: Session(1640284450608|TLS_AES_256_GCM_SHA384) 
java.lang.RuntimeException: One or more sessions were improperly invalidated. 
at NoInvalidateSocketException.main(NoInvalidateSocketException.java:88) 
at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) 
at java.base/java.lang.reflect.Method.invoke(Method.java:577) 
at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127) 
at java.base/java.lang.Thread.run(Thread.java:833) 

JavaTest Message: Test threw exception: java.lang.RuntimeException: One or more sessions were improperly invalidated. 
JavaTest Message: shutting down test 

STATUS:Failed.`main' threw exception: java.lang.RuntimeException: One or more sessions were improperly invalidated. 
----------rerun:(35/7242)*----------

And the above error message match the following bug:

JDK-8278388 Test sun/security/ssl/SSLSessionImpl/NoInvalidateSocketException.java fails with java.lang.RuntimeException: One or more sessions were improperly invalidated.

However, this sighting also contains:

5542886558336815: Client Reader Thread: Exception reading from SSLSocket@1a158622: javax.net.ssl.SSLException: Tag mismatch
javax.net.ssl.SSLException: Tag mismatch
	at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:133)
	at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:371)
	at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)
	at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:309)
	at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:123)
	at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1503)
	at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1474)
	at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1059)
	at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:966)
	at NoInvalidateSocketException.readFromSSLSocket(NoInvalidateSocketException.java:249)
	at NoInvalidateSocketException$ReaderThread.run(NoInvalidateSocketException.java:180)
Caused by: javax.crypto.AEADBadTagException: Tag mismatch
	at java.base/com.sun.crypto.provider.GaloisCounterMode$GCMDecrypt.doFinal(GaloisCounterMode.java:1591)
	at java.base/com.sun.crypto.provider.GaloisCounterMode.engineDoFinal(GaloisCounterMode.java:454)
	at java.base/javax.crypto.Cipher.doFinal(Cipher.java:2501)
	at java.base/sun.security.ssl.SSLCipher$T13GcmReadCipherGenerator$GcmReadCipher.decrypt(SSLCipher.java:1933)
	at java.base/sun.security.ssl.SSLSocketInputRecord.decodeInputRecord(SSLSocketInputRecord.java:260)
	at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:181)
	at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)
	... 6 more
5542887199043311: Main Client Thread: *** Session(1640284439274|TLS_AES_256_GCM_SHA384) IS INVALID ***

Which matches this bug.;;;","2022-01-05 09:12;dcubed;There are 11 failure sightings for sun/security/ssl/SSLSessionImpl/NoInvalidateSocketException.java
in the Mach5 history. 5 of those are JDK18 and JDK19 failures on linux-aarch64, linux-x64 and
macosx-x64. 6 of those are JDK18 SBR runs on linux-x64.

I'm looking into a limited ProblemListing for this test.;;;","2022-06-01 23:47;clanger;[~jnimeh], can you check whether JDK-8280158 is a duplicate of this?;;;","2022-07-13 06:43;dcubed;Here's a log file snippet for the jdk-20+6-297-tier2 sighting: 

sun/security/ssl/SSLSessionImpl/NoInvalidateSocketException.java

399947860245050: Main Client Thread: Closed SSLSocket@2a0f1e34
399947861492940: Client Reader Thread: Exception reading from SSLSocket@2a0f1e34: javax.net.ssl.SSLException: Tag mismatch
javax.net.ssl.SSLException: Tag mismatch
	at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:132)
	at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:371)
	at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)
	at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:309)
	at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:123)
	at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1513)
	at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1484)
	at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1069)
	at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:976)
	at NoInvalidateSocketException.readFromSSLSocket(NoInvalidateSocketException.java:249)
	at NoInvalidateSocketException$ReaderThread.run(NoInvalidateSocketException.java:180)
Caused by: javax.crypto.AEADBadTagException: Tag mismatch
	at java.base/com.sun.crypto.provider.GaloisCounterMode$GCMDecrypt.doFinal(GaloisCounterMode.java:1591)
	at java.base/com.sun.crypto.provider.GaloisCounterMode.engineDoFinal(GaloisCounterMode.java:454)
	at java.base/javax.crypto.Cipher.doFinal(Cipher.java:2525)
	at java.base/sun.security.ssl.SSLCipher$T12GcmReadCipherGenerator$GcmReadCipher.decrypt(SSLCipher.java:1693)
	at java.base/sun.security.ssl.SSLSocketInputRecord.decodeInputRecord(SSLSocketInputRecord.java:260)
	at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:181)
	at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)
	... 6 more
399948372405860: Main Client Thread: *** Session(1657693008111|TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384) IS INVALID ***

<snip>

----------System.err:(18/1967)----------
javax.net.ssl|ALL|A1|Server Reader Thread|2022-07-13 06:16:48.063 UTC|SSLSessionImpl.java:219|Session initialized:  Session(1657693008040|SSL_NULL_WITH_NULL_NULL)
javax.net.ssl|ALL|A1|Server Reader Thread|2022-07-13 06:16:48.109 UTC|SSLSessionImpl.java:947|Negotiating session:  Session(1657693008040|TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384)
javax.net.ssl|ALL|71|Main Client Thread|2022-07-13 06:16:48.112 UTC|SSLSessionImpl.java:219|Session initialized:  Session(1657693008111|TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384)
javax.net.ssl|ALL|91|Client Reader Thread|2022-07-13 06:16:58.947 UTC|SSLSessionImpl.java:1221|Invalidated session:  Session(1657693008111|TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384)
javax.net.ssl|ALL|22|Server Reader Thread|2022-07-13 06:17:00.463 UTC|SSLSessionImpl.java:219|Session initialized:  Session(1657693020463|SSL_NULL_WITH_NULL_NULL)
javax.net.ssl|ALL|22|Server Reader Thread|2022-07-13 06:17:00.465 UTC|SSLSessionImpl.java:947|Negotiating session:  Session(1657693020463|TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384)
javax.net.ssl|ALL|71|Main Client Thread|2022-07-13 06:17:00.467 UTC|SSLSessionImpl.java:219|Session initialized:  Session(1657693020467|TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384)
java.lang.RuntimeException: One or more sessions were improperly invalidated.
	at NoInvalidateSocketException.main(NoInvalidateSocketException.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:1589)

JavaTest Message: Test threw exception: java.lang.RuntimeException: One or more sessions were improperly invalidated.
JavaTest Message: shutting down test

STATUS:Failed.`main' threw exception: java.lang.RuntimeException: One or more sessions were improperly invalidated.
----------rerun:(40/5624)*----------;;;","2022-10-03 02:41;djelinski;So here's what's happening:
- Main Client Thread calls close...
- While Client Reader Thread is decoding ""new session ticket message"" from the server...
- close calls GCMReadCipher.dispose(), which calls cipher.doFinal()
- and it happens between GCMReadCipher.decrypt's call to cipher.updateAAD(aad) and call to cipher.doFinal(bb, pt)

To reproduce, put a Thread.sleep(6) between updateAAD and doFinal

For an easy fix, remove GCMReadCipher.dispose(); it does not serve any real purpose anyway.
;;;","2022-10-05 02:36;djelinski;Ok, my previous comment didn't capture the entire picture...
When one thread calls close at the same time when other thread is reading from the socket, there are more things that can go wrong:
- both threads read from the socket; the thread doing 'read' may receive incomplete data
- the thread doing 'close' may dispose the read cipher at any time, and the thread doing 'read' does not check if the read cipher is still valid at the time when it's used

The fix is not that easy either; the threads are not synchronized at all. The idea was that 'read' should not block 'close'. However, some sort of synchronization is required if we want to make sure that 'read' does not receive incorrect data.;;;","2022-10-05 10:03;jnimeh;Adding additional synchronization would need to be done carefully, to be sure.  This read/close logic seems to be delicate code.  The test that is failing was there to exercise a fix to not invalidate sessions where the read/close thread collision happens.  But the removal of some synchronization in reads/closes goes back to JDK-8274524, which resolved deadlocks that happened when reads and closes collided.

This test itself was iterative, since it isn't always easy from running SSLSocket based tests to land on the read/close timing that went into the codepath that now keeps the session in the cache.  This is a admittedly a very blunt instrument to use for a test like this because there's always the possibility that none of the iterations would land on the proper window of time.  That said, I ran it thousands of times both before and after this test failure bug happened and I'd always hit the desired timing at least once, and I've never been able to reproduce the AEAD tag failure, though clearly the nightly regressions can.

What I've been working on is a JDI-based version of the test that can artificially create the conditions that exercise specifically the fix in JDK-8274736.  While that would remove the need for this iterative try-until-you-get-it approach, even that wouldn't directly address the tag mismatch exceptions we see here, as it would be targeted specifically to the read/close timing seen in JDK-8274736.  My main concern is that whichever way we go on this, we don't end up returning to code that led to JDK-8274524.;;;","2022-10-11 09:12;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/10657
Date: 2022-10-11 14:38:35 +0000;;;","2022-10-12 08:35;dukebot;Changeset: d1252653
Author:    Daniel Jeliński <djelinski@openjdk.org>
Date:      2022-10-12 15:32:36 +0000
URL:       https://git.openjdk.org/jdk/commit/d1252653b07ee3d0347b39b96f734e45772b5b36
;;;","2022-10-19 03:04;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk19u/pull/48
Date: 2022-10-19 09:53:31 +0000;;;","2022-10-20 23:41;clanger;Fix request (19u, 17u, 11u)
Bugfix that is valid/helpful in backport releases as well. Applied clean (at least the bot recognizes this), successfully ran through nightly testing at SAP.;;;","2022-11-03 12:29;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/855
Date: 2022-11-03 19:21:06 +0000;;;","2022-11-03 13:27;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1499
Date: 2022-11-03 20:17:35 +0000;;;",,,,,,,
HttpClient SelectorManager shuts down when custom Executor rejects a task,JDK-8277969,5063705,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,dfuchs,alanb,alanb,2021-11-29 23:13,2022-12-08 08:03,2023-10-01 09:57,2022-04-20 06:12,18,,,,,,,,,,,,,19,core-libs,,0,,,,,,,,,,,,,,,,,"If a HttpClient is created with an Executor to run async and dependent tasks, and if the Executor rejects a task (throws RejectedExecutionException), then the internal SelectorManager may silently shutdown, leaving clients hanging.

The exception is revealed by running with -Djdk.httpclient.HttpClient.log=all
Nov 30, 2021 7:03:35 AM jdk.internal.net.http.HttpClientImpl$SelectorManager run
INFO: CHANNEL: HttpClient-1-SelectorManager: stopping
Nov 30, 2021 7:03:35 AM jdk.internal.net.http.HttpClientImpl$SelectorManager shutdown
INFO: MISC: HttpClient-1-SelectorManager: shutting down
Nov 30, 2021 7:03:35 AM jdk.internal.net.http.HttpClientImpl$SelectorManager run
INFO: ERROR: HttpClient-2-SelectorManager: HttpClientImpl shutting down due to fatal error: java.util.concurrent.RejectedExecutionException: java.lang.IllegalStateException: Current thread not owner or thread in flock
	at java.base/java.util.concurrent.StructuredExecutor.execute(StructuredExecutor.java:465)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$DelegatingExecutor.execute(HttpClientImpl.java:153)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection$ConnectEvent.handle(PlainHttpConnection.java:152)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.handleEvent(HttpClientImpl.java:977)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.lambda$run$3(HttpClientImpl.java:932)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.run(HttpClientImpl.java:932)
Caused by: java.lang.IllegalStateException: Current thread not owner or thread in flock
	at java.base/jdk.internal.misc.ThreadFlock.ensureOwnerOrContainsThread(ThreadFlock.java:204)
	at java.base/jdk.internal.misc.ThreadFlock.start(ThreadFlock.java:267)
	at java.base/java.util.concurrent.StructuredExecutor.spawn(StructuredExecutor.java:345)
	at java.base/java.util.concurrent.StructuredExecutor.execute(StructuredExecutor.java:461)
	... 6 more

This issue is created to examine this scenario, e.g.

- The REE is fatal so maybe the shutdown/exception should be printed to the console unconditionally, irrespective of whether logging is enabled or not.

- Maybe the spec for HttpClient.Builder.executor(Executor) should specify that the behavior is unspecified when an executor rejects tasks.

- Maybe there needs to be a fallback to at least complete exceptionally the CF that the client is waiting on, so they aren't hanging indefinitely.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8298340,JDK-8296889,JDK-8294916,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v85n:",9223372036854775807,b19,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2022-01-24 06:30;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7196
Date: 2022-01-24 14:25:09 +0000;;;","2022-04-20 06:12;dukebot;Changeset: 5291ec8d
Author:    Daniel Fuchs <dfuchs@openjdk.org>
Date:      2022-04-20 13:09:45 +0000
URL:       https://git.openjdk.java.net/jdk/commit/5291ec8d56b0e89aa96c3d53d9dcf093480cf48f
;;;",,,,,,,,,,,,,,,,,,,
Enclosing instance optimization affects serialization,JDK-8277965,5063695,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,cushon,cushon,cushon,2021-11-29 17:47,2022-02-10 14:28,2023-10-01 09:57,2021-12-02 11:18,,,,,,,,,,,,,,18,tools,,0,,,,,,,,,,,,,,,,,"JDK-8271623 (omit enclosing instance fields from inner classes that don't use it) has impacts on serialization that were not anticipated and discussed during the review of the CSR (JDK-8271717) and implementation.

This bug tracks mitigating those affects, either by backing out the change, disabling it for serializable classes, or deciding that the current behaviour is correct.

The original change causes javac to omit the synthetic `this$0` field from inner classes that do not access their enclosing instance.

Based on review feedback, the optimization is only applied to serializable classes that define a serialVersionUID, since omitting the synthetic field would affect default serialization: 
https://github.com/openjdk/jdk/pull/4966#issuecomment-967449448

For classes that define a serialVersionUID, this change affects compatibility if an inner class that does not use this$0 is recompiled to use this$0, and an old form is deserialized, since it would see a null value for this$0. (There's a demo showing a deserialized class with a null this$0 field below.)

 That seems like the kind of incompatibility discussed in the Java Object Serialization Specification, in the note about how serialization of inner classes is 'strongly discouraged' in part because:

> Synthetic fields generated by javac (or other JavaTM compilers) to implement inner classes are implementation dependent and may vary between compilers; differences in such fields can disrupt compatibility

The specification also suggests that the synthetic field will exist, although in context (warning that serializing inner classes is a bad idea), this can be read as disclaiming that this can happen, not necessarily guaranteeing it to always happen in a stable and predictable way:

> inner classes declared in non-static contexts contain implicit non-transient references to enclosing class instances, serializing such an inner class instance will result in serialization of its associated outer class instance as well

https://docs.oracle.com/en/java/javase/17/docs/specs/serialization/serial-arch.html

```
import java.io.IOException;
import java.io.InputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.io.Serializable;
import java.lang.reflect.Field;
import java.nio.file.Files;
import java.nio.file.Paths;

public class X implements Serializable {

  private static final long serialVersionUID = 0;

  class Inner implements Serializable {

    private static final long serialVersionUID = 0;

    void f() {
      for (Field f : getClass().getDeclaredFields()) {
        f.setAccessible(true);
        try {
          System.err.println(f + "": "" + f.get(this));
        } catch (IllegalAccessException e) {
          throw new LinkageError(e.getMessage(), e);
        }
      }
    }
  }

  public static void main(String[] args) throws IOException, ClassNotFoundException {
    Inner i;
    switch (args[0]) {
      case ""write"":
        try (OutputStream os = Files.newOutputStream(Paths.get(""data""));
            ObjectOutputStream oos = new ObjectOutputStream(os)) {
          i = new X().new Inner();
          oos.writeObject(i);
        }
        break;
      case ""read"":
        try (InputStream is = Files.newInputStream(Paths.get(""data""));
            ObjectInputStream oos = new ObjectInputStream(is)) {
          i = (Inner) oos.readObject();
        }
        break;
      default:
        throw new AssertionError(args[0]);
    }
    i.f();
  }
}
```

$ javac --release 11 -XDoptimizeOuterThis=true X.java
$ java X write
private static final long X$Inner.serialVersionUID: 0
$ javac --release 11 X.java
$ java X read
private static final long X$Inner.serialVersionUID: 0
final X X$Inner.this$0: null

$ javac --release 11 X.java
$ java X write
private static final long X$Inner.serialVersionUID: 0
final X X$Inner.this$0: X@3a03464
$ javac --release 11 -XDoptimizeOuterThis=true X.java
$ java X read
private static final long X$Inner.serialVersionUID: 0",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278042,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8271623,,,,,,,,,,,,,,,JDK-8278178,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v83f:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,Verified,,"2021-11-30 09:51;cushon;From [1], there are other failures which are ""JCK tests that involve serialization in the AWT and Beans API's"".

I'm not sure yet what the nature of the failures is, the situation described in this bug where ""an inner class that does not use this$0 is recompiled to use this$0, and an old form is deserialized"" seems like a slightly surprising thing to do in a test, and that failure mode is arguably working as intended.

[1] https://bugs.openjdk.java.net/browse/JDK-8271717?focusedCommentId=14461359&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-14461359;;;","2021-11-30 11:22;darcy;[~cushon], we've submitted Oracle-internal test jobs to verify the patch addresses the test failures seen with the other change.;;;","2021-11-30 11:32;cushon;[~darcy] Thanks, is there anything you can share about the nature of those test failures? If we proceed with https://git.openjdk.java.net/jdk/pull/6604, I'd still like to understand what the incompatibility was so we can consider whether it makes sense to roll that change forward (e.g after further discussion in a separate CSR).;;;","2021-12-01 07:34;cushon;[~dholmes] provided some more context in https://bugs.openjdk.java.net/browse/JDK-8271717?focusedCommentId=14461616&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-14461616

> the problem is much simpler and I would argue a test bug. These tests involve serialization and deserialization of the Accessible* instances associated with AWT components e.g. Panel has the nested type AWTAccessiblePanel. Each nested instance is logically connected to its enclosing instance, but that tends to happen in superclass code, so the Accessible object itself does not reference the enclosing instance and so this$0 was elided from the serialized form. However, the deserialization part of the test explicitly tries to extract this$0 from the serialized stream.

Thanks, I can see the argument that is a test bug. Do you know if there's someone who might be able to help fix the test?

I don't have access to the tests and don't have much insight into how how much trouble the test failures are causing. I'm happy to submit https://git.openjdk.java.net/jdk/pull/6604 once it's reviewed to mitigate the failures, but it seems like it make not be necessary to permanently disable the handling of Serializable classes here unless there's a more widespread problem.;;;","2021-12-02 11:18;roboduke;Changeset: 4f15be2c
Author:    Liam Miller-Cushon <cushon@openjdk.org>
Date:      2021-12-02 19:17:09 +0000
URL:       https://git.openjdk.java.net/jdk/commit/4f15be2cd41252d2e5a3f0832f07b98462e9076d
;;;",,,,,,,,,,,,,,,,
ClassCastException with no stack trace is thrown with -Xcomp in method handle invocation,JDK-8277964,5063694,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,kvn,mchung,mchung,2021-11-29 17:39,2022-01-10 09:31,2023-10-01 09:57,2021-12-15 13:47,18,,,,,,,,,,,,,18,hotspot,,0,c2,conformance,oracle-triage-11,oracle-triage-17,oracle-triage-18,regression,,,,,,,,,,,"Constructor0204 test expects IllegalArgumentException thrown due to wrong parameter type, something like this:

  Class params[] = {int.class};
  Constructor c = T.class.getConstructor( params );
  Object args[] = {int.class};
  T ob = (T) (c.newInstance( args ));

But VM throws ClassCastException with no stack trace during the invocation of a method handle when running with -Xcomp in the new core reflection implementation after JEP 416 is integrated.   InvocationTargetException wrapping CCE is thrown instead. 

Constructor0204: Failed. Constructor0204: unexpected java.lang.reflect.InvocationTargetException thrown

java.lang.reflect.InvocationTargetException
	at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:72)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:483)
	at javasoft.sqe.tests.api.java.lang.reflect.Constructor.CNewInstanceTests.Constructor0204(CNewInstanceTests.java:167)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at javasoft.sqe.javatest.lib.MultiTest.invokeTestCase(MultiTest.java:406)
	at javasoft.sqe.javatest.lib.MultiTest.run(MultiTest.java:195)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.jck.lib.ExecJCKTestSameJVMCmd$Version2Test.execute(ExecJCKTestSameJVMCmd.java:603)
	at com.sun.jck.lib.ExecJCKTestSameJVMCmd$StandardTest.run(ExecJCKTestSameJVMCmd.java:560)
	at com.sun.jck.lib.ExecJCKTestSameJVMCmd.execute(ExecJCKTestSameJVMCmd.java:444)
	at com.sun.jck.lib.ExecJCKTestSameJVMCmd.run(ExecJCKTestSameJVMCmd.java:374)
	at com.sun.jck.lib.ExecInSeparateThreadCmd$StatusCallable.call(ExecInSeparateThreadCmd.java:76)
	at com.sun.jck.lib.ExecInSeparateThreadCmd$StatusCallable.call(ExecInSeparateThreadCmd.java:60)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.lang.ClassCastException",,,,,,,,,,JDK-8278882,JDK-8279724,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JCK-7316995,JDK-8278447,,,,,,,,,,,,,,JDK-8278513,JCK-7317119,JDK-8271820,,,,,,,,"2021-12-13 21:57;kvn;8277964.patch;https://bugs.openjdk.org/secure/attachment/97362/8277964.patch","2021-12-14 19:18;mchung;IllegalArgumentsTest.java;https://bugs.openjdk.org/secure/attachment/97380/IllegalArgumentsTest.java","2021-12-05 23:36;thartmann;Test.java;https://bugs.openjdk.org/secure/attachment/97278/Test.java",,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v837:",9223372036854775807,b29,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-30 04:19;thartmann;ILW = Incorrect execution of C2 compiled code (wrong exception thrown), single JCK test, no known workaround = HLH = P2;;;","2021-11-30 07:54;thartmann;This is not a compiler bug but an issue in AccessorUtils::isIllegalArgument which inspects the stack trace of an exception. With C2's OmitStackTraceInFastThrow optimization, the stack trace is omitted for exceptions that are often thrown, for performance reasons. This leads to isIllegalArgument returning an incorrect result to DirectConstructorHandleAccessor::newInstance which then throws an InvocationTargetException instead of an IllegalArgumentException. To verify, C2's optimization can be turned off via -XX:-OmitStackTraceInFastThrow.;;;","2021-11-30 07:55;thartmann;Moving to core-libs/java.lang:reflect;;;","2021-11-30 09:38;mchung;[~thartmann] thanks for the investigation.

The choice to decode the stack trace from the exception thrown instead of using catchException combinator is due to the cold startup regression.   The proper solution for this is to look into a performant way to use catchException to replace the stack trace decoding logic.;;;","2021-12-08 12:11;kvn;[~alanb] We can do it as temporary workaround. We have only one place in C2 which checks this flag so we can relax the check for particular method or class. Which one method/class do you have in mind?
;;;","2021-12-13 21:59;kvn;[~mchung] I attached HotSpot patch with changes you asked. Please, try it. It is based on latest JDK (19).;;;","2021-12-14 09:40;mchung;Thanks Vladimir.   This patch does workaround the issue.   I'll measure the performance impact to normal application.;;;","2021-12-14 19:24;mchung;A proper fix for this is to use the catchException combination.  However, that introduces significant cold startup performance regression.   JDK-8278447 tracks the work to address the performance regression using catchException and asSpreader combinator.   It may require significant work and refactoring which is risky for JDK 18.

It is proposed to implement a workaround to white list the relevant methods (all methods in sun.invoke.util.ValueConversions class) not to omit stack trace when exception is thrown.  

;;;","2021-12-14 22:00;kvn;https://github.com/openjdk/jdk18/pull/27
;;;","2021-12-15 13:47;roboduke;Changeset: d3408a46
Author:    Vladimir Kozlov <kvn@openjdk.org>
Date:      2021-12-15 21:45:45 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/d3408a46b7c8c2f8b5e41f3e286a497064a2c104
;;;",,,,,,,,,,,
AArch64: Print the correct native stack if -XX:+PreserveFramePointer when crash,JDK-8277948,5063665,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ddong,ddong,ddong,2021-11-29 09:21,2022-03-22 01:13,2023-10-01 09:57,2022-01-27 16:50,18,,,,,,,,,,,,,19,hotspot,,0,hs_err,,,,,,,,,,,,,,,,"The native stack frames in the hs log on AArch64 are not accurate sometimes. And this problem can be partially solved when PreserveFramePointer is enabled.
For more details please refer to the GitHub issue.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8283488,JDK-8280843,,,,,,,,,,,,,,JDK-8280844,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,,,,,,,"0|i2v7wr:",9223372036854775807,b08,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2022-01-27 16:50;roboduke;Changeset: 094db1a3
Author:    Denghui Dong <ddong@openjdk.org>
Date:      2022-01-28 00:49:17 +0000
URL:       https://git.openjdk.java.net/jdk/commit/094db1a3eeb3709c8218d8d26f13699024ec2943
;;;",,,,,,,,,,,,,,,,,,,,
JDK 18 - update GA Release Date,JDK-8277944,5063652,Bug,Resolved,JDK,JDK,software,duke,,,P1,Fixed,pkharskii,pkharskii,pkharskii,2021-11-29 07:49,2021-12-07 07:53,2023-10-01 09:57,2021-11-29 08:56,18,,,,,,,,,,,,,18,infrastructure,,0,,,,,,,,,,,,,,,,,"Now that the GA for JDK 18 has been updated to 3/22/22, we need to change the JDK 18 -version in the build to reflect the new GA. (./bin/java --version
openjdk 18-ea 2022-03-15)  Should be 2022-03-22.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8217974,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v7tv:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@271b8dfc,,,,,,,,,"2021-11-29 08:56;roboduke;Changeset: 825e633e
Author:    Pavel Kharskii <pavel.kharskii@oracle.com>
Committer: Sean Coffey <coffeys@openjdk.org>
Date:      2021-11-29 16:54:47 +0000
URL:       https://git.openjdk.java.net/jdk/commit/825e633e71ca942fe88c509e7f951ff8903c45cf
;;;",,,,,,,,,,,,,,,,,,,,
Subject:callAs() not throwing NPE when action is null,JDK-8277932,5063638,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,weijun,kganapureddy,kganapureddy,2021-11-29 04:59,2021-12-13 19:09,2023-10-01 09:57,2021-12-06 17:39,18,,,,,,,,,,,,,18,security-libs,,0,conformance,noreg-trivial,,,,,,,,,,,,,,,"It's observed that the Subject:callAs() method does not throw NPE as per spec.

The spec mentions that : ""Throws:
NullPointerException - if action is null""

 For the piece of code : Subject.callAs(new Subject(),null);

expected : NullPointerException.
Actual behavior is : ""java.util.concurrent.CompletionException"" thrown instead.",,,,,,,,,,JDK-8278656,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275529,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v7qr:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5c1d831a,,,,,,,,,"2021-12-06 17:39;roboduke;Changeset: 10db0e41
Author:    Weijun Wang <weijun@openjdk.org>
Date:      2021-12-07 01:37:55 +0000
URL:       https://git.openjdk.java.net/jdk/commit/10db0e41634b62be5c1a931bd54ac4260108670d
;;;",,,,,,,,,,,,,,,,,,,,
Fix compilation on macosx-aarch64 after 8276108,JDK-8277928,5063631,Bug,Resolved,JDK,JDK,software,duke,,,P1,Fixed,tschatzl,tschatzl,tschatzl,2021-11-29 03:30,2022-09-20 22:43,2023-10-01 09:57,2021-11-29 03:59,17,18,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-yes,noreg-build,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,After JDK-8276108 macosx-aarch64 does not build any more due to a wrong format specifier.,,,,,,,,,,JDK-8293882,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276108,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v7p7:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-29 03:41;chagedorn;ILW = Build failure on Mac aarch64 = HHH = P1;;;","2021-11-29 03:46;shade;Failed in GHA in original PR too: https://github.com/phedlin/jdk/runs/4311576579?check_suite_focus=true;;;","2021-11-29 03:59;roboduke;Changeset: 2622ab3f
Author:    Thomas Schatzl <tschatzl@openjdk.org>
Date:      2021-11-29 11:58:13 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2622ab3fe94814fb4f7f22e4015ef1519e546905
;;;","2022-09-14 12:20;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/668
Date: 2022-09-14 19:09:03 +0000;;;","2022-09-14 17:47;mbalao;Fix request (17u)

I'd like to request the 17u backport of this bug fix, so we can push it together with JDK-8276108 (PR https://github.com/openjdk/jdk17u-dev/pull/370) and JDK-8293826 (PR https://github.com/openjdk/jdk17u-dev/pull/669). This backport applies cleanly and can be found at https://github.com/openjdk/jdk17u-dev/pull/668. Notice that this is a follow up fix of JDK-8276108.;;;",,,,,,,,,,,,,,,,
Unable to click JCheckBox in JTable through Java Access Bridge,JDK-8277922,5063622,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,alitvinov,shadowbug,shadowbug,2021-11-29 02:58,2023-04-06 08:35,2023-10-01 09:57,2022-03-10 08:40,8-pool,8u291,,,,,,,,,,,,19,client-libs,,0,8bpr-critical-approved,amazon-interest,bugdb_33615790,cssn21_12_01,cssn21_12_02,cssn22_01_01,cssn22_01_02,cssn22_02_01,cssn22_02_02,cssn22_03_01,cssn22_03_02,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,sustaining,"ADDITIONAL OS VERSION INFORMATION:
MS Windows 10 OS

A DESCRIPTION OF THE PROBLEM:
When an assistive technology software by means of Java Access Bridge API executes ""AccessibleAction"" ""click"" on ""AccessibleContext"" which corresponds to ""javax.swing.JTable"" cell containing ""javax.swing.JCheckBox"", then the cell's value and cell's view represented by ""JCheckBox"" stay unchanged.

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM:

PLEASE NOTE: The proper way of verifying the created and integrated to the repository fix for this bug is to use THE AUTOMATIC REGRESSION TEST ""BooleanRendererHasAccessibleActionTest.java"", which is part of the fix.

1. Install 64-bit JDK.
2. In the OS enable Java Access Bridge from the installed in step #1 JDK.
3. Compile and run ""JCheckBoxAndJABTest.java"" test case application from the attached archive ""JCheckBoxAndJABTest.zip"" by the installed in step #1 JDK.
4. Run ""JABAssistiveApp.exe"" test case application from the attached archive ""JCheckBoxAndJABTest.zip"".
5. In the window of ""JABAssistiveApp.exe"" application move a mouse cursor over the button ""Select Accessible Java Component"", press Left Mouse Button and move the cursor to the window of ""JCheckBoxAndJABTest.java"" test case application and release Left Mouse Button, when the mouse cursor is over any check box component, then click ""Do AccessibleAction 'click' on Accessible Java Component"" button in the window of ""JABAssistiveApp.exe"" application.

DEFINITION OF THE BUG (ORIGINAL, IS OUTDATED, SHOULD BE IGNORED):
The issue is reproduced, if the state of the required check box in ""JCheckBoxAndJABTest.java"" application was not changed.

DEFINITION OF THE BUG (AMENDED AFTER THE FIX, SHOULD BE TAKEN INTO ACCOUNT):
The issue is reproduced, if the state of the required check box in ""JCheckBoxAndJABTest.java"" application was not changed and the next message is not displayed in a status text area located in the bottom right corner of the window of ""JABAssistiveApp.exe"" application. The expected message indicating that THE BUG IS FIXED is ""AccessibleAction 'click' cannot be done, Accessible Java Component does not support 'click' action."".",,,,,,,,,,JDK-8283290,JDK-8283216,JDK-8284606,JDK-8283072,JDK-8284008,JDK-8283505,JDK-8283080,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8283958,,,,,,,,,,,,,,,,,,,,,,,,,"2022-02-09 19:39;alitvinov;JCheckBoxAndJABTest.zip;https://bugs.openjdk.org/secure/attachment/97946/JCheckBoxAndJABTest.zip",,,,,,,,,,,,,,,,,,,,,windows,,,,,,"0|i2v7n7:",9223372036854775807,b14,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4785f47c,,,,,,,,,"2022-02-09 19:45;alitvinov;The test case ""JCheckBoxAndJABTest.zip"" was attached to the issue.;;;","2022-02-09 20:23;alitvinov;The bug was reproduced on MS Windows 10 OS by means of the attached test case with JDK 19+6 x64, JDK 8u311 b11 x64.

THE ROOT CAUSE OF THE BUG:

The reason of the issue is the fact that when the assistive technology software tries to do ""AccessibleAction"" on ""AccessibleContext"" associated with a cell with boolean data type in ""JTable"" component through Java Access Bridge (JAB), the JDK executes this ""AccessibleAction"" on ""AccessibleContext"" of a renderer, which is an instance of the class ""javax.swing.JTable.BooleanRenderer"" which is a derivative of ""JCheckBox"" class, and the instance of this renderer is single and common for all cells of boolean data type. Therefore execution of ""click"" ""AccessibleAction"" on this renderer component which is not permanently bound to any particular cell in the table does not lead to update of the table cell value.

The issue is a bug in JDK and should be fixed in JDK, because JDK informs the assistive technology software through Java Access Bridge API in particular through the function

""BOOL getAccessibleActions(long vmID, AccessibleContext accessibleContext, AccessibleActions *actions)""

that ""AccessibleContext"" of the table cell with ""JCheckBox"" supports one action ""click"", while real execution of this action on this accessible context does not lead to any result.;;;","2022-02-09 21:03;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7416
Date: 2022-02-10 04:59:33 +0000;;;","2022-03-10 08:40;dukebot;Changeset: 1668c02e
Author:    Anton Litvinov <alitvinov@openjdk.org>
Date:      2022-03-10 16:37:55 +0000
URL:       https://git.openjdk.java.net/jdk/commit/1668c02ee83cc4f7bd7b2fe5bb7ef59b5dbda081
;;;","2022-03-11 08:10;alitvinov;FINAL CONCLUSION ABOUT THE BUG AND THE CREATED FIX:

During the process of review of different versions of the fix for this bug, it was finally decided and concluded that the only solid and proper way to resolve this bug is to stop reporting to the end users that ""AccessibleContext"" of ""javax.swing.JTable.BooleanRenderer.BolleanRenderer"" supports ""AccessibleAction"", what has never been supported by this component in reality. The implemented fix set ""BooleanRenderer"" in line with all other existing default table cell renderers which do not support any accessible actions. The existing 6 default table cell renderers in JDK are:
- ""javax.swing.table.DefaultTableCellRenderer.UIResource""
- ""javax.swing.JTable.NumberRenderer""
- ""javax.swing.JTable.DoubleRenderer""
- ""javax.swing.JTable.DateRenderer""
- ""javax.swing.JTable.IconRenderer""
- ""javax.swing.JTable.BooleanRenderer""

The detailed information about the fix and the conclusion can be found in the review request.;;;","2022-03-21 07:35;goetz;Fix request [17u]

I backport this for parity with 17.0.4-oracle.
No risk, only a test change.
Clean backport.
Test passes.
SAP nightly testing passed.
Edit: The comment has a cut&past error: This is not a mere test change. But simple enough to have low risk.;;;","2022-03-21 07:44;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/273
Date: 2022-03-21 14:37:54 +0000;;;","2022-03-29 07:45;goetz;Fix request [11u]

I backport this for parity with 11.0.16-oracle.
Low risk, adding a simple null check.
Clean backport.
Test passes and fails without the patch.
SAP nighlty testing passed.;;;","2022-03-29 07:52;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/959
Date: 2022-03-29 14:46:30 +0000;;;",,,,,,,,,,,,
OldObjectSample event causing bloat in the class constant pool in JFR recording,JDK-8277919,5063619,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,mgronlun,jbachorik,jbachorik,2021-11-29 02:43,2023-06-27 05:58,2023-10-01 09:57,2021-12-14 05:01,17,18,19,,,,,,,,,,,18,hotspot,,0,datadog-interest,jdk17u-fix-request,jdk17u-fix-yes,noreg-hard,redhat-interest,,,,,,,,,,,,"Allocation heavy applications with OldObjectSample enabled will end up storing many duplicates of the same klass artifact, creating a huge bloat in the class area of the recording constant pool (see the akka_6.jfr.zip attachment).

While this is just annoying when the recording does not have the max size set it becomes a real problem with max size - the class constant pool will push out the useful data eventually (again, see the akka_6.jfr.zip attachment).
",,,,,,,,,,JDK-8278876,JDK-8279571,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278987,JDK-8233705,JDK-8249245,,,,,,,,"2021-11-29 02:41;jbachorik;akka_6.jfr.zip;https://bugs.openjdk.org/secure/attachment/97206/akka_6.jfr.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v7mj:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,Not verified,,"2021-11-29 03:02;jbachorik;Here are some details of where my investigation took me

The issue appears after https://bugs.openjdk.java.net/browse/JDK-8249245 when the artifacts tagging (and adding klasses to the queue to be persisted) is affected by the epoch clear bit (before that change only the epoch bit was taken into account).

Following the change it became obvious that the epoch clear bit was not unset for LEAKP tagged artifacts - the bit is supposed to be unset in a 'write' method but the LEAKP tagged artifacts are written out in a specific write method which does not unset the epoch clear bit. This means that once the bit is set it will never be unset for the LEAKP tagged artifacts - meaning that the `should_tag()` function for that artifact will always return true, re-tagging the artifact and re-adding the klass to the queue.

In addition to the duplicates stored in the internal queue the write method for the LEAKP tagged artifacts is not checking nor setting the SERIALIZED bit and as such it will happily write out always all the duplicates. This is due to the fact that the `CompositeKlassWriter` for the LEKP tagged artifacts is first executing the `LeakKlassWriter` which matches all artifacts tagged by LEAKP regardless of the SERIALIZED bit and only then it executes `KlassWriter` which will write out anything with LEAKP and SERIALIZED bits unset.


A naive fix would be to have the `write__klass__leakp` function (the one writing out LEAKP tagged klasses) check and set the SERIALIZED bit to prevent writing out duplicates. This would still keep the duplicates on the internal queue, though.
My first attempt to 'fix' unsetting of the epoch clear bit resulted in infinite loop when iterating over LEAKP tagged klasses :(
;;;","2021-12-10 09:29;mgronlun;This is because of JDK-8233705, which can lead to multiple klass entries enqueued via the load barrier, in combination with an insufficient filter mechanism for the leak profiler artefacts.The situation worsened with JDK-8249245, which opened a longer window where artefacts can enqueue.

 Leak profiler artefacts range over the entire set enqueued in the previous epoch. A filtering mechanism similar to the one used for regular artefacts becomes necessary to avoid duplicates.

Note that you need to have stacktraces turned on for the OldObjectSample event, which for the JDK is only done in profile.jfc.;;;","2021-12-14 05:01;roboduke;Changeset: 475ec8e6
Author:    Markus Grönlund <mgronlun@openjdk.org>
Date:      2021-12-14 13:00:39 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/475ec8e6c5abc3431344d69bd46395e8c4b46e4c
;;;","2021-12-15 05:40;jbachorik;[17u] Fix Request

I would like to ask for an approval to backport this fix to JDK 17u. It repairs the OldObjectSample behaviour for allocation heavy applications and prevents the class constant pool bloat pushing out the real information in case the recording size is limited (which it usually is to prevent exhausting FS on production systems).

The fix applies cleanly.
jdk_jfr tests were run and they are all passing.

[Edit 1]: Unfortunately, this change will create intermittent test failures which are addressed in https://bugs.openjdk.java.net/browse/JDK-8278987 - therefore, this backport must be followed by a backport of that fix immediately.;;;","2021-12-20 02:15;shade;Jaroslav, you need to do a backport PR in jdk17u-dev.;;;","2021-12-27 02:22;jbachorik;My understanding, according to http://openjdk.java.net/projects/jdk-updates/approval.html was that if the backport does not require any changes the PR would be created after getting the 'yes' label - since there is really nothing to review and PR is required only for the workflow.

Anyway, here is the PR created by the skara /backport command - https://github.com/openjdk/jdk17u/pull/329;;;","2021-12-27 02:25;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u/pull/329
Date: 2021-12-27 10:21:48 +0000
;;;","2021-12-29 01:40;jbachorik;Goetz, why did you remove the 'jdk17u-fix-request' label? 
Is the process for backports different from what is stated in http://openjdk.java.net/projects/jdk-updates/approval.html. If it is different where can I find the up-to-date instructions?

Cheers. ;;;","2021-12-29 01:48;jbachorik;The previous PR was against incorrect repo (jdk17u vs. jdk17u-dev)
Here is the correct PR: https://github.com/openjdk/jdk17u-dev/pull/40;;;","2021-12-29 01:51;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/40
Date: 2021-12-29 09:47:12 +0000
;;;",,,,,,,,,,,
Incorrect type for IV phi of long counted loops after CCP,JDK-8277906,5063606,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,roland,chagedorn,chagedorn,2021-11-29 01:53,2022-03-03 02:00,2023-10-01 09:57,2021-12-02 07:10,16,17,18,,,,,,,,,,,18,hotspot,,0,c2,javafuzzer,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-11,oracle-triage-18,,,,,,,,,,,"The attached fuzzer test produces a different result for C2 compared to C1/interpreter.

To reproduce:
$ java -Xint Test.java > Xint.log
$ java -XX:-TieredCompilation -Xcomp -XX:CompileOnly=Test Test.java > c2.log

or

$ java -Xint Reduced.java > Xint.log
$ java -XX:-TieredCompilation -Xcomp -XX:CompileOnly=Reduced Reduced.java > c2.log

# Original output of Test.java
$ diff Xint.log c2.log
4c4
< f4 lArr iArr3 = 1296662437,-6368796162110135215,-68624
---
> f4 lArr iArr3 = 1296662437,-6368796162110135215,-115125
14c14
< f4 lArr iArr3 = 1296662437,-6368796162110135215,-68624
---
> f4 lArr iArr3 = 1296662437,-6368796162110135215,-115125
24c24
< f4 lArr iArr3 = 1296662437,-6368796162110135215,-68624
---
> f4 lArr iArr3 = 1296662437,-6368796162110135215,-115125
34c34
< f4 lArr iArr3 = 1296662437,-6368796162110135215,-68624
---
> f4 lArr iArr3 = 1296662437,-6368796162110135215,-115125
44c44
< f4 lArr iArr3 = 1296662437,-6368796162110135215,-68624
---
> f4 lArr iArr3 = 1296662437,-6368796162110135215,-115125
54c54
< f4 lArr iArr3 = 1296662437,-6368796162110135215,-68624
---
> f4 lArr iArr3 = 1296662437,-6368796162110135215,-115125
64c64
< f4 lArr iArr3 = 1296662437,-6368796162110135215,-68624
---
> f4 lArr iArr3 = 1296662437,-6368796162110135215,-115125
74c74
< f4 lArr iArr3 = 1296662437,-6368796162110135215,-68624
---
> f4 lArr iArr3 = 1296662437,-6368796162110135215,-115125
84c84
< f4 lArr iArr3 = 1296662437,-6368796162110135215,-68624
---
> f4 lArr iArr3 = 1296662437,-6368796162110135215,-115125
94c94
< f4 lArr iArr3 = 1296662437,-6368796162110135215,-68624
---
> f4 lArr iArr3 = 1296662437,-6368796162110135215,-115125",,,,,,,,,,JDK-8282596,JDK-8280692,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8256655,,,,,,,,,,"2021-11-29 01:49;chagedorn;FuzzerUtils.java;https://bugs.openjdk.org/secure/attachment/97204/FuzzerUtils.java","2021-11-29 01:49;chagedorn;Reduced.java;https://bugs.openjdk.org/secure/attachment/97203/Reduced.java","2021-11-29 07:36;thartmann;Reduced2.java;https://bugs.openjdk.org/secure/attachment/97214/Reduced2.java","2021-11-29 01:49;chagedorn;Test.java;https://bugs.openjdk.org/secure/attachment/97205/Test.java",,,,,,,,,,,,,,,b27,16,,,,,,,,"0|i2v7jn:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-29 01:59;chagedorn;ILW = Wrong result with C2 compared to C1/interpreter and not recent regression, only single Java Fuzzer test, disable compilation of affected method = HLM = P3;;;","2021-11-29 07:37;thartmann;I simplified the test further (see Reduced2.java) and verified that this is a regression from JDK-8256655 in JDK 16 b27.;;;","2021-11-29 07:54;thartmann;To reproduce, run:
java -XX:-TieredCompilation -XX:CompileCommand=compileonly,Reduced2::test Reduced2.java;;;","2021-12-02 07:10;roboduke;Changeset: 3889af3f
Author:    Roland Westrelin <roland@openjdk.org>
Date:      2021-12-02 15:09:58 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3889af3f7debc4f8d75f620bb54134d1d11a6c83
;;;","2022-03-02 08:44;mdoerr;Fix Request (17u)
Should get backported for parity with 17.0.4-oracle. Applies cleanly.;;;","2022-03-02 08:57;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/187
Date: 2022-03-02 16:46:25 +0000;;;",,,,,,,,,,,,,,,
riscv: fix the infinite LR/SC loop in BarrierSetAssembler::eden_allocate,JDK-8277890,5063591,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,yadongwang,yadongwang,yadongwang,2021-11-28 23:57,2021-11-29 19:31,2023-10-01 09:57,2021-11-29 19:31,repo-riscv-port,,,,,,,,,,,,,repo-riscv-port,hotspot,,0,,,,,,,,,,,,,,,,,"This bug can be reproduced by `java -XX:+UseSerialGC -XX:-UseTLAB -XX:TieredStopAtLevel=1 -version` on the unmatched board where this command will hang. The reason is that the implementation of load reserved/store conditional loop in BarrierSetAssembler::eden_allocate breaks the RISC-V Atomic extension spec:
```
For the
sequence to be guaranteed to eventually succeed, the dynamic code executed between the LR and
SC instructions can only contain other instructions from the base \I"" subset, excluding loads, stores,
backward jumps or taken backward branches, FENCE, FENCE.I, and SYSTEM instructions.
```
It may cause an unspecified behaviour depends on specific hardware implementations.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,riscv,,,,,,,,,,,,,linux,,,,,,"0|i2v7gb:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
riscv: Fix cmpxchg_narrow_value that needs to sign-extend non-bool results,JDK-8277884,5063582,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,fyang,ddong,ddong,2021-11-28 19:30,2021-11-28 22:45,2023-10-01 09:57,2021-11-28 22:45,repo-riscv-port,,,,,,,,,,,,,repo-riscv-port,hotspot,,0,,,,,,,,,,,,,,,,,"On behalf of Xiaolin Zheng(yunyao.zxl@alibaba-inc.com)

A very simple program inherited from jcstress could reproduce this:

```
import java.lang.invoke.MethodHandles;
import java.lang.invoke.VarHandle;

// run with:
//   build/linux-riscv64-server-release/images/jdk/bin/java -ea -XX:-TieredCompilation -XX:CompileCommand=compileonly,jdk.internal.misc.Unsafe::compareAndSetByte TestCASByte
//   assert will fail.
//   if we add '-XX:+UnlockDiagnosticVMOptions -XX:DisableIntrinsic=_compareAndExchangeByte' this test will pass.

public class TestCASByte {

    byte[] array = new byte[1];

    static final VarHandle vh;
    static {
        try {
            vh = MethodHandles.arrayElementVarHandle(byte[].class);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    public void test() {
        for (int i = 0; i < 100_000; i++) {  // To level 4
            // clear
            array[0] = 0;

            byte res1 = (byte)vh.getAndSet(array, 0, (byte)-1);
            byte res2 = (byte)vh.getAndSet(array, 0, (byte)2);

            assert res1 == 0 && res2 == -1;
        }
    }

    public static void main(String[] args) {
        new TestCASByte().test();
    }

}
```

In this case when we are getting the -1 value saved in memory, the shift is 0, the old is 0x00000000000000ff and the mask is 0x00000000000000ff at the end of cmpxchg_narrow_value. The final result is 0x00000000000000ff but it indeed should be 0xffffffffffffffff. In fact, I tried to use sra at first and found the problem was not gone, and then I found the shift is 0. The logic here is a bit delicate and the final result seems from and | or mask operations by only calculating the 8/16 bits regardless of high 56/48 bits. So the problem is that if the result is negative, we need to make a sign extension.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,riscv,,,,,,,,,,,,,linux,,,,,,"0|i2v7eb:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
riscv: Fix a temp register usage in eden_allocate,JDK-8277883,5063581,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,fyang,ddong,ddong,2021-11-28 19:27,2021-11-29 00:06,2023-10-01 09:57,2021-11-29 00:06,repo-riscv-port,,,,,,,,,,,,,repo-riscv-port,hotspot,,0,,,,,,,,,,,,,,,,,"On behalf of Xiaolin Zheng(yunyao.zxl@alibaba-inc.com)

A trivial fix for a small C1 crash - this issue could be directly reproduced by using `java -XX:+UseSerialGC -XX:-UseTLAB -XX:TieredStopAtLevel=1`. The reason is simple: the eden_allocate uses t2 as a register and zaps it, whereas C1 will use it as a register allocation candidate, leading to a crash. In this function, t0 never gets a use so we can use it safely. Tested in all cases.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,riscv,,,,,,,,,,,,,linux,,,,,,"0|i2v7e3:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Missing SessionID in TLS1.3 resumption in compatibility mode,JDK-8277881,5063553,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ascarpino,webbuggrp,webbuggrp,2021-11-26 05:52,2023-08-07 14:54,2023-10-01 09:57,2021-12-23 16:02,11,13,15,17,18,8,,,,,,,,19,security-libs,,0,18ea,amazon-interest,dcsaw,jdk11u-fix-request,jdk11u-fix-yes,jdk13u-fix-request,jdk13u-fix-yes,jdk15u-fix-request,jdk15u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jdk8u-fix-request,jdk8u-fix-yes,reproducer-yes,webbug,,"A DESCRIPTION OF THE PROBLEM :
originally reported here: https://github.com/openjdk/jdk/pull/6084#discussion_r742347040
When jdk.tls.client.useCompatibilityMode is true (default), TLSv1.3 ClientHello message should always contain a non-empty SessionID, as defined in https://datatracker.ietf.org/doc/html/rfc8446#appendix-D.4

However, the SessionID is empty when a TLSv1.3 session is resumed:
- sessionId is set to empty here https://github.com/openjdk/jdk/blob/04a806ec86a388b8de31d42f904c4321beb69e14/src/java.base/share/classes/sun/security/ssl/ClientHello.java#L406
- not updated because it's TLS 1.3 https://github.com/openjdk/jdk/blob/04a806ec86a388b8de31d42f904c4321beb69e14/src/java.base/share/classes/sun/security/ssl/ClientHello.java#L535
- not updated because session is not null https://github.com/openjdk/jdk/blob/04a806ec86a388b8de31d42f904c4321beb69e14/src/java.base/share/classes/sun/security/ssl/ClientHello.java#L577

It appears to work reasonably well with middleboxes, but one of our customers reported a broken TLS1.3 server implementation that skips ServerHello message (and immediately sends ChangeCipherSpec) when SessionID in ClientHello is empty

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Run the following code with -Djavax.net.debug=ssl,handshake

	public static void main(String[] args) throws NoSuchAlgorithmException, IOException {
		String HOST = ""bugreport.java.com"";
		int PORT = 443;
		SSLContext ctx = SSLContext.getDefault();
		SSLSocketFactory fac = ctx.getSocketFactory();
		Socket cli = fac.createSocket(HOST, PORT);
		cli.getOutputStream().write(0);
		cli.shutdownOutput();
		cli.getInputStream().read();
		Socket cli2 = fac.createSocket(HOST, PORT);
		cli2.getOutputStream().write(0);
	}
Search output for ""Produced ClientHello handshake message""

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
Both ClientHello messages produced contain non-empty SessionIDs
ACTUAL -
Only the first ClientHello contains sessionID, the second one does not

CUSTOMER SUBMITTED WORKAROUND :
Disable TLS 1.3 when communicating with broken server, fall back to TLS 1.2

FREQUENCY : always


",,,,,,,,,,JDK-8296475,JDK-8295928,JDK-8300758,JDK-8300760,JDK-8302932,JDK-8296122,JDK-8296128,JDK-8300761,JDK-8306465,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-27 06:10;tongwan;Main.java;https://bugs.openjdk.org/secure/attachment/97193/Main.java",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v77v:",9223372036854775807,b04,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@39d9862,,,,,,,,,"2021-11-27 06:08;tongwan;The observations on Windows 10:
JDK 8: Failed, session id is empty.
JDK 11: Failed.
JDK 17: Failed.
JDK 18ea+24: Failed.;;;","2021-12-23 16:02;roboduke;Changeset: 9d99a377
Author:    Daniel Jelinski <djelinski1@gmail.com>
Committer: Anthony Scarpino <ascarpino@openjdk.org>
Date:      2021-12-24 00:01:46 +0000
URL:       https://git.openjdk.java.net/jdk/commit/9d99a377bfb6ffa890db049aee575e97914fc2a1
;;;","2022-10-19 03:05;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/807
Date: 2022-10-19 09:55:20 +0000;;;","2022-10-20 23:44;clanger;Fix request (17u, 11u)
Backport of a TLS related bugfix. Applies clean. Endorsed by Daniel Jelinski. GHA and SAP nightlies pass.;;;","2022-10-31 04:35;yan;Fix request (15u, 13u):
backporting for parity with LTS releases. Clean backport; all relevant tests do pass.;;;","2022-10-31 04:41;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk15u-dev/pull/297
Date: 2022-10-31 11:35:22 +0000;;;","2022-10-31 05:51;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk13u-dev/pull/423
Date: 2022-10-31 12:44:59 +0000;;;","2022-11-03 06:13;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1496
Date: 2022-11-03 13:07:43 +0000;;;","2023-04-10 16:03;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk8u-dev/pull/300
Date: 2023-04-10 22:55:13 +0000;;;","2023-04-11 09:09;dlutker;Fix request (8u):
Patch applied cleanly after updating file paths. Backport to fix issue in TLSv1.3 Middleware compatibility and parity with Oracle 8u381. Passed Tier1/2 testing internally on Linux x64 and aarch64.

Discussion when this was originally fixed in later versions mentioned it should get back ported to 8 as well[1]

[1] https://mail.openjdk.org/pipermail/jdk-updates-dev/2022-October/017953.html;;;",,,,,,,,,,,
Fix compiler tests after JDK-8275908,JDK-8277878,5063564,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,simonis,fmatte,fmatte,2021-11-26 20:35,2022-03-20 23:58,2023-10-01 09:57,2021-11-29 04:29,18,,,,,,,,,,,,,18,hotspot,,0,noreg-self,oracle-triage-18,tier3,tier6,ursqe-triaged,,,,,,,,,,,,"Below tests are failing
compiler/uncommontrap/Decompile.java
compiler/exceptions/OptimizeImplicitExceptions.java

with
command: compile src.full/open/test/lib/jdk/test/whitebox/WhiteBox.java
reason: .class file out of date or does not exist

Failure started with the integration of JDK-8275908",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277879,,,,,,,,,,,,,,,,,,,,,,JDK-8275908,,,,,,,,,,,,,,,,,,,,,,,,,,,,,18,,,,,,,,"0|i2v7ab:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-26 20:46;dholmes;Actual failure appears to be:

----------System.out:(2/80)----------
Error occurred during initialization of VM
Multiple garbage collectors selected
----------System.err:(0/0)----------;;;","2021-11-26 20:47;vaibhav;Reason of failure : Test explicitly adds SerialGC in the parameter, if the test will run with some other Garbage collector, there will be a garbage collector conflict.

Suggested fix :-
@requires vm.gc.Serial addition in the requires tag.;;;","2021-11-26 20:52;dholmes;The new tests explicitly request UseSerialGC but they don't require the incoming GC setting to be unset. So when run in a test configuration that wants to runs e.g. ZGC, the test will get run with both -XX:+UseSerialGC and -XX:+UseZGC. Hence the error.;;;","2021-11-26 20:59;dholmes;[~vaibhav] our comments overlapped. :)

I believe the right fix is something like

@requires vm.gc == null

to ensure the test is skipped if an explicit gc is passed in via jtreg.;;;","2021-11-26 21:23;vaibhav;Even creation of overlapped bug :(.

Yes David, I agree with you. I propose this as fix though :

 * @requires vm.compiler2.enabled & vm.compMode != ""Xcomp""
+ * @requires vm.gc == ""null"" | vm.gc == ""Serial""

because test should run in case if explicit serialGC has been passed in the command line, if we will only consider null, the test will skip if SerialGC is passed explicitly (Below : Second case will be skip case).

Here are the checks  :

1. jdk-18/bin/java -jar jtreg.jar -vmoptions:""-XX:+UseG1GC""  ws/open/test/hotspot/jtreg/compiler/uncommontrap/Decompile.java 
Test results: no tests selected

2. jdk-18/bin/java -jar jtreg.jar -vmoptions:""-XX:+UseSerialGC"" ws/open/test/hotspot/jtreg/compiler/uncommontrap/Decompile.java 
Test results: passed: 1

3. jdk-18/bin/java -jar jtreg.jar  ws/open/test/hotspot/jtreg/compiler/uncommontrap/Decompile.java 
Test results: passed: 1
 ;;;","2021-11-26 23:42;simonis;Sorry for the hassle and thanks for creating the issue with detailed explanation of the failure and solution suggestions.

I think an even simpler solution would be to remove -XX:UseSerialGC from the tests. The two tests are actually C2 tests and should work with any GC. I only used SerialGC during development to make it easier to read the assembly output of the test.

I'll post a PR shortly.;;;","2021-11-28 23:52;chagedorn;ILW = Test failure when using additional GC flag VM option, two tests in tier3, no workaround = MMH = P3;;;","2021-11-29 04:29;roboduke;Changeset: 614c6e61
Author:    Volker Simonis <simonis@openjdk.org>
Date:      2021-11-29 12:29:06 +0000
URL:       https://git.openjdk.java.net/jdk/commit/614c6e61fa3a9f094a311b12e780491c611657e6
;;;","2021-11-29 12:35;dcubed;The fix for this bug is in jdk-18+26-1743.;;;",,,,,,,,,,,,
gc/epsilon/TestMemoryMXBeans.java failed with wrong initial heap size,JDK-8277866,5063550,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,shade,myano,myano,2021-11-26 03:37,2022-11-20 23:55,2023-10-01 09:57,2021-12-01 04:48,11,17,18,,,,,,,,,,,18,hotspot,,0,gc-epsilon,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,redhat-interest,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
test/hotspot/jtreg/gc/epsilon/TestMemoryMXBeans.java failed when running on linux.
According to the error message, it seems that the initial heap size is not set properly. JTR file shows -Xmx option appears twice in the second testcase.
Changing one of -Xmx option to -Xms option may make this test pass.

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
STATUS:Passed.
ACTUAL -
java.lang.IllegalStateException: Init heap size is wrong: 62087168 vs 268435456
        at gc.epsilon.TestMemoryMXBeans.testMemoryBean(TestMemoryMXBeans.java:76)
        at gc.epsilon.TestMemoryMXBeans.main(TestMemoryMXBeans.java:64)
        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
        at java.base/java.lang.reflect.Method.invoke(Method.java:577)
        at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
        at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.IllegalStateException: Init heap size is wrong: 62087168 vs 268435456
JavaTest Message: shutting down test

STATUS:Failed.`main' threw exception: java.lang.IllegalStateException: Init heap size is wrong: 62087168 vs 268435456",,,,,,,,,,JDK-8297321,JDK-8297249,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v777:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-12-01 04:48;roboduke;Changeset: 37ff7f3b
Author:    KIRIYAMA Takuya <kiriyama.takuya@fujitsu.com>
Committer: Aleksey Shipilev <shade@openjdk.org>
Date:      2021-12-01 12:47:26 +0000
URL:       https://git.openjdk.java.net/jdk/commit/37ff7f3b66eaa74d62d6a93f2f34ec744db21834
;;;","2022-11-17 04:33;shade;Fix Request (17u)

Improves test reliability. Applies cleanly. Testing passes.;;;","2022-11-17 04:45;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/892
Date: 2022-11-17 12:33:26 +0000;;;",,,,,,,,,,,,,,,,,,
G1: Change integer division to floating point division,JDK-8277865,5063549,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,lkorinth,lkorinth,lkorinth,2021-11-26 03:23,2021-12-01 17:45,2023-10-01 09:57,2021-11-29 01:08,18,,,,,,,,,,,,,18,hotspot,,0,gc-g1,,,,,,,,,,,,,,,,"In the class G1PreConcurrentStartTask::NoteStartOfMarkTask the method `worker_cost` returns a cost of type double, unfortunately the return value is calculated using an integer division: 

`return _claimer.n_regions() / regions_per_thread;`
  ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v76z:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-11-29 01:08;roboduke;Changeset: 9a3a9b13
Author:    Leo Korinth <lkorinth@openjdk.org>
Date:      2021-11-29 09:06:13 +0000
URL:       https://git.openjdk.java.net/jdk/commit/9a3a9b139178f2645d51a0f12d95a8b424cd5b9d
;;;",,,,,,,,,,,,,,,,,,,,
Compilation error thrown while doing a boxing conversion on selector expression,JDK-8277864,5063548,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,jlahoda,vkhatri,vkhatri,2021-11-26 03:11,2022-02-10 14:28,2023-10-01 09:57,2021-12-06 00:43,18,,,,,,,,,,,,,18,tools,,0,conformance,tck-red-18,,,,,,,,,,,,,,,"The below code should compile successfully. 

class PatternTest {
    public static void main(String[] args) {

        int selExpr = 1;
        int retval = switch (selExpr) {
            case Integer p -> 6;
            default -> 1;
        };
        System.out.println(retval);
    }
}

However, the compilation throws error with JDK 18 b25:

jdk-18/bin/javac --enable-preview -source 18 PatternTest.java
PatternTest.java:6: error: bad operand type int for unary operator '<*nullchk*>'
        int retval = switch (selExpr) {
                            ^
Note: PatternTest.java uses preview features of Java SE 18.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v76r:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,Verified,,"2021-12-06 00:43;roboduke;Changeset: 194cdf4e
Author:    Jan Lahoda <jlahoda@openjdk.org>
Date:      2021-12-06 08:42:26 +0000
URL:       https://git.openjdk.java.net/jdk/commit/194cdf4e28225133dcdf29cf1bf4e580f3fd9208
;;;",,,,,,,,,,,,,,,,,,,,
The upper bound of GCCardSizeInBytes should be limited to 512 for 32-bit platforms,JDK-8277854,5063533,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,jiefu,jiefu,jiefu,2021-11-25 22:25,2022-02-10 14:26,2023-10-01 09:57,2021-11-29 15:18,18,,,,,,,,,,,,,18,hotspot,,0,gc-g1,tencent-interest,,,,,,,,,,,,,,,"runtime/CommandLine/OptionsValidation/TestOptionsWithRanges.java crashes on linux/x86_32 when`-XX:GCCardSizeInBytes=1024`.

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/home/jdk/src/hotspot/share/gc/g1/g1BlockOffsetTable.cpp:186), pid=46911, tid=46931
#  guarantee(_bot->offset_array(start_card) == BOTConstants::N_words) failed: Wrong value in second card
#
# JRE version: OpenJDK Runtime Environment (18.0) (fastdebug build 18-internal+0-adhoc..jdk)
# Java VM: OpenJDK Server VM (fastdebug 18-internal+0-adhoc..jdk, mixed mode, sharing, tiered, g1 gc, linux-x86)
# Problematic frame:
# V  [libjvm.so+0xa3c817]  G1BlockOffsetTablePart::check_all_cards(unsigned int, unsigned int) const [clone .part.22]+0x37
#


---------------  T H R E A D  ---------------

Current thread (0xa32008d8):  WorkerThread ""GC Thread#1"" [stack: 0xa1b80000,0xa1c00000] [id=93442]

Stack: [0xa1b80000,0xa1c00000],  sp=0xa1bfefc0,  free space=507k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x78cd01]  G1BlockOffsetTablePart::check_all_cards(unsigned int, unsigned int) const+0x3f
V  [libjvm.so+0x78ccb6]  G1BlockOffsetTablePart::set_remainder_to_point_to_start_incl(unsigned int, unsigned int)+0x1a2
V  [libjvm.so+0x78cb0c]  G1BlockOffsetTablePart::set_remainder_to_point_to_start(HeapWordImpl**, HeapWordImpl**)+0xf2
V  [libjvm.so+0x78d1da]  G1BlockOffsetTablePart::alloc_block_work(HeapWordImpl***, HeapWordImpl**, HeapWordImpl**)+0x280
V  [libjvm.so+0x78dce4]  G1BlockOffsetTablePart::alloc_block(HeapWordImpl**, HeapWordImpl**)+0x22
V  [libjvm.so+0x8874a9]  HeapRegion::alloc_block_in_bot(HeapWordImpl**, HeapWordImpl**)+0x1b
V  [libjvm.so+0x7d3ee1]  G1FullGCCompactionPoint::forward(oopDesc*, unsigned int)+0x14f
V  [libjvm.so+0x7d92d0]  G1FullGCPrepareTask::G1PrepareCompactLiveClosure::apply(oopDesc*)+0x2c
V  [libjvm.so+0x7d9d97]  void HeapRegion::apply_to_marked_objects<G1FullGCPrepareTask::G1PrepareCompactLiveClosure>(G1CMBitMap*, G1FullGCPrepareTask::G1PrepareCompactLiveClosure*)+0x79
V  [libjvm.so+0x7d93d8]  G1FullGCPrepareTask::G1CalculatePointersClosure::prepare_for_compaction_work(G1FullGCCompactionPoint*, HeapRegion*)+0x74
V  [libjvm.so+0x7d945f]  G1FullGCPrepareTask::G1CalculatePointersClosure::prepare_for_compaction(HeapRegion*)+0x7d
V  [libjvm.so+0x7d8de4]  G1FullGCPrepareTask::G1CalculatePointersClosure::do_heap_region(HeapRegion*)+0x66
V  [libjvm.so+0x88eacc]  HeapRegionManager::par_iterate(HeapRegionClosure*, HeapRegionClaimer*, unsigned int) const+0xe0
V  [libjvm.so+0x7a47b8]  G1CollectedHeap::heap_region_par_iterate_from_start(HeapRegionClosure*, HeapRegionClaimer*) const+0x1c
V  [libjvm.so+0x7d90d8]  G1FullGCPrepareTask::work(unsigned int)+0x72
V  [libjvm.so+0xf3e5e4]  WorkerTaskDispatcher::worker_run_task()+0x6c
V  [libjvm.so+0xf3e9e5]  WorkerThread::run()+0x29
V  [libjvm.so+0xe579b8]  Thread::call_run()+0x17c
V  [libjvm.so+0xc311e6]  thread_native_entry(Thread*)+0x198
C  [libpthread.so.0+0x63bd]  start_thread+0xfd
```",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277891,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8272773,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v73f:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,Verified,,"2021-11-29 15:18;roboduke;Changeset: 3a4a94e5
Author:    Jie Fu <jiefu@openjdk.org>
Date:      2021-11-29 23:17:39 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3a4a94e5a830c4e88ac12619b868f3d89aa416a5
;;;",,,,,,,,,,,,,,,,,,,,
With Touch enabled devices scrollbar disappears and the table is scrolled to the beginning,JDK-8277853,5063270,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,aghaisas,webbuggrp,webbuggrp,2021-11-23 00:11,2023-02-03 00:35,2023-10-01 09:57,2022-01-27 05:54,jfx11,jfx15,jfx17,jfx18,,,,,,,,,,jfx19,javafx,,0,dcspn,reproducer-yes,webbug,,,,,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
Running on Windows 10, OpenJDK Runtime Environment AdoptOpenJDK (build 15.0.1+9)

A DESCRIPTION OF THE PROBLEM :
Using a touch-enabled device (or add the JVM argument -Dcom.sun.javafx.touch=true), the virtual flow scrolls all the way to the left when the scrollbar disappears. It allows scrolling to the right however it only stays for a second or two before the horizontal scrollbar gets reset to 0 (when the scrollbar disappears from inactivity, it gets reset to 0). From closer inspection of the code, it seems this is caused by the method updateHbar(), in .../modules/javafx.controls/src/main/java/javafx/scene/control/skin/VirtualFlow.java. The method checks if the hbar is visible and if it is not, it gets set to 0 

if (hbar.isVisible()) {
                clipView.setClipX(hbar.getValue());
            } else {
                // all cells are now less than the width of the flow,
                // so we should shift the hbar/clip such that
                // everything is visible in the viewport.
                clipView.setClipX(0);
                hbar.setValue(0);
            }



STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
With the parameter (-Dcom.sun.javafx.touch=true) as a JVM argument, run an application containing a table view, where the window is smaller than the table, thus causing a horizontal scrollbar, drag the scrollbar all the way to the right and release it and wait until the scrollbar disappears.

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
When the scrollbar disappears, the table should remain as it was in the position you scrolled to.
ACTUAL -
When the scrollbar disappears, the table is scrolled to the beginning (hbar value of 0).

---------- BEGIN SOURCE ----------
import javafx.application.Application;
import javafx.beans.property.SimpleStringProperty;
import javafx.beans.property.StringProperty;
import javafx.beans.value.ObservableValue;
import javafx.scene.Scene;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;
import javafx.util.Callback;
import java.util.ArrayList;

public class Main extends Application {

    int columns = 5;
    int numRows = 15;
    StackPane root = new StackPane();

    @Override
    public void start(Stage primaryStage) {
        Scene scene = new Scene(root, 200, 400);
        primaryStage.setTitle(""Hello World!"");
        primaryStage.setScene(scene);
        primaryStage.show();
        TableView table = getNewTestTableview();
        root.getChildren().add(table);
    }

    public TableView<StringProperty[]> getNewTestTableview() {
        TableView<StringProperty[]> tableView = new TableView<>();
        for (int i = 0; i < columns; i++) {
            final int colIndex = i;
            TableColumn<StringProperty[], String> col = new TableColumn<>();
            col.setCellValueFactory(new Callback<>() {
                @Override
                public ObservableValue<String> call(TableColumn.CellDataFeatures<StringProperty[], String> param) {
                    return param.getValue()[colIndex];
                }
            });
            tableView.getColumns().add(col);
        }

        ArrayList<StringProperty[]> rows = new ArrayList<>();

        for (int i = 0; i < numRows; i++) {
            StringProperty[] row = new StringProperty[columns];
            for (int j = 0; j < columns; j++) {
                row[j] = new SimpleStringProperty(""Row "" + i + "" Col "" + j);
            }
            rows.add(row);
        }
        tableView.getItems().addAll(rows);
        return tableView;
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        launch(args);
    }

}

---------- END SOURCE ----------

",,,,,,,,,,JDK-8301745,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-25 21:23;pnarayanaswa;Main.java;https://bugs.openjdk.org/secure/attachment/97190/Main.java",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v5gz:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@67282485,,,,,,,,,"2021-11-25 21:23;pnarayanaswa;Checked with attached testcase in Windows 10,
with argument, -Dcom.sun.javafx.touch=true, Issue is reproducible, scrollbar disappears, the table is scrolled to the beginning
Test result:
========
openjfx11: Fail
openjfx15: Fail
openjfx17: Fail
openjfx18ea7: Fail;;;","2022-01-12 16:20;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx/pull/688
Date: 2021-12-02 10:12:50 +0000;;;","2022-01-27 05:54;roboduke;Changeset: 78d92275
Author:    Meghan <Meghan@embrace.co.za>
Committer: Kevin Rushforth <kcr@openjdk.org>
Date:      2022-01-27 13:52:36 +0000
URL:       https://git.openjdk.java.net/jfx/commit/78d922750747517553b101f5ff4af5361b1e7959
;;;","2023-02-02 23:53;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jfx17u/pull/106
Date: 2023-02-03 07:48:19 +0000;;;",,,,,,,,,,,,,,,,,
Implement fast-path for ASCII-compatible CharsetEncoders on ppc64,JDK-8277846,5063518,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mdoerr,mdoerr,mdoerr,2021-11-25 07:06,2022-01-14 02:47,2023-10-01 09:57,2021-11-30 01:22,18,,,,,,,,,,,,,18,hotspot,,0,hs-comp-triaged,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-18,performance,,,,,,,,,,,,"JDK-8274242 propose to extend the x86 ISO-8859-1 encoding intrinsic to work also for ASCII-compatible encodings, which helps speeding up various CharsetEncoders. Implementing a similar intrinsic should be considered on ppc64 as well.",,,,,,,,,,JDK-8280005,,,,,,,,,,,,,,,JDK-8274242,,,,,,,,,,,,,,JDK-8274243,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ppc,,,,,,,,,,,,,,,,,,,"0|i2v703:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-30 01:22;roboduke;Changeset: a5f2a58b
Author:    Martin Doerr <mdoerr@openjdk.org>
Date:      2021-11-30 09:20:49 +0000
URL:       https://git.openjdk.java.net/jdk/commit/a5f2a58ba4ac25f4bd66f1f1f4c036a4f0024229
;;;","2022-01-12 02:53;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/81
Date: 2022-01-12 10:49:17 +0000;;;","2022-01-13 00:44;mdoerr;Fix Request (17u):
JDK-8274242 has been backported to 17.0.2. This is the PPC64 part which is still missing in 17u. It addresses an old performance regression explained in that issue. Tested in 18. Applies cleanly.;;;",,,,,,,,,,,,,,,,,,
[Vector API] scalar2vector generates incorrect type info for mask operations if Op_MaskAll is unavailable,JDK-8277843,5063513,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jiefu,jiefu,jiefu,2021-11-25 06:13,2022-01-25 03:06,2023-10-01 09:57,2021-11-30 00:34,18,,,,,,,,,,,,,18,hotspot,,0,c2,oracle-triage-11,oracle-triage-17,oracle-triage-18,tencent-interest,vectorapi,,,,,,,,,,,"This bug was first observed on x86_32/AVX512.
62 vector api tests fail because this bug.
```
==============================
Test summary
==============================
   TEST                                              TOTAL  PASS  FAIL ERROR
>> jtreg:test/jdk/jdk/incubator/vector                  74    12    62     0 <<
==============================
```

One kind of symptoms is crash in Matcher::pd_specialize_generic_vector_operand.
```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/home/jdk/src/hotspot/cpu/x86/x86.ad:2008), pid=83792, tid=83835
#  Error: ShouldNotReachHere()
#
# JRE version: OpenJDK Runtime Environment (18.0) (fastdebug build 18-internal+0-adhoc..jdk)
# Java VM: OpenJDK Server VM (fastdebug 18-internal+0-adhoc..jdk, mixed mode, sharing, g1 gc, linux-x86)
# Problematic frame:
# V  [libjvm.so+0x24cf40]  Matcher::pd_specialize_generic_vector_operand(MachOper*, unsigned int, bool)+0x110
#

Current CompileTask:
C2:   4515  392             jdk.internal.vm.vector.VectorSupport::convert (36 bytes)

Stack: [0xade3f000,0xadf00000],  sp=0xadefd3e0,  free space=760k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x171f44]  Matcher::pd_specialize_generic_vector_operand(MachOper*, unsigned int, bool)+0x2d4
V  [libjvm.so+0xb6b13f]  Matcher::specialize_vector_operand(MachNode*, unsigned int)+0x1f1
V  [libjvm.so+0xb6b201]  Matcher::specialize_mach_node(MachNode*)+0xb7
V  [libjvm.so+0xb6b318]  Matcher::specialize_generic_vector_operands()+0x104
V  [libjvm.so+0xb6adf5]  Matcher::do_postselect_cleanup()+0x1b
V  [libjvm.so+0xb62bc6]  Matcher::match()+0xfc0
V  [libjvm.so+0x6198ec]  Compile::Code_Gen()+0x92
V  [libjvm.so+0x611989]  Compile::Compile(ciEnv*, ciMethod*, int, Options, DirectiveSet*)+0x1325
V  [libjvm.so+0x516e35]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x139
V  [libjvm.so+0x62b959]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0x565
V  [libjvm.so+0x62a94d]  CompileBroker::compiler_thread_loop()+0x369
V  [libjvm.so+0x649bed]  CompilerThread::thread_entry(JavaThread*, JavaThread*)+0x63
V  [libjvm.so+0xe5c39b]  JavaThread::thread_main_inner()+0x15b
V  [libjvm.so+0xe5c236]  JavaThread::run()+0x16a
V  [libjvm.so+0xe5a03e]  Thread::call_run()+0x17c
V  [libjvm.so+0xc33766]  thread_native_entry(Thread*)+0x198
C  [libpthread.so.0+0x63bd]  start_thread+0xfd
```

The other kind of symptoms is `bad AD file` like the following.
```
STDOUT:
test Float512VectorLoadStoreTests.gather(float[i * 5], index[random]): success
test Float512VectorLoadStoreTests.gather(float[i + 1], index[random]): success
o312  VectorStoreMask  === _ o348 o208  [[o231 ]]  #vectorx[16]:{bool}

--N: o312  VectorStoreMask  === _ o348 o208  [[o231 ]]  #vectorx[16]:{bool}

   --N: o348  ReplicateI  === _ o369  [[o312 ]]  #vectormask[16]:{int}
   VEC  100  ReplI_M1_1
   LEGVEC  200  MoveVec2Leg

      --N: o369  ConI  === o0  [[o348 ]]  #int:-1
      IMMI  10  IMMI
      IMMI_M1  0  IMMI_M1
      IMMI8  5  IMMI8
      IMMI16  10  IMMI16
      RREGI  100  loadConI
      XREGI  100  loadConI
      EAXREGI  100  loadConI
      EBXREGI  100  loadConI
      ECXREGI  100  loadConI
      EDXREGI  100  loadConI
      EDIREGI  100  loadConI
      NAXREGI  100  loadConI
      NADXREGI  100  loadConI
      NCXREGI  100  loadConI
      ESIREGI  100  loadConI
      STACKSLOTI  200  storeSSI

   --N: o208  ConI  === o0  [[o371 o331 o136 o407 o324 o460 o290 o302 o312 o303 o521 o571 o398 o444 o512 o555 o603 o647  132  143 ]]  #int:4
   IMMI  10  IMMI
   IMMI8  5  IMMI8
   IMMU8  5  IMMU8
   IMMI16  10  IMMI16
   IMMU31  0  IMMU31
   IMMI_1_31  0  IMMI_1_31
   IMMI_4  0  IMMI_4
```",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8271515,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v6yz:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-26 01:40;chagedorn;ILW = C2 assertion failure in matching, only observed on x86_32 with vector tests and AVX512 (?), no workaround = HLH = P2;;;","2021-11-30 00:33;roboduke;Changeset: ceae380d
Author:    Jie Fu <jiefu@openjdk.org>
Date:      2021-11-30 08:33:00 +0000
URL:       https://git.openjdk.java.net/jdk/commit/ceae380d3a3fcef5678e3073e25eb37ca0a24c46
;;;",,,,,,,,,,,,,,,,,,,
jextract generated code should not depend on Java layouts,JDK-8277830,5063497,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mcimadamore,mcimadamore,mcimadamore,2021-11-25 01:49,2021-11-29 08:11,2023-10-01 09:57,2021-11-29 08:11,repo-panama,,,,,,,,,,,,,,tools,,0,foreign-extract,,,,,,,,,,,,,,,,"Jextract generates a bunch of layouts to deal with C types (C_INT, C_FLOAT, ...).

These layouts have the correct size and alignment, depending on the platform in which jextract is ran.

Unfortunately, the struct layouts and function descriptors emitted in jextract constant classes end up relying on Java layouts instead (JAVA_INT, JAVA_FLOAT, ...). 

Not only this is aesthetically unpleasing - but it is also a potential correctness issue, given that the alignment of Java types might differ from those of C types. For instance, in Java 18, JAVA_INT (and all other layouts) have alignment of 1-byte. But even in Java 17, JAVA_DOUBLE can have alignment of 4 on x86 platforms.

Probably the best way to resolve this is to change the generated code as follows:

1) move C_INT and friends to constant_0
2) have every layout and function descriptors in constant_0 refer to those (e.g. assume they are there)
3) redefine the ""typedefs"" in foo_h.java to point to the basic C layouts in constant_0



",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v6vf:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2251e2f8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Client tests fail on macos-Aarch64 host,JDK-8277816,5063483,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,psadhukhan,dholmes,dholmes,2021-11-24 22:46,2022-04-27 23:27,2023-10-01 09:57,2022-04-21 03:17,18,,,,,,,,,,,,,19,client-libs,,0,problemlist,sn_113,sn_114,sn_115,sn_116,test_sprint,tier4,,,,,,,,,,"A group of different client tests failed for varying reasons , many of which relate to colour:

javax/swing/text/html/StyleSheet/bug4936917.java
javax/swing/plaf/metal/MetalGradient/8163193/ButtonGradientTest.java
javax/swing/JInternalFrame/8160248/JInternalFrameDraggingTest.java
javax/swing/JInternalFrame/8069348/bug8069348.java
java/awt/Robot/HiDPIScreenCapture/ScreenCaptureTest.java
java/awt/Robot/CheckCommonColors/CheckCommonColors.java
java/awt/ColorClass/AlphaColorTest.java
java/awt/AlphaComposite/WindowAlphaCompositeTest.java

Possibly related to the cursor capture problem discussed in JDK-8252813.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8285433,JDK-8252813,JDK-8285361,,,,,,,,,,,,,,,,,,,,,,,"2022-04-11 23:03;psadhukhan;Screenshot 2022-04-12 at 11.17.18 AM.png;https://bugs.openjdk.org/secure/attachment/98533/Screenshot+2022-04-12+at+11.17.18+AM.png",,,,,,,,aarch64,,,,,,,,,,,,,os_x,,,,,,"0|i2v6sb:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5a9b3fd3,,,,,,,,,"2021-11-28 22:56;psadhukhan;It does not seem to be have same root cause of JDK-8252813 of visible cursor affecting robot getPixelColor.

From one of the test fixed in JDK-8252813 , the failure now is some color value is more than expected (precisely about 7 more)
-----------------------
1. javax/swing/JInternalFrame/8069348/bug8069348
----------System.out:(2/23)----------
d3d null
cx 917 cy 521
----------System.err:(13/754)----------
FRAME_COLOR Red: 255; Green: 200; Blue: 0
Pixel color Red: 255; Green: 207; Blue: 0
------------------------------

Another test 
2. javax/swing/JInternalFrame/8160248/JInternalFrameDraggingTest [again difference of 7 for color green)
i 1 rgbCW ffffcf00 testRGB ffffc800 rgbCH ffffcf00
 

There is another test of difference of 7 in color
3. java/awt/Robot/CheckCommonColors/CheckCommonColors 

Expected: java.awt.Color[r=192,g=192,b=192]
Actual: java.awt.Color[r=199,g=199,b=199]

4. test/jdk/javax/swing/text/html/StyleSheet/bug4936917.java
Expected color is 0xcccccc ie 204,204,204 but got 
color (24,68)=java.awt.Color[r=210,g=210,b=210] which is 0xd2
so difference of 6

5. test/jdk/java/awt/ColorClass/AlphaColorTest.java
Expected color red to be between 122-132 but got java.awt.Color[r=137,g=137,b=137] ie difference of 5

6. test/jdk/java/awt/Robot/HiDPIScreenCapture/ScreenCaptureTest.java
Got robot.getPixelColor java.awt.Color[r=255,g=207,b=0] Expected COLOR java.awt.Color[r=255,g=200,b=0] ie difference of 7

7. test/jdk/javax/swing/plaf/metal/MetalGradient/8163193/ButtonGradientTest.java
buttonColor java.awt.Color[r=243,g=246,b=251] gradientColor java.awt.Color[r=237,g=243,b=248] there is slight difference of color in range of 3-6
----------System.err:(12/710)----------
java.lang.RuntimeException: Button gradient is changed!

8. test/jdk/java/awt/AlphaComposite/WindowAlphaCompositeTest.java
got color java.awt.Color[r=139,g=0,b=0] expected java.awt.Color[r=128,g=0,b=0]
----------System.err:(12/957)----------
java.lang.RuntimeException: Test failed. Incorrect color java.awt.Color[r=139,g=0,b=0] at (30,90) with composite rule=6 alpha=0.5;;;","2022-02-25 04:09;psadhukhan;[~tr] has tested these 8 tests in his osx 12.2.1 system where these passed

[~tbell] [~prr] can we update our headful 12.2 system to 12.2.1? seems to be some form of configuration causing it to fail since 12.0.1 (probably after upgrade) is passing now as I see and mentioned above;;;","2022-04-11 23:09;psadhukhan;[~tbell] 
It seems it's a COlor Profile setting issue. Attached is the screenshot of what it should be
Can you check in ""ColorSync Utility"" -> Devices -> Displays -> Current Profile should be pointing to sRGB IEC61966-2.1 by selecting /System/Library/ColorSYnc/Profiles/sRGB Profile.icc in ""Open""
instead of ""COlor LCD...icc"" as set in Factory Profile 

DO you see COlor LCD.icc in Current Profile? If yes, then that's the issue

Could you please configure and let me know if you can run jdk_desktop test fine or atleast this 8 tests.

[~prr] can you please coordinate as I cannot configure these systems and in case Tim overlooks this comment... 

;;;","2022-04-13 00:41;psadhukhan;https://mach5.us.oracle.com/mdash/jobs/prsadhuk-jdk-20220413-0430-31160573;;;","2022-04-13 00:44;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8216
Date: 2022-04-13 07:40:50 +0000;;;","2022-04-21 03:17;dukebot;Changeset: 994a439e
Author:    Prasanta Sadhukhan <psadhukhan@openjdk.org>
Date:      2022-04-21 10:15:51 +0000
URL:       https://git.openjdk.java.net/jdk/commit/994a439e09c48100fc56b4eeccd85da1d1d2b4c3
;;;",,,,,,,,,,,,,,,
Fix mistakes in legal header backports,JDK-8277815,5063482,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,clanger,clanger,clanger,2021-11-24 22:27,2021-11-30 09:26,2023-10-01 09:57,2021-11-25 04:54,11.0.14,,,,,,,,,,,,,11.0.14,core-libs,,0,jdk11u-fix-request,jdk11u-fix-yes,,,,,,,,,,,,,,,"The backports of JDK-8213263 and JDK-8213328 to OpenJDK 11u have introduced two erroneous changes, caused by a bug in the git on Windows toolchain which also weren't caught during the review cycle. These need to be fixed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8273630,,,,,,,,,,,,,,,JDK-8273765,,,,,,,,,,,,,,,,,,,,,,,,,,,,b01,11.0.14,,,,,,,,"0|i2v6s3:",9223372036854775807,b05,,,,,,,,,,,,,"2021-11-25 04:54;roboduke;Changeset: 48b5a6ab
Author:    Christoph Langer <clanger@openjdk.org>
Date:      2021-11-25 12:53:55 +0000
URL:       https://git.openjdk.java.net/jdk11u-dev/commit/48b5a6ab1da40553ea133e274dc1af3f81d55137
;;;","2021-11-30 09:23;roboduke;Changeset: 48b5a6ab
Author:    Christoph Langer <clanger@openjdk.org>
Date:      2021-11-25 12:53:55 +0000
URL:       https://git.openjdk.java.net/jdk11u/commit/48b5a6ab1da40553ea133e274dc1af3f81d55137
;;;",,,,,,,,,,,,,,,,,,,
4 tools/jar failures per platform after JDK-8272728,JDK-8277806,5063466,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,lancea,dcubed,dcubed,2021-11-24 10:26,2022-01-21 10:13,2023-10-01 09:57,2021-11-24 12:43,18,,,,,,,,,,,,,18,tools,,0,tier2,,,,,,,,,,,,,,,,"The following tests failed in the JDK18 CI:

tools/jar/multiRelease/Basic1.java
tools/jar/multiRelease/Basic.java
tools/jar/multiRelease/ApiValidatorTest.java
tools/jar/modularJar/Basic.java

Here's a snippet from the tools/jar/multiRelease/Basic1.java log file:

----------System.out:(100/6052)----------
config Basic1.setup(): failure
java.lang.RuntimeException: error: invalid flag: -J-Xmx768m
Usage: javac <options> <source files>
use --help for a list of possible options

	at MRTestBase.javac(MRTestBase.java:122)
	at Basic1.setup(Basic1.java:55)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)
	at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:61)
	at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:366)
	at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:320)
	at org.testng.TestRunner.invokeTestConfigurations(TestRunner.java:617)
	at org.testng.TestRunner.beforeRun(TestRunner.java:607)
	at org.testng.TestRunner.run(TestRunner.java:578)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1218)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1140)
	at org.testng.TestNG.runSuites(TestNG.java:1069)
	at org.testng.TestNG.run(TestNG.java:1037)
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:94)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
	at java.base/java.lang.Thread.run(Thread.java:833)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8272728,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v6oj:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,Verified,,"2021-11-24 11:05;alanb;Seem to be test issues. The tests invoke javac in-process via the ToolProvider API. modularJar/Basic.java is prepending the options in test.tool.vm.opts, the options are using test infrastructure Utils.getForwardVmOptions to get the options to prepend. I think javac was silently ignoring these (-J) options, thus exposed by the change to javac.;;;","2021-11-24 12:43;roboduke;Changeset: b5841ba3
Author:    Lance Andersen <lancea@openjdk.org>
Date:      2021-11-24 20:42:29 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b5841ba3f3d079f3cfee532a4e7f23b00f5cd063
;;;","2021-11-24 13:21;dcubed;The fix is integrated in jdk-18+25-1713.;;;",,,,,,,,,,,,,,,,,,
"vmTestbase/nsk/jdi/TypeComponent/isSynthetic/issynthetic001 fails with ""Synthetic fields not found""",JDK-8277803,5063463,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,cushon,dcubed,dcubed,2021-11-24 10:03,2021-12-07 07:53,2023-10-01 09:57,2021-11-29 17:36,18,,,,,,,,,,,,,18,core-svc,,0,tier5,tier6,tier7,tier8,,,,,,,,,,,,,"The following test failed in an Adhoc test job:

vmTestbase/nsk/jdi/TypeComponent/isSynthetic/issynthetic001/TestDescription.java

Here's a snippet from the log file:

debuger> 84 field EV0 with synthetic value false read without UnsupportedOperationException.
debuger> 85 field EV1 with synthetic value false read without UnsupportedOperationException.
debuger> 86 field EV2 with synthetic value false read without UnsupportedOperationException.
# ERROR: debuger FAILURE 4> Synthetic fields not found.
The following stacktrace is for failure analysis.
nsk.share.TestFailure: debuger FAILURE 4> Synthetic fields not found.
	at nsk.share.Log.logExceptionForFailureAnalysis(Log.java:432)
	at nsk.share.Log.complain(Log.java:403)
	at nsk.jdi.TypeComponent.isSynthetic.issynthetic001.run(issynthetic001.java:225)
	at nsk.jdi.TypeComponent.isSynthetic.issynthetic001.main(issynthetic001.java:80)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)
debugee.stderr> DEBUGEE> ""quit"" signal recieved.
debugee.stderr> DEBUGEE> completed succesfully.
# ERROR: debuger FAILURE> TEST FAILED


#>  
#>  SUMMARY: Following errors occured
#>      during test execution:
#>  
# ERROR: debuger FAILURE 4> Synthetic fields not found.
# ERROR: debuger FAILURE> TEST FAILED
----------System.err:(0/0)----------
----------rerun:(39/7385)*----------",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8271623,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v6nv:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3397f701,,,,,,,,,"2021-11-24 13:05;dcubed;I backed out the following fix out of my local repo:

JDK-8271623 Omit enclosing instance fields from inner classes that don't use it

and the test failure is no longer reproducible.;;;","2021-11-24 13:50;dholmes;Should be a trivial test fix to have NestedClass actually access a field in ClassToCheck so that this$0 is created.;;;","2021-11-29 12:04;dcubed;Spotted in the jdk-18+25-1710-tier5 CI job set:

vmTestbase/nsk/jdi/TypeComponent/isSynthetic/issynthetic001/TestDescription.java

https://mach5.us.oracle.com/mdash/jobs/mach5-one-jdk-18+25-1710-tier5-20211127-1959-26651562/results?search=status%3Afailed%20AND%20-state%3Ainvalid%20AND%20name%3AvmTestbase%2Fnsk%2Fjdi%2FTypeComponent%2FisSynthetic%2Fissynthetic001%2FTestDescription.java

8 more sightings.;;;","2021-11-29 13:07;dcubed;This failure appears to be caused by:

JDK-8271623 Omit enclosing instance fields from inner classes that don't use it;;;","2021-11-29 17:36;roboduke;Changeset: 27299eaa
Author:    Liam Miller-Cushon <cushon@openjdk.org>
Date:      2021-11-30 01:34:52 +0000
URL:       https://git.openjdk.java.net/jdk/commit/27299eaa98fd2d608a6cecfbf2b1a2a177bd5e9a
;;;",,,,,,,,,,,,,,,,
LDAP connection timeout not honoured under contention,JDK-8277795,5063451,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,robm,shadowbug,shadowbug,2021-11-24 07:14,2022-11-25 02:13,2023-10-01 09:57,2022-02-04 05:08,8,,,,,,,,,,,,,19,core-libs,,0,bugdb_32022591,CPU22_04-critical-approved,CPU22_04-critical-SQE-OK,Internal,jdk11u-critical-request,jdk11u-critical-yes,jdk13u-fix-request,jdk13u-fix-yes,jdk15u-fix-request,jdk15u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jdk18u-fix-request,jdk18u-fix-SQE-OK,jdk18u-fix-yes,,"In a situation where:

a) the ldap context url has a primary and a fallback server
b) the primary server is unreachable
c) a connection timeout is set
d) multiple threads are attempting to make connections to the ldap server
e) connection pooling is in use

each of the threads will stack up on the connection pool waiting for every earlier thread to attempt to connect to the dead ldap server before even starting the counter for the connection timeout. E.g. the 10th thread would be stuck for 90 seconds prior to attempting to connect and would then wait the entire 10 seconds of the timeout value before giving up.",,,,,,,,,,JDK-8281889,JDK-8281996,JDK-8281411,JDK-8286237,JDK-8282752,JDK-8281496,JDK-8281399,JDK-8281933,JDK-8282497,JDK-8281441,JDK-8281930,JDK-8281408,JDK-8281848,JDK-8290304,JDK-8290302,,JDK-8277954,,JDK-8280829,,,,,,,,,,,,,,,,,,,JDK-8277781,,,,,,,,,,,,,,,,,,,,,,JDK-8281695,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v6l7:",9223372036854775807,b09,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@226ed983,,,,,,,Verified,,"2022-02-04 05:08;roboduke;Changeset: 3d926dd6
Author:    Rob McKenna <robm@openjdk.org>
Date:      2022-02-04 13:07:03 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3d926dd66ef6551e91a4ebbbc59dcff58f5ede5a
;;;","2022-02-07 11:53;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18u/pull/20
Date: 2022-02-07 19:47:41 +0000;;;","2022-02-22 04:34;ostuart;Issue resolved in the April CPU,  removing the BPR request.;;;","2022-02-28 01:24;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/180
Date: 2022-02-28 09:18:07 +0000;;;","2022-02-28 02:48;goetz;Fix request [17u]

I backport this for parity with 17.0.3-oracle.
Original CSR covers 17.
Clean backport.
Test passes.;;;","2022-03-04 05:24;goetz;Critical fix request [11u]

I backport this for parity with 11.0.15-oracle.
As it is P3, I think it should still make 11.0.15.
Test passes and fails without the fix.
SAP nighlty testing passed.;;;","2022-03-04 05:32;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u/pull/29
Date: 2022-03-04 13:23:20 +0000;;;","2022-07-14 02:45;yan;Fix request 13u, 15u

I'm backporting this fix for parity with major releases.
Not clean patch because of absence of ""8263855: Use the blessed modifier order"", so slightly different context. NB: the code of this fix also does use not ""blessed order"":-).
All relevant tests do pass.;;;","2022-07-14 02:54;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk13u-dev/pull/368
Date: 2022-07-14 09:47:31 +0000;;;","2022-07-14 02:57;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk15u-dev/pull/231
Date: 2022-07-14 09:49:32 +0000;;;",,,,,,,,,,,
ListView scrollTo jumps to wrong location when CellHeight is changed,JDK-8277785,5063441,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jvos,fkirmaier,fkirmaier,2021-11-24 05:21,2022-10-23 09:56,2023-10-01 09:57,2022-07-14 02:46,jfx17,,,,,,,,,,,,,jfx19,javafx,,0,regression,,,,,,,,,,,,,,,,"In some situations, the ScrollTo methods land in the wrong place.
Sometimes it ""overjumps"" the last element.
Sometimes it doesn't scroll to the bottom.

We've provided a test class, which shows the problem, and a small gif, which shows it in video form.

This worked with JavaFX16, but does not work with JavaFX17, and is therefore probably related to the rewrite of VirtualFlow

It might be the same bug as the following: https://bugs.openjdk.java.net/browse/JDK-8276553

Thanks to Sedov Eduard for working on this bug.","JavaFX17, OS independent ",,,,,,,,,JDK-8295818,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276553,JDK-8290348,,,,,,,,,,,,,,JDK-8089589,,,,,,,,,,"2022-01-13 01:47;fkirmaier;ListViewScrollToBug-1.java;https://bugs.openjdk.org/secure/attachment/97596/ListViewScrollToBug-1.java","2022-04-12 04:45;fkirmaier;ListViewScrollToBug-2.java;https://bugs.openjdk.org/secure/attachment/98544/ListViewScrollToBug-2.java","2022-04-12 05:27;fkirmaier;ListViewScrollToBug-3.java;https://bugs.openjdk.org/secure/attachment/98549/ListViewScrollToBug-3.java","2021-11-24 05:27;fkirmaier;ListViewScrollToBug.gif;https://bugs.openjdk.org/secure/attachment/97181/ListViewScrollToBug.gif","2021-11-24 23:56;fkirmaier;ListViewScrollToBug.java;https://bugs.openjdk.org/secure/attachment/97184/ListViewScrollToBug.java","2022-05-16 04:02;fkirmaier;ListViewScrollToUnitTest-2.java;https://bugs.openjdk.org/secure/attachment/98947/ListViewScrollToUnitTest-2.java","2022-04-25 01:48;fkirmaier;ListViewScrollToUnitTest.java;https://bugs.openjdk.org/secure/attachment/98693/ListViewScrollToUnitTest.java",,,,,,,,,,,,,jfx17,,,,,,,,"0|i2v6iz:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@67282485,,,,,,,,,"2021-11-24 05:27;fkirmaier;Attachment <ListViewScrollToBug (2).java> anti-virus scan found a possible virus. The system has removed attachment. Please check the file before attempting to upload it again;;;","2021-11-24 10:59;kcr;If this turns out to be the same bug as JDK-8276553 then it can be closed as a duplicate of that.;;;","2021-11-24 23:58;fkirmaier;Hm, uploading the TestClass a second time seemed to work.;;;","2021-12-03 10:32;kcr;I tested this with the proposed fix for JDK-8276553, and the problem still occurs. So this looks like an independent bug.;;;","2021-12-22 07:38;jvos;I can reproduce the issue, but the test violates the ListCell.updateItem contract:

```     * <p>Note in this code sample two important points:
     * <ol>
     *     <li>We call the super.updateItem(T, boolean) method. If this is not
     *     done, the item and empty properties are not correctly set, and you are
     *     likely to end up with graphical issues.</li>
     *     <li>We test for the <code>empty</code> condition, and if true, we
     *     set the text and graphic properties to null. If we do not do this,
     *     it is almost guaranteed that end users will see graphical artifacts
     *     in cells unexpectedly.</li>
     * </ol>
```

The height of the cells is set to 30 when item is null, and therefore the estimated size of the viewport is wrong. 

When I first do the super.updateItem, and then set the size only when item != null, it works as I would expect.;;;","2022-01-04 00:59;fkirmaier;Hi Johan,

Neither Eduard, nor me can confirm, that it works with your suggested changes.
With the changes you've described, the updateItem method looks like the following:

@Override
protected void updateItem(Integer item, boolean empty) {
    super.updateItem(item, empty);
    if (item != null) {
        int height = item;
        setPrefHeight(height);
        setText(""#"" + getIndex() + ""  h="" + item);
    } else {
        // Otherwise, the effect is less visible
       // setPrefHeight(30);
        setText(null);
    }
}

In this case, the same error still happens.
Can you post the version of the code which worked for you?;;;","2022-01-05 05:09;jvos;The difficulty is that it is not trivial to determine if something is wrong or correct based on a visual observation.
We need more tests that check numbers in this area. It would help if you can create a unit test. I'll work on those too.;;;","2022-01-05 08:53;jvos;Related to this issue, I see that there is an issue when a ListView is reused (or when its cells are reused), in which case the estimated size isn't updated when the cells are reused but with a different height/width.
This leads to issues when running 2 configurations, and that would also explain the issues you see here. I will create a PR for this.;;;","2022-01-13 01:48;fkirmaier;I've added a new button to the test program. The 5th button now literally jumps into the ""Nothingness"".;;;","2022-04-12 04:47;fkirmaier;I've added another testbutton to the testclass.
When we jump to somewhere in the middle, the selected index is not in the top, but somewhere else.
Depending on the application, this can be quite a bit.
In the affected application - it sometimes still jumps to places closer to a wrong cell compared to the right cell.;;;","2022-04-12 05:28;fkirmaier;After some more investigating, we found that it also regulary doesn't work when scrolling to the bottom. I've added another button to show this.;;;","2022-04-25 02:02;fkirmaier;I've added a unit test to the ticket - more discussion can be found in the PR.;;;","2022-05-18 05:09;fkirmaier;I've updated the provided unit-test, to cover more important cases, which were previously missed.

This is the name of the file: ListViewScrollToUnitTest-2.java;;;","2022-07-04 06:59;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jfx/pull/808
Date: 2022-07-04 13:52:40 +0000;;;","2022-07-14 02:46;dukebot;Changeset: b8302f64
Author:    Johan Vos <jvos@openjdk.org>
Date:      2022-07-14 09:41:55 +0000
URL:       https://git.openjdk.org/jfx/commit/b8302f64f49e746a8645020cb778a4f3e4f4b893
;;;","2022-10-20 10:44;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jfx17u/pull/86
Date: 2022-10-20 17:33:46 +0000;;;",,,,,
[Vector API] assert(r->is_XMMRegister()) failed: must be in x86_32.ad,JDK-8277777,5063432,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jiefu,jiefu,jiefu,2021-11-24 03:50,2022-01-03 23:01,2023-10-01 09:57,2021-11-30 23:21,17,18,,,,,,,,,,,,18,hotspot,,0,c2,jdk17u-fix-request,jdk17u-fix-SQE-ok-next,jdk17u-fix-yes,oraclejdk-na,oracle-triage-11,oracle-triage-18,tencent-interest,vectorapi,,,,,,,,"The following vector api tests fail on x86_32/AVX512.
```
jdk/incubator/vector/Byte64VectorLoadStoreTests.java
jdk/incubator/vector/Byte256VectorLoadStoreTests.java
jdk/incubator/vector/Byte128VectorLoadStoreTests.java
jdk/incubator/vector/ByteMaxVectorLoadStoreTests.java
jdk/incubator/vector/Double256VectorTests.java
jdk/incubator/vector/Double512VectorTests.java
jdk/incubator/vector/DoubleMaxVectorTests.java
jdk/incubator/vector/Float512VectorTests.java
jdk/incubator/vector/Float256VectorTests.java
jdk/incubator/vector/FloatMaxVectorTests.java
jdk/incubator/vector/Float128VectorTests.java
jdk/incubator/vector/Short128VectorLoadStoreTests.java
jdk/incubator/vector/Short256VectorLoadStoreTests.java
jdk/incubator/vector/Short64VectorLoadStoreTests.java
jdk/incubator/vector/ShortMaxVectorLoadStoreTests.java
```

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/home/jdk/src/hotspot/cpu/x86/x86_32.ad:758), pid=71228, tid=71288
#  assert(r->is_XMMRegister()) failed: must be
#
# JRE version: OpenJDK Runtime Environment (18.0) (fastdebug build 18-internal+0-adhoc..jdk)
# Java VM: OpenJDK Server VM (fastdebug 18-internal+0-adhoc..jdk, mixed mode, sharing, g1 gc, linux-x86)
# Problematic frame:
# V  [libjvm.so+0x245ac3]  rc_class(int)+0xd3
#
```",,,,,,,,,,JDK-8279293,JDK-8279436,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8262355,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86,,,,,,,,,,,,,generic,,,,,,"0|i2v6gz:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-24 13:03;dlong;ILW = assert with vector tests on x86 = MMH = P3;;;","2021-11-30 23:21;roboduke;Changeset: 349328c9
Author:    Jie Fu <jiefu@openjdk.org>
Date:      2021-12-01 07:19:44 +0000
URL:       https://git.openjdk.java.net/jdk/commit/349328c929ccad242a344da69585404e4fea087f
;;;","2021-12-07 06:57;jiefu;Fix request for jdk17u

I'd like to backport this fix to jdk17u.
Changes only made in x86_32.ad, no risk, applied cleanly.
Thanks.;;;","2021-12-23 03:10;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/35
Date: 2021-12-23 11:04:10 +0000
;;;",,,,,,,,,,,,,,,,,
Fixup bugids in RemoveDropTargetCrashTest.java - add 4357905,JDK-8277775,5063430,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,rkannathpari,aivanov,aivanov,2021-11-24 03:46,2023-05-07 21:02,2023-10-01 09:57,2022-11-04 05:37,10,,,,,,,,,,,,,20,client-libs,,0,cleanup,cssn22_10_01,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,,,,,,,,,,"The RemoveDropTargetCrashTest.java test was moved from closed to open. When it was done under JDK-8136999, the bugids from the original test were not included: html file referenced 4357905 and java file had 4393148.

The following change for JDK-8186263 added 4393148 to the list of bugids but 4357905 is still missing.",,,,,,,,,,JDK-8304486,JDK-8304495,JDK-8306499,JDK-8306492,JDK-8304628,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8136999,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v6gj:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@568a5b31,,,,,,,,,"2022-11-03 05:14;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/10967
Date: 2022-11-03 11:40:33 +0000;;;","2022-11-04 05:37;dukebot;Changeset: 22347e46
Author:    Renjith <renjith.kannath.pariyangad@oracle.com>
Committer: Alexey Ivanov <aivanov@openjdk.org>
Date:      2022-11-04 12:35:39 +0000
URL:       https://git.openjdk.org/jdk/commit/22347e46f7e66a864ea987fa084c44792cae2e6a
;;;","2023-04-19 07:04;goetz;Fix request [11u,17u]

I backport this for parity with 11.0.20/17.0.8-oracle.
No risk, only a test change.
Clean backport.;;;","2023-04-19 07:14;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1279
Date: 2023-04-19 14:04:55 +0000;;;","2023-04-19 07:18;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1838
Date: 2023-04-19 14:08:37 +0000;;;",,,,,,,,,,,,,,,,
DatePicker listener might not be added when using second constructor,JDK-8277756,5063411,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mhanl,mhanl,mhanl,2021-11-24 01:05,2022-10-14 05:14,2023-10-01 09:57,2022-05-31 23:17,8,jfx11,jfx17,,,,,,,,,,,jfx19,javafx,,0,DatePicker,,,,,,,,,,,,,,,,"The DatePicker has two constructors.
One default constructor with no parameters and a second with 'LocalDate' as parameter.
The default constructor uses 'this(null)' and adds two additional listener after.

If the second constructor with 'LocalDate' is used those two listener won't be added.

Fix would be the same as in other controls:
The listener should be added at the second constructor where the first constructor is also referring to.

### SOURCE ###
   public DatePicker() {
        this(null);
        // Here the constructor will add two additional listeners
        valueProperty().addListener(observable -> {
              [...]
        });
        chronologyProperty().addListener(observable -> {
               [...]
            }
        });
    }

    public DatePicker(LocalDate localDate) {
        setValue(localDate);
        getStyleClass().add(DEFAULT_STYLE_CLASS);
        setAccessibleRole(AccessibleRole.DATE_PICKER);
        setEditable(true);
    }
### SOURCE END ###",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8295339,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v6cb:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@67282485,,,,,,,,,"2022-05-24 14:40;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx/pull/801
Date: 2022-05-24 21:35:15 +0000;;;","2022-05-31 23:17;dukebot;Changeset: da5bd371
Author:    Marius Hanl <mhanl@openjdk.org>
Committer: Ajit Ghaisas <aghaisas@openjdk.org>
Date:      2022-06-01 06:15:05 +0000
URL:       https://git.openjdk.java.net/jfx/commit/da5bd3716441f201691377c52abba59ce03bc322
;;;",,,,,,,,,,,,,,,,,,,
"Long*VectorTests.java fail with ""bad AD file"" on x86_32 after JDK-8276162",JDK-8277753,5063408,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jiefu,jiefu,jiefu,2021-11-24 00:41,2021-12-13 03:02,2023-10-01 09:57,2021-12-02 07:16,18,,,,,,,,,,,,,18,hotspot,,0,oracle-triage-11,oracle-triage-17,oracle-triage-18,tencent-interest,,,,,,,,,,,,,"The following tests fail with ""bad AD file"" on x86_32
```
jdk/incubator/vector/Long128VectorTests.java
jdk/incubator/vector/Long256VectorTests.java
jdk/incubator/vector/Long512VectorTests.java
jdk/incubator/vector/LongMaxVectorTests.java
jdk/incubator/vector/Long64VectorTests.java
```

```
test Long256VectorTests.UNSIGNED_GELong256VectorTests(long[i], long[i]): success
o582  CMoveP  === o525 o1010 o1011  [[o99 o99 o100  519  519 ]]  #java/lang/Boolean:NotNull:exact *  Oop:java/lang/Boolean:NotNull:exact *

--N: o582  CMoveP  === o525 o1010 o1011  [[o99 o99 o100  519  519 ]]  #java/lang/Boolean:NotNull:exact *  Oop:java/lang/Boolean:NotNull:exact *

   --N: o1010  Binary  === _ o541 o557  [[o582 ]]
   _Binary_cmpOpU_flagsReg_ulong_LTGE  300  _Binary_cmpOpU_flagsReg_ulong_LTGE
   _Binary_cmpOpU_flagsReg_ulong_EQNE  500  _Binary_cmpOpU_flagsReg_ulong_EQNE
   _Binary_cmpOpU_commute_flagsReg_ulong_LEGT  300  _Binary_cmpOpU_commute_flagsReg_ulong_LEGT

      --N: o541  Bool  === _ o557  [[o559 o1010 ]] [lt]
      CMPOP  0  CMPOP
      CMPOPU  0  CMPOPU
      CMPOPUCF  0  CMPOPUCF
      CMPOP_FCMOV  0  CMPOP_FCMOV
      CMPOP_COMMUTE  0  CMPOP_COMMUTE
      CMPOPU_COMMUTE  0  CMPOPU_COMMUTE
      CMPOP_VCMPPD  0  CMPOP_VCMPPD

      --N: o557  CmpUL  === _ o196 o562  [[o541 o559 o1010 ]]
      FLAGSREG_ULONG_LTGE  300  cmpUL_reg_flags_LTGE
      FLAGSREG_ULONG_EQNE  500  cmpUL_reg_flags_EQNE
      FLAGSREG_ULONG_LEGT  300  cmpUL_reg_flags_LEGT

         --N: o196  LoadL  === o318 o67 o319  |o138  [[o557 o98 ]]  @long[int:>=0]:exact+any *, idx=8; #long
         EREGL  0  EREGL
         EADXREGL  0  EADXREGL
         EBCXREGL  0  EBCXREGL
         EADXREGL_LOW_ONLY  0  EADXREGL_LOW_ONLY
         STACKSLOTL  200  storeSSL

         --N: o562  LoadL  === o563 o67 o566  |o139  [[o557 ]]  @long[int:>=0]:exact+any *, idx=8; #long
         EREGL  0  EREGL
         EADXREGL  0  EADXREGL
         EBCXREGL  0  EBCXREGL
         EADXREGL_LOW_ONLY  0  EADXREGL_LOW_ONLY
         STACKSLOTL  200  storeSSL

   --N: o1011  Binary  === _ o323 o322  [[o582 ]]
   _Binary_eRegP_eRegP  200  _Binary_eRegP_eRegP
   _Binary_eAXRegP_eRegP  200  _Binary_eAXRegP_eRegP
   _Binary_eAXRegP_eCXRegP  200  _Binary_eAXRegP_eCXRegP
   _Binary_eDIRegP_eSIRegP  200  _Binary_eDIRegP_eSIRegP

      --N: o323  ConP  === o0  [[o1011 o1009 ]]  #java/lang/Boolean:exact *  Oop:java/lang/Boolean:exact *
      IMMP  10  IMMP
      ANYREGP  100  loadConP
      EREGP  100  loadConP
      RREGP  100  loadConP
      EREGP_NO_EBP  200  loadConP
      NAXREGP  100  loadConP
      NABXREGP  100  loadConP
      PREGP  100  loadConP
      EAXREGP  100  loadConP
      EBXREGP  100  loadConP
      ECXREGP  100  loadConP
      EDXREGP  100  loadConP
      ESIREGP  100  loadConP
      EDIREGP  100  loadConP
      DIRECT  10  DIRECT
      INDIRECT  100  loadConP
      LOAD_LONG_REGP  200  loadConP
      LOAD_LONG_INDIRECT  200  loadConP
      STACKSLOTP  200  storeSSP
      LOAD_LONG_MEMORY  200  LOAD_LONG_INDIRECT
      MEMORY  10  DIRECT
      LONG_MEMORY  10  DIRECT

      --N: o322  ConP  === o0  [[o1009 o1011 ]]  #java/lang/Boolean:exact *  Oop:java/lang/Boolean:exact *
      IMMP  10  IMMP
      ANYREGP  100  loadConP
      EREGP  100  loadConP
      RREGP  100  loadConP
      EREGP_NO_EBP  200  loadConP
      NAXREGP  100  loadConP
      NABXREGP  100  loadConP
      PREGP  100  loadConP
      EAXREGP  100  loadConP
      EBXREGP  100  loadConP
      ECXREGP  100  loadConP
      EDXREGP  100  loadConP
      ESIREGP  100  loadConP
      EDIREGP  100  loadConP
      DIRECT  10  DIRECT
      INDIRECT  100  loadConP
      LOAD_LONG_REGP  200  loadConP
      LOAD_LONG_INDIRECT  200  loadConP
      STACKSLOTP  200  storeSSP
      LOAD_LONG_MEMORY  200  LOAD_LONG_INDIRECT
      MEMORY  10  DIRECT
      LONG_MEMORY  10  DIRECT
```
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276162,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v6bn:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-24 13:04;dlong;ILW = compile failed on vector tests on x86 = MMH = P3;;;","2021-12-02 07:16;roboduke;Changeset: 65960f71
Author:    Jie Fu <jiefu@openjdk.org>
Date:      2021-12-02 15:15:06 +0000
URL:       https://git.openjdk.java.net/jdk/commit/65960f712ed6d4c4478d74f0842ce78d500d4229
;;;",,,,,,,,,,,,,,,,,,,
WebView: Update Public Suffix List to 3c213aa,JDK-8277734,5063381,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,hmeda,kcr,kcr,2021-11-23 16:50,2023-05-02 10:29,2023-10-01 09:57,2022-03-08 10:16,8-pool,,,,,,,,,,,,,8u341,javafx,,0,11-na,3rdparty,sn_113,,,,,,,,,,,,,,"The public suffix has been updated to version 3c213aa in JDK 19. See JDK-8255266.

After this is integrated, we need to copy the public suffix file from a promoted build of JDK 19, along with the updated public_suffix.md file (if there is an update) to FX 8.

Note that for JavaFX 11 and later, we use the public suffix list directly from the JDK, so this bug is only for FX in JDK 8.",,,,,,,,,,,,,,,,,,,,,,,,,JDK-8255266,JDK-8215088,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8306918,,,,,,,,,,,,,,,JDK-8254049,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v65n:",9223372036854775807,b01,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5a8b92bd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[TESTBUG] Microbenchmark ThreadOnSpinWaitProducerConsumer.java hangs,JDK-8277659,5063303,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,smonteith,smonteith,smonteith,2021-11-23 09:10,2021-12-01 17:44,2023-10-01 09:57,2021-11-26 01:05,,,,,,,,,,,,,,18,hotspot,,0,,,,,,,,,,,,,,,,,"The microbenchmark ""test/micro/org/openjdk/bench/java/lang/ThreadOnSpinWaitProducerConsumer.java"" runs with a producer and a consumer thread interacting with one another through two shared variables.
When the benchmark run has complete, the producer thread exists once a counter exceeds a given number. The consumer thread exits after it has been interrupted. The thread executing the trial method that coordinates this called ""Thread.join"" on the producer thread before calling ""Thread.interrupt"" on the consumer thread and then exiting.
The harness will create new producer and consumer threads. However, the consumer thread may still be executing as the ""trial"" method doesn't wait for the consumer thread to exit. This can consume values from the producer and exit, leaving the other consumer thread waiting indefinitely.

My suggested solution is for the ""trial"" method to call ""Thread.join"" against the consumer thread. This prevents the test from restarting with two active consumer threads.

This happens on x86 and aarch64 Linux. With the correct timing, I expect any platform would be affected.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v5ob:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@78d03d9a,,,,,,,,,"2021-11-26 01:04;roboduke;Changeset: 3383c0dc
Author:    Stuart Monteith <smonteith@openjdk.org>
Committer: Nick Gasson <ngasson@openjdk.org>
Date:      2021-11-26 09:02:58 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3383c0dcc016715dcb350b6ba196a7cdc833cdc6
;;;",,,,,,,,,,,,,,,,,,,,
OptimizedEntryBlob should extend RuntimeBlob directly,JDK-8277657,5063301,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jvernee,jvernee,jvernee,2021-11-23 08:43,2021-11-25 10:40,2023-10-01 09:57,2021-11-25 10:40,repo-panama,,,,,,,,,,,,,,tools,,0,foreign-memaccess+abi,,,,,,,,,,,,,,,,"We've had issues with inherited behavior from BufferBlob, such as not forwarding the right header size through the BufferBlob constructor, which led to issues when implementing the optimized upcall support on AArch64.

I think OptimizedEntryBlob should extend RuntimeBlob directly, so that we don't end up accidentally inheriting behaviour like this from BufferBlob that is not appropriate for OptimizedEntryBlob.",,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277601,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v5nv:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2251e2f8,,,,,,,,,"2021-11-23 11:07;jvernee;ILW = M (always crashes when trying to address blocked bug) L (Part of an incubator API) H (no workaround) = P4;;;",,,,,,,,,,,,,,,,,,,,
[REDO] JDK-8277507 Add jlink.debug system property while launching jpackage tests to help diagonize recent intermittent failures,JDK-8277647,5063290,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jpai,dcubed,dcubed,2021-11-23 06:54,2021-12-08 17:44,2023-10-01 09:57,2021-12-01 17:31,18,,,,,,,,,,,,,18,tools,,0,noreg-self,regression,regression_8277507,tier2,ursqe-triaged,,,,,,,,,,,,"The following jpackage tests failed after JDK-8277507 was integrated:

tools/jpackage/share/ArgumentsTest.java
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsTest.java
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsEqualsTest.java#id1
tools/jpackage/share/jdk/jpackage/tests/ErrorTest.java#id1
tools/jpackage/share/jdk/jpackage/tests/DotInNameTest.java
tools/jpackage/share/jdk/jpackage/tests/BasicTest.java
tools/jpackage/windows/WinConsoleTest.java
tools/jpackage/share/ArgumentsTest.java
tools/jpackage/share/ArgumentsTest.java
tools/jpackage/share/jdk/jpackage/tests/UnicodeArgsTest.java
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsTest.java
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsEqualsTest.java#id1
tools/jpackage/share/jdk/jpackage/tests/ErrorTest.java#id1
tools/jpackage/share/jdk/jpackage/tests/DotInNameTest.java
tools/jpackage/share/jdk/jpackage/tests/BasicTest.java
tools/jpackage/share/ArgumentsTest.java
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsEqualsTest.java#id1
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsTest.java
tools/jpackage/share/ArgumentsTest.java
tools/jpackage/share/jdk/jpackage/tests/ErrorTest.java#id1
tools/jpackage/share/jdk/jpackage/tests/DotInNameTest.java
tools/jpackage/share/jdk/jpackage/tests/BasicTest.java
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsTest.java
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsEqualsTest.java#id1
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsTest.java
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsEqualsTest.java#id1
tools/jpackage/share/jdk/jpackage/tests/ErrorTest.java#id1
tools/jpackage/share/ArgumentsTest.java
tools/jpackage/share/jdk/jpackage/tests/ErrorTest.java#id1
tools/jpackage/share/jdk/jpackage/tests/DotInNameTest.java
tools/jpackage/share/jdk/jpackage/tests/DotInNameTest.java
tools/jpackage/share/jdk/jpackage/tests/BasicTest.java
tools/jpackage/share/jdk/jpackage/tests/BasicTest.java
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsTest.java
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsEqualsTest.java#id1
tools/jpackage/share/jdk/jpackage/tests/ErrorTest.java#id1
tools/jpackage/share/jdk/jpackage/tests/DotInNameTest.java
tools/jpackage/share/jdk/jpackage/tests/BasicTest.java


Here's a snippet from the ArgumentsTest.java log file:

----------System.out:(42/4683)*----------
[09:39:04.490] Parsing [--jpt-run=ArgumentsTest]...
[09:39:04.510] ArgumentsTest.testApp -> [public static void ArgumentsTest.testApp(java.lang.String)]
[09:39:04.517] Create: ArgumentsTest.testApp(Goodbye)
[09:39:04.517] Create: ArgumentsTest.testApp(com.hello/com.hello.Hello)
[09:39:04.519] [ RUN      ] ArgumentsTest.testApp(Goodbye)
[09:39:04.520] [ CALL     ] ArgumentsTest.useJPackageToolProvider()
[09:39:04.546] TRACE: Bundler dmg supported
[09:39:04.548] TRACE: Bundler pkg supported
[09:39:04.571] TRACE: exec: Execute tool provider [javac -d ./testApp.3f9b6877/jar-workdir ./testApp.3f9b6877/src/Goodbye.java](4)...
[09:39:04.878] TRACE: exec: Done. Exit code: 0
[09:39:04.879] TRACE: assertEquals(0): Check command tool provider [javac -d ./testApp.3f9b6877/jar-workdir ./testApp.3f9b6877/src/Goodbye.java](4) exited with 0 code
[09:39:04.880] TRACE: exec: Execute tool provider [jar -c -f ./testApp.3f9b6877/input/hello.jar -C ./testApp.3f9b6877/jar-workdir .](7)...
[09:39:04.895] TRACE: exec: Done. Exit code: 0
[09:39:04.895] TRACE: assertEquals(0): Check command tool provider [jar -c -f ./testApp.3f9b6877/input/hello.jar -C ./testApp.3f9b6877/jar-workdir .](7) exited with 0 code
[09:39:04.900] TRACE: exec: Execute tool provider [jpackage --input ./testApp.3f9b6877/input --dest ./testApp.3f9b6877/output --name AppArgumentsTest --type app-image -J-Djlink.debug=true --main-jar hello.jar --main-class Goodbye --arguments ""argument ""Some Arguments"" ""Value \\""with\\"" quotes"""" --verbose](17)...
[09:39:04.903] TRACE: exec: Done. Exit code: 1
[09:39:04.905] ERROR: Expected [0]. Actual [1]: Check command tool provider [jpackage --input ./testApp.3f9b6877/input --dest ./testApp.3f9b6877/output --name AppArgumentsTest --type app-image -J-Djlink.debug=true --main-jar hello.jar --main-class Goodbye --arguments ""argument ""Some Arguments"" ""Value \\""with\\"" quotes"""" --verbose](17) exited with 0 code
[09:39:04.905] [  FAILED  ] ArgumentsTest.testApp(Goodbye); checks=3
[09:39:04.905] [ RUN      ] ArgumentsTest.testApp(com.hello/com.hello.Hello)
[09:39:04.905] [ CALL     ] ArgumentsTest.useJPackageToolProvider()
[09:39:04.906] TRACE: Create [/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S138808/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/92e4705d-a358-471e-835a-e1890a5577cf/runs/f48bbfce-a1d1-4bbb-ae94-f76d061fd1ac/testoutput/test-support/jtreg_open_test_jdk_tier2_part2/scratch/0/testApp.341b1da9/src/module-info.java] text file...
[09:39:04.906] TRACE: module com.hello {
[09:39:04.906] TRACE:     exports com.hello;
[09:39:04.906] TRACE:     requires java.desktop;
[09:39:04.906] TRACE: }
[09:39:04.907] TRACE: Done
[09:39:04.909] TRACE: exec: Execute tool provider [javac -d ./testApp.341b1da9/jar-workdir ./testApp.341b1da9/src/com/hello/Hello.java ./testApp.341b1da9/src/module-info.java](5)...
[09:39:04.982] TRACE: exec: Done. Exit code: 0
[09:39:04.983] TRACE: assertEquals(0): Check command tool provider [javac -d ./testApp.341b1da9/jar-workdir ./testApp.341b1da9/src/com/hello/Hello.java ./testApp.341b1da9/src/module-info.java](5) exited with 0 code
[09:39:04.983] TRACE: exec: Execute tool provider [jar -c -f ./testApp.341b1da9/input-modules/hello.jar -C ./testApp.341b1da9/jar-workdir .](7)...
[09:39:04.987] TRACE: exec: Done. Exit code: 0
[09:39:04.987] TRACE: assertEquals(0): Check command tool provider [jar -c -f ./testApp.341b1da9/input-modules/hello.jar -C ./testApp.341b1da9/jar-workdir .](7) exited with 0 code
[09:39:04.988] TRACE: exec: Execute tool provider [jpackage --dest ./testApp.341b1da9/output --name AppArgumentsTest --type app-image -J-Djlink.debug=true --module-path ./testApp.341b1da9/input-modules --module com.hello/com.hello.Hello --arguments ""argument ""Some Arguments"" ""Value \\""with\\"" quotes"""" --verbose](15)...
[09:39:04.988] TRACE: exec: Done. Exit code: 1
[09:39:04.989] ERROR: Expected [0]. Actual [1]: Check command tool provider [jpackage --dest ./testApp.341b1da9/output --name AppArgumentsTest --type app-image -J-Djlink.debug=true --module-path ./testApp.341b1da9/input-modules --module com.hello/com.hello.Hello --arguments ""argument ""Some Arguments"" ""Value \\""with\\"" quotes"""" --verbose](15) exited with 0 code
[09:39:04.989] [  FAILED  ] ArgumentsTest.testApp(com.hello/com.hello.Hello); checks=3
[09:39:04.989] [==========] 2 tests ran
[09:39:04.989] [  PASSED  ] 0 tests
[09:39:04.990] [  FAILED  ] 2 tests, listed below
[09:39:04.990] [  FAILED  ] ArgumentsTest.testApp(Goodbye); workDir=[./testApp.3f9b6877]
[09:39:04.990] [  FAILED  ] ArgumentsTest.testApp(com.hello/com.hello.Hello); workDir=[./testApp.341b1da9]
[09:39:04.991] 2 FAILED TESTS
----------System.err:(80/5815)*----------
Error: Invalid Option: [-J-Djlink.debug=true]
java.lang.AssertionError: Expected [0]. Actual [1]: Check command tool provider [jpackage --input ./testApp.3f9b6877/input --dest ./testApp.3f9b6877/output --name AppArgumentsTest --type app-image -J-Djlink.debug=true --main-jar hello.jar --main-class Goodbye --arguments ""argument ""Some Arguments"" ""Value \\""with\\"" quotes"""" --verbose](17) exited with 0 code
	at jdk.jpackage.test.TKit.error(TKit.java:264)
	at jdk.jpackage.test.TKit.assertEquals(TKit.java:567)
	at jdk.jpackage.test.Executor$Result.assertExitCodeIs(Executor.java:183)
	at jdk.jpackage.test.Executor.execute(Executor.java:221)
	at jdk.jpackage.test.JPackageCommand.execute(JPackageCommand.java:688)
	at jdk.jpackage.test.JPackageCommand.execute(JPackageCommand.java:653)
	at jdk.jpackage.test.JPackageCommand.executeAndAssertImageCreated(JPackageCommand.java:704)
	at ArgumentsTest.testIt(ArgumentsTest.java:80)
	at ArgumentsTest.testApp(ArgumentsTest.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at jdk.jpackage.test.MethodCall.accept(MethodCall.java:145)
	at jdk.jpackage.test.TestInstance.run(TestInstance.java:230)
	at jdk.jpackage.test.TKit.lambda$ignoreExceptions$5(TKit.java:139)
	at jdk.jpackage.test.TKit.lambda$runTests$3(TKit.java:124)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at jdk.jpackage.test.TKit.lambda$runTests$4(TKit.java:121)
	at jdk.jpackage.test.Functional$ThrowingRunnable.lambda$toRunnable$0(Functional.java:105)
	at jdk.jpackage.test.TKit.withExtraLogStream(TKit.java:107)
	at jdk.jpackage.test.TKit.runTests(TKit.java:120)
	at jdk.jpackage.test.Main.runTests(Main.java:79)
	at jdk.jpackage.test.Main.lambda$main$2(Main.java:75)
	at jdk.jpackage.test.Functional$ThrowingRunnable.lambda$toRunnable$0(Functional.java:105)
	at jdk.jpackage.test.TKit.withExtraLogStream(TKit.java:107)
	at jdk.jpackage.test.Main.main(Main.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)
Error: Invalid Option: [-J-Djlink.debug=true]
java.lang.AssertionError: Expected [0]. Actual [1]: Check command tool provider [jpackage --dest ./testApp.341b1da9/output --name AppArgumentsTest --type app-image -J-Djlink.debug=true --module-path ./testApp.341b1da9/input-modules --module com.hello/com.hello.Hello --arguments ""argument ""Some Arguments"" ""Value \\""with\\"" quotes"""" --verbose](15) exited with 0 code
	at jdk.jpackage.test.TKit.error(TKit.java:264)
	at jdk.jpackage.test.TKit.assertEquals(TKit.java:567)
	at jdk.jpackage.test.Executor$Result.assertExitCodeIs(Executor.java:183)
	at jdk.jpackage.test.Executor.execute(Executor.java:221)
	at jdk.jpackage.test.JPackageCommand.execute(JPackageCommand.java:688)
	at jdk.jpackage.test.JPackageCommand.execute(JPackageCommand.java:653)
	at jdk.jpackage.test.JPackageCommand.executeAndAssertImageCreated(JPackageCommand.java:704)
	at ArgumentsTest.testIt(ArgumentsTest.java:80)
	at ArgumentsTest.testApp(ArgumentsTest.java:68)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at jdk.jpackage.test.MethodCall.accept(MethodCall.java:145)
	at jdk.jpackage.test.TestInstance.run(TestInstance.java:230)
	at jdk.jpackage.test.TKit.lambda$ignoreExceptions$5(TKit.java:139)
	at jdk.jpackage.test.TKit.lambda$runTests$3(TKit.java:124)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at jdk.jpackage.test.TKit.lambda$runTests$4(TKit.java:121)
	at jdk.jpackage.test.Functional$ThrowingRunnable.lambda$toRunnable$0(Functional.java:105)
	at jdk.jpackage.test.TKit.withExtraLogStream(TKit.java:107)
	at jdk.jpackage.test.TKit.runTests(TKit.java:120)
	at jdk.jpackage.test.Main.runTests(Main.java:79)
	at jdk.jpackage.test.Main.lambda$main$2(Main.java:75)
	at jdk.jpackage.test.Functional$ThrowingRunnable.lambda$toRunnable$0(Functional.java:105)
	at jdk.jpackage.test.TKit.withExtraLogStream(TKit.java:107)
	at jdk.jpackage.test.Main.main(Main.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)
java.lang.RuntimeException: 2 FAILED TESTS
	at jdk.jpackage.test.Main.reportSummary(Main.java:130)
	at jdk.jpackage.test.Main.runTests(Main.java:90)
	at jdk.jpackage.test.Main.lambda$main$2(Main.java:75)
	at jdk.jpackage.test.Functional$ThrowingRunnable.lambda$toRunnable$0(Functional.java:105)
	at jdk.jpackage.test.TKit.withExtraLogStream(TKit.java:107)
	at jdk.jpackage.test.Main.main(Main.java:75)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.RuntimeException: 2 FAILED TESTS
JavaTest Message: shutting down test

STATUS:Failed.`main' threw exception: java.lang.RuntimeException: 2 FAILED TESTS
----------rerun:(39/7270)*----------",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277507,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v5lf:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3656b41f,,,,,,,,,"2021-11-23 07:32;dcubed;Now that ""JDK-8277507 Add jlink.debug system property while launching jpackage tests to help diagonize recent intermittent failures""
has been backed out, this bug can morph into a [REDO].

I've reset the priority to match the original issue.;;;","2021-12-01 17:31;roboduke;Changeset: 09522db5
Author:    Jaikiran Pai <jpai@openjdk.org>
Date:      2021-12-02 01:29:52 +0000
URL:       https://git.openjdk.java.net/jdk/commit/09522db5aa9503131381bbb4fe3f2eae829645ce
;;;",,,,,,,,,,,,,,,,,,,
TreeMaker should not call type() on pointer types too early,JDK-8277645,5063287,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mcimadamore,mcimadamore,mcimadamore,2021-11-23 05:58,2021-11-23 06:45,2023-10-01 09:57,2021-11-23 06:45,repo-panama,,,,,,,,,,,,,,tools,,0,foreign-extract,,,,,,,,,,,,,,,,"The jextract parser deals with pointers using some logic to handle circular references - e.g. cases like:

struct A {
    B *ptr_b;
};

struct B {
   A *ptr_a;
}

In such cases, the types *A and *B are added to a list of unresolved type, which is then only fixed up at the end of parsing. For this reason, it is only safe to obtain the pointee type of a pointer type only after parsing. Unfortunately TreeMaker has some calls to DelegatedType::type() which, under the right conditions can cause issues because of this lazy completion system.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v5kr:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2251e2f8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Incorrect method name in invokedynamic,JDK-8277634,5063274,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jlahoda,jlahoda,jlahoda,2021-11-23 02:17,2021-12-15 17:33,2023-10-01 09:57,2021-12-10 01:03,18,,,,,,,,,,,,,19,tools,,0,,,,,,,,,,,,,,,,,"The invokedynamic instruction, besides the reference to the bootstrap method, also provides a name and type. This name and type is then passed to the bootstrap method. But, in javac, if multiple invokedynamic instructions have the same bootstrap method and (dynamic) type, only one name will be used, even if the DynamicMethodSymbols were created with different names. It is necessary to produce different references to NameAndType for the different invokedynamic instructions.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v5hv:",9223372036854775807,b02,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,,,"2021-12-10 01:03;roboduke;Changeset: aed3ea20
Author:    Jan Lahoda <jlahoda@openjdk.org>
Date:      2021-12-10 09:01:58 +0000
URL:       https://git.openjdk.java.net/jdk/commit/aed3ea2043e765bf4a9ac980da2515f19855c780
;;;",,,,,,,,,,,,,,,,,,,,
ZGC: CriticalMetaspaceAllocation asserts,JDK-8277631,5063271,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,eosterlund,stefank,stefank,2021-11-23 01:16,2022-02-10 14:26,2023-10-01 09:57,2021-11-25 01:51,18,,,,,,,,,,,,,18,hotspot,,0,zgc,,,,,,,,,,,,,,,,"#  assert(false) failed: Possible safepoint reached by thread that does not allow it

V  [libjvm.so+0x1915d83]  JavaThread::check_possible_safepoint()+0xa3
V  [libjvm.so+0x14e01dc]  MetaspaceCriticalAllocation::wait_for_purge(MetadataAllocationRequest*)+0xbc
V  [libjvm.so+0x14e09c8]  MetaspaceCriticalAllocation::allocate(ClassLoaderData*, unsigned long, Metaspace::MetadataType)+0xb8
V  [libjvm.so+0x14dc360]  Metaspace::allocate(ClassLoaderData*, unsigned long, MetaspaceObj::Type, JavaThread*)+0x120
V  [libjvm.so+0xeaeab2]  InstanceKlass::allocate_instance_klass(ClassFileParser const&, JavaThread*)+0xf2

Reproducible by editing test/hotspot/jtreg/vmTestbase/gc/gctests/LoadUnloadGC/LoadUnloadGC.java to run with -XX:MetaspaceSize=64m

Setting MetaspaceSize to MaxMetaspaceSize removes the high-watermark triggered 'Metadata GC Threshold' GCs, and makes the allocation have to wait for Metaspace to be purged. This waiting asserts that we are not allowed to safepoint while holding the MetaspaceCritical_lock.

Command line:
make --no-print-directory -C ../build/fastdebug/ test TEST=test/hotspot/jtreg/vmTestbase/gc/gctests/LoadUnloadGC/LoadUnloadGC.java JTREG=""JAVA_OPTIONS=-XX:+UseZGC -Xlog:gc*""
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v5h7:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,Verified,,"2021-11-25 01:51;roboduke;Changeset: 3034ae87
Author:    Erik Österlund <eosterlund@openjdk.org>
Date:      2021-11-25 09:50:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3034ae87ce4b94c7dc40cfb5a96d6d1e87910bbf
;;;",,,,,,,,,,,,,,,,,,,,
Fix copyright years in some jvmci files,JDK-8277627,5063265,Bug,Resolved,JDK,JDK,software,duke,,,P5,Fixed,epeter,thartmann,thartmann,2021-11-22 22:09,2022-01-25 00:02,2023-10-01 09:57,2022-01-12 00:18,11,17,18,,,,,,,,,,,19,hotspot,,0,jvmci,noreg-doc,oracle-triage-11,oracle-triage-17,oracle-triage-18,starter,,,,,,,,,,,"The following files use the same years twice in their copyright headers:
src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.hotspot/src/jdk/vm/ci/hotspot/HotSpotCallingConventionType.java
src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.hotspot/src/jdk/vm/ci/hotspot/UnsafeAccess.java
src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.meta/src/jdk/vm/ci/meta/DeoptimizationReason.java
src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.meta/src/jdk/vm/ci/meta/VMConstant.java
src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.meta/src/jdk/vm/ci/meta/Constant.java
src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.meta/src/jdk/vm/ci/meta/MethodHandleAccessProvider.java
src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.meta/src/jdk/vm/ci/meta/ProfilingInfo.java
src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.meta/src/jdk/vm/ci/meta/InvokeTarget.java
src/jdk.internal.vm.ci/share/classes/jdk.vm.ci.code/src/jdk/vm/ci/code/MemoryBarriers.java",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v5fv:",9223372036854775807,b05,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-22 22:12;thartmann;ILW = LLL = P5;;;","2022-01-10 10:02;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/6985
Date: 2022-01-07 08:30:38 +0000;;;","2022-01-12 00:18;roboduke;Changeset: bd339aa6
Author:    Emanuel Peter <emanuel.peter@oracle.com>
Committer: Tobias Hartmann <thartmann@openjdk.org>
Date:      2022-01-12 08:17:14 +0000
URL:       https://git.openjdk.java.net/jdk/commit/bd339aa6c03d12cb830a2caa04bda322e9f40c33
;;;",,,,,,,,,,,,,,,,,,
"ARM32: multiple fastdebug failures with ""bad AD file"" after JDK-8276162",JDK-8277621,5063257,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,haosun,ngasson,ngasson,2021-11-22 20:40,2021-12-15 17:52,2023-10-01 09:57,2021-12-10 07:54,18,,,,,,,,,,,,,18,hotspot,,0,c2,oraclejdk-na,oracle-triage-11,oracle-triage-17,oracle-triage-18,regression,,,,,,,,,,,"E.g. java/lang/Double/ParseDouble.java in tier1:

o46  CMoveI  === _ o47 o48  [[o45  2 ]]  #bool

--N: o46  CMoveI  === _ o47 o48  [[o45  2 ]]  #bool

   --N: o47  Binary  === _ o35 o34  [[o46 ]] 
   _Binary_cmpOpL_flagsRegUL_LTGE  103  _Binary_cmpOpL_flagsRegUL_LTGE
   _Binary_cmpOpL_commute_flagsRegUL_LEGT  103  _Binary_cmpOpL_commute_flagsRegUL_LEGT

      --N: o35  Bool  === _ o34  [[o47 ]] [le]
      CMPOP  1  CMPOP
      CMPOP0  1  CMPOP0
      CMPOPU  1  CMPOPU
      CMPOPP  1  CMPOPP
      CMPOPL  1  CMPOPL
      CMPOPL_COMMUTE  1  CMPOPL_COMMUTE
      CMPOPUL  1  CMPOPUL
      CMPOPUL_COMMUTE  1  CMPOPUL_COMMUTE

      --N: o34  CmpUL  === _ o11 o13  [[o35 o47 ]] 
      FLAGSREGUL_LTGE  102  compUL_reg_reg_LTGE
      FLAGSREGUL_EQNE  102  compUL_reg_reg_EQNE
      FLAGSREGUL_LEGT  102  compUL_reg_reg_LEGT

         --N: o11  Parm  === o3  [[o34 ]] Parm1: long
         IREGL  1  IREGL
         IREGLD  2  IREGLD
         R0R1REGL  2  R0R1REGL
         R2R3REGL  2  R2R3REGL

         --N: o13  Parm  === o3  [[o34 ]] Parm3: long
         IREGL  1  IREGL
         IREGLD  2  IREGLD
         R0R1REGL  2  R0R1REGL
         R2R3REGL  2  R2R3REGL

   --N: o48  Binary  === _ o41 o30  [[o46 ]] 
   _Binary_iRegI_iRegI  200  _Binary_iRegI_iRegI
   _Binary_iRegI_immIRot  100  _Binary_iRegI_immIRot
   _Binary_iRegI_immI16  100  _Binary_iRegI_immI16

      --N: o41  ConI  === o0  [[o48 ]]  #int:1
      IMMIROT  0  IMMIROT
      IMMU31ROT  0  IMMU31ROT
      IMMI12  0  IMMI12
      IMMI10X2  0  IMMI10X2
      IMMI12X2  0  IMMI12X2
      IMMI  0  IMMI
      IMMU8  0  IMMU8
      IMMI16  0  IMMI16
      IMMIHD  0  IMMIHD
      IMMU5  0  IMMU5
      IMMI_1  0  IMMI_1
      IMMU31  0  IMMU31
      AIMMI  0  AIMMI
      AIMMU31  0  AIMMU31
      LIMMI  0  LIMMI
      LIMMILOW8  0  LIMMILOW8
      LIMMU31  0  LIMMU31
      IREGI  100  loadConI16
      R0REGI  101  loadConI16
      R1REGI  101  loadConI16
      R2REGI  101  loadConI16
      R3REGI  101  loadConI16
      R12REGI  101  loadConI16

      --N: o30  ConI  === o0  [[o48 ]]  #int:0
      IMMIROT  0  IMMIROT
      IMMU31ROT  0  IMMU31ROT
      IMMI12  0  IMMI12
      IMMI10X2  0  IMMI10X2
      IMMI12X2  0  IMMI12X2
      IMMI  0  IMMI
      IMMU8  0  IMMU8
      IMMI16  0  IMMI16
      IMMIHD  0  IMMIHD
      IMMIFP  0  IMMIFP
      IMMU5  0  IMMU5
      IMMI0  0  IMMI0
      IMMU31  0  IMMU31
      AIMMI  0  AIMMI
      AIMMINEG  0  AIMMINEG
      AIMMU31  0  AIMMU31
      LIMMI  0  LIMMI
      LIMMILOW8  0  LIMMILOW8
      LIMMU31  0  LIMMU31
      IREGI  100  loadConI16
      R0REGI  101  loadConI16
      R1REGI  101  loadConI16
      R2REGI  101  loadConI16
      R3REGI  101  loadConI16
      R12REGI  101  loadConI16

# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/matcher.cpp:1714
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/home/ent-user/ci-scripts/jdk_build/jdk_src/src/hotspot/share/opto/matcher.cpp:1714), pid=1327693, tid=1329907
#  assert(false) failed: bad AD file
#
# JRE version: OpenJDK Runtime Environment (18.0) (fastdebug build 18-internal+0-git-4dabe548f)
# Java VM: OpenJDK Server VM (fastdebug 18-internal+0-git-4dabe548f, mixed mode, g1 gc, linux-arm)
# Problematic frame:
# V  [libjvm.so+0xaed03c]  Matcher::Label_Root(Node const*, State*, Node*, Node*&)+0x2af",,,,,,,,,,JDK-8278563,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277324,JDK-8276162,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,arm,,,,,,,,,,,,,,,,,,,"0|i2v5e3:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-22 20:41;ngasson;Looks like the .ad file is missing various CMoveI patterns with unsigned comparisons similar to x86_32 in  JDK-8277324.;;;","2021-11-23 00:08;chagedorn;ILW = Same as JDK-8277324 = P2;;;","2021-11-23 08:35;thartmann;[~ngasson] do you plan to work on this?;;;","2021-11-23 18:03;ngasson;[~thartmann] Yes, we (Arm) will work on this.;;;","2021-11-23 23:02;thartmann;Great, thanks!;;;","2021-12-03 23:11;haosun;Similar to JDK-8277753, CMoveP patterns with unsigned long comparisons are missing in arm32 as well.

E.g,: jdk/incubator/vector/Long64VectorTests.java:

test Long64VectorTests.UNSIGNED_GELong64VectorTests(long[i], long[i]): success
o450  CMoveP  === o395 o677 o678  [[o80 o80 o71  405 ]]  #java/lang/Boolean:NotNull:exact *  Oop:java/lang/Boolean:NotNull:exact *

--N: o450  CMoveP  === o395 o677 o678  [[o80 o80 o71  405 ]]  #java/lang/Boolean:NotNull:exact *  Oop:java/lang/Boolean:NotNull:exact *

   --N: o677  Binary  === _ o400 o413  [[o450 ]] 
   _Binary_cmpOpUL_flagsRegUL_LTGE  103  _Binary_cmpOpUL_flagsRegUL_LTGE
   _Binary_cmpOpUL_commute_flagsRegUL_LEGT  103  _Binary_cmpOpUL_commute_flagsRegUL_LEGT
   _Binary_cmpOpUL_flagsRegUL_EQNE  103  _Binary_cmpOpUL_flagsRegUL_EQNE

      --N: o400  Bool  === _ o413  [[o414 o677 ]] [lt]
      CMPOP  1  CMPOP
      CMPOP0  1  CMPOP0
      CMPOPU  1  CMPOPU
      CMPOPP  1  CMPOPP
      CMPOPL  1  CMPOPL
      CMPOPL_COMMUTE  1  CMPOPL_COMMUTE
      CMPOPUL  1  CMPOPUL
      CMPOPUL_COMMUTE  1  CMPOPUL_COMMUTE

      --N: o413  CmpUL  === _ o418 o419  [[o400 o414 o677 ]] 
      FLAGSREGUL_LTGE  102  compUL_reg_reg_LTGE
      FLAGSREGUL_EQNE  102  compUL_reg_reg_EQNE
      FLAGSREGUL_LEGT  102  compUL_reg_reg_LEGT

         --N: o418  LoadL  === o420 o55 o423  |o105  [[o413 ]]  @long[int:>=0]:exact+any *, idx=7; #long
         IREGL  1  IREGL
         IREGLD  2  IREGLD
         R0R1REGL  2  R0R1REGL
         R2R3REGL  2  R2R3REGL

         --N: o419  LoadL  === o333 o55 o424  |o112  [[o413 ]]  @long[int:>=0]:exact+any *, idx=7; #long
         IREGL  1  IREGL
         IREGLD  2  IREGLD
         R0R1REGL  2  R0R1REGL
         R2R3REGL  2  R2R3REGL

   --N: o678  Binary  === _ o230 o229  [[o450 ]] 
   _Binary_iRegP_iRegP  300  _Binary_iRegP_iRegP

      --N: o230  ConP  === o0  [[o678 o676 ]]  #java/lang/Boolean:exact *  Oop:java/lang/Boolean:exact *
      IMMP  5  IMMP
      IREGP  150  loadConP
      SP_PTR_REGP  151  loadConP
      R0REGP  151  loadConP
      R1REGP  151  loadConP
      R8REGP  151  loadConP
      R9REGP  151  loadConP
      R12REGP  151  loadConP
      R2REGP  151  loadConP
      REXCEPTIONREGP  151  loadConP
      RTHREADREGP  151  loadConP
      IPREGP  151  loadConP
      SPREGP  151  loadConP
      LRREGP  151  loadConP
      INLINE_CACHE_REGP  151  loadConP
      INDIRECT  251  loadConP
      MEMORYI  251  INDIRECT
      MEMORYP  251  INDIRECT
      MEMORYF  251  INDIRECT
      MEMORYF2  251  INDIRECT
      MEMORYD  251  INDIRECT
      MEMORYFP  251  INDIRECT
      MEMORYB  251  INDIRECT
      MEMORYS  251  INDIRECT
      MEMORYL  251  INDIRECT
      MEMORYEX  251  INDIRECT
      MEMORYLONG  251  INDIRECT
      MEMORYVLD  251  INDIRECT

      --N: o229  ConP  === o0  [[o676 o678 ]]  #java/lang/Boolean:exact *  Oop:java/lang/Boolean:exact *
      IMMP  5  IMMP
      IREGP  150  loadConP
      SP_PTR_REGP  151  loadConP
      R0REGP  151  loadConP
      R1REGP  151  loadConP
      R8REGP  151  loadConP
      R9REGP  151  loadConP
      R12REGP  151  loadConP
      R2REGP  151  loadConP
      REXCEPTIONREGP  151  loadConP
      RTHREADREGP  151  loadConP
      IPREGP  151  loadConP
      SPREGP  151  loadConP
      LRREGP  151  loadConP
      INLINE_CACHE_REGP  151  loadConP
      INDIRECT  251  loadConP
      MEMORYI  251  INDIRECT
      MEMORYP  251  INDIRECT
      MEMORYF  251  INDIRECT
      MEMORYF2  251  INDIRECT
      MEMORYD  251  INDIRECT
      MEMORYFP  251  INDIRECT
      MEMORYB  251  INDIRECT
      MEMORYS  251  INDIRECT
      MEMORYL  251  INDIRECT
      MEMORYEX  251  INDIRECT
      MEMORYLONG  251  INDIRECT
      MEMORYVLD  251  INDIRECT

# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/matcher.cpp:1716
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/home/ent-user/ci-scripts/jdk_build/jdk_src/src/hotspot/share/opto/matcher.cpp:1716), pid=126217, tid=126232
#  assert(false) failed: bad AD file
#
# JRE version: OpenJDK Runtime Environment (18.0) (fastdebug build 18-internal+0-git-a9251c604)
# Java VM: OpenJDK Server VM (fastdebug 18-internal+0-git-a9251c604, mixed mode, sharing, g1 gc, linux-arm)
# Problematic frame:
# V  [libjvm.so+0xaf7c6c]  Matcher::Label_Root(Node const*, State*, Node*, Node*&)+0x2af;;;","2021-12-10 07:54;roboduke;Changeset: 0602f4c4
Author:    Hao Sun <haosun@openjdk.org>
Committer: Aleksey Shipilev <shade@openjdk.org>
Date:      2021-12-10 15:53:27 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/0602f4c48b0ffe53a6081551988b417d7536efa0
;;;",,,,,,,,,,,,,,
Deopt code does not extend the stack enough if the caller is an optimize entry blob,JDK-8277602,5063237,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,jvernee,jvernee,jvernee,2021-11-22 13:39,2022-02-02 05:52,2023-10-01 09:57,2021-11-30 06:36,18,repo-panama,,,,,,,,,,,,18,hotspot,,0,deoptimization,foreign-memaccess+abi,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,"In the case of a deopt due to an uncommon trap, the uncommon trap blob ad-hoc extends the frame of caller of the deoptee so that it has enough space for local variables after converting it to an interpreter frame.

For compiled callers this means we also need to make room for the arguments, which would normally be done by a c2i adapter.

However, the current deopt code only checks if the caller is a compiled frame with frame::is_compiled_frame, and therefore doesn't extend the stack for arguments if the caller is an optimized entry blob, which also does a compiled call. This can lead to memory corruption because some of the locals of the youngest reconstituted interpreter frame overwrite parts of the optimized entry frame.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275063,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v59n:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,Verified,,"2021-11-23 09:22;thartmann;Why is this in tools/jextract?;;;","2021-11-23 09:35;jvernee;[~thartmann] that's what we go under for panama bugs.

Since the PR is targeted at jdk 18 though, I can change the components to hotspot/compiler as well.;;;","2021-11-23 11:01;jvernee;ILW = H (memory corruption/crash) L (infrequent, only in specific deopt cases) H (no workaround) = P2;;;","2021-11-23 23:00;thartmann;Okay, thanks. Yes, mainline bugs should go into a component to be properly handled by the triaging teams.

Just out of curiosity, why don't you put the panama bugs into proper (sub)components? We do that for Valhalla as well.;;;","2021-11-24 06:10;jvernee;I guess it's mostly just an established practice that nobody felt the need to change so far. I also vaguely remember that when I tried in the past to put a bug under the proper components it caused some friction (with someone changing the components around, and re-assigning the bug to someone else).;;;","2021-11-30 06:36;roboduke;Changeset: 98a9f037
Author:    Jorn Vernee <jvernee@openjdk.org>
Date:      2021-11-30 14:34:00 +0000
URL:       https://git.openjdk.java.net/jdk/commit/98a9f037397d437d2c3221e8522ed8ab397a457a
;;;",,,,,,,,,,,,,,,
OptimizedEntryBlob should implement preserve_callee_argument_oops,JDK-8277601,5063235,Bug,Resolved,JDK,JDK,software,duke,,,P5,Fixed,jvernee,jvernee,jvernee,2021-11-22 13:30,2022-02-22 08:07,2023-10-01 09:57,2022-02-22 08:07,repo-panama,,,,,,,,,,,,,,tools,,0,foreign-memaccess+abi,foreign-preview,,,,,,,,,,,,,,,"We pass a single argument oop from an OptimizedEntryBlob: the receiver method handle.

This oop should be handled by preserve_callee_argument_oops. The current implementation that is inherited from BufferBlob does nothing however.",,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277657,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v597:",9223372036854775807,,,,,,,,,,,,,,"2021-11-23 11:08;jvernee;ILW = L (no issues observed so far) L (no issues so far) H (no workaround) = P5;;;","2022-02-22 07:23;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/panama-foreign/pull/652
Date: 2022-02-22 15:19:06 +0000;;;",,,,,,,,,,,,,,,,,,,
VmObjectAlloc is not generated by intrinsics methods which allocate objects,JDK-8277573,5063203,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,lmesnik,lmesnik,lmesnik,2021-11-22 09:48,2023-05-05 01:11,2023-10-01 09:57,2023-04-11 06:57,18,19,,,,,,,,,,,,21,hotspot,,0,,,,,,,,,,,,,,,,,"While fixing https://bugs.openjdk.java.net/browse/JDK-8265795 I noticed that event is not posted in the intrinsics version for many functions where it is used. Including but not limited to clone(), invoke()m allocateInstance() and allocateUninitializedArray(). There are might be other intensified functions (not analogs JVM_ENTRY versions) that allocate objects without post events.

Here is the comment from David H.
""
I agree that fixing intrinsics should be a separate issue - I have to worry that the overhead of posting events can dwarf the operation itself. I would guess the intrinsic would need a short-cut to check if the event is enabled and if so drop back to non-intrinsic version.
""",,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8307462,JDK-8307519,,,,,,,,,,,,,,,,,JDK-8277812,JDK-8288430,,,,,,JDK-8288430,,,,,,,,,,,,,,,JDK-8306326,JDK-8303630,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v52b:",9223372036854775807,b18,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@661b156a,,,,,,,Fix failed,,"2023-04-07 14:22;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/13312
Date: 2023-04-03 22:20:43 +0000;;;","2023-04-11 06:57;dukebot;Changeset: 7a5597c3
Author:    Leonid Mesnik <lmesnik@openjdk.org>
Date:      2023-04-11 13:55:20 +0000
URL:       https://git.openjdk.org/jdk/commit/7a5597c34f3b52d8b7c44647bfdcdfac9301b483
;;;",,,,,,,,,,,,,,,,,,,
ImageStorage should correctly handle MIME types for images encoded in data URIs,JDK-8277572,5063202,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mstrauss,mstrauss,mstrauss,2021-11-22 09:48,2022-02-23 04:31,2023-10-01 09:57,2022-02-07 09:11,jfx17,,,,,,,,,,,,,jfx19,javafx,,0,,,,,,,,,,,,,,,,,"`com.sun.javafx.iio.ImageStorage` currently ignores the MIME image subtype specified for images encoded in data URIs. This should be improved as follows:

1. If the specified image subtype is not supported, an exception will be thrown.
2. If the specified image subtype is supported, but the data contained in the URI is of a different (but also supported) image format, the image will be loaded and a warning will be logged. For example, if the MIME type is ""image/jpeg"", but the image data is PNG, the following warning will be generated:

    Image format 'PNG' does not match MIME type 'image/jpeg' in URI 'data:image/jpeg;base64,iVBORw0KGgoAAA...AAAElFTkSuQmCC'

Also, the javadoc of `javafx.scene.image.Image` incorrectly states:

    94    * If a URL uses the ""data"" scheme, the data must be base64-encoded
    95    * and the MIME type must either be empty or a subtype of the
    96    * {@code image} type.

However, omitting the MIME type of a data URI is specified to imply ""text/plain"" (RFC 2397, section 2). Since the `com.sun.javafx.util.DataURI` class is implemented according to this specification, trying to load an image without MIME type correctly fails with an `ImageStorageException`: ""Unexpected MIME type: text"".

The solution is to fix the documentation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277653,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v523:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4143e3f7,,,,,,,,,"2021-11-22 21:41;mstrauss;I expanded the scope of this issue to include handling of MIME types in the ImageStorage class.;;;","2022-02-07 09:11;roboduke;Changeset: f326e78f
Author:    Michael Strauß <mstrauss@openjdk.org>
Committer: Kevin Rushforth <kcr@openjdk.org>
Date:      2022-02-07 17:09:54 +0000
URL:       https://git.openjdk.java.net/jfx/commit/f326e78ffdfcbbc9085bc50a38e0b4454b757157
;;;",,,,,,,,,,,,,,,,,,,
[lworld] Pre-allocated instance should be created during class initialization,JDK-8277570,5063200,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,fparain,fparain,fparain,2021-11-22 08:21,2021-11-23 11:57,2023-10-01 09:57,2021-11-23 11:57,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,lworld,,,,,,,,,,,,,,,,"The pre-allocated default value of an inline class is currently allocated during the loading phase. This causes an issue to implement class redefinition for inline classes. The allocation of the default instance should be moved to the class initialization phase.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v51n:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-22 08:22;fparain;C1 code related to the handling of empty classes should be updated to check that the empty class is initialized before trying to use the pre-allocated instance.
;;;",,,,,,,,,,,,,,,,,,,,
SIGSEGV in C2 CompilerThread Node::rematerialize() compiling Packet::readUnsignedTrint,JDK-8277529,5063158,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,chagedorn,shadowbug,shadowbug,2021-11-22 00:48,2022-02-01 12:38,2023-10-01 09:57,2021-12-03 09:15,11.0.14,11.0.14-oracle,17.0.2,18,,,,,,,,,,18,hotspot,,0,azul-interest,bugdb_33590597,CPU22_01-critical-approved,CPU22_01-critical-SQE-OK,Internal,jdk11u-critical-request,jdk11u-critical-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,oracle-triage-18,redhat-interest,regression,,,,"Manifestation with replay file and debug build:

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/tank/fmatte/repos/git/jdk17u-cpu/open/src/hotspot/share/opto/loopnode.cpp:5031), pid=31995, tid=32008
#  assert(s1->is_Proj()) failed: projection expected
#
# JRE version: Java(TM) SE Runtime Environment (17.0) (fastdebug build 17-internal+0-LTS-2021-11-22-0852176.fmatte...)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 17-internal+0-LTS-2021-11-22-0852176.fmatte..., mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0x1322f55]  PhaseIdealLoop::get_late_ctrl_with_anti_dep(LoadNode*, Node*, Node*)+0x8b5
..........
Current thread (0x00007fe4fc27f580):  JavaThread ""C2 CompilerThread0"" daemon [_thread_in_native, id=32008, stack(0x00007fe4870ee000,0x00007fe4871ef000)]

Current CompileTask:
C2:   1324   20    b  4       com.tangosol.coherence.component.net.Packet::readUnsignedTrint (43 bytes)

Stack: [0x00007fe4870ee000,0x00007fe4871ef000],  sp=0x00007fe4871e90d0,  free space=1004k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x1322f55]  PhaseIdealLoop::get_late_ctrl_with_anti_dep(LoadNode*, Node*, Node*)+0x8b5
V  [libjvm.so+0x13238a1]  PhaseIdealLoop::get_late_ctrl(Node*, Node*)+0x121
V  [libjvm.so+0x1323b6d]  PhaseIdealLoop::build_loop_late_post_work(Node*, bool)+0x22d
V  [libjvm.so+0x13240ea]  PhaseIdealLoop::build_loop_late(VectorSet&, Node_List&, Node_Stack&)+0xba
V  [libjvm.so+0x1324a57]  PhaseIdealLoop::build_and_optimize(LoopOptsMode)+0x507
V  [libjvm.so+0xa37aaa]  PhaseIdealLoop::optimize(PhaseIterGVN&, LoopOptsMode)+0x2da
V  [libjvm.so+0xa33456]  Compile::Optimize()+0x586
V  [libjvm.so+0xa35f48]  Compile::Compile(ciEnv*, ciMethod*, int, bool, bool, bool, bool, bool, DirectiveSet*)+0x1618
V  [libjvm.so+0x84b356]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x646
V  [libjvm.so+0xa45f91]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xb71
V  [libjvm.so+0xa46c38]  CompileBroker::compiler_thread_loop()+0x5a8
V  [libjvm.so+0x18dd961]  JavaThread::thread_main_inner()+0x271
V  [libjvm.so+0x18e4f50]  Thread::call_run()+0x100
V  [libjvm.so+0x15aaca4]  thread_native_entry(Thread*)+0x104",,,,,,,,,,JDK-8278374,JDK-8278340,JDK-8278306,JDK-8278498,JDK-8278258,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278307,,,,,,,,,,,,,,,JDK-8272574,JDK-8146792,JDK-8252372,JDK-8278230,JDK-8278231,,,,,,"2021-11-22 00:58;fmatte;hs_err_pid31995.log;https://bugs.openjdk.org/secure/attachment/97161/hs_err_pid31995.log",,,,,,,,,,,,,,,,,,b01,17.0.2,,,,,,,,"0|i2v4sb:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,Verified,,"2021-11-22 00:57;fmatte;Able to reproduce with replay data file
==
# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/loopnode.cpp:5031
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/tank/fmatte/repos/git/jdk17u-cpu/open/src/hotspot/share/opto/loopnode.cpp:5031), pid=31995, tid=32008
#  assert(s1->is_Proj()) failed: projection expected
#
# JRE version: Java(TM) SE Runtime Environment (17.0) (fastdebug build 17-internal+0-LTS-2021-11-22-0852176.fmatte...)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 17-internal+0-LTS-2021-11-22-0852176.fmatte..., mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0x1322f55]  PhaseIdealLoop::get_late_ctrl_with_anti_dep(LoadNode*, Node*, Node*)+0x8b5
#
# Core dump will be written. Default location: Core dumps may be processed with ""/usr/share/apport/apport %p %s %c %d %P %E"" (or dumping to /tank/fmatte/bugdb/33590597/core.31995)
#
# An error report file with more information is saved as:
# /tank/fmatte/bugdb/33590597/hs_err_pid31995.log
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
==;;;","2021-11-22 01:11;chagedorn;ILW = Segfault (assertion failure with debug build) in C2 compiler and recent regression, seems intermittent, disable compilation of affected method = HMM = P2;;;","2021-11-22 20:49;fmatte;Issue is also reproducible on jdk18 b24
==
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S136831/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/a80cce1f-d132-4846-bad4-eefe7a994513/runs/49c40ce9-22c4-4b24-84c9-df1aee40b98d/workspace/open/src/hotspot/share/opto/loopnode.cpp:5272), pid=23625, tid=24290
#  assert(s1->is_Proj()) failed: projection expected
#
# JRE version: Java(TM) SE Runtime Environment (18.0+24) (fastdebug build 18-ea+24-1608)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+24-1608, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0x137f245]  PhaseIdealLoop::get_late_ctrl_with_anti_dep(LoadNode*, Node*, Node*)+0x8b5
#
# Core dump will be written. Default location: Core dumps may be processed with ""/usr/libexec/abrt-hook-ccpp %s %c %p %u %g %t e %P %I %h"" (or dumping to /scratchr/core.23625)
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp;;;","2021-11-22 22:33;fmatte;Though the fix of JDK-8272574 went in jdk11.0.14-b01, it is not reproducible on 11.0.14-b05.
Failing code is added with this JDK-8252372, which is not in jdk11.0.14.;;;","2021-11-22 22:49;fmatte;Unassigning myself, as issue is present in jdk18 also.;;;","2021-12-01 09:52;chagedorn;I could extract a testcase from the reproducer and I'm now testing a fix over night.

It turned out that we are updating the control input of a data node directly to an ArrayCopy node when splitting a load through a region (new code added by JDK-8272574). This is illegal and is later found with the assertion reported by [~fmatte] above. With JDK-8272574, we set the control input of the split load to the same control input as the memory input into the phi belonging to the region through which we split which is a projection of an ArrayCopy node. The first thought was to update the fix done by JDK-8272574 to disallow the improved rewiring if the memory input into the phi is a projection. However, this did not seem correct to me and I modified the reproducer further. I found a case where we hit the new assertion added by JDK-8272574 with this initial fix attempt. During this investigation I found that JDK-8146792 actually forbids the application of loop predicates all together if we have a data node that is dependent on the projection into a loop. This, however, does not work correctly and we end up with the case described in the review of JDK-8272574.

Therefore, my fix aims to improve fix done in JDK-8146792 to properly bail out of loop predication for the cases reported with JDK-8272574 and the reproducer(s) for this bug and actually undo the fix of JDK-8272574.;;;","2021-12-03 09:15;roboduke;Changeset: 01cb2b98
Author:    Christian Hagedorn <chagedorn@openjdk.org>
Date:      2021-12-03 17:14:10 +0000
URL:       https://git.openjdk.java.net/jdk/commit/01cb2b9883d7c9ecdba0ee5bd42124faed4d080c
;;;","2021-12-06 08:51;ostuart;fixed in Update,  no BPR needed;;;","2021-12-08 03:17;mdoerr;Fix Request (11u):
Fix was backported to 11.0.14-oracle, but is missing in OpenJDK 11.0.14. The 17u backport version applies almost cleanly. Review: https://github.com/openjdk/jdk11u/pull/21;;;","2021-12-08 12:51;vkempik;Hello Martin, looks like we had a ""race condition"" when started working this bug https://github.com/openjdk/jdk11u-dev/pull/692
anyway, if your backport will get approved for critical request then I will withdraw mine.;;;","2021-12-09 01:46;mdoerr;Hello Vladimir, thanks! Good to see that both backport PRs are identical. I think we should ship it with 11.0.14 if possible.;;;",,,,,,,,,,
need to check has_predicated_vectors before calling scalable_predicate_reg_slots,JDK-8277508,5063132,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,yadongwang,yadongwang,yadongwang,2021-11-21 05:23,2021-12-13 02:57,2023-10-01 09:57,2021-11-26 01:10,18,,,,,,,,,,,,,18,hotspot,,0,c2,oraclejdk-na,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,"A separate set of predicate registers is not mandatory for an implementation of scalable vectors. It will cause a failure in some platform which supports scalable vectors without explicit predicated registers, like riscv. Other call sites are all checked except in Matcher::init_first_stack_mask().",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8271515,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v4mj:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-22 00:56;chagedorn;ILW = Failure due to missing check of predicate registers in C2 matcher, low, disable compilation of affected method = HLM = P3;;;","2021-11-26 01:10;roboduke;Changeset: 00a6238d
Author:    Yadong Wang <yadongwang@openjdk.org>
Committer: Fei Yang <fyang@openjdk.org>
Date:      2021-11-26 09:09:02 +0000
URL:       https://git.openjdk.java.net/jdk/commit/00a6238daed4a4aaa6001275ce620646cdabfeb5
;;;",,,,,,,,,,,,,,,,,,,
"compiler/onSpinWait/TestOnSpinWaitAArch64DefaultFlags.java failed with ""OnSpinWaitInst with the expected value 'isb' not found.""",JDK-8277503,5063122,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,eastigeevich,dcubed,dcubed,2021-11-19 20:33,2023-02-21 00:22,2023-10-01 09:57,2021-11-23 12:08,17,18,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,oracle-triage-18,tier6,,,,,,,,,,,,"The following test failed in the JDK18 CI:

compiler/onSpinWait/TestOnSpinWaitAArch64DefaultFlags.java

Here's a snippet from the log file:

----------System.err:(12/904)----------
java.lang.RuntimeException: OnSpinWaitInst with the expected value 'isb' not found.
	at compiler.onSpinWait.TestOnSpinWaitAArch64DefaultFlags.checkFinalFlagsEqualTo(TestOnSpinWaitAArch64DefaultFlags.java:72)
	at compiler.onSpinWait.TestOnSpinWaitAArch64DefaultFlags.main(TestOnSpinWaitAArch64DefaultFlags.java:90)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.RuntimeException: OnSpinWaitInst with the expected value 'isb' not found.
JavaTest Message: shutting down test

STATUS:Failed.`main' threw exception: java.lang.RuntimeException: OnSpinWaitInst with the expected value 'isb' not found.
----------rerun:(35/8023)*----------",,,,,,,,,,JDK-8280407,JDK-8302960,JDK-8302869,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8302853,,,,,,,,,,,,,,,,,,,,,,JDK-8277137,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,linux,,,,,,"0|i2v4kb:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-20 06:17;dcubed;Two Tier6 job sets in a row (so far)...;;;","2021-11-23 00:24;chagedorn;ILW = Test failure for newly added test on aarch64, some occurrences in tier6 and only with specific CPU and with open release build, no workaround = MLH = P4;;;","2021-11-23 00:53;chagedorn;Test was not run with a special flag. Seen only with aarch64 open release build:
openjdk 18-ea 2022-03-15
OpenJDK Runtime Environment (build 18-ea+25-1650)
OpenJDK 64-Bit Server VM (build 18-ea+25-1650, mixed mode, sharing)

CPU info:
CPU: total 8 (initial active 8) 0x41:0x3:0xd0c:1, fp, simd, evtstrm, aes, pmull, sha1, sha256, crc, lse, dcpop

Test was added by JDK-8277137. [~eastigeevich] can you have a look at it?;;;","2021-11-23 04:28;eastigeevich;I managed to reproduce the failure on one of my arm64 machines.;;;","2021-11-23 04:51;eastigeevich;OnSpinWaitInst/OnSpinWaitInstCount  are diagnostic options.
The test fails only in release builds because 'XX:+PrintFlagsFinal' does not print diagnostic options in release builds.
The fix is to use '-XX:+UnlockDiagnosticVMOptions'.;;;","2021-11-23 05:15;chagedorn;That makes sense. Thanks for the quick response! And don't forget to un-problemlist the test with your fix ;-);;;","2021-11-23 12:08;roboduke;Changeset: 7b2d823e
Author:    Evgeny Astigeevich <eastig@amazon.com>
Committer: Paul Hohensee <phh@openjdk.org>
Date:      2021-11-23 20:05:57 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7b2d823e842e6a66dbe46b048da44ca9e5485c75
;;;","2021-11-23 13:26;dcubed;The fix for this issue is in jdk-18+25-1699.;;;","2022-01-19 08:06;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/107
Date: 2022-01-19 16:00:18 +0000;;;","2022-01-19 08:38;eastigeevich;Fix Request (17u)

Fix of the test which is a part of JDK-8277137 backport.
The original patch removed the test from test/hotspot/jtreg/ProblemList.txt. This change causes a conflict because the test does not exist and is not excluded in jdk17.
The change to the test applies cleanly.;;;",,,,,,,,,,,
Revisit PathFileObject.getCharContent and friends,JDK-8277501,5063118,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prappo,prappo,prappo,2021-11-19 17:01,2023-04-05 23:17,2023-10-01 09:57,2023-03-31 16:19,18,,,,,,,,,,,,,21,tools,,0,noreg-cleanup,,,,,,,,,,,,,,,,"PathFileObject.getCharContent reads the input stream into a byte buffer using BaseFileManager.makeByteBuffer. Coding such functionality is not trivial. For example, deciding on whether to read or not, must not solely depend on the result of calling available() on an input stream. To fix this and avoid other possible problems, we could use a method like InputStream.readAllBytes.

One problem with readAllBytes here is that it returns a byte array. This byte array will either need to be wrapped into a new byte buffer or its contents would need to be transferred into an existing byte buffer.

Currently an input stream is manually read in a pooled byte buffer.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v4jf:",9223372036854775807,b17,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,,,"2021-11-19 17:08;prappo;I stumbled upon this in the context of JDK-8276892 while trying to find out if IOException thrown from FileObject.getCharContent can be _emulated_.;;;","2023-02-25 14:45;acobbs;What about this idea? I was working on com.sun.tools.javac.util.ByteBuffer recently for JDK-8302514 so that's where this comes from.

Warning: the following is confusing due to there being two classes named ""ByteBuffer"".

Notation:

* util.ByteBuffer = com.sun.tools.javac.util.ByteBuffer
* nio.ByteBuffer = java.nio.ByteBuffer

The idea would be:

* Store a util.ByteBuffer instead of a nio.ByteBuffer in the byteBufferCache
* Use util.ByteBuffer.appendStream() (new & improved!) to read in the file content
* Add a new method util.ByteBuffer.toByteBuffer() which returns a nio.ByteBuffer view of the data via nio.ByteBuffer.wrap()
* Refactor/simplify BaseFileManager.makeByteBuffer() accordingly;;;","2023-02-25 16:21;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/12755
Date: 2023-02-26 00:16:43 +0000;;;","2023-03-31 16:19;dukebot;Changeset: 8eb4e7e0
Author:    Archie L. Cobbs <archie.cobbs@gmail.com>
Committer: Vicente Romero <vromero@openjdk.org>
Date:      2023-03-31 23:17:56 +0000
URL:       https://git.openjdk.org/jdk/commit/8eb4e7e07e9211aabcb0f22696e9c572dac7a59f
;;;",,,,,,,,,,,,,,,,,
Last column cell in the JTable row is read as empty cell,JDK-8277497,5063112,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,asemenov,landrews,landrews,2021-11-19 15:22,2022-11-10 23:52,2023-10-01 09:57,2021-12-06 09:40,17,18,,,,,,,,,,,,18,client-libs,,0,17-bp,a11y,accessibility,cssn22_08_02,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok-next,jdk17u-fix-yes,macos,regression,regression_8271071,,,,,"Testing https://bugs.openjdk.java.net/browse/JDK-8271071
Step to reproduce
1) Run SwingSet2 in JDK 18 ( I used b24 )
2) Enable Voiceover.
3) Select JTable demo
4) Click any row in the table or select the first row . Observe that row is selected & VoiceOver reads the column values or navigate the columns one by one by pressing tab key. When the focus reaches the last column ( Favourite Food ) Observe that column value is read as null. If you hear the same then the bug is reproduced. 

I was expecting as either to read the value as image or something else instead of empty cell.  I have attached the screen shot of the same.

Test environment details :
MacBook Pro , macOS Catalina version 10.15.7
 ",,,,,,,,,,JDK-8281046,JDK-8285765,JDK-8292714,JDK-8292655,JDK-8296849,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-19 15:19;landrews;Screen Shot 2021-11-19 at 1.48.08 PM.png;https://bugs.openjdk.org/secure/attachment/97154/Screen+Shot+2021-11-19+at+1.48.08+PM.png","2021-11-19 15:19;landrews;Screen Shot 2021-11-19 at 12.57.33 PM.png;https://bugs.openjdk.org/secure/attachment/97153/Screen+Shot+2021-11-19+at+12.57.33+PM.png",,,,,,,x86,,,,,,,,,,,,,os_x_10.15,,,,,,"0|i2v4i3:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4785f47c,,,,,,,,,"2021-12-06 09:40;roboduke;Changeset: 70bad89b
Author:    Artem Semenov <asemenov@openjdk.org>
Date:      2021-12-06 17:39:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/70bad89b012eb200ca1e76f384a6e5fb307cf26d
;;;","2021-12-08 03:21;asemenov;Fix request (17u)
Hi all,

This pull request contains a backport of commit 70bad89b from the openjdk/jdk repository.

The commit being backported was authored by Artem Semenov on 6 Dec 2021 and was reviewed by Anton Tarasov, Alexander Zuev and Pankaj Bansal.

Thanks!
PR: https://github.com/openjdk/jdk17u/pull/324;;;","2021-12-23 01:29;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/34
Date: 2021-12-23 09:24:28 +0000
;;;","2022-11-01 09:50;wkemper;Fix request 11u

Clean backport for parity with oracle-11.
PR: https://github.com/openjdk/jdk11u-dev/pull/1490/;;;","2022-11-01 09:53;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1490
Date: 2022-11-01 16:46:32 +0000;;;",,,,,,,,,,,,,,,,
"[REDO] Quarantined jpackage apps are labeled as ""damaged""",JDK-8277493,5063107,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,almatvee,dcubed,dcubed,2021-11-19 11:31,2022-12-11 21:43,2023-10-01 09:57,2022-05-13 11:40,18,,,,,,,,,,,,,19,tools,,0,jdk17u-fix-request,jdk17u-fix-yes,macos,regression,regression_8276150,sn_106,sn_108,sn_111,sn_117,sn_118,,,,,,,"The following tests failed in the JDK18 CI:

tools/jpackage/share/SimplePackageTest.java
tools/jpackage/share/MultiLauncherTwoPhaseTest.java
tools/jpackage/share/LicenseTest.java#id0
tools/jpackage/share/InstallDirTest.java#id0
tools/jpackage/share/EmptyFolderTest.java
tools/jpackage/share/ArgumentsTest.java
tools/jpackage/share/EmptyFolderPackageTest.java
tools/jpackage/share/AppLauncherEnvTest.java
tools/jpackage/share/AppContentTest.java
tools/jpackage/share/AddLShortcutTest.java
tools/jpackage/share/AddLauncherTest.java#id1
tools/jpackage/share/jdk/jpackage/tests/NoMPathRuntimeTest.java
tools/jpackage/share/jdk/jpackage/tests/MultipleJarAppTest.java
tools/jpackage/share/jdk/jpackage/tests/ModulePathTest3.java
tools/jpackage/share/jdk/jpackage/tests/ModulePathTest2.java
tools/jpackage/share/jdk/jpackage/tests/ModulePathTest.java
tools/jpackage/share/jdk/jpackage/tests/MainClassTest.java
tools/jpackage/share/jdk/jpackage/tests/JLinkOptionsTest.java
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsTest.java
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsEqualsTest.java#id1
tools/jpackage/share/jdk/jpackage/tests/JavaOptionsEqualsTest.java#id0
tools/jpackage/share/jdk/jpackage/tests/DotInNameTest.java
tools/jpackage/share/jdk/jpackage/tests/CookedRuntimeTest.java
tools/jpackage/share/jdk/jpackage/tests/BasicTest.java
tools/jpackage/share/jdk/jpackage/tests/AppVersionTest.java
tools/jpackage/macosx/NameWithSpaceTest.java
tools/jpackage/macosx/MacPropertiesTest.java
tools/jpackage/macosx/MacFileAssociationsTest.java
tools/jpackage/macosx/HostArchPkgTest.java
tools/jpackage/macosx/DmgContentTest.java
tools/jpackage/macosx/ArgumentsFilteringTest.java


Here's a log file snippet from tools/jpackage/share/SimplePackageTest.java:

[17:14:02.320] TRACE: Clearing PATH in environment
[17:14:02.320] TRACE: exec: Execute [/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S136985/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/cc47db66-d714-414b-95ce-458cd2fe0a26/runs/d45112a4-66bc-4c51-92fb-888d53d63b81/testoutput/test-support/jtreg_open_test_jdk_tier2_part2/scratch/0/./test/unpacked-pkg/unpacked/Applications/SimplePackageTest.app/Contents/MacOS/SimplePackageTest](1); inherit I/O; in directory [./test]...
[17:14:02.322] TRACE: exec: Done. Exit code: 137
[17:14:07.474] TRACE: Clearing PATH in environment
[17:14:07.474] TRACE: exec: Execute [/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S136985/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/cc47db66-d714-414b-95ce-458cd2fe0a26/runs/d45112a4-66bc-4c51-92fb-888d53d63b81/testoutput/test-support/jtreg_open_test_jdk_tier2_part2/scratch/0/./test/unpacked-pkg/unpacked/Applications/SimplePackageTest.app/Contents/MacOS/SimplePackageTest](1); inherit I/O; in directory [./test]...
[17:14:07.482] TRACE: exec: Done. Exit code: 137
[17:14:12.628] TRACE: Clearing PATH in environment
[17:14:12.628] TRACE: exec: Execute [/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S136985/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/cc47db66-d714-414b-95ce-458cd2fe0a26/runs/d45112a4-66bc-4c51-92fb-888d53d63b81/testoutput/test-support/jtreg_open_test_jdk_tier2_part2/scratch/0/./test/unpacked-pkg/unpacked/Applications/SimplePackageTest.app/Contents/MacOS/SimplePackageTest](1); inherit I/O; in directory [./test]...
[17:14:12.633] TRACE: exec: Done. Exit code: 137
[17:14:17.692] ERROR: Expected [0]. Actual [137]: Check command [/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S136985/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/cc47db66-d714-414b-95ce-458cd2fe0a26/runs/d45112a4-66bc-4c51-92fb-888d53d63b81/testoutput/test-support/jtreg_open_test_jdk_tier2_part2/scratch/0/./test/unpacked-pkg/unpacked/Applications/SimplePackageTest.app/Contents/MacOS/SimplePackageTest](1) exited with 0 code
[17:14:17.693] [  FAILED  ] SimplePackageTest.test; checks=18
[17:14:17.693] [==========] 1 tests ran
[17:14:17.693] [  PASSED  ] 0 tests
[17:14:17.694] [  FAILED  ] 1 test, listed below
[17:14:17.694] [  FAILED  ] SimplePackageTest.test; workDir=[./test]
[17:14:17.694] 1 FAILED TEST
----------System.err:(62/4616)----------


Originally I thought these failures were due to the ""crowd"" service
outage earlier today, but these same failures happened in
jdk-18+25-1653-tier2 and jdk-18+25-1654-tier2.",,,,,,,,,,JDK-8289978,JDK-8290905,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8287125,JDK-8298488,,,,,,,,,,,,,,JDK-8276150,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,os_x,,,,,,"0|i2v4gz:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3656b41f,,,,,,,,,"2021-11-19 11:36;dcubed;One changeset in the jdk-18+25-1653-tier2 build-ID caught my eye:

JDK-8276150 Quarantined jpackage apps are labeled as ""damaged"";;;","2021-11-19 12:51;dcubed;That's three Tier2 job sets in a row on three different macosx-aarch64 machines.
I'm preparing a [BACKOUT] of JDK-8276150.;;;","2021-11-19 20:40;dcubed;Now that JDK-8276150 is backed out, this bug is changed
from P2 -> P3 to match the original bug fix and this bug
becomes the [REDO].;;;","2022-04-13 07:27;rkennke;One test is currently failing regularily here (as part of tier2 runs), could this be related, or should I open a separate bug or is it perhaps a config issue on my build/machine?

failing test:
tools/jpackage/share/AppLauncherEnvTest.java

failure log:
http://cr.openjdk.java.net/~rkennke/AppLauncherEnvTest.jtr
;;;","2022-04-13 14:18;asemenyuk;[~rkennke], http://cr.openjdk.java.net/~rkennke/AppLauncherEnvTest.jtr failure seems to be an unrelated issue. It is either a test bug, or something is off in the environment. Please file a separate CR.;;;","2022-05-03 21:00;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8527
Date: 2022-05-04 03:56:10 +0000;;;","2022-05-13 11:40;dukebot;Changeset: 273c7329
Author:    Alexander Matveev <almatvee@openjdk.org>
Date:      2022-05-13 18:39:16 +0000
URL:       https://git.openjdk.java.net/jdk/commit/273c7329e7dff6e97ffe5b299a6bbb5de8ea9190
;;;","2022-07-21 04:10;goetz;Fix request [17u]

I backport this for parity with 17.0.5-oracle.
Clean backport except for a patch to a test not in 17.
SAP nightly testing passed.;;;","2022-07-21 04:11;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/576
Date: 2022-07-21 11:03:54 +0000;;;",,,,,,,,,,,,
"Zero: Fix _fast_{i,f}access_0 bytecodes handling",JDK-8277485,5063096,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jiefu,jiefu,jiefu,2021-11-19 07:30,2023-01-03 09:34,2023-10-01 09:57,2021-11-20 02:14,18,,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-yes,tencent-interest,,,,,,,,,,,,,,"The bug can be reproduced by build zero VM on x86_32

```
Creating jdk/modules/jdk.jpackage/jdk/jpackage/internal/resources/jpackageapplauncher from 3 file(s)
Creating jdk/modules/jdk.jpackage/jdk/jpackage/internal/resources/libjpackageapplauncher.so from 17 file(s)
Compiling 4 files for BUILD_JIGSAW_TOOLS
Optimizing the exploded image
Error occurred during initialization of boot layer
java.lang.module.FindException: Error reading module: /home/jdk/build/linux-x86-zero-release/jdk/modules/java.desktop
Caused by: java.lang.module.InvalidModuleDescriptorException: Package javax.print.attribute not found in module
ExplodedImageOptimize.gmk:39: recipe for target '/home/jdk/build/linux-x86-zero-release/jdk/_optimize_image_exec.marker' failed
make[3]: *** [/home/jdk/build/linux-x86-zero-release/jdk/_optimize_image_exec.marker] Error 1
make/Main.gmk:437: recipe for target 'exploded-image-optimize' failed
make[2]: *** [exploded-image-optimize] Error 2

ERROR: Build failed for target 'images' in configuration 'linux-x86-zero-release' (exit code 2)
Stopping sjavac server
```",,,,,,,,,,JDK-8299550,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8008243,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v4ej:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-20 02:14;roboduke;Changeset: 0a9e76c4
Author:    Jie Fu <jiefu@openjdk.org>
Date:      2021-11-20 10:12:26 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0a9e76c4f9d966015c19e87e3eb59ceb7489459f
;;;","2022-11-23 03:48;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/925
Date: 2022-11-23 11:38:55 +0000;;;","2022-11-23 06:55;shade;Fix Request (17u)

Follow-up after JDK-8008243. Applies cleanly. Testing passes (see 17u PR).;;;",,,,,,,,,,,,,,,,,,
Obsolete seldom used CDS flags,JDK-8277481,5063091,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,hseigel,hseigel,hseigel,2021-11-19 06:48,2021-12-22 06:52,2023-10-01 09:57,2021-12-13 05:37,19,,,,,,,,,,,,,19,hotspot,,0,cds,noreg-cleanup,,,,,,,,,,,,,,,"Obsolete -XX CDS flags UseSharedSpaces, RequireSharedSpaces, DumpSharedSpaces, and DynamicDumpSharedSpaces.  These flags were deprecated in JDK-18.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278235,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278638,JDK-8276795,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v4df:",9223372036854775807,b02,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-05 13:58;dholmes;[~hseigel]why the subtasks? Shouldn't this all be done in one hit?;;;","2021-12-06 05:57;hseigel;[~dholmes] Separate tasks would make the changes easier to review.  Combined changes affect > 70 files.  And the changes for each flag are independent of each other.;;;","2021-12-06 20:57;dholmes;> 70 files!

Wow! That is a big set of changes. As the logical function of most of these flags is still controllable via -Xshare, I'm wondering exactly how the flags will be replaced? The Xshare argument must still be used to set one or more ""flags"", they will presumably be CDS global variables rather than global flags - so this should just be a mapping operation: old-flag-name -> new-flag-name. It may even be possible to keep the names the same and just add a ""namespace"" qualifier when needed. ??;;;","2021-12-07 00:07;iklam;I was hoping that 

  product(bool, RequireSharedSpaces, false,                                 \
          ""(Deprecated) Require shared spaces for metadata"")                \

would be replaced with this (probably in globalDefinitions.hpp)

   extern bool RequireSharedSpaces;

so we don't need to change any of the existing code that uses these variables.

If we want to clean things up, like ""if (RequireSharedSpaces)""   =>   ""if (CDS::requireSharedSpaces())"" that should be done in a separate RFE.;;;","2021-12-07 09:00;hseigel;Thanks.  I'll work on a smaller implementation based on Ioi's suggestion to change the obsolete options to globals in globalDefinitions.hpp.;;;","2021-12-13 05:37;roboduke;Changeset: 14f7385a
Author:    Harold Seigel <hseigel@openjdk.org>
Date:      2021-12-13 13:35:37 +0000
URL:       https://git.openjdk.java.net/jdk/commit/14f7385a72972e1f15b3103cc75a60c5733f6d98
;;;",,,,,,,,,,,,,,,
Update JDK_DOCS property to point to JDK 17 docs,JDK-8277475,5063085,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,kcr,kcr,kcr,2021-11-19 06:09,2021-12-08 04:01,2023-10-01 09:57,2021-12-01 05:01,jfx18,,,,,,,,,,,,,jfx18,javafx,,0,noreg-build,sn_107,,,,,,,,,,,,,,,"Now that we are using JDK 17 (17.0.1) as the boot JDK for JavaFX, it's time to update the docs bundle to point to the JDK 17 docs (we're currently pointing to JDK 12).

I will need to also create and host a zip bundle and add its checksum to gradle/verification-metadata.xml -- see JDK-8266757 -- to avoid breaking our internal CI build.
",,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276144,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8266757,JDK-8210508,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v4c3:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1556b386,,,,,,,,,"2021-12-01 05:01;roboduke;Changeset: 3d572135
Author:    Kevin Rushforth <kcr@openjdk.org>
Date:      2021-12-01 13:00:50 +0000
URL:       https://git.openjdk.java.net/jfx/commit/3d572135d44b41945b87c297b33b3527814b7e51
;;;",,,,,,,,,,,,,,,,,,,,
jarsigner does not check if algorithm parameters are disabled,JDK-8277474,5063084,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,hchao,mullan,mullan,2021-11-19 05:47,2022-08-09 09:01,2023-10-01 09:57,2022-03-03 15:03,,,,,,,,,,,,,,19,security-libs,,0,security-disabled-algs,,,,,,,,,,,,,,,,"Currently, the jarsigner tool does not warn you if algorithms used in signature/digest parameters are using legacy or disabled algorithms. For example, the parameters for the RSASSA-PSS signature algorithm contain two fields (hashAlgorithm and maskGenAlgorithm) that should be checked against the algorithm constraint properties.

These algorithms however, are properly restricted at runtime, and if disabled, the JAR is treated as unsigned.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275887,JDK-8283665,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v4bv:",9223372036854775807,b13,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2ec284e3,,,,,,,Verified,,"2022-02-22 12:24;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7580
Date: 2022-02-22 20:18:19 +0000;;;","2022-02-22 14:06;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7582
Date: 2022-02-22 22:00:05 +0000;;;","2022-03-03 15:03;dukebot;Changeset: fb6b929e
Author:    Hai-May Chao <hchao@openjdk.org>
Date:      2022-03-03 23:01:26 +0000
URL:       https://git.openjdk.java.net/jdk/commit/fb6b929e6e935baeccfd03a7fbc048cc8b531ce5
;;;",,,,,,,,,,,,,,,,,,
JFileChooser with Metal L&F doesn't show non-canonical UNC path in - Look in,JDK-8277463,5062922,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,psadhukhan,webbuggrp,webbuggrp,2021-11-17 09:39,2022-01-25 00:02,2023-10-01 09:57,2022-01-11 22:58,11,17,18,8,,,,,,,,,,19,client-libs,,0,additional-information-received,dcspn,reproducer-yes,webbug,,,,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
Windows 10, 64 Bit

OpenJDK 17.0.1

A DESCRIPTION OF THE PROBLEM :
When opening a JFileChooser in a non-canonical UNC path (e.g. \\pc-name\dir\..), the ""Look in"" Combobox at the top for quickly changing directory is empty, even though the main content correctly lists the files contained in the directory.

It only happens with MetalLookAndFeel. When Changing to WindowsLookAndFeel, everything works as expected.

Comparing the two, MetalFileChooserUI.addItem(File directory) calls ShellFolder.getNormalizedFile(directory), whereas WindowsFileChooserUI.addItem(File director) just calls directory.getCanonicalPath().

ShellFolder.getNormalizedFile checks if the path is already canonical, and returns it unchanged if so. Otherwise, it converts the file tu a normalized URI and back to a File again, supposedly to better handle symbolic links, according to a comment. But in this conversion, one of the two leading backslashes is lost. For example, when passing ""\\pc-name\dir\.."", the result is ""\pc-name"", but it should be ""\\pc-name"".

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Execute the give Java program, passing a non-canonical UNC path, e.g. ""\\pc-name\dir\.."".

You can comment/uncomment the lines that set a LookAndFeel to test both and compare.

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
The file chooser should show the given directory in the ""Look in"" component, and list its content.
ACTUAL -
With the MetalLookAndFeel, the ""Look in"" component remains empty, but the directory content is listed correctly.

---------- BEGIN SOURCE ----------
package swing;

import javax.swing.JFileChooser;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class UNCFileChooserIssue {

    public static void main(String[] args) throws UnsupportedLookAndFeelException, ClassNotFoundException, InstantiationException, IllegalAccessException {
        if (args.length == 0) {
            System.out.println(""Usage: java UNCFileCHooserIssue <path>"");
            System.exit(1);
        }
        // Comment/uncomment to change LookAndFeel
        UIManager.setLookAndFeel(""javax.swing.plaf.metal.MetalLookAndFeel"");
        //UIManager.setLookAndFeel(""com.sun.java.swing.plaf.windows.WindowsLookAndFeel"");
        new JFileChooser(args[0]).showOpenDialog(null);
    }
}

---------- END SOURCE ----------

CUSTOMER SUBMITTED WORKAROUND :
The workaround is to manually ensure that only canonical paths are given to JFileChooser, such that the ""lossy"" conversion doesn't happen.

FREQUENCY : always


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-22 09:43;pnarayanaswa;Capture1.PNG;https://bugs.openjdk.org/secure/attachment/97172/Capture1.PNG","2021-11-19 04:19;pnarayanaswa;UNCFileChooserIssue.java;https://bugs.openjdk.org/secure/attachment/97150/UNCFileChooserIssue.java",,,,,,,x86_64,,,,,,,,,,,,,windows_10,,,,,,"0|i2v3bv:",9223372036854775807,b05,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@568a5b31,,,,,,,,,"2021-11-19 04:20;pnarayanaswa;Checked  with attached test in Windows 10, issue is not reproducible
Test Result:
=========
8u311: Pass
17: Pass
18ea23: Pass

Note: Ensure Network path of the folder is Sharing, ;;;","2021-11-22 09:03;pnarayanaswa;Additional Information from submitter:
===========================
I noticed that you couldn't reproduce, but you used a canonical path instead of a non-canonical one.

To get a non-canonical path, you can add a sub-directory followed by ""\.."" to your path.

As I said, it works fine with canonical paths, and indeed the best workaround is to only provide canonical paths to JFileChooser.
But sometimes it is handy to be able to use non-canonical paths when constructing them programmatically.;;;","2021-11-22 09:43;pnarayanaswa;With non-canonical path, ""\\COMPUTER-NAME\DIRECTORY\..""
With Metal LookAndFeel, issue is observed, Look in - is empty, content of the directory is listed. <attached screenshot>
Test Result:
========
8: Fail
8u311: Fail
11: Fail
11.0.13: Fail
17: Fail
18ea23: Fail
;;;","2022-01-11 22:58;roboduke;Changeset: 319d2303
Author:    Masanori Yano <myano@openjdk.org>
Committer: Prasanta Sadhukhan <psadhukhan@openjdk.org>
Date:      2022-01-12 06:57:36 +0000
URL:       https://git.openjdk.java.net/jdk/commit/319d23033f4a814935f10885aef725c818b0baed
;;;",,,,,,,,,,,,,,,,,
"AccessControlException: access denied (""java.net.NetPermission"" ""getCookieHandler"")",JDK-8277457,5063065,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,kcr,jpereda,jpereda,2021-11-19 03:25,2022-02-23 04:46,2023-10-01 09:57,2021-12-01 07:45,jfx14,jfx17,,,,,,,,,,,,jfx18,javafx,,0,sn_106,sn_107,,,,,,,,,,,,,,,"When a Policy and a SecurityManager are set, loading an URL from WebView throws this (non-fatal) exception several times:

Exception in thread ""JavaFX Application Thread"" java.security.AccessControlException: access denied (""java.net.NetPermission"" ""getCookieHandler"")
        at java.base/java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)
        at java.base/java.security.AccessController.checkPermission(AccessController.java:1036)
        at java.base/java.lang.SecurityManager.checkPermission(SecurityManager.java:408)
        at java.base/java.net.CookieHandler.getDefault(CookieHandler.java:80)
        at javafx.web@18-ea/com.sun.webkit.network.CookieJar.fwkGet(CookieJar.java:65)
        at javafx.web@18-ea/com.sun.webkit.network.URLLoaderBase.twkDidFinishLoading(Native Method)
        at javafx.web@18-ea/com.sun.webkit.network.HTTP2Loader.notifyDidFinishLoading(HTTP2Loader.java:578)
        at javafx.web@18-ea/com.sun.webkit.network.HTTP2Loader.lambda$callBackIfNotCanceled$10(HTTP2Loader.java:441)
        at javafx.graphics@18-ea/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)
        at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)
        at javafx.graphics@18-ea/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)
        at javafx.graphics@18-ea/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)

WebView calls CookieHandler.getDefault(); in several places (like in https://github.com/openjdk/jfx/blob/master/modules/javafx.web/src/main/java/com/sun/webkit/network/CookieJar.java#L65).

This happens since the support for HTTP2 was introduced by JDK-8211308, right before 14-ea+4 was released, using JDK greater than 11, on any platform (tested on MacOS 11.6, Windows 10 and Ubuntu 20.04).

While the JavaDoc (https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/net/CookieHandler.html#getDefault()) is really clear about this case:

Throws: SecurityException – If a security manager has been installed and it denies NetPermission(""getCookieHandler"")

adding such permission doesn't solve the issue.

The attached test reproduces the issue. It sets the policy and permissions by code, but running it with -Djava.security.manager and -Djava.security.policy=<file> instead gives the same results.",,,,,,,,,,JDK-8281655,JDK-8281973,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-19 03:17;jpereda;NetPermissionTest.java;https://bugs.openjdk.org/secure/attachment/97148/NetPermissionTest.java",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v47n:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5a8b92bd,,,,,,,,,"2021-11-19 05:05;kcr;[~jpereda] The security manager is deprecated for removal as of JDK 17, so we likely won't spend time on this bug. Do you want to take it?;;;","2021-11-19 11:19;jpereda;[~kcr] I know, but it can take a while until it's finally removed? 
I already tried adding the net permission to the existing policy files per javafx module to no avail, currently I don't have a fix.;;;","2021-11-19 13:15;kcr;Yes, it will be a while before the security manager is actually removed. Adding a permission to the existing security policy files for the javafx modules likely wouldn't have any effect, since it is the application that needs to assert that permission.

I'll take a quick look.;;;","2021-11-19 14:29;kcr;Hmm. This is an odd bug. I can reproduce it and can also confirm that granting the application the needed permission is insufficient. Likewise, granting the application AllPermission is insufficient.

A likely fix is to wrap the calls in com.sun.webkit.network.CookieJar to ""CookieHandler.getDefault()"" in a doPrivileged, as is done in HTTP2Loader when the HttpClient is created. This fixes the problem, but I would want to understand why it is failing before just applying the fix.
;;;","2021-11-20 12:41;jpereda;I've tested such fix, it seems to solve the issue: there are no more ACE exceptions, and there is no need to set the NetPermission if AllPermission is set.;;;","2021-11-23 01:53;jpereda;[~kcr] Are you going to create a PR for this or shall I do it?

I don't know why is it failing, other than the calls to CookieHandler.getDefault() from CookieJar are the only ones without doPrivileged. WebPage and HTTP2Loader use it, as you already pointed out.;;;","2021-11-24 11:38;kcr;I can take it.;;;","2021-11-24 15:06;kcr;I'm not sure why the workaround is ineffective, but in any case, it is clearly a bug that needs to be fixed in JavaFX.;;;","2021-12-01 07:45;roboduke;Changeset: 5bd72a7c
Author:    Kevin Rushforth <kcr@openjdk.org>
Date:      2021-12-01 15:44:21 +0000
URL:       https://git.openjdk.java.net/jfx/commit/5bd72a7c991d5182f4fd2cff67174cf7fa3fde85
;;;","2022-02-11 08:52;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx17u/pull/30
Date: 2022-02-11 16:48:20 +0000;;;","2022-02-16 05:43;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx11u/pull/70
Date: 2022-02-16 13:39:14 +0000;;;",,,,,,,,,,
java.lang.reflect.Field::set on static field with invalid argument type should throw IAE,JDK-8277451,5063061,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,mchung,yrodiere,yrodiere,2021-11-19 01:54,2022-02-10 14:26,2023-10-01 09:57,2021-11-23 09:15,18,,,,,,,,,,,,,18,core-libs,,0,hibernate-found,regression,,,,,,,,,,,,,,,"In JDK17 as well as JDK18-18-ea+20, when one called `Field#set()` on a static field with an argument of invalid type, it used to throw an {{IllegalArgumentException}}.

In JDK18-ea+23 and JDK18-ea+24, it throws a {{NullPointerException}}:

{noformat}
java.lang.NullPointerException: Cannot invoke ""Object.getClass()"" because ""obj"" is null
	at java.base/jdk.internal.reflect.MethodHandleObjectFieldAccessorImpl.set(MethodHandleObjectFieldAccessorImpl.java:114)
	at java.base/java.lang.reflect.Field.set(Field.java:818)
	at org.hibernate.jdk.playground.JavaReflectTest.lambda$staticField_invalidArgumentType$0(JavaReflectTest.java:16)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:55)
	... 68 more
{noformat}

It seems the NPE is caused by new code expecting the ""self"" argument to be non-null when building the {{IllegalArgumentException}}. But for static fields, ""self"" is always {{null}}.

Reproducer: 

* Clone https://github.com/yrodiere/jdk-playground.git
* Switch to branch {{java-reflect-npe}}
* Using JDK17, run {{./mvw clean test}} => No problem
* Using JDK18-ea+23, run {{./mvw clean test}} => Test failure

This bug was discovered by running the Hibernate ORM test suite on JDK 18 as part of the [OpenJDK Quality Outreach program|https://wiki.openjdk.java.net/display/quality/Quality+Outreach].","openjdk version ""18-ea"" 2022-03-15
OpenJDK Runtime Environment (build 18-ea+23-1525)
OpenJDK 64-Bit Server VM (build 18-ea+23-1525, mixed mode, sharing)

Linux yrodiere.redhat 5.14.17-201.fc34.x86_64 #1 SMP Mon Nov 8 14:01:06 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux {noformat}
 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277510,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,b22,18,,linux,,,,,,"0|i2v46r:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@313ae9a0,,,,,,,Verified,,"2021-11-23 09:15;roboduke;Changeset: 03206726
Author:    Mandy Chung <mchung@openjdk.org>
Date:      2021-11-23 17:14:59 +0000
URL:       https://git.openjdk.java.net/jdk/commit/032067264fd73cd2f338838d6178f8af24d228b0
;;;",,,,,,,,,,,,,,,,,,,,
compiler/vectorapi/TestLongVectorNeg.java fails with release VMs,JDK-8277449,5063059,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jiefu,jiefu,jiefu,2021-11-19 01:28,2022-02-03 00:54,2023-10-01 09:57,2021-11-19 02:39,17,18,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,oracle-triage-18,tencent-interest,,,,,,,,,,,,"Error: VM option 'AlwaysIncrementalInline' is develop and is available only in debug version of VM.
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.",,,,,,,,,,JDK-8280566,JDK-8281206,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275643,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v46b:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-19 01:47;thartmann;ILW = Test fails with product builds, single test with product builds, no workaround = MMH = P3;;;","2021-11-19 02:39;roboduke;Changeset: b15e6f07
Author:    Jie Fu <jiefu@openjdk.org>
Date:      2021-11-19 10:38:42 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b15e6f076afe5ac68e9af68756860d0b25adea4b
;;;","2022-02-01 02:53;goetz;Fix request [17u]

I backport this for parity with 17.0.3-oracle.
No risk, only a test change.
Clean backport.;;;","2022-02-01 02:58;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/140
Date: 2022-02-01 10:53:37 +0000;;;",,,,,,,,,,,,,,,,,
Hotspot C1 compiler crashes on Kotlin suspend fun with loop,JDK-8277447,5063057,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,iveresov,mkartashev,mkartashev,2021-11-19 00:30,2022-01-22 02:04,2023-10-01 09:57,2021-12-17 08:31,11,17,18,,,,,,,,,,,18,hotspot,,0,c1,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-11,oracle-triage-17,oracle-triage-18,redhat-interest,,,,,,,,"The crashes have been observed with a release build of JDK, but a reliable reproducer requires a [fast]debug build where an assertion failure occurs in C1 code:

# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/c1_Instruction.cpp:849
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/opt/buildAgent/work/bc84ff8f5e63b59d/src/hotspot/share/c1/c1_Instruction.cpp:849), pid=426790, tid=426803
#  assert(existing_value == new_state->local_at(index) || (existing_value->as_Phi() != __null && existing_value->as_Phi()->as_Phi()->block() == this)) failed: phi function required
...


The original crash occurs when running IntelliJ IDEA, but a heavily reduced sample is presented here. To reproduce:
1. Compile this Kotlin code

$ cat Main.kt
suspend fun yield(s: String) { 
    println(""Success"");
    System.exit(0)
}

suspend fun test(s: String) {
    while (true) {
        yield(s)
    }
}

suspend fun main() {
    test("""")
}

like so

$ kotlinc Main.kt -include-runtime -d test.jar

Alternatively, download the attached test.jar.

2. Run a [fast]debug build of java with these options

$ java -Xcomp -XX:CompileCommand=compileonly,MainKt::test -cp ./test.jar MainKt


3. Observe the crash

---------------  T H R E A D  ---------------

Current thread (0x00007f679c3a6800):  JavaThread ""C1 CompilerThread0"" daemon [_thread_in_native, id=1253817, stack(0x00007f676d489000,0x00007f676d58a000)]


Current CompileTask:
C1:  11798   29    b  3       MainKt::test (136 bytes)

Stack: [0x00007f676d489000,0x00007f676d58a000],  sp=0x00007f676d5878f0,  free space=1018k
Native frames: (J=compiled Java code, A=aot compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x1a7be8a]  VMError::report_and_die(int, char const*, char const*, __va_list_tag*, Thread*, unsigned char*, void*, void*, char const*, int, unsigned long)+0x38a
V  [libjvm.so+0x1a7cdc5]  VMError::report_and_die(Thread*, void*, char const*, int, char const*, char const*, __va_list_tag*)+0x35
V  [libjvm.so+0xc25eaa]  report_vm_error(char const*, int, char const*, char const*, ...)+0x10a
V  [libjvm.so+0x80d773]  BlockBegin::try_merge(ValueStack*)+0x2b23
V  [libjvm.so+0x7ee722]  GraphBuilder::iterate_bytecodes_for_block(int)+0x732
V  [libjvm.so+0x7f05b0]  GraphBuilder::iterate_all_blocks(bool)+0x80
V  [libjvm.so+0x7f18a7]  GraphBuilder::GraphBuilder(Compilation*, IRScope*)+0x467
V  [libjvm.so+0x804654]  IR::IR(Compilation*, ciMethod*, int)+0x684
V  [libjvm.so+0x7bcaf6]  Compilation::build_hir() [clone .part.0]+0x276
V  [libjvm.so+0x7c21b0]  Compilation::compile_java_method()+0x1c0
V  [libjvm.so+0x7c3308]  Compilation::compile_method()+0x1d8
V  [libjvm.so+0x7c3eae]  Compilation::Compilation(AbstractCompiler*, ciEnv*, ciMethod*, int, BufferBlob*, DirectiveSet*)+0x32e
V  [libjvm.so+0x7c4d53]  Compiler::compile_method(ciEnv*, ciMethod*, int, DirectiveSet*)+0x143
V  [libjvm.so+0xb4acb5]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0x785
V  [libjvm.so+0xb4cb28]  CompileBroker::compiler_thread_loop()+0x678
V  [libjvm.so+0x19b105e]  JavaThread::thread_main_inner()+0x2ee
V  [libjvm.so+0x19b13f8]  JavaThread::run()+0x218
V  [libjvm.so+0x19a8e2b]  Thread::call_run()+0xbb
V  [libjvm.so+0x1699886]  thread_native_entry(Thread*)+0x116
",,,,,,,,,,JDK-8279735,JDK-8280501,JDK-8279446,JDK-8279960,JDK-8279100,JDK-8279559,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8279886,,,,,,,,,,"2021-11-19 00:30;mkartashev;test.jar;https://bugs.openjdk.org/secure/attachment/97146/test.jar",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v45v:",9223372036854775807,b29,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-19 00:35;mkartashev;The culprit seems to be a cycle in CFG that does NOT form a natural loop: `while(true)` in the source code gets intertwined with a compiler-generated `switch()` that implements the suspend stuff. This is the relevant part of CFG (numbers in brackets are bytecode indices):

+------------------------------------v
B10(122) (LOOP HEAD) <- B8(84) <- B5(80)
^
 |
+ B6(109)

B10 is marked as a loop head, but it does not dominate all the nodes in the loop as B8, which is part of the loop, can be entered through B5 thus bypassing B10. When `BlockBegin::try_merge()` is invoked on B10 the second time, it expects all the locals to be either phi or unchanged, but encounters a phi coming from B8 and a ""real"" value coming from B6 (bci 113, the result of checkcast) occupying the same local slot. This causes an assertion failure in the debug mode.
 

----- initial block list of BlockListBuilder for method  MainKt::test
   1: B0    bci: 0     preds: 0     std                 sux: B2 B1 
   2: B1    bci: 7     preds: 1                         sux: B3 B2 
   3: B3    bci: 22    preds: 1                         sux: B4 
   4: B2    bci: 36    preds: 2                         sux: B4 
   5: B4    bci: 45    preds: 2                         sux: B5 B6 B7 
   6: B5    bci: 80    preds: 1                         sux: B8 
   7: B6    bci: 109   preds: 1                         sux: B10 
   8: B10   bci: 122   preds: 2                   lh    sux: B8 
   9: B8    bci: 84    preds: 2                         sux: B9 B10 
  10: B9    bci: 106   preds: 1                     
  11: B7    bci: 126   preds: 1                     


  public static final java.lang.Object test(java.lang.String, kotlin.coroutines.Continuation<? super kotlin.Unit>);
    Code:
       0: aload_1
       1: instanceof    #40                 // class MainKt$test$1
       4: ifeq          36
       7: aload_1
       8: checkcast     #40                 // class MainKt$test$1
      11: astore_3
      12: aload_3
      13: getfield      #44                 // Field MainKt$test$1.label:I
      16: ldc           #45                 // int -2147483648
      18: iand
      19: ifeq          36
      22: aload_3
      23: dup
      24: getfield      #44                 // Field MainKt$test$1.label:I
      27: ldc           #45                 // int -2147483648
      29: isub
      30: putfield      #44                 // Field MainKt$test$1.label:I
      33: goto          45
      36: new           #40                 // class MainKt$test$1
      39: dup
      40: aload_1
      41: invokespecial #49                 // Method MainKt$test$1.""<init>"":(Lkotlin/coroutines/Continuation;)V
      44: astore_3
      45: aload_3
      46: getfield      #53                 // Field MainKt$test$1.result:Ljava/lang/Object;
      49: astore_2
      50: invokestatic  #59                 // Method kotlin/coroutines/intrinsics/IntrinsicsKt.getCOROUTINE_SUSPENDED:()Ljava/lang/Object;
      53: astore        4
      55: aload_3
      56: getfield      #44                 // Field MainKt$test$1.label:I
      59: tableswitch   { // 0 to 1
                     0: 80
                     1: 109
               default: 126
          }
      80: aload_2
      81: invokestatic  #64                 // Method kotlin/ResultKt.throwOnFailure:(Ljava/lang/Object;)V
      84: nop
      85: aload_0
      86: aload_3
      87: aload_3
      88: aload_0
      89: putfield      #67                 // Field MainKt$test$1.L$0:Ljava/lang/Object;
      92: aload_3
      93: iconst_1
      94: putfield      #44                 // Field MainKt$test$1.label:I
      97: invokestatic  #69                 // Method yield:(Ljava/lang/String;Lkotlin/coroutines/Continuation;)Ljava/lang/Object;
     100: dup
     101: aload         4
     103: if_acmpne     122
     106: aload         4
     108: areturn
     109: aload_3
     110: getfield      #67                 // Field MainKt$test$1.L$0:Ljava/lang/Object;
     113: checkcast     #71                 // class java/lang/String
     116: astore_0
     117: aload_2
     118: invokestatic  #64                 // Method kotlin/ResultKt.throwOnFailure:(Ljava/lang/Object;)V
     121: aload_2
     122: pop
     123: goto          84
     126: new           #73                 // class java/lang/IllegalStateException
     129: dup
     130: ldc           #75                 // String call to \'resume\' before \'invoke\' with coroutine
     132: invokespecial #78                 // Method java/lang/IllegalStateException.""<init>"":(Ljava/lang/String;)V
     135: athrow
;;;","2021-11-22 01:14;chagedorn;ILW = Assertion failure in C1 compiler, only observed with Kotlin test, disable compilation of affected method = HLM = P3;;;","2021-12-15 09:57;iveresov;Thanks for an excellent bug report!
Seems like C1's BlockListBuilder::mark_loops() is not really designed to handle irreducible loops, which will sometimes cause problems with phi insertion. For jdk18 I'll add a bailout in try_merge(). I will also file an RFE to rewrite mark_loops() so that it would properly detect irreducible loops and switch off SelectivePhiFunctions if any are detected in the current compile.;;;","2021-12-15 21:37;mkartashev;> Thanks for an excellent bug report! 
Not a problem; appreciate the acknowledgement! 

> Seems like C1's BlockListBuilder::mark_loops() is not really designed to handle irreducible loops
That was my thinking as well until I ran into this piece from c1_IR.cpp:

// check for non-natural loops (loops where the loop header does not dominate
// all other loop blocks = loops with mulitple entries).
// such loops are ignored
void ComputeLinearScanOrder::clear_non_natural_loops(BlockBegin* start_block)

And that made me think that the overall design of C1 passes is not as straight-forward. On the other hand, these are different kinds of ""loops"" because the latter sets the linear_scan_loop_header_flag flag, while the former (the buggy one) sets parser_loop_header_flag.;;;","2021-12-17 08:31;roboduke;Changeset: b46f0b0b
Author:    Igor Veresov <iveresov@openjdk.org>
Date:      2021-12-17 16:30:40 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/b46f0b0b1f2ada705f8b5aac9b7d8423699437a1
;;;","2022-01-10 06:53;goetz;Fix request [17u]

I backport this for parity with 17.0.3-oracle.
Risk: needed C1 bug fix.
Clean backport except for adapting the class file version in the .jasm file
Test passes. SAP nightly testing passes.;;;","2022-01-10 06:54;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/75
Date: 2022-01-10 14:48:08 +0000;;;","2022-01-17 06:55;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/770
Date: 2022-01-17 14:50:22 +0000;;;","2022-01-18 00:46;goetz;Fix request [11u]

I backport this for parity with 11.0.15-oracle.
No risk, only a test change.
Backport of compiler changes clean, but the test needed adaptions to work.
Test passes, SAP nightly tests all passed.;;;",,,,,,,,,,,,
CompileQueue::add fails with assert(_last->next() == __null) failed: not last,JDK-8277441,5063053,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,thartmann,thartmann,thartmann,2021-11-18 23:19,2022-01-15 06:07,2023-10-01 09:57,2021-11-23 04:47,11,17,18,,,,,,,,,,,18,hotspot,,0,intermittent-low-frequency,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-18,,,,,,,,,,,"The new test that will be added by JDK-8277042 triggered this assert once: 

# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/workspace/open/src/hotspot/share/compiler/compileBroker.cpp:369), pid=25796, tid=6403
#  assert(_last->next() == __null) failed: not last

Stack: [0x000070000838a000,0x000070000848a000],  sp=0x00007000084862f0,  free space=1008k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.dylib+0x1159a39]  VMError::report_and_die(int, char const*, char const*, __va_list_tag*, Thread*, unsigned char*, void*, void*, char const*, int, unsigned long)+0x6e9
V  [libjvm.dylib+0x115a0bb]  VMError::report_and_die(Thread*, void*, char const*, int, char const*, char const*, __va_list_tag*)+0x3b
V  [libjvm.dylib+0x628fbd]  report_vm_error(char const*, int, char const*, char const*, ...)+0xdd
V  [libjvm.dylib+0x5e394a]  CompileQueue::add(CompileTask*)+0x8a
V  [libjvm.dylib+0x5e718a]  CompileBroker::compile_method_base(methodHandle const&, int, int, methodHandle const&, int, CompileTask::CompileReason, bool, Thread*)+0xa3a
V  [libjvm.dylib+0x5e7f5d]  CompileBroker::compile_method(methodHandle const&, int, int, methodHandle const&, int, CompileTask::CompileReason, DirectiveSet*, JavaThread*)+0x6ad
V  [libjvm.dylib+0x5e788e]  CompileBroker::compile_method(methodHandle const&, int, int, methodHandle const&, int, CompileTask::CompileReason, JavaThread*)+0xbe
V  [libjvm.dylib+0x5c744e]  CompilationPolicy::compile(methodHandle const&, int, CompLevel, JavaThread*)+0x4ee
V  [libjvm.dylib+0x5c69dc]  CompilationPolicy::event(methodHandle const&, methodHandle const&, int, int, CompLevel, CompiledMethod*, JavaThread*)+0x20c
V  [libjvm.dylib+0x8eea04]  InterpreterRuntime::frequency_counter_overflow_inner(JavaThread*, unsigned char*)+0x304
V  [libjvm.dylib+0x8ee4ca]  InterpreterRuntime::frequency_counter_overflow(JavaThread*, unsigned char*)+0x1a
j  Foo3.foo()I+0
j  SomeClass.<clinit>()V+61
v  ~StubRoutines::call_stub",,,,,,,,,,JDK-8280052,JDK-8279307,JDK-8279433,JDK-8278749,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277042,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v44z:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-18 23:28;thartmann;ILW = Assert due to unexpected state of compile task queue, extremely rare and only with disabled code cache flushing, use -XX:+UseCodeCacheFlushing or increase ReservedCodeCacheSize = HLL = P4;;;","2021-11-23 04:47;roboduke;Changeset: 90f96fb4
Author:    Tobias Hartmann <thartmann@openjdk.org>
Date:      2021-11-23 12:46:15 +0000
URL:       https://git.openjdk.java.net/jdk/commit/90f96fb4db174e50cc2510f292fe69fc995add26
;;;","2021-12-20 06:17;goetz;Fix request [17u]

This was backported to 11.0.15-oracle, we want to have this in 17, too.
No risk, trivial change.
Clean backport.
SAP nightly tests passed.;;;","2021-12-20 06:22;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/13
Date: 2021-12-20 14:16:38 +0000
;;;","2022-01-13 07:11;goetz;Fix request [11u]

I backport this for parity with 11.0.15-oracle.
No risk, trivial change.
Clean backport. 
SAP nightly tests all passed.;;;","2022-01-13 07:17;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/756
Date: 2022-01-13 15:10:58 +0000;;;",,,,,,,,,,,,,,,
"tests fail with ""assert(is_forwarded()) failed: only decode when actually forwarded""",JDK-8277434,5063045,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,kbarrett,dcubed,dcubed,2021-11-18 19:35,2022-02-10 14:26,2023-10-01 09:57,2021-11-30 12:23,18,,,,,,,,,,,,,18,hotspot,,0,gc-g1,gc-pending-review,intermittent,maintainer-pain,tier2,tier4,,,,,,,,,,,"The following test failed in the JDK18 CI:

gc/TestStackOverflow.java

Here's a snippet from the log file:

910000
920000
930000
# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/oop.inline.hpp:292
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/35546316-ed70-4084-8244-d672e7734fd1-S13245/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/f172a040-6211-41cc-8a52-80123c8c09b0/runs/342e0b90-31a3-4303-83f5-59e801f89347/workspace/open/src/hotspot/share/oops/oop.inline.hpp:292), pid=2151569, tid=2151591
#  assert(is_forwarded()) failed: only decode when actually forwarded
#
# JRE version: Java(TM) SE Runtime Environment (18.0+25) (fastdebug build 18-ea+25-1638)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+25-1638, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-aarch64)
# Problematic frame:
# V  [libjvm.so+0xac50e0]  oopDesc::forwardee() const+0x50
#
# Core dump will be written. Default location: Core dumps may be processed with ""/opt/core.sh %p"" (or dumping to /opt/mach5/mesos/work_dir/slaves/369e65c9-433d-40ff-b6a0-b4e65701097a-S4636/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/b4da8de1-6d7b-4490-9328-caede55f5fd1/runs/35186a5a-256b-4e0f-82e8-977aa3d71fc7/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1/scratch/2/core.2151569)
#
# An error report file with more information is saved as:
# /opt/mach5/mesos/work_dir/slaves/369e65c9-433d-40ff-b6a0-b4e65701097a-S4636/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/b4da8de1-6d7b-4490-9328-caede55f5fd1/runs/35186a5a-256b-4e0f-82e8-977aa3d71fc7/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1/scratch/2/hs_err_pid2151569.log
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#
----------System.err:(0/0)----------
----------rerun:(33/5407)*----------


Here's the crashing thread's stack:

---------------  T H R E A D  ---------------

Current thread (0x0000fffd8c009f40):  WorkerThread ""GC Thread#1"" [stack: 0x0000fffd9dc90000,0x0000fffd9de90000] [id=2151591]

Stack: [0x0000fffd9dc90000,0x0000fffd9de90000],  sp=0x0000fffd9de8e430,  free space=2041k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xac50e0]  oopDesc::forwardee() const+0x50
V  [libjvm.so+0xcfcbc0]  void G1ParScanThreadState::write_ref_field_post<narrowOop>(narrowOop*, oop)+0x170
V  [libjvm.so+0xd00824]  void G1ParScanThreadState::do_oop_evac<narrowOop>(narrowOop*)+0x294
V  [libjvm.so+0xcfb038]  G1ParScanThreadState::trim_queue_to_threshold(unsigned int)+0x308
V  [libjvm.so+0xcfb488]  G1ParScanThreadState::steal_and_trim_queue(GenericTaskQueueSet<OverflowTaskQueue<ScannerTask, (MEMFLAGS)5, 131072u>, (MEMFLAGS)5>*)+0x3d8
V  [libjvm.so+0xd4bc28]  G1ParEvacuateFollowersClosure::do_void()+0x158
V  [libjvm.so+0xd4c86c]  G1EvacuateRegionsTask::evacuate_live_objects(G1ParScanThreadState*, unsigned int)+0x6c
V  [libjvm.so+0xd46330]  G1EvacuateRegionsBaseTask::work(unsigned int)+0x120
V  [libjvm.so+0x19192e0]  WorkerThread::run()+0x80
V  [libjvm.so+0x17d8558]  Thread::call_run()+0xf8
V  [libjvm.so+0x15067d4]  thread_native_entry(Thread*)+0x104
C  [libpthread.so.0+0x7738]  start_thread+0x198


The test task's JVM args are: -Xcheck:jni",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8204524,JDK-8275527,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,linux,,,,,,"0|i2v437:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,Verified,,"2021-11-18 19:42;dcubed;The build-ID where this failure first started is jdk-18+25-1638-tier4
and that build-ID contains the fix for:

JDK-8275527 Refactor forward pointer access;;;","2021-11-19 03:38;tschatzl;The failing code in `PSS::write_ref_field_post`:

  assert(dest_attr.is_in_cset() == (obj->is_forwarded() && obj->forwardee() == obj),

and

oop oopDesc::forwardee() const {
  assert(is_forwarded(), ""only decode when actually forwarded"");
  return cast_to_oop(mark().decode_pointer());
}

Basically implying that the first `is_forwarded()` in write_ref_field_post returns true, the other false.

We never change a forwarded pointer back to non-forwarded during gc... ;;;","2021-11-19 07:16;dcubed;Here's the crashing stack for the jdk-18+25-1641-tier4 sighting:

gc/g1/humongousObjects/TestNoAllocationsInHRegions.java 


---------------  T H R E A D  ---------------

Current thread (0x0000fffbf4016360):  WorkerThread ""GC Thread#7"" [stack: 0x0000fffbbaba0000,0x0000fffbbada0000] [id=2689762]

Stack: [0x0000fffbbaba0000,0x0000fffbbada0000],  sp=0x0000fffbbad9e490,  free space=2041k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xac4e60]  oopDesc::forwardee() const+0x50
V  [libjvm.so+0xcfc940]  void G1ParScanThreadState::write_ref_field_post<narrowOop>(narrowOop*, oop)+0x170
V  [libjvm.so+0xd005a4]  void G1ParScanThreadState::do_oop_evac<narrowOop>(narrowOop*)+0x294
V  [libjvm.so+0xcfb1fc]  G1ParScanThreadState::steal_and_trim_queue(GenericTaskQueueSet<OverflowTaskQueue<ScannerTask, (MEMFLAGS)5, 131072u>, (MEMFLAGS)5>*)+0x3cc
V  [libjvm.so+0xd4b9a8]  G1ParEvacuateFollowersClosure::do_void()+0x158
V  [libjvm.so+0xd4c5ec]  G1EvacuateRegionsTask::evacuate_live_objects(G1ParScanThreadState*, unsigned int)+0x6c
V  [libjvm.so+0xd460b0]  G1EvacuateRegionsBaseTask::work(unsigned int)+0x120
V  [libjvm.so+0x1918ec0]  WorkerThread::run()+0x80
V  [libjvm.so+0x17d8138]  Thread::call_run()+0xf8
V  [libjvm.so+0x15063a4]  thread_native_entry(Thread*)+0x104
C  [libpthread.so.0+0x7738]  start_thread+0x198
;;;","2021-11-20 23:01;kbarrett;[~rkennke] This seems to have started with JDK-8275527. 

This is only happening on aarch64, which suggests a weak memory order issue.  However, the guarding is_forwarded() and the failing forwardee() are both based on the mark word for the object, which is accessed using Atomic::load in both cases (via oopDesc::mark()).  So they can't be reordered by the compiler.  And read-read coherence (C++14 1.10/18) says they can't be reordered by the hardware (assuming our Atomic implementation is close enough to the standard/compiler meaning of atomic object).

I think the generated code for G1ParScanThreadState::write_ref_field_post should be examined to ensure a compiler bug isn't unexpectedly reordering the mark-word accesses. [later] I looked at the generated code, and it looks okay to me, though I'm not an expert in aarch64 assembler.

;;;","2021-11-23 13:01;kbarrett;The initial description mentions that the failing test(s) were run with -Xcheck:jni.  However, not all of the reported failures are using that option, so it seems just coincidental.
;;;","2021-11-23 23:10;dholmes;> And read-read coherence (C++14 1.10/18) says they can't be reordered by the hardware (assuming our Atomic implementation is close enough to the standard/compiler meaning of atomic object).

To get read-read coherence such that the hardware cannot reorder loads, we surely have to have something in our Atomic::load implementation that actually ensures that? AFAIK our Atomic::load is just a plain load.;;;","2021-11-24 03:33;rkennke;This is weird. Atomic::load() is a plain load, on oopDesc::_mark, which should prevent compiler reordering.

The only related change by  JDK-8275527 seems to be the added assert.

I'm trying to reproduce (no success so far).;;;","2021-11-24 23:57;kbarrett;[~dholmes] Read-read coherence requires that for sequential reads of the same object by a thread, a later read cannot obtain a value older than that obtained by an earlier read. (I suspect a memory model without that would be very hard to use.) And gcc's implementation of a relaxed std::atomic load on aarch64 uses an unadorned ldr instruction, just as our Atomic::load.
;;;","2021-11-25 00:06;kbarrett;[~rkennke] It may be difficult to reproduce; we've only seen a handful of failures in a week in our CI testing (so a lot of tests being executed).  Multiple (but not all) sightings are with applications/jcstress/acqrel.java though, so that might be a place to focus.  And I agree it's weird.  It's as if this returned false: (obj->is_forwarded() ? obj->is_forwarded() : true).  Like [~tschatzl], I can't think of anywhere we would remove a mark during the mark phase.
;;;","2021-11-25 01:47;kbarrett;I have a theory, but it's complicated.  I'll write more here tomorrow.  [later: moved update to new comment at the end, to make it more obvious.]
;;;","2021-11-25 05:03;dholmes;>  Read-read coherence requires that for sequential reads of the same object by a thread, a later read cannot obtain a value older than that obtained by an earlier read. 

[~kbarrett] I'm referring to inter-thread read-read coherence not intra-thread. But I see now you were referring to actions within a single thread when you referred to read-read coherence.;;;","2021-11-25 10:10;rkennke;FWIW, I still could not reproduce it, not in tier1-tier4 tests, and also not in applications/jcstress/acqrel.java standalone.

It's a real head-scratcher. I think on one side, we could remove the added assert, but I fear this might hide the actual (possibly pre-existing) problem: if the 2nd load of the mark in the assert could give unexpected results, so may the 2nd load of mark preceding the decode_pointer().

Or is there a chance that this could be a compiler or even HW bug?;;;","2021-11-25 14:27;dholmes;[~rkennke] we have also seen it fail in

vmTestbase/gc/gctests/FinalizeTest01/FinalizeTest01.java

that might be easier to try to use to reproduce. But it may well be this only reproduces on specific hardware.;;;","2021-11-25 14:54;rkennke;I tried vmTestbase/gc/gctests/FinalizeTest01/FinalizeTest01.java a ~10 times in a row without failure.;;;","2021-11-25 16:19;kbarrett;I have a theory, but it's complicated and hard to test.

I believe the problem is in the assert in write_ref_field_post. As a reminder, it is

  assert(dest_attr.is_in_cset() == (obj->is_forwarded() && obj->forwardee() == obj), ""..."");

dest_attr is the region_attr for obj.

So if obj is in the cset, then obj must be self-forwarded. So far as I can tell so far, that seems to be correct here, and not subject to memory ordering issues.

I believe the problem arises when obj is *not* in the cset, so the normal (not evacuation failure) case. (It might help to improve the assert message to indicate which case we're in.) I think there is a memory ordering issue that leads to the failure we're seeing, where the first is_forwarded() is true but the second (in the assert inside forwardee()) fails.

In do_copy_to_survivor_space, we copy the object and then install the forwarding information in the old object, referring to the new copy. That forwarding installation is done using a *relaxed* cmpxchg by G1, which means the new copy is exposed to other readers of old's forwarding information while in a state where the copy's contents may not be up to date. (Note that ParallelGC uses a release-cmpxchg with forwardee-acquire to avoid such problems.) So the problematic is_forwarded / forwardee operations in the write_ref_field_post assert are accessing the contents of the new copy in an unsafe way.

So how can we get the first is_forwarded to return true while the second returns false?  Consider the following scenario.

THREAD1:
(1) needs to evacuate obj1, which is unmarked
(2) allocates new_obj
(3) some other thread evacuates obj1, so it is now marked
(4) copies obj1 to new_obj, so new_obj appears to be marked
(5) attempts to forward obj1 to new_obj, and fails because of (3)
(6) undo allocation of new_obj
(7) returns the forwardee of obj1 installed by (3)
(8) needs to evacuate obj2, which is unmarked
(9) (re)allocates new_obj (which still appears to be marked)
(10) copies obj2 to new_obj
(11) forwards obj2 to new_obj, without any barriers

THREAD2:
(12) needs to evacuate obj2, which is marked
(13) gets new_obj, the forwardee of obj2
(14) calls write_ref_field_post with new_obj
(15) checks new_obj->is_forwarded(), which returns true because the copy (10) has not reached this thread yet, because (10) and (11) are unordered (and there's no ""consume"" on (13))
(16) the copy (10) reaches this thread
(17) rechecks new_obj->is_forwarded() in forwardee() call, which returns false

Most of the time we won't see a problem.  Either (16) will preceed (15) or follow (17) and we'll be okay.  When (16) follows (17), new_obj->forwardee() will (probably*) not be new_obj, so the write_ref_field_post assert will still pass, even though we're getting a ""bogus"" forwardee. (*) Neither the old nor new markword for new_obj is going to contain the right bits for new_obj as its forwardee, but the copy could be byte-wise so who knows what bits forwardee will read.

One solution would be to use the same approach as used by ParallelGC: (a) add a release barrier to the forwarding cmpxchg to ensure the copy is complete before making the new object accessible by other threads, and (b) put acquire barriers on the forwardee accesses to ensure any later reads of the forwardee contents see the copied data. But this adds barriers in performance sensitive code.

A different solution, which I think we should use, is to eliminate the improper and not really necessary reads of the content of the copy by write_ref_field_post.  Change the tail of that function from

-  assert(...);
=   if (dest_attr.is_in_cset()) {
=     return;
=   }
=   enqueue_card_if_tracked(dest_attr, p, obj);

to

=   if (dest_attr.is_in_cset()) {
+    assert(obj->is_forwarded(), ...);
+    assert(obj->forwardee() == obj, ...);
=     return;
=   }
+  // obj is not in cset, so should not be forwarded.  But we can't
+  // assert that because it isn't safe to examine the contents of
+  // the (new survivor) obj due to lack of barriers when copying
+  // and forwarding.
=  enqueue_card_if_tracked(dest_attr, p, obj); 
;;;","2021-11-25 16:37;dholmes;Isn't that just a simple race condition where the relaxed cmpxchg that does the forwarding can occur between (15) and (17) ?;;;","2021-11-25 20:18;kbarrett;(12) ""... which is marked"" => thread2 has seen the cmpxchg that installed the forwarding.  There might be other scenarios besides the one described though; I only looked until I found one.  The fundamental issue is that some thread other than the copier is examining the contents of the copy without sufficient synchronization to make that safe.  So, for example, partial array tasks are okay because they are passed from the copying thread to other threads through the taskqueue, which provides sufficient synchronization.  The assert in write_ref_field_post doesn't have sufficient synchronization to safely examine the contents of the copy.  There aren't supposed to be such uses, and I haven't found any others.  Worry about such is why we pushed back on making the corresponding cmpxchg in ParallelGC relaxed.
;;;","2021-11-25 22:35;dholmes;> (12) ""... which is marked"" => thread2 has seen the cmpxchg that installed the forwarding. 

Ah I misunderstood which part was which. So you are basically saying that in:

(10) copies obj2 to new_obj
(11) forwards obj2 to new_obj, without any barriers 

The stores in (10) can be seen by thread 2 after the result of the cmpxchg in (11) ? That certainly seems like a case where acquire/release is a fundamental requirement.;;;","2021-11-25 23:33;kbarrett;The alternative to adding acquire/release barriers is to not do the accesses that require those barriers for correctness.  So don't do the assert that reads from the copied forwardee.;;;","2021-11-30 12:23;roboduke;Changeset: 15a68064
Author:    Kim Barrett <kbarrett@openjdk.org>
Date:      2021-11-30 20:22:35 +0000
URL:       https://git.openjdk.java.net/jdk/commit/15a680647c4c5df4538e906960c594da79aebf5c
;;;","2021-12-01 07:10;dcubed;The fix for this bug is integrated in jdk-18+26-1762.;;;"
Conflicting jpackage static library name,JDK-8277429,5063040,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,asemenyuk,mikael,mikael,2021-11-18 18:22,2022-07-19 01:02,2023-10-01 09:57,2021-11-22 10:06,17,18,,,,,,,,,,,,18,tools,,0,jdk17u-fix-request,jdk17u-fix-yes,sn_106,,,,,,,,,,,,,,"When building bundles, and in particular the static-libs bundle, on linux, make spits out the following:

StaticLibsImage.gmk:41: warning: overriding recipe for target 'build/linux-x64/images/static-libs/lib/libjpackageapplauncher.a'
StaticLibsImage.gmk:41: warning: ignoring old recipe for target 'build/linux-x64/images/static-libs/lib/libjpackageapplauncher.a'

The reason seems to boil down to the two different artifacts defined in make/modules/jdk.jpackage/Lib.gmk: BUILD_JPACKAGE_APPLAUNCHEREXE and the linux specific BUILD_JPACKAGE_LIBAPPLAUNCHER.

Both of them end up defining a static library with the same base name - libjpackageapplauncher.a. The static-libs bundling logic assumes that all static library names are unique and flattens the paths when preparing to bundle up the static libraries, meaning it ends up trying to define two different (CopyFiles) recipes for the same target path:

build/linux-x64-release/images/static-libs/lib/libjpackageapplauncher.a",,,,,,,,,,JDK-8290507,JDK-8289937,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8254702,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,linux,,,,,,"0|i2v423:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3656b41f,,,,,,,,,"2021-11-20 06:26;ihse;How come BUILD_JPACKAGE_APPLAUNCHEREXE results in a library? It sounds like an executable...;;;","2021-11-22 10:06;roboduke;Changeset: e3911a85
Author:    Alexey Semenyuk <asemenyuk@openjdk.org>
Date:      2021-11-22 18:04:46 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e3911a8532e9b93ba5e65c613bd79864485db5ce
;;;","2022-07-18 05:19;goetz;Fix request [17u]

I backport this for parity with 17.0.5-oracle.
Simple build change renaming a lib, low risk.
Clean backport. SAP nighlty testing passed.;;;","2022-07-18 05:32;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/560
Date: 2022-07-18 12:21:57 +0000;;;",,,,,,,,,,,,,,,,,
ciReplay: hidden class with comment expected error,JDK-8277423,5063030,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,dlong,dlong,dlong,2021-11-18 14:41,2021-12-13 02:56,2023-10-01 09:57,2021-11-22 12:52,18,,,,,,,,,,,,,18,hotspot,,0,ci-replay,ci-replay-failed,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,"Some replay files have a misformatted first ""instanceKlass"" line that causes a ""hidden class with comment expected"" error. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277301,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v3zv:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-19 00:18;chagedorn;ILW = Misformatted first InstanceKlass line, only when replaying method of hidden class, no workaround = MLH = P4;;;","2021-11-22 12:52;roboduke;Changeset: 05a9a51d
Author:    Dean Long <dlong@openjdk.org>
Date:      2021-11-22 20:50:06 +0000
URL:       https://git.openjdk.java.net/jdk/commit/05a9a51dbfc46eb52bc28f1f9a618c75ee2597e9
;;;",,,,,,,,,,,,,,,,,,,
tools/jar/JarEntryTime.java fails with modified time mismatch,JDK-8277422,5063029,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,lancea,msheppar,msheppar,2021-11-18 14:33,2022-07-22 05:14,2023-10-01 09:57,2021-12-02 08:34,18,,,,,,,,,,,,,18,tools,,0,intermittent,jdk11u-fix-request,jdk11u-fix-yes,jdk13u-fix-request,jdk13u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,sbr,sqe,,,,,,,"tools/jar/JarEntryTime.java

ava.lang.Exception: Stack trace
	at java.base/java.lang.Thread.dumpStack(Thread.java:1380)
	at JarEntryTime.fail(JarEntryTime.java:205)
	at JarEntryTime.checkFileTime(JarEntryTime.java:177)
	at JarEntryTime.realMain(JarEntryTime.java:137)
	at JarEntryTime.main(JarEntryTime.java:213)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:76)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:51)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
	at java.base/java.lang.Thread.run(Thread.java:833)
java.lang.AssertionError: Some tests failed
	at JarEntryTime.main(JarEntryTime.java:215)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:76)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:51)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.AssertionError
JavaTest Message: shutting down test

----------System.out:(3/110)----------
Extracted to 2021-11-07T08:38:40Z, expected to be close to 2021-11-07T09:38:41.436Z

Passed = 23 failed = 1
result: Failed. Execution failed: `main' threw exception: java.lang.AssertionError: Some tests failed

The test's start timestamp 
end=Sun Nov 07 07\:38\:42 PST 2021

the timestamp retrieved from the last modified attribute of the file == 2021-11-07T08:38:40Z

the timestamp used to set the modified time on the file == 
2021-11-07T09:38:41.436Z

each is an hour out -- this was 7th Nov when DST was ended, but you'd expect the system to have been updated at this time.

a slightly curious failure that might be significant or hinting at some deeper issue.",,,,,,,,,,JDK-8280860,JDK-8280924,JDK-8283304,JDK-8280859,JDK-8283358,JDK-8290876,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,windows,,,,,,"0|i2v3zn:",9223372036854775807,b27,,,,,,,,,,,,,"2021-12-02 08:34;roboduke;Changeset: ad1ff27b
Author:    Lance Andersen <lancea@openjdk.org>
Date:      2021-12-02 16:33:32 +0000
URL:       https://git.openjdk.java.net/jdk/commit/ad1ff27b730773a141d73744e5f5a899bdfbea78
;;;","2022-03-14 07:42;goetz;Fix request [17u]

I backport this for parity with 17.0.4-oracle.
No risk, only a test change.
Clean backport.
Test passes.  SAP nightly testing passed.;;;","2022-03-14 07:51;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/251
Date: 2022-03-14 14:45:28 +0000;;;","2022-03-17 02:18;goetz;Fix request [11u]

I backport this for parity with 11.0.16-oracle.
No risk, only a test change.
Clean backport.
Test passes.;;;","2022-03-17 02:25;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/908
Date: 2022-03-17 09:18:55 +0000;;;","2022-07-22 04:59;yan;Fix request (13u)

I'd like to backport this interesting test-only fix;;;","2022-07-22 05:05;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk13u-dev/pull/375
Date: 2022-07-22 11:57:49 +0000;;;",,,,,,,,,,,,,,
C1 LIR instruction for load-klass,JDK-8277417,5063020,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,rkennke,rkennke,rkennke,2021-11-18 11:45,2023-07-09 19:11,2023-10-01 09:57,2021-11-26 01:46,17,18,,,,,,,,,,,,18,hotspot,,0,amazon-interest,c1,jdk17u-fix-request,jdk17u-fix-yes,lilliput,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,"In C1, the load of a Klass* out of an object is currently identified by a load of type T_ADDRESS with offset oopDest::klass_offset_in_bytes(). When encountering such load, this may be decoded when +CompressedClassPointers. This is problematic and ugly: if we ever emit a T_ADDRESS load with offset 8 or 4 (== klass_offset_in_bytes) that is not a Klass*, we would attempt to decode the result. We have been lucky so far.

Also, in Lilliput, we want to do something entirely different there, and need to be able to emit more complex code, possibly including runtime call.
",,,,,,,,,,JDK-8311637,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8026837,JDK-8277860,JDK-8278141,,,,,,,,,,,,,,,,aarch64,arm,ppc,s390x,x86,x86_64,,,,,,,,generic,,,,,,"0|i2v3xn:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-18 12:46;dlong;ILW = MMH = P3;;;","2021-11-26 01:46;roboduke;Changeset: 99e4bda3
Author:    Roman Kennke <rkennke@openjdk.org>
Date:      2021-11-26 09:46:09 +0000
URL:       https://git.openjdk.java.net/jdk/commit/99e4bda303f2c71972a125d0ecaf4cf986c8614a
;;;","2023-07-03 04:23;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1528
Date: 2023-07-03 11:16:56 +0000;;;","2023-07-03 11:31;shade;Fix Request (17u)

Clean backport to resolve the klass-ptr related kludges, match the relevant code to current state of mainline past JDK 18, and make life easier for downstreams like Lilliput JDK 17u. Applies cleanly, testing passes. There are two followups: JDK-8277860 and JDK-8278141.;;;","2023-07-07 07:07;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1427
Date: 2023-06-13 09:43:25 +0000;;;",,,,,,,,,,,,,,,,
javax/swing/plaf/synth/SynthButtonUI/6276188/bug6276188.java fails to compile after JDK-8276058,JDK-8277407,5062999,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,psadhukhan,dcubed,dcubed,2021-11-18 06:22,2023-05-22 02:45,2023-10-01 09:57,2021-11-18 07:18,18,,,,,,,,,,,,,18,client-libs,,0,jdk17u-fix-request,jdk17u-fix-yes,regression,sn_106,tier4,,,,,,,,,,,,"The following test fails to compile in the JDK18 CI:

javax/swing/plaf/synth/SynthButtonUI/6276188/bug6276188.java

Here's a snippet from the log file:

----------System.out:(0/0)----------
----------System.err:(6/390)----------
/opt/mach5/mesos/work_dir/jib-master/install/jdk-18+25-1619/src.full/open/test/jdk/javax/swing/plaf/synth/SynthButtonUI/6276188/bug6276188.java:83: error: cannot find symbol
            Color color = robot.getPixelColor(p.x - OFFSET_X, p.y - OFFSET_y);
                                                                    ^
  symbol:   variable OFFSET_y
  location: class bug6276188
1 error
result: Failed. Compilation failed: Compilation failed",,,,,,,,,,JDK-8308533,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276058,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v3sz:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@568a5b31,,,,,,,Verified,,"2021-11-18 07:18;roboduke;Changeset: 276bfcd1
Author:    Prasanta Sadhukhan <psadhukhan@openjdk.org>
Date:      2021-11-18 15:17:59 +0000
URL:       https://git.openjdk.java.net/jdk/commit/276bfcd1a115f90dde644abef79d64bb61788c75
;;;","2021-11-18 09:31;dcubed;The fix is integrated in jdk-18+25-1630.;;;","2023-05-11 13:37;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1337
Date: 2023-05-09 09:27:41 +0000;;;","2023-05-11 13:38;clanger;Fix request (17u):
Fix for JDK-8276058, included in Backport PR for it.;;;",,,,,,,,,,,,,,,,,
Test VMDeprecatedOptions.java failing with Unable to create shared archive file,JDK-8277404,5062996,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,hseigel,hseigel,hseigel,2021-11-18 06:05,2021-11-25 00:26,2023-10-01 09:57,2021-11-18 12:07,18,,,,,,,,,,,,,18,hotspot,,0,intermittent,noreg-self,regression,tier1,tier3,,,,,,,,,,,,"Test is failing because it is trying to dump the archive while it is using the archive.

The following test fails in the JDK18 CI: 

runtime/CommandLine/VMDeprecatedOptions.java 

Here's a snippet from the log file: 

----------System.out:(6/1967)*---------- 
Command line: [c:\\ade\\mesos\\work_dir\\jib-master\\install\\jdk-18+25-1625\\windows-x64-debug.jdk\\jdk-18\\fastdebug\\bin\\java.exe -cp T:\\testoutput\\test-support\\jtreg_open_test_hotspot_jtreg_tier1_runtime\\classes\\5\\runtime\\CommandLine\\VMDeprecatedOptions.d;C:\\ade\\mesos\\work_dir\\jib-master\\install\\jdk-18+25-1625\\src.full\\open\\test\\hotspot\\jtreg\\runtime\\CommandLine;T:\\testoutput\\test-support\\jtreg_open_test_hotspot_jtreg_tier1_runtime\\classes\\5\\test\\lib;C:\\ade\\mesos\\work_dir\\jib-master\\install\\jtreg\\6.1\\1\\bundles\\jtreg-6.1+1.zip\\jtreg\\lib\\javatest.jar;C:\\ade\\mesos\\work_dir\\jib-master\\install\\jtreg\\6.1\\1\\bundles\\jtreg-6.1+1.zip\\jtreg\\lib\\jtreg.jar;C:\\ade\\mesos\\work_dir\\jib-master\\install\\jtreg\\6.1\\1\\bundles\\jtreg-6.1+1.zip\\jtreg\\lib\\junit.jar;C:\\ade\\mesos\\work_dir\\jib-master\\install\\jtreg\\6.1\\1\\bundles\\jtreg-6.1+1.zip\\jtreg\\lib\\hamcrest.jar;C:\\ade\\mesos\\work_dir\\jib-master\\install\\jtreg\\6.1\\1\\bundles\\jtreg-6.1+1.zip\\jtreg\\lib\\testng.jar;C:\\ade\\mesos\\work_dir\\jib-master\\install\\jtreg\\6.1\\1\\bundles\\jtreg-6.1+1.zip\\jtreg\\lib\\jcommander.jar;C:\\ade\\mesos\\work_dir\\jib-master\\install\\jtreg\\6.1\\1\\bundles\\jtreg-6.1+1.zip\\jtreg\\lib\\guice.jar -XX:MaxGCMinorPauseMillis=1032 -XX:MaxRAMFraction=8 -XX:MinRAMFraction=2 -XX:InitialRAMFraction=64 -XX:-TLABStats -XX:+AllowRedefinitionToAddDeleteMethods -XX:-UseSharedSpaces -XX:+RequireSharedSpaces -XX:+DumpSharedSpaces -XX:+DynamicDumpSharedSpaces -XX:DefaultMaxRAMFraction=4 -XX:-CreateMinidumpOnCrash -version ] 
[2021-11-18T13:47:41.965797700Z] Gathering output for process 14788 
[2021-11-18T13:47:41.981516700Z] Waiting for completion for process 14788 
[2021-11-18T13:47:44.233415Z] Waiting for completion finished for process 14788 
[2021-11-18T13:47:44.233415Z] Waiting for completion for process 14788 
[2021-11-18T13:47:44.233415Z] Waiting for completion finished for process 14788 
----------System.err:(34/3034)*---------- 
 stdout: [Error occurred during initialization of VM 
Unable to use shared archive. 
]; 
 stderr: [Java HotSpot(TM) 64-Bit Server VM warning: Option MaxGCMinorPauseMillis was deprecated in version 8.0 and will likely be removed in a future release. 
Java HotSpot(TM) 64-Bit Server VM warning: Option MaxRAMFraction was deprecated in version 10.0 and will likely be removed in a future release. 
Java HotSpot(TM) 64-Bit Server VM warning: Option MinRAMFraction was deprecated in version 10.0 and will likely be removed in a future release. 
Java HotSpot(TM) 64-Bit Server VM warning: Option InitialRAMFraction was deprecated in version 10.0 and will likely be removed in a future release. 
Java HotSpot(TM) 64-Bit Server VM warning: Option TLABStats was deprecated in version 12.0 and will likely be removed in a future release. 
Java HotSpot(TM) 64-Bit Server VM warning: Option AllowRedefinitionToAddDeleteMethods was deprecated in version 13.0 and will likely be removed in a future release. 
Java HotSpot(TM) 64-Bit Server VM warning: Option UseSharedSpaces was deprecated in version 18.0 and will likely be removed in a future release. 
Java HotSpot(TM) 64-Bit Server VM warning: Option RequireSharedSpaces was deprecated in version 18.0 and will likely be removed in a future release. 
Java HotSpot(TM) 64-Bit Server VM warning: Option DumpSharedSpaces was deprecated in version 18.0 and will likely be removed in a future release.
Java HotSpot(TM) 64-Bit Server VM warning: Option DynamicDumpSharedSpaces was deprecated in version 18.0 and will likely be removed in a future release. 
Java HotSpot(TM) 64-Bit Server VM warning: Option DefaultMaxRAMFraction was deprecated in version 8.0 and will likely be removed in a future release. Use option MaxRAMFraction instead. 
Java HotSpot(TM) 64-Bit Server VM warning: Option CreateMinidumpOnCrash was deprecated in version 9.0 and will likely be removed in a future release. Use option CreateCoredumpOnCrash instead. 
Java HotSpot(TM) 64-Bit Server VM warning: Cannot dump shared archive while using shared archive 
An error has occurred while processing the shared archive file. 
Unable to create shared archive file c:\\ade\\mesos\\work_dir\\jib-master\\install\\jdk-18+25-1625\\windows-x64-debug.jdk\\jdk-18\\fastdebug\\bin\\server\\classes.jsa: (Unknown error). 
] 
 exitValue = 1 

java.lang.RuntimeException: Expected to get exit value of [0] 

at jdk.test.lib.process.OutputAnalyzer.shouldHaveExitValue(OutputAnalyzer.java:489) 
at VMDeprecatedOptions.testDeprecated(VMDeprecatedOptions.java:76) 
at VMDeprecatedOptions.main(VMDeprecatedOptions.java:110) 
at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) 
at java.base/java.lang.reflect.Method.invoke(Method.java:577) 
at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312) 
at java.base/java.lang.Thread.run(Thread.java:833) 

JavaTest Message: Test threw exception: java.lang.RuntimeException 
JavaTest Message: shutting down test 

result: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: Expected to get exit value of [0]",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277405,,,,,,,,,,,,,,,,,,,,,,JDK-8276795,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v3sb:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-18 06:15;dcubed;Only fails on windows and two Tier1 job sets in a row (so far)...;;;","2021-11-18 06:45;dcubed;jdk-18+25-1627-tier1did NOT have a failure so I've
marked this bug as intermittent.;;;","2021-11-18 10:16;dcubed;9 of the last 10 Tier1 jobs have a failure each and we have two failures in each of
the last 2 Tier3 job sets. I'm considering ProblemListing this test on windows-x64
until a solution can be integrated.;;;","2021-11-18 12:07;roboduke;Changeset: 36bd4a35
Author:    Harold Seigel <hseigel@openjdk.org>
Date:      2021-11-18 20:06:13 +0000
URL:       https://git.openjdk.java.net/jdk/commit/36bd4a35fbee077c00c1f4240f1f02f4d7d5f656
;;;","2021-11-18 15:20;dcubed;This fix is in jdk-18+25-1637.;;;",,,,,,,,,,,,,,,,
"[TESTBUG] In DefaultButtonModelCrashTest.java, frame is accessed from main thread",JDK-8277396,5062987,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,aivanov,aivanov,aivanov,2021-11-18 04:57,2022-05-17 09:08,2023-10-01 09:57,2021-12-02 13:01,10,,,,,,,,,,,,,18,client-libs,,0,11-bp,17-bp,8-bp,cleanup,cssn21_11_02,cssn22_04_02,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,noreg-cleanup,sustaining,testbug,,,,"The finally block in DefaultButtonModelCrashTest.java accesses frame field from the main thread for null-check.

The null-check should be performed on EDT or frame should be declared as volatile.",,,,,,,,,,JDK-8285486,JDK-8285483,JDK-8285705,JDK-8285911,JDK-8285491,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8191678,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,b35,10,,,,,,,,"0|i2v3qb:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@568a5b31,,,,,,,,,"2021-12-02 13:01;roboduke;Changeset: b310f301
Author:    Alexey Ivanov <aivanov@openjdk.org>
Date:      2021-12-02 20:59:46 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b310f301efd5390408fb56b62cc09eb9a1604413
;;;","2022-04-25 08:09;mdoerr;Fix Request (17u):
Should get backported for parity with 17.0.4-oracle. Applies cleanly. Tested on MacBook Pro M1.;;;","2022-04-25 08:18;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/361
Date: 2022-04-25 15:10:29 +0000;;;","2022-04-28 06:53;goetz;Fix request [11u]

I backport this for parity with 11.0.16-oracle.
No risk, only a test change.
Clean backport.
Test passes.
SAP nighlty testing passed.;;;","2022-04-28 06:59;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/1059
Date: 2022-04-28 13:54:04 +0000;;;",,,,,,,,,,,,,,,,
configure script cannot distinguish WSL version,JDK-8277370,5062961,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ysuenaga,ysuenaga,ysuenaga,2021-11-17 23:10,2021-11-25 00:27,2023-10-01 09:57,2021-11-19 12:26,18,,,,,,,,,,,,,18,infrastructure,,0,,,,,,,,,,,,,,,,,"configure script distinguish WSL version if it is run on WSL. It is assumed WSL 2 if `/run/WSL` exists.
However it exists in spite of WSL 1 on Windows 11 at least. We need to check it with other method.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,windows,,,,,,"0|i2v3kj:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-11-19 12:25;roboduke;Changeset: 2d4af225
Author:    Yasumasa Suenaga <ysuenaga@openjdk.org>
Date:      2021-11-19 20:24:17 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2d4af2255feb2eaeca533424f8cba3ec0945d757
;;;",,,,,,,,,,,,,,,,,,,,
"Strange behavior of JMenuBar with RIGHT_TO_LEFT orientation, arrow keys behaves opposite traversing through keyboard",JDK-8277369,5062851,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,psadhukhan,webbuggrp,webbuggrp,2021-11-16 12:52,2022-03-02 17:19,2023-10-01 09:57,2022-02-24 01:53,11,17,18,8,,,,,,,,,,19,client-libs,,0,dcspn,reproducer-yes,sn_111,sn_112,webbug,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
After applying setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT) to the JMenuBar the arrow keys started to behave the opposite of what expected. Right arrow goes left and Left arrow goes right when trying to traverse through keyboard. Note that I'm using Native look and feel.

Here is the code:

import java.awt.BorderLayout;
import java.awt.ComponentOrientation;
import java.awt.Dimension;
import java.awt.Toolkit;

import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;

@SuppressWarnings(""serial"")
public class MenuBarProblem extends JFrame {
        
    private JMenuBar menuBar;
    
    private JMenu firstMenu;
    private JMenuItem a;
    private JMenuItem b;
    
    private JMenu secondMenu;
    private JMenuItem c;
    private JMenuItem d;
    
    private JMenu thirdMenu;
    private JMenuItem e;
    private JMenuItem f;
    
    public MenuBarProblem() {
        this.setLayout(new BorderLayout());
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        this.setExtendedState(JFrame.MAXIMIZED_BOTH);
        this.setSize(screenSize);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        
        this.firstMenu = new JMenu(""first"");
        this.a = new JMenuItem(""a"");
        this.b = new JMenuItem(""b"");
        this.firstMenu.add(this.a);
        this.firstMenu.add(this.b);
        
        this.secondMenu = new JMenu(""second"");
        this.c = new JMenuItem(""c"");
        this.d = new JMenuItem(""d"");
        this.secondMenu.add(this.c);
        this.secondMenu.add(this.d);
        
        this.thirdMenu = new JMenu(""third"");
        this.e = new JMenuItem(""e"");
        this.f = new JMenuItem(""f"");
        this.thirdMenu.add(this.e);
        this.thirdMenu.add(this.f);
        
        this.menuBar = new JMenuBar();
        this.menuBar.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT); //Here is the reason
        this.menuBar.add(this.firstMenu);
        this.menuBar.add(this.secondMenu);
        this.menuBar.add(this.thirdMenu);
        this.setJMenuBar(this.menuBar);
    }

}


FREQUENCY : always


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-17 21:33;pnarayanaswa;MenuBarProblem.java;https://bugs.openjdk.org/secure/attachment/97131/MenuBarProblem.java",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v2w3:",9223372036854775807,b12,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@568a5b31,,,,,,,,,"2021-11-17 21:33;pnarayanaswa;Checked with attached test case in Windows10, issue reproducible, upon left arrow key from keyboard, JMenu on the right is selected.
Test Result:
=========
8: Fail
8u311: Fail
11: Fail
11.0.13: Fail
17: Fail 
18ea23: Fail
 ;;;","2022-02-03 09:48;psadhukhan;[~naoto] Can you please advise if this is expected for RTL orientation or should it be a bug?;;;","2022-02-08 21:50;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7396
Date: 2022-02-09 05:39:52 +0000;;;","2022-02-24 01:53;dukebot;Changeset: 379fd859
Author:    Prasanta Sadhukhan <psadhukhan@openjdk.org>
Date:      2022-02-24 09:52:17 +0000
URL:       https://git.openjdk.java.net/jdk/commit/379fd85932e4b82e9a8e85f8ed8e63202f3cb9bc
;;;",,,,,,,,,,,,,,,,,
Metaspace OOM thrown due to the leak of Nashorn ScriptEngine,JDK-8277368,5062960,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,ewhelan,shadowbug,shadowbug,2021-11-17 21:08,2023-03-17 04:34,2023-10-01 09:57,2022-02-28 12:20,11.0.13,,,,,,,,,,,,,11.0.16-oracle,core-libs,,0,bugdb_33582154,bugdb_34273914,jdk11u-todo,licbug,sustaining,,,,,,,,,,,,"The current implementation of jdk.nashorn.internal.runtime.linker.JavaAdapterFactory is written in such a way that it can lead to Metaspace OOM errors.

Each time a new script is loaded by the Nashorn engine, a cache of <CodeSource, StaticClass> key-value pairs is built up. It is stored in the following Map [1]:

private final Map<CodeSource, StaticClass> instanceAdapters = new ConcurrentHashMap<>();

This may lead to Metaspace OOM errors as this caching behaviour is tightly coupled to class loading.

This occurs as often the Metaspace is significantly smaller than the regular Java heap.

A good solution to this would be to enforce an upper limit on how large that cache can get, as instanceAdapter classes can be regenerated when needed

[1] https://github.com/openjdk/jdk11u-dev/blob/master/src/jdk.scripting.nashorn/share/classes/jdk/nashorn/internal/runtime/linker/JavaAdapterFactory.java",,,,,,,,,,JDK-8288299,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v3kb:",9223372036854775807,b01,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2b7cf59d,,,,,,,,,"2022-02-28 12:57;ewhelan;The term ""leak"" in the title is used very loosely.

There is no memory leak and the JVM is not vulnerable, the JVM throws a genuine OOM error as it reaches it's max defined size.;;;",,,,,,,,,,,,,,,,,,,,
 java/nio/channels/Channels/ReadXBytes.java   fails with OOM error,JDK-8277361,5062948,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,bpb,msheppar,msheppar,2021-11-17 16:21,2022-04-13 07:16,2023-10-01 09:57,2021-12-08 09:13,18,,,,,,,,,,,,,18,core-libs,,0,intermittent,sbr,sqe,ursqe-triaged,,,,,,,,,,,,,"
test ReadXBytes.readNBytesFromMaxLengthFile(): failure
java.lang.OutOfMemoryError: Java heap space
	at java.base/java.io.FileInputStream.readNBytes(FileInputStream.java:335)
	at ReadXBytes.lambda$readNBytesFromMaxLengthFile$19(ReadXBytes.java:287)
	at ReadXBytes$$Lambda$111/0x0000000800c3e068.test(Unknown Source)
	at ReadXBytes.dataTest(ReadXBytes.java:151)
	at ReadXBytes.readNBytesFromMaxLengthFile(ReadXBytes.java:282)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:76)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:51)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)",,,,,,,,,,JDK-8278717,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,linux,,,,,,"0|i2v3hn:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,Verified,,"2021-12-08 09:13;roboduke;Changeset: 24781588
Author:    Brian Burkhalter <bpb@openjdk.org>
Date:      2021-12-08 17:11:14 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2478158815a9ae0466542e27562bff046d760d3e
;;;",,,,,,,,,,,,,,,,,,,,
java/security/MessageDigest/ThreadSafetyTest.java test times out,JDK-8277353,5062935,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,ssahoo,msheppar,msheppar,2021-11-17 13:26,2023-08-28 09:58,2023-10-01 09:57,2021-12-06 21:12,18,,,,,,,,,,,,,18,security-libs,,0,intermittent,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,sbr,sqe,ursqe-triaged,,,,,,,,"command: main ThreadSafetyTest 5 4
reason: User specified action: run main/othervm ThreadSafetyTest 5 4 
Mode: othervm [/othervm specified]
Timeout information:
--- Timeout information end.
elapsed time (seconds): 672.496",,,,,,,,,,JDK-8278658,JDK-8312661,JDK-8312446,JDK-8311658,JDK-8312447,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,windows,,,,,,"0|i2v3er:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2ec284e3,,,,,,,Verified,,"2021-11-25 22:58;ssahoo;8 minutes for the number of Threads used by the Test and each task executed by each Thread is looking too much. But we can extend the timeout of the Test as it is harmless to have it and it is also a rare condition.;;;","2021-11-29 11:05;rhalade;Do we know why it takes this long?;;;","2021-11-29 21:08;ssahoo;As per Mark during SBR run due to heavy load and low availability of processing power the Test is unable to complete it's execution with default JTREG Test timeout period. Though the Test do very simple operation and doesn't seem cpu intensive but the number of Threads it generates for these simple operation could take more time to complete in case the availability is low. ;;;","2021-12-06 21:12;roboduke;Changeset: f22d157e
Author:    Sibabrata Sahoo <ssahoo@openjdk.org>
Date:      2021-12-07 05:10:30 +0000
URL:       https://git.openjdk.java.net/jdk/commit/f22d157e551fb28991e7713a45e63a0a8d9d2c4c
;;;","2022-04-13 04:18;sqetools;verified;;;","2023-07-18 05:17;goetz;Fix request [11u,17u]

I backport this for parity with 17.0.9-oracle, and let's do 11, too.
No risk, only a test change.
Clean backport.
Test passes. SAP nighlty testing passed.;;;","2023-07-18 05:28;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/2048
Date: 2023-07-18 12:21:45 +0000;;;","2023-07-18 07:51;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1596
Date: 2023-07-18 14:47:14 +0000;;;",,,,,,,,,,,,,
runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java times out,JDK-8277350,5062930,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,dcubed,dcubed,dcubed,2021-11-17 12:56,2021-12-01 17:43,2023-10-01 09:57,2021-11-23 09:10,18,,,,,,,,,,,,,18,hotspot,,0,intermittent,tier1,tier3,tier5,tier6,tier8,,,,,,,,,,,"The following test has timed out 18 times since 2021.11.02:

runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java

Unfortunately all of the timeouts occur in a test task that
fails due to ""timeout in execution"" so the failures are not
logged in Mach5.

Here's the stdout log for the failure from
jdk-18+24-1604-tier1-20211117-1154-26307354

[2021-11-17T12:22:15,518Z] --------------------------------------------------
[2021-11-17T12:28:07,503Z] TEST: runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
[2021-11-17T12:28:07,503Z] TEST JDK: /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/macosx-x64-debug.jdk/jdk-18/fastdebug
[2021-11-17T12:28:07,503Z] 
[2021-11-17T12:28:07,503Z] ACTION: build -- Passed. Build successful
[2021-11-17T12:28:07,503Z] REASON: Named class compiled on demand
[2021-11-17T12:28:07,503Z] TIME:   0.034 seconds
[2021-11-17T12:28:07,503Z] messages:
[2021-11-17T12:28:07,503Z] command: build TestPrimitiveArrayCriticalWithBadParam
[2021-11-17T12:28:07,503Z] reason: Named class compiled on demand
[2021-11-17T12:28:07,503Z] Test directory:
[2021-11-17T12:28:07,503Z]   compile: TestPrimitiveArrayCriticalWithBadParam
[2021-11-17T12:28:07,503Z] elapsed time (seconds): 0.034
[2021-11-17T12:28:07,503Z] 
[2021-11-17T12:28:07,503Z] ACTION: compile -- Passed. Compilation successful
[2021-11-17T12:28:07,503Z] REASON: .class file out of date or does not exist
[2021-11-17T12:28:07,503Z] TIME:   0.034 seconds
[2021-11-17T12:28:07,503Z] messages:
[2021-11-17T12:28:07,503Z] command: compile /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
[2021-11-17T12:28:07,503Z] reason: .class file out of date or does not exist
[2021-11-17T12:28:07,503Z] Mode: agentvm
[2021-11-17T12:28:07,503Z] Agent id: 5
[2021-11-17T12:28:07,503Z] elapsed time (seconds): 0.034
[2021-11-17T12:28:07,503Z] configuration:
[2021-11-17T12:28:07,503Z] Boot Layer (javac runtime environment)
[2021-11-17T12:28:07,503Z]   class path: /System/Volumes/Data/mesos/work_dir/jib-master/install/jtreg/6.1/1/bundles/jtreg-6.1+1.zip/jtreg/lib/javatest.jar 
[2021-11-17T12:28:07,503Z]               /System/Volumes/Data/mesos/work_dir/jib-master/install/jtreg/6.1/1/bundles/jtreg-6.1+1.zip/jtreg/lib/jtreg.jar 
[2021-11-17T12:28:07,503Z]   patch:      java.base /System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/patches/java.base
[2021-11-17T12:28:07,503Z] 
[2021-11-17T12:28:07,503Z] javac compilation environment
[2021-11-17T12:28:07,503Z]   source path: /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked
[2021-11-17T12:28:07,503Z]                /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/lib
[2021-11-17T12:28:07,503Z]   class path:  /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked
[2021-11-17T12:28:07,503Z]                /System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.d
[2021-11-17T12:28:07,503Z]                /System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/test/lib
[2021-11-17T12:28:07,503Z] 
[2021-11-17T12:28:07,503Z] rerun:
[2021-11-17T12:28:07,503Z] cd /System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/scratch/1 && \
[2021-11-17T12:28:07,503Z] HOME=/var/folders/wf/pjkbzlwj783_lcjsmb4q_hcw0000gp/T/sparky-temp-home-8087675601776580732/user_home \
[2021-11-17T12:28:07,503Z] JDK8_HOME=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk/17/35/bundles/macos-x64/jdk-17_macos-x64_bin.tar.gz/jdk-17.jdk/Contents/Home \
[2021-11-17T12:28:07,503Z] JIB_DATA_DIR=/System/Volumes/Data/mesos/work_dir/jib-master \
[2021-11-17T12:28:07,503Z] JIB_HOME=/System/Volumes/Data/mesos/work_dir/jib-master/install/com/oracle/java/jib/jib/3.0-SNAPSHOT/jib-3.0-20211110.005956-479-distribution.zip/jib-3.0-SNAPSHOT-distribution \
[2021-11-17T12:28:07,504Z] JTREG_KEYWORDS=""!headful"" \
[2021-11-17T12:28:07,504Z] JTREG_VERBOSE=fail,error,time \
[2021-11-17T12:28:07,504Z] LC_ALL=C \
[2021-11-17T12:28:07,504Z] PATH=/bin:/usr/bin:/usr/sbin \
[2021-11-17T12:28:07,504Z] TEST_IMAGE_DIR=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/macosx-x64-debug.test \
[2021-11-17T12:28:07,504Z]     /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/macosx-x64-debug.jdk/jdk-18/fastdebug/bin/javac \
[2021-11-17T12:28:07,504Z]         -J-XX:MaxRAMPercentage=4.16667 \
[2021-11-17T12:28:07,504Z]         -J-Djava.io.tmpdir=/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/tmp \
[2021-11-17T12:28:07,504Z]         -J-Djava.library.path=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/macosx-x64-debug.test/hotspot/jtreg/native \
[2021-11-17T12:28:07,504Z]         -J-Dtest.vm.opts='-XX:MaxRAMPercentage=4.16667 -Djava.io.tmpdir=/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/tmp' \
[2021-11-17T12:28:07,504Z]         -J-Dtest.tool.vm.opts='-J-XX:MaxRAMPercentage=4.16667 -J-Djava.io.tmpdir=/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/tmp' \
[2021-11-17T12:28:07,504Z]         -J-Dtest.compiler.opts= \
[2021-11-17T12:28:07,504Z]         -J-Dtest.java.opts= \
[2021-11-17T12:28:07,504Z]         -J-Dtest.jdk=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/macosx-x64-debug.jdk/jdk-18/fastdebug \
[2021-11-17T12:28:07,504Z]         -J-Dcompile.jdk=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/macosx-x64-debug.jdk/jdk-18/fastdebug \
[2021-11-17T12:28:07,504Z]         -J-Dtest.timeout.factor=4.0 \
[2021-11-17T12:28:07,504Z]         -J-Dtest.nativepath=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/macosx-x64-debug.test/hotspot/jtreg/native \
[2021-11-17T12:28:07,504Z]         -J-Dtest.root=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg \
[2021-11-17T12:28:07,504Z]         -J-Dtest.name=runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java \
[2021-11-17T12:28:07,504Z]         -J-Dtest.file=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java \
[2021-11-17T12:28:07,504Z]         -J-Dtest.src=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked \
[2021-11-17T12:28:07,504Z]         -J-Dtest.src.path=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked:/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/lib \
[2021-11-17T12:28:07,504Z]         -J-Dtest.classes=/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.d \
[2021-11-17T12:28:07,504Z]         -J-Dtest.class.path=/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.d:/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/test/lib \
[2021-11-17T12:28:07,504Z]         -J-Dtest.class.path.prefix=/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.d:/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked:/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/test/lib \
[2021-11-17T12:28:07,504Z]         -d /System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.d \
[2021-11-17T12:28:07,504Z]         -sourcepath /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked:/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/lib \
[2021-11-17T12:28:07,504Z]         -classpath /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked:/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.d:/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/test/lib /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
[2021-11-17T12:28:07,504Z] 
[2021-11-17T12:28:07,504Z] ACTION: main -- Error. Agent error: java.lang.Exception: Agent 23 timed out with a timeout of 480 seconds; check console log for any additional details
[2021-11-17T12:28:07,504Z] REASON: User specified action: run main/native TestPrimitiveArrayCriticalWithBadParam 
[2021-11-17T12:28:07,504Z] TIME:   508.129 seconds
[2021-11-17T12:28:07,504Z] messages:
[2021-11-17T12:28:07,504Z] command: main TestPrimitiveArrayCriticalWithBadParam
[2021-11-17T12:28:07,504Z] reason: User specified action: run main/native TestPrimitiveArrayCriticalWithBadParam 
[2021-11-17T12:28:07,504Z] Mode: agentvm
[2021-11-17T12:28:07,504Z] Agent id: 23
[2021-11-17T12:28:07,504Z] Timeout refired 480 times
[2021-11-17T12:28:07,504Z] Timeout information:
[2021-11-17T12:28:07,504Z] --- Timeout information end.
[2021-11-17T12:28:07,504Z] elapsed time (seconds): 508.129
[2021-11-17T12:28:07,504Z] configuration:
[2021-11-17T12:28:07,504Z] Boot Layer
[2021-11-17T12:28:07,504Z]   class path: /System/Volumes/Data/mesos/work_dir/jib-master/install/jtreg/6.1/1/bundles/jtreg-6.1+1.zip/jtreg/lib/javatest.jar 
[2021-11-17T12:28:07,504Z]               /System/Volumes/Data/mesos/work_dir/jib-master/install/jtreg/6.1/1/bundles/jtreg-6.1+1.zip/jtreg/lib/jtreg.jar 
[2021-11-17T12:28:07,504Z]               /System/Volumes/Data/mesos/work_dir/jib-master/install/jtreg/6.1/1/bundles/jtreg-6.1+1.zip/jtreg/lib/junit.jar 
[2021-11-17T12:28:07,504Z]               /System/Volumes/Data/mesos/work_dir/jib-master/install/jtreg/6.1/1/bundles/jtreg-6.1+1.zip/jtreg/lib/hamcrest.jar 
[2021-11-17T12:28:07,504Z]               /System/Volumes/Data/mesos/work_dir/jib-master/install/jtreg/6.1/1/bundles/jtreg-6.1+1.zip/jtreg/lib/testng.jar 
[2021-11-17T12:28:07,504Z]               /System/Volumes/Data/mesos/work_dir/jib-master/install/jtreg/6.1/1/bundles/jtreg-6.1+1.zip/jtreg/lib/jcommander.jar 
[2021-11-17T12:28:07,504Z]               /System/Volumes/Data/mesos/work_dir/jib-master/install/jtreg/6.1/1/bundles/jtreg-6.1+1.zip/jtreg/lib/guice.jar 
[2021-11-17T12:28:07,504Z]   patch:      java.base /System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/patches/java.base
[2021-11-17T12:28:07,504Z] 
[2021-11-17T12:28:07,504Z] Test Layer
[2021-11-17T12:28:07,504Z]   class path: /System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.d
[2021-11-17T12:28:07,504Z]               /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked
[2021-11-17T12:28:07,504Z]               /System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/test/lib
[2021-11-17T12:28:07,505Z]               /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/lib
[2021-11-17T12:28:07,505Z] 
[2021-11-17T12:28:07,505Z] rerun:
[2021-11-17T12:28:07,505Z] cd /System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/scratch/1 && \
[2021-11-17T12:28:07,505Z] HOME=/var/folders/wf/pjkbzlwj783_lcjsmb4q_hcw0000gp/T/sparky-temp-home-8087675601776580732/user_home \
[2021-11-17T12:28:07,505Z] JDK8_HOME=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk/17/35/bundles/macos-x64/jdk-17_macos-x64_bin.tar.gz/jdk-17.jdk/Contents/Home \
[2021-11-17T12:28:07,505Z] JIB_DATA_DIR=/System/Volumes/Data/mesos/work_dir/jib-master \
[2021-11-17T12:28:07,505Z] JIB_HOME=/System/Volumes/Data/mesos/work_dir/jib-master/install/com/oracle/java/jib/jib/3.0-SNAPSHOT/jib-3.0-20211110.005956-479-distribution.zip/jib-3.0-SNAPSHOT-distribution \
[2021-11-17T12:28:07,505Z] JTREG_KEYWORDS=""!headful"" \
[2021-11-17T12:28:07,505Z] JTREG_VERBOSE=fail,error,time \
[2021-11-17T12:28:07,505Z] LC_ALL=C \
[2021-11-17T12:28:07,505Z] PATH=/bin:/usr/bin:/usr/sbin \
[2021-11-17T12:28:07,505Z] TEST_IMAGE_DIR=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/macosx-x64-debug.test \
[2021-11-17T12:28:07,505Z]     /System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/macosx-x64-debug.jdk/jdk-18/fastdebug/bin/java \
[2021-11-17T12:28:07,505Z]         -Dtest.vm.opts='-XX:MaxRAMPercentage=4.16667 -Djava.io.tmpdir=/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/tmp' \
[2021-11-17T12:28:07,505Z]         -Dtest.tool.vm.opts='-J-XX:MaxRAMPercentage=4.16667 -J-Djava.io.tmpdir=/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/tmp' \
[2021-11-17T12:28:07,505Z]         -Dtest.compiler.opts= \
[2021-11-17T12:28:07,505Z]         -Dtest.java.opts= \
[2021-11-17T12:28:07,505Z]         -Dtest.jdk=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/macosx-x64-debug.jdk/jdk-18/fastdebug \
[2021-11-17T12:28:07,505Z]         -Dcompile.jdk=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/macosx-x64-debug.jdk/jdk-18/fastdebug \
[2021-11-17T12:28:07,505Z]         -Dtest.timeout.factor=4.0 \
[2021-11-17T12:28:07,505Z]         -Dtest.nativepath=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/macosx-x64-debug.test/hotspot/jtreg/native \
[2021-11-17T12:28:07,505Z]         -Dtest.root=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg \
[2021-11-17T12:28:07,505Z]         -Dtest.name=runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java \
[2021-11-17T12:28:07,505Z]         -Dtest.file=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java \
[2021-11-17T12:28:07,505Z]         -Dtest.src=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked \
[2021-11-17T12:28:07,505Z]         -Dtest.src.path=/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked:/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/lib \
[2021-11-17T12:28:07,505Z]         -Dtest.classes=/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.d \
[2021-11-17T12:28:07,505Z]         -Dtest.class.path=/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.d:/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/test/lib \
[2021-11-17T12:28:07,505Z]         -Dtest.class.path.prefix=/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.d:/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked:/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/test/lib \
[2021-11-17T12:28:07,505Z]         -classpath /System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.d:/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked:/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/test/lib:/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/lib:/System/Volumes/Data/mesos/work_dir/jib-master/install/jtreg/6.1/1/bundles/jtreg-6.1+1.zip/jtreg/lib/javatest.jar:/System/Volumes/Data/mesos/work_dir/jib-master/install/jtreg/6.1/1/bundles/jtreg-6.1+1.zip/jtreg/lib/jtreg.jar \
[2021-11-17T12:28:07,505Z]         TestPrimitiveArrayCriticalWithBadParam
[2021-11-17T12:28:07,505Z] STDOUT:
[2021-11-17T12:28:07,505Z] Command line: [/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/macosx-x64-debug.jdk/jdk-18/fastdebug/bin/java -cp /System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.d:/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+24-1604/src.full/open/test/hotspot/jtreg/runtime/jni/checked:/System/Volumes/Data/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S55133/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c47de34d-9baf-4378-9788-8ba6bfdff905/runs/8b5414b8-6593-4f94-915b-691a5c16580a/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_runtime/classes/1/test/lib:/System/Volumes/Data/mesos/work_dir/jib-master/install/jtreg/6.1/1/bundles/jtreg-
[2021-11-17T12:28:07,505Z] TEST RESULT: Error. Agent error: java.lang.Exception: Agent 23 timed out with a timeout of 480 seconds; check console log for any additional details
[2021-11-17T12:28:07,505Z] --------------------------------------------------
[2021-11-17T15:16:15,288Z][INFO][pool-2-thread-1][c.o.j.s.e.SparkyExecutorRunner] EXECUTION timed out after 180 minutes
[2021-11-17T15:16:15,290Z][ERROR][pool-2-thread-1][c.o.j.s.e.SparkyExecutorRunner] TimeoutException in EXECUTION. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,os_x,,,,,,"0|i2v3dn:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-17 20:48;dholmes;Obvious fix:

diff --git a/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java b/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
index a341c5be877..c64b21c7d1b 100644
--- a/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
+++ b/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
@@ -55,6 +55,7 @@ public class TestPrimitiveArrayCriticalWithBadParam {
 
     private static void runTest() {
         List<String> pbArgs = new ArrayList<>();
+        pbArgs.add(""-XX:-CreateCoredumpOnCrash"");
         pbArgs.add(""-Xcheck:jni"");
         pbArgs.add(""-Djava.library.path="" + Utils.TEST_NATIVE_PATH);
         pbArgs.add(TestPrimitiveArrayCriticalWithBadParam.class.getName());
;;;","2021-11-22 11:54;dcubed;As [~dholmes] says, the fix is obvious:

    Add ""-XX:-CreateCoredumpOnCrash"" to the test invocation

And I verified that the test doesn't expect a core file nor
does it do anything with it if one is generated.;;;","2021-11-22 12:42;dcubed;Here's baseline testing on my MBP-13 with the test UnProblemListed:

$ do_java_test runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
INFO: GNUMAKE=make
INFO: GNUMAKE version is: GNU Make 3.81

INFO: JTREG options:
INFO:   JOBS=1
INFO:   TEST_MODE=agentvm
INFO:   EXTRA_PROBLEM_LISTS=ProblemList-extra.txt
INFO:   VM_OPTIONS=
INFO: test_val=runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
Test Config: macosx-x86_64-normal-server-release
    INFO: TIMEOUT_FACTOR=4
    Done testing
    Test Run macosx-x86_64-normal-server-release time: 0.50 minutes.

    TEST                                              TOTAL  PASS  FAIL ERROR
    jtreg:open/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
                                                          1     1     0     0

Test Config: macosx-x86_64-normal-server-fastdebug
    INFO: TIMEOUT_FACTOR=6
    Done testing
    Test Run macosx-x86_64-normal-server-fastdebug time: 0.54 minutes.

    TEST                                              TOTAL  PASS  FAIL ERROR
    jtreg:open/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
                                                          1     1     0     0

Test Config: macosx-x86_64-normal-server-slowdebug
    INFO: TIMEOUT_FACTOR=12
    Done testing
    Test Run macosx-x86_64-normal-server-slowdebug time: 0.97 minutes.

    TEST                                              TOTAL  PASS  FAIL ERROR
    jtreg:open/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
                                                          1     1     0     0

Total test time: 2.01 minutes.

$ ls /cores
core.53146	core.53288	core.53430

Three core files generated and each test took less than 1 minute.;;;","2021-11-22 12:47;dcubed;Here's testing on my MBP-13 with ""-XX:-CreateCoredumpOnCrash""  added:

$ do_java_test runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
INFO: GNUMAKE=make
INFO: GNUMAKE version is: GNU Make 3.81

INFO: JTREG options:
INFO:   JOBS=1
INFO:   TEST_MODE=agentvm
INFO:   EXTRA_PROBLEM_LISTS=ProblemList-extra.txt
INFO:   VM_OPTIONS=
INFO: test_val=runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
Test Config: macosx-x86_64-normal-server-release
    INFO: TIMEOUT_FACTOR=4
    Done testing
    Test Run macosx-x86_64-normal-server-release time: 0.19 minutes.

    TEST                                              TOTAL  PASS  FAIL ERROR
    jtreg:open/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
                                                          1     1     0     0

Test Config: macosx-x86_64-normal-server-fastdebug
    INFO: TIMEOUT_FACTOR=6
    Done testing
    Test Run macosx-x86_64-normal-server-fastdebug time: 0.30 minutes.

    TEST                                              TOTAL  PASS  FAIL ERROR
    jtreg:open/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
                                                          1     1     0     0

Test Config: macosx-x86_64-normal-server-slowdebug
    INFO: TIMEOUT_FACTOR=12
    Done testing
    Test Run macosx-x86_64-normal-server-slowdebug time: 0.81 minutes.

    TEST                                              TOTAL  PASS  FAIL ERROR
    jtreg:open/test/hotspot/jtreg/runtime/jni/checked/TestPrimitiveArrayCriticalWithBadParam.java
                                                          1     1     0     0

Total test time: 1.30 minutes.

$ ls /cores
core.53146	core.53288	core.53430

No new core files since the baseline runs and the runs were faster (of course).;;;","2021-11-22 12:48;dcubed;While I have not been able to reproduce the timeouts tracked by this bug
on my MBP-13, I have been able to show that the test no longer generates
core files which should solve the timeouts in the Mach5 test runs.;;;","2021-11-23 09:10;roboduke;Changeset: e8acac2a
Author:    Daniel D. Daugherty <dcubed@openjdk.org>
Date:      2021-11-23 17:08:31 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e8acac2aba30e8a172ca14509220ec06e833d4af
;;;",,,,,,,,,,,,,,,
dynamicArchive/SharedArchiveFileOption.java failed: '-XX:+RecordDynamicDumpInfo is unsupported when a dynamic CDS archive is specified in -XX:SharedArchiveFile:' missing,JDK-8277343,5062919,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,iklam,dcubed,dcubed,2021-11-17 07:22,2021-12-15 10:30,2023-10-01 09:57,2021-11-18 00:55,18,,,,,,,,,,,,,18,hotspot,,0,cds,regression,tier5,,,,,,,,,,,,,,"The following test failed in the JDK18 CI:

runtime/cds/appcds/dynamicArchive/SharedArchiveFileOption.java

Here's a snippet from the log file:

----------System.err:(28/1780)----------
java version ""18-ea"" 2022-03-15
Java(TM) SE Runtime Environment (fastdebug build 18-ea+24-1599)
Java HotSpot(TM) 64-Bit Server VM (fastdebug build 18-ea+24-1599, mixed mode)
 stdout: [Error occurred during initialization of VM
Cannot have more than 1 archive file specified in -XX:SharedArchiveFile during CDS dumping
];
 stderr: []
 exitValue = 1

java.lang.RuntimeException: '-XX:+RecordDynamicDumpInfo is unsupported when a dynamic CDS archive is specified in -XX:SharedArchiveFile:' missing from stdout/stderr 

	at jdk.test.lib.process.OutputAnalyzer.shouldContain(OutputAnalyzer.java:221)
	at jdk.test.lib.cds.CDSTestUtils.checkMatches(CDSTestUtils.java:491)
	at jdk.test.lib.cds.CDSTestUtils$Result.assertAbnormalExit(CDSTestUtils.java:200)
	at SharedArchiveFileOption.doTest(SharedArchiveFileOption.java:186)
	at SharedArchiveFileOption.testCustomBase(SharedArchiveFileOption.java:55)
	at DynamicArchiveTestBase.runTest(DynamicArchiveTestBase.java:74)
	at SharedArchiveFileOption.main(SharedArchiveFileOption.java:45)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.RuntimeException: '-XX:+RecordDynamicDumpInfo is unsupported when a dynamic CDS archive is specified in -XX:SharedArchiveFile:' missing from stdout/stderr 

JavaTest Message: shutting down test

STATUS:Failed.`main' threw exception: java.lang.RuntimeException: '-XX:+RecordDynamicDumpInfo is unsupported when a dynamic CDS archive is specified in -XX:SharedArchiveFile:' missing from stdout/stderr
----------rerun:(37/9630)*----------",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v3b7:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,Verified,,"2021-11-17 07:25;dcubed;[~iklam] - This new test failure might be related to:

JDK-8276787 Improve warning messages for -XX:+RecordDynamicDumpInfo

The failures started in jdk-18+24-1599-tier5 which includes the fix for JDK-8276787.;;;","2021-11-17 08:32;iklam;I will prepare a fix.;;;","2021-11-18 00:54;roboduke;Changeset: db55f927
Author:    Ioi Lam <iklam@openjdk.org>
Date:      2021-11-18 08:49:07 +0000
URL:       https://git.openjdk.java.net/jdk/commit/db55f9272c0889f4ea4dee0f4aa3d9613fadb2f8
;;;","2021-11-18 06:34;dcubed;The fix for this bug is in jdk-18+25-1621 which has just reached Tier4.;;;",,,,,,,,,,,,,,,,,
vmTestbase/nsk/stress/strace/strace004.java fails with SIGSEGV in InstanceKlass::jni_id_for,JDK-8277342,5062918,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,coleenp,dcubed,dcubed,2021-11-17 07:16,2022-01-05 05:54,2023-10-01 09:57,2021-11-19 09:50,18,,,,,,,,,,,,,18,hotspot,,0,intermittent,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok-next,jdk17u-fix-yes,tier5,,,,,,,,,,"The following test failed in the JDK18 CI:

vmTestbase/nsk/stress/strace/strace004.java

Here's a snippet from the log file:

#section:main
----------messages:(4/191)----------
command: main nsk.stress.strace.strace004
reason: User specified action: run main/othervm/native nsk.stress.strace.strace004 
Mode: othervm [/othervm specified]
elapsed time (seconds): 28.11
----------configuration:(0/0)----------
----------System.out:(68/3164)----------
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x0000fffe012f3860, pid=1278958, tid=1279864
#
# JRE version: Java(TM) SE Runtime Environment (18.0+24) (fastdebug build 18-ea+24-1595)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+24-1595, compiled mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-aarch64)
# Problematic frame:
# V  [libjvm.so+0xe53860]  InstanceKlass::jni_id_for(int)+0xc
#
# Core dump will be written. Default location: Core dumps may be processed with ""/opt/core.sh %p"" (or dumping to /opt/mach5/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S33676/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c789aae0-376a-479b-8159-4444c8488ebb/runs/b9f2e469-90b9-4d0e-8039-d8ce170ca1e9/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_stress/scratch/1/core.1278958)
#
# An error report file with more information is saved as:
# /opt/mach5/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S33676/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c789aae0-376a-479b-8159-4444c8488ebb/runs/b9f2e469-90b9-4d0e-8039-d8ce170ca1e9/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_stress/scratch/1/hs_err_pid1278958.log
[thread 1279812 also had an error]
[thread 1279823 also had an error]
[thread 1279857 also had an error]
[thread 1279781 also had an error]
[thread 1279790 also had an error]
[thread 1279809 also had an error]
[thread 1279801 also had an error]
[thread 1279788 also had an error]
[thread 1279853 also had an error]
[thread 1279804 also had an error]
[thread 1279813 also had an error]
[thread 1279847 also had an error]
[thread 1279810 also had an error]
[thread 1279776 also had an error]
[thread 1279854 also had an error]
[thread 1279815 also had an error]
[thread 1279768 also had an error]
[thread 1279844 also had an error]
[thread 1279814 also had an error]
[thread 1279817 also had an error]
[thread 1279789 also had an error]
[thread 1279845 also had an error]
[thread 1279805 also had an error]
[thread 1279799 also had an error]
[thread 1279849 also had an error][thread 1279786 also had an error]

[thread 1279780 also had an error]
[thread 1279822 also had an error]
[thread 1279820 also had an error]
[thread 1279843 also had an error]
[thread 1279867 also had an error]
[thread 1279803 also had an error]
[thread 1279783 also had an error]
[thread 1279769 also had an error]
[thread 1279818 also had an error]
[thread 1279824 also had an error]
[thread 1279835 also had an error]
[thread 1279784 also had an error]
[thread 1279833 also had an error]
[thread 1279782 also had an error]
[thread 1279839 also had an error]
[thread 1279778 also had an error]
[thread 1279846 also had an error]
[thread 1279821 also had an error][thread 1279779 also had an error]

[thread 1279836 also had an error]
[thread 1279793 also had an error]
[thread 1279827 also had an error]
[thread 1279852 also had an error]
[thread 1279851 also had an error]
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#
----------System.err:(0/0)----------
----------rerun:(42/8549)*----------


Here's the crashing thread's stack:

---------------  T H R E A D  ---------------

Current thread (0x0000fffd900dd760):  JavaThread ""strace004Thread96"" [_thread_in_vm, id=1279864, stack(0x0000fffcd0000000,0x0000fffcd0200000)]

Stack: [0x0000fffcd0000000,0x0000fffcd0200000],  sp=0x0000fffcd01fe240,  free space=2040k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xe53860]  InstanceKlass::jni_id_for(int)+0xc
C  [libstrace004.so+0x32a0]  Java_nsk_stress_strace_strace004Thread_recursiveMethod+0xa6c
J 5024  nsk.stress.strace.strace004Thread.recursiveMethod()V (0 bytes) @ 0x0000fffdeccdc7bc [0x0000fffdeccdc740+0x000000000000007c]

[error occurred during error reporting (printing native stack), id 0xe0000000, Internal Error (/opt/mach5/mesos/work_dir/slaves/35546316-ed70-4084-8244-d672e7734fd1-S13285/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/fbbe2b1b-1e4e-4571-b29a-37bd1fcae805/runs/f38f8a59-bfa3-4531-a0c7-24629fcad4b8/workspace/open/src/hotspot/cpu/aarch64/frame_aarch64.inline.hpp:81)]

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
J 5024  nsk.stress.strace.strace004Thread.recursiveMethod()V (0 bytes) @ 0x0000fffdeccdc7bc [0x0000fffdeccdc740+0x000000000000007c]
J 5025 c2 nsk.stress.strace.strace004Thread.run()V (5 bytes) @ 0x0000fffdeccdcb14 [0x0000fffdeccdcac0+0x0000000000000054]
v  ~StubRoutines::call_stub

siginfo: si_signo: 11 (SIGSEGV), si_code: 1 (SEGV_MAPERR), si_addr: 0xf1f1f1f1f1f1f209",,,,,,,,,,JDK-8277557,JDK-8277559,JDK-8279516,JDK-8279517,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,linux,,,,,,"0|i2v3az:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-18 09:26;coleenp;These threads are racing calling InstanceKlass::to_jni_id:

2078	/* jni_id_for for jfieldIds only */
2079	JNIid* InstanceKlass::jni_id_for(int offset) {
2080	  JNIid* probe = jni_ids() == NULL ? NULL : jni_ids()->find(offset);   <=== crash is here accessing JNIid::_next
2081	  if (probe == NULL) {
2082	    probe = jni_id_for_impl(offset);
2083	  }
2084	  return probe;


(gdb) print probe
$2 = (JNIid *) 0xf1f1f1f1f1f1f1f1

0xf1f1 is the uninitBlockPad - ie pattern to initialize newly allocated memory in os::malloc. But if you look at the list, it's perfectly valid.

(gdb) print _jni_ids
$3 = (JNIid *) 0xfffcdc001710
(gdb) print _jni_ids->_next
$4 = (JNIid *) 0xfffd78001d70
(gdb) print _jni_ids->_next->_next
$5 = (JNIid *) 0xfffd78001e80
(gdb) print _jni_ids->_next->_next->_next
$6 = (JNIid *) 0x0

There are no memory ordering operations.

/* jni_id_for_impl for jfieldIds only */
JNIid* InstanceKlass::jni_id_for_impl(int offset) {
  MutexLocker ml(JfieldIdCreation_lock);
  // Retry lookup after we got the lock
  JNIid* probe = jni_ids() == NULL ? NULL : jni_ids()->find(offset);
  if (probe == NULL) {
    // Slow case, allocate new static field identifier
    probe = new JNIid(this, offset, jni_ids());
    set_jni_ids(probe); 
  } 
  return probe;
} 

jni_id_for_impl does the same thing only will allocate a new block and uses a lock.  This should be jni_id_for.;;;","2021-11-18 13:54;coleenp;jni_id_for_impl was not for performance.  It was to handleize the klassOop before taking out the JfieldIdCreation_lock.
/* jni_id_for_impl for jfieldIds only */
JNIid* InstanceKlass::jni_id_for_impl(instanceKlassHandle this_oop, int offset) {
  MutexLocker ml(JfieldIdCreation_lock);
  // Retry lookup after we got the lock
  JNIid* probe = this_oop->jni_ids() == NULL ? NULL : this_oop->jni_ids()->find(offset);
  if (probe == NULL) {
    // Slow case, allocate new static field identifier
    probe = new JNIid(this_oop(), offset, this_oop->jni_ids());
    this_oop->set_jni_ids(probe);
  }
  return probe;
}


/* jni_id_for for jfieldIds only */
JNIid* InstanceKlass::jni_id_for(int offset) {
  JNIid* probe = jni_ids() == NULL ? NULL : jni_ids()->find(offset);
  if (probe == NULL) {
    probe = jni_id_for_impl(this, offset);
  }
  return probe;
}
;;;","2021-11-19 09:26;dcubed;Here's the crashing thread's stack trace for the jdk-18+25-1641-tier5 sighting:

vmTestbase/nsk/stress/strace/strace008.java

---------------  T H R E A D  ---------------

Current thread (0x0000fffee80447e0):  JavaThread ""strace008Thread2"" [_thread_in_vm, id=3395660, stack(0x0000ffff06c30000,0x0000ffff06e30000)]

Stack: [0x0000ffff06c30000,0x0000ffff06e30000],  sp=0x0000ffff06e09ed0,  free space=1895k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xe6ad60]  InstanceKlass::jni_id_for(int)+0xc
C  [libstrace008.so+0x2b20]  Java_nsk_stress_strace_strace008Thread_recursiveMethod+0x2ec
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]

[error occurred during error reporting (printing native stack), id 0xe0000000, Internal Error (/opt/mach5/mesos/work_dir/slaves/35546316-ed70-4084-8244-d672e7734fd1-S13306/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/2cf2619a-2ccb-4281-a0cc-83925fd8dfdc/runs/898907cd-d389-4fbe-84dc-105143e92c87/workspace/open/src/hotspot/cpu/aarch64/frame_aarch64.inline.hpp:81)]

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
v  ~StubRoutines::call_stub
J 2634  nsk.stress.strace.strace008Thread.recursiveMethod()V (0 bytes) @ 0x0000ffff41a56bbc [0x0000ffff41a56b40+0x000000000000007c]
j  nsk.stress.strace.strace008Thread.run()V+1
v  ~StubRoutines::call_stub

siginfo: si_signo: 11 (SIGSEGV), si_code: 1 (SEGV_MAPERR), si_addr: 0xf1f1f1f1f1f1f209;;;","2021-11-19 09:50;roboduke;Changeset: 09e8c8c6
Author:    Coleen Phillimore <coleenp@openjdk.org>
Date:      2021-11-19 17:48:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/09e8c8c64abf4178a042c79b92d7e08e54467331
;;;","2021-11-29 07:32;zgu;Fix Request (11u)

A clean backport for parity with Oracle 11.0.15. 

Affected test passed.
;;;","2021-12-01 13:21;clanger;This should go into jdk17u first. (It's only in 17.0.3-oracle as of now);;;","2021-12-01 13:50;zgu;Fix Request (17u)

A clean backport for parity with Oracle 17.0.3.

Affected test passed.

Rebased to jdk17u-dev.;;;","2022-01-04 05:56;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/53
Date: 2022-01-04 13:52:17 +0000
;;;",,,,,,,,,,,,,
jdk/jshell/CommandCompletionTest.java failures on Windows,JDK-8277328,5062898,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jlahoda,mbaesken,mbaesken,2021-11-17 01:17,2022-02-08 06:07,2023-10-01 09:57,2021-12-07 10:16,11,17,18,,,,,,,,,,,18,tools,,1,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok-next,jdk17u-fix-yes,,,,,,,,,,,,"The test jdk/jshell/CommandCompletionTest.java  fails on some Windows machines; seems it has problems with UserHome entries :

test CommandCompletionTest.testUserHome(): failure
java.lang.AssertionError: Command: /env --class-path ~/3D Objects|, output: []: lists don't have the same size expected [1] but found [0]
        at org.testng.Assert.fail(Assert.java:99)
        at org.testng.Assert.failNotEquals(Assert.java:1037)
        at org.testng.Assert.assertEqualsImpl(Assert.java:140)
        at org.testng.Assert.assertEquals(Assert.java:122)
        at org.testng.Assert.assertEquals(Assert.java:907)
        at org.testng.Assert.assertEquals(Assert.java:1089)
        at CommandCompletionTest.assertCompletion(CommandCompletionTest.java:89)
        at CommandCompletionTest.assertCompletion(CommandCompletionTest.java:83)
        at CommandCompletionTest.lambda$testUserHome$91(CommandCompletionTest.java:356)
        at ReplToolTesting$PromptedCommandOutputStream.write(ReplToolTesting.java:824)
        at java.base/java.io.PrintStream.write(PrintStream.java:537)
",,,,,,,,,,JDK-8281457,JDK-8279316,JDK-8281391,JDK-8280021,JDK-8281390,JDK-8278690,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277856,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,windows,,,,,,"0|i2v36j:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@ef6d34f,,,,,,,,,"2021-12-07 10:16;roboduke;Changeset: 3955b037
Author:    Jan Lahoda <jlahoda@openjdk.org>
Date:      2021-12-07 18:15:25 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3955b037da8a0981d8efc67f28caaacdef7dfb31
;;;","2021-12-10 06:35;mbaesken;Fix Request (17u):
I want to have the patch backported to 17u as well, because the issue is present there too. The patch applies cleanly.;;;","2021-12-21 23:55;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/26
Date: 2021-12-22 07:50:22 +0000
;;;","2022-01-13 07:22;goetz;Fix request [11u]

We see this test failure in our nightly tests of 11, too. 
Clean backport.
SAP nightly testing passes, test is green now.;;;","2022-01-13 07:23;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/757
Date: 2022-01-13 15:17:43 +0000;;;",,,,,,,,,,,,,,,,
"C2 compilation fails with ""bad AD file"" on x86-32 after JDK-8276162 due to missing match rule",JDK-8277324,5062890,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,thartmann,thartmann,thartmann,2021-11-16 23:58,2022-09-01 22:57,2023-10-01 09:57,2021-11-19 00:25,18,,,,,,,,,,,,,18,hotspot,,0,32-bit,c2,oraclejdk-na,oracle-triage-11,oracle-triage-17,oracle-triage-18,regression,,,,,,,,,,"Reproduces on 32-bit x86 with newly added compiler/c2/irTests/TestUnsignedComparison.java:

 628       3       compiler.c2.irTests.TestUnsignedComparison::testLongVarNE (20 bytes)   made not entrant
    770  641    b  4       compiler.c2.irTests.TestUnsignedComparison::testLongVarLT (20 bytes)
 13  Parm  ===  3  [[ 34 ]] Parm3: long !jvms: TestUnsignedComparison::testLongVarLT @ bci:-1 (line 234)
 11  Parm  ===  3  [[ 34 ]] Parm1: long !jvms: TestUnsignedComparison::testLongVarLT @ bci:-1 (line 234)
 34  CmpUL  === _  11  13  [[ 47 ]]  !jvms: TestUnsignedComparison::testLongVarLT @ bci:11 (line 234)
 30  ConI  ===  0  [[ 48 ]]  #int:0
 41  ConI  ===  0  [[ 48 ]]  #int:1
 47  Bool  === _  34  [[ 48 ]] [ge]
 3  Start  ===  3  0  [[ 3  5  6  7  8  9  13  11 ]]  #{0:control, 1:abIO, 2:memory, 3:rawptr:BotPTR, 4:return_address, 5:compiler/c2/irTests/TestUnsignedComparison:NotNull *, 6:long, 7:half, 8:long, 9:half}
 48  CMoveI  === _  47  41  30  [[ 45 ]]  #bool !orig=[46],[43] !jvms: TestUnsignedComparison::testLongVarLT @ bci:19 (line 234)
 9  Parm  ===  3  [[ 45 ]] ReturnAdr !jvms: TestUnsignedComparison::testLongVarLT @ bci:-1 (line 234)
 8  Parm  ===  3  [[ 45 ]] FramePtr !jvms: TestUnsignedComparison::testLongVarLT @ bci:-1 (line 234)
 7  Parm  ===  3  [[ 45 ]] Memory  Memory: @BotPTR *+bot, idx=Bot; !jvms: TestUnsignedComparison::testLongVarLT @ bci:-1 (line 234)
 6  Parm  ===  3  [[ 45 ]] I_O !jvms: TestUnsignedComparison::testLongVarLT @ bci:-1 (line 234)
 5  Parm  ===  3  [[ 45 ]] Control !jvms: TestUnsignedComparison::testLongVarLT @ bci:-1 (line 234)
 45  Return  ===  5  6  7  8  9 returns 48  [[ 0 ]] 
 0  Root  ===  0  45  [[ 0  1  3  41  30 ]] inner 
o48  CMoveI  === _ o49 o50  [[o45  2 ]]  #bool

--N: o48  CMoveI  === _ o49 o50  [[o45  2 ]]  #bool

   --N: o49  Binary  === _ o47 o34  [[o48 ]] 
   _Binary_cmpOpU_commute_flagsReg_ulong_LEGT  300  _Binary_cmpOpU_commute_flagsReg_ulong_LEGT

      --N: o47  Bool  === _ o34  [[o49 ]] [ge]
      CMPOP  0  CMPOP
      CMPOPU  0  CMPOPU
      CMPOPUCF  0  CMPOPUCF
      CMPOP_FCMOV  0  CMPOP_FCMOV
      CMPOP_COMMUTE  0  CMPOP_COMMUTE
      CMPOPU_COMMUTE  0  CMPOPU_COMMUTE
      CMPOP_VCMPPD  0  CMPOP_VCMPPD

      --N: o34  CmpUL  === _ o11 o13  [[o47 o49 ]] 
      FLAGSREG_ULONG_LTGE  300  cmpUL_reg_flags_LTGE
      FLAGSREG_ULONG_EQNE  500  cmpUL_reg_flags_EQNE
      FLAGSREG_ULONG_LEGT  300  cmpUL_reg_flags_LEGT

         --N: o11  Parm  === o3  [[o34 ]] Parm1: long
         EREGL  0  EREGL
         EADXREGL  0  EADXREGL
         EBCXREGL  0  EBCXREGL
         EADXREGL_LOW_ONLY  0  EADXREGL_LOW_ONLY
         STACKSLOTL  200  storeSSL

         --N: o13  Parm  === o3  [[o34 ]] Parm3: long
         EREGL  0  EREGL
         EADXREGL  0  EADXREGL
         EBCXREGL  0  EBCXREGL
         EADXREGL_LOW_ONLY  0  EADXREGL_LOW_ONLY
         STACKSLOTL  200  storeSSL

   --N: o50  Binary  === _ o41 o30  [[o48 ]] 
   _Binary_rRegI_rRegI  150  _Binary_rRegI_rRegI
   _Binary_eAXRegI_rRegI  150  _Binary_eAXRegI_rRegI
   _Binary_eAXRegI_eCXRegI  150  _Binary_eAXRegI_eCXRegI
   _Binary_nadxRegI_eAXRegI  150  _Binary_nadxRegI_eAXRegI

      --N: o41  ConI  === o0  [[o50 ]]  #int:1
      IMMI  10  IMMI
      IMMI_1  0  IMMI_1
      IMMI2  0  IMMI2
      IMMI8  5  IMMI8
      IMMU8  5  IMMU8
      IMMI16  10  IMMI16
      IMMU31  0  IMMU31
      IMMI_1_31  0  IMMI_1_31
      RREGI  100  loadConI
      XREGI  100  loadConI
      EAXREGI  100  loadConI
      EBXREGI  100  loadConI
      ECXREGI  100  loadConI
      EDXREGI  100  loadConI
      EDIREGI  100  loadConI
      NAXREGI  100  loadConI
      NADXREGI  100  loadConI
      NCXREGI  100  loadConI
      ESIREGI  100  loadConI
      STACKSLOTI  200  storeSSI

      --N: o30  ConI  === o0  [[o50 ]]  #int:0
      IMMI  10  IMMI
      IMMI_0  0  IMMI_0
      IMMI2  0  IMMI2
      IMMI8  5  IMMI8
      IMMU8  5  IMMU8
      IMMI16  10  IMMI16
      IMMU31  0  IMMU31
      RREGI  50  loadConI0
      XREGI  50  loadConI0
      EAXREGI  50  loadConI0
      EBXREGI  50  loadConI0
      ECXREGI  50  loadConI0
      EDXREGI  50  loadConI0
      EDIREGI  50  loadConI0
      NAXREGI  50  loadConI0
      NADXREGI  50  loadConI0
      NCXREGI  50  loadConI0
      ESIREGI  50  loadConI0
      STACKSLOTI  150  storeSSI

# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/matcher.cpp:1714
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/home/buildbot/worker/build-jdkX-linux/build/src/hotspot/share/opto/matcher.cpp:1714), pid=446199, tid=446214
#  assert(false) failed: bad AD file
#
# JRE version: OpenJDK Runtime Environment (18.0) (fastdebug build 18-testing+0-builds.shipilev.net-openjdk-jdk-b74-20211116)
# Java VM: OpenJDK Server VM (fastdebug 18-testing+0-builds.shipilev.net-openjdk-jdk-b74-20211116, mixed mode, sharing, tiered, g1 gc, linux-x86)
# Problematic frame:
# V  [libjvm.so+0x1164aa5]  Matcher::Label_Root(Node const*, State*, Node*, Node*&)+0x565
#
# No core dump will be written. Core dumps have been disabled. To enable core dumping, try ""ulimit -c unlimited"" before starting Java again
#
Unsupported internal testing APIs have been used.

# An error report file with more information is saved as:
# /oracle/jdk/JTwork/scratch/hs_err_pid446199.log
#
# Compiler replay data is saved as:
# /oracle/jdk/JTwork/scratch/replay_pid446199.log
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276162,JDK-8277621,,,,,,,,,"2021-11-17 00:02;thartmann;hs_err_pid446199.log;https://bugs.openjdk.org/secure/attachment/97120/hs_err_pid446199.log","2021-11-17 00:02;thartmann;replay_pid446199.log;https://bugs.openjdk.org/secure/attachment/97121/replay_pid446199.log",,,,,,,x86,,,,,,,,,,,18,,,,,,,,"0|i2v34r:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-17 00:10;thartmann;JDK-8276162 introduced new IR shapes and it looks like 32-bit x86 is missing a corresponding matching rule in the backend.

ILW = Crash during C2 compilation (regression from JDK-8276162), reproducible with test on 32-bit x86, no workaround but disable compilation of affected method = HMM = P2;;;","2021-11-17 01:12;thartmann;The problem is that 32-bit x86 does not have a match rule for CMoveI comparing 2 longs.;;;","2021-11-19 00:25;roboduke;Changeset: 3a76d397
Author:    Tobias Hartmann <thartmann@openjdk.org>
Date:      2021-11-19 08:23:45 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3a76d397949ad22e4786476e583cc9d33c015214
;;;",,,,,,,,,,,,,,,,,,
ciReplay: dump_replay_data is not thread-safe,JDK-8277316,5062870,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,dlong,dlong,dlong,2021-11-16 20:43,2021-12-13 02:52,2023-10-01 09:57,2021-11-17 12:28,18,,,,,,,,,,,,,18,hotspot,,0,ci-replay,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,,"ciEnv::dump_replay_data uses a static buffer for the file name, which can cause corrupted replay files when the DumpReplay option is used.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277301,JDK-8276969,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v30b:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-17 05:47;chagedorn;ILW = Potentially corrupted replay files with DumpReplay, medium?, no workaround = MMH = P3 ;;;","2021-11-17 12:28;roboduke;Changeset: d8c02802
Author:    Dean Long <dlong@openjdk.org>
Date:      2021-11-17 20:26:25 +0000
URL:       https://git.openjdk.java.net/jdk/commit/d8c0280273fa9f8e113088d6a43a4af076cd4f87
;;;",,,,,,,,,,,,,,,,,,,
Validate header failed for test/jdk/java/net/httpclient/HeadTest.java,JDK-8277313,5062866,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,fmatte,fmatte,fmatte,2021-11-16 19:34,2022-04-13 07:21,2023-10-01 09:57,2021-11-16 22:15,18,,,,,,,,,,,,,18,core-libs,,0,ursqe-triaged,,,,,,,,,,,,,,,,"With the integration of JDK-8276559, validate header failed as there is one missing comma after 2021 in https://github.com/openjdk/jdk/commit/23e5117a55b3f3d0e3d26bf2d481f4ad1c99af57#diff-5e76e00208a51daafb108b4bb192f2845ed13e0b05f22b08728ffabe2fcd0cf7R2",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276559,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v2zf:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,Verified,,"2021-11-16 22:15;roboduke;Changeset: 08f65a59
Author:    Fairoz Matte <fmatte@openjdk.org>
Committer: Jayathirth D V <jdv@openjdk.org>
Date:      2021-11-17 06:13:26 +0000
URL:       https://git.openjdk.java.net/jdk/commit/08f65a59a7bd387974d94253ec7093524a3e92f1
;;;",,,,,,,,,,,,,,,,,,,,
ciReplay: @cpi MethodHandle references not resolved,JDK-8277310,5062862,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,dlong,dlong,dlong,2021-11-16 17:28,2021-12-13 02:52,2023-10-01 09:57,2021-11-17 12:19,18,,,,,,,,,,,,,18,hotspot,,0,ci-replay,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,,"Replay is not actually resolving the ""@cpi"" constant pool references, so it can return a null MethodHandle object.
See failure 2 and replay_bug_02.log in 8277301 to reproduce.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277301,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v2yj:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-16 17:54;dlong;ILW = MMH = P3;;;","2021-11-17 12:18;roboduke;Changeset: 8881f29b
Author:    Dean Long <dlong@openjdk.org>
Date:      2021-11-17 20:18:07 +0000
URL:       https://git.openjdk.java.net/jdk/commit/8881f29bc83336bcbc0e8ff0cf1d2bbe55172f5c
;;;",,,,,,,,,,,,,,,,,,,
Pre shared key sent under both session_ticket and pre_shared_key extensions,JDK-8277307,5061165,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,djelinski,webbuggrp,webbuggrp,2021-10-26 06:40,2022-09-25 10:54,2023-10-01 09:57,2022-06-07 23:37,11,17,18,,,,,,,,,,,19,security-libs,,0,additional-information-received,dcsaw,regression,reproducer-yes,webbug,,,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
Tested on orcacle JDK 17.0.1 and Open JDK 17+35

A DESCRIPTION OF THE PROBLEM :
This occurs when communicating jvm to jvm on java 17 with TLSv1.3. The pre_shared_key is sent under the session_ticket extension as well.

REGRESSION : Last worked in version 11.0.13

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Run the example code, provide keystore and truststore as instructed in the code example

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
On the second request, the pre_shared_key extension populated in client hello, but not in session_ticket extension
ACTUAL -
Both extensions carry the same data.

---------- BEGIN SOURCE ----------
import javax.net.ssl.SSLServerSocket;
import javax.net.ssl.SSLServerSocketFactory;
import javax.net.ssl.SSLSocket;
import javax.net.ssl.SSLSocketFactory;
import java.io.*;

/*
 * This code is based on https://blog.gypsyengineer.com/en/security/an-example-of-tls-13-client-and-server-on-java.html
 * to reproduce a TLS issue with pre_shared_key and session_ticket.
 * Don't forget to set the following system properties when you run the class:
 *
 *     javax.net.ssl.keyStore
 *     javax.net.ssl.keyStorePassword
 *     javax.net.ssl.trustStore
 *     javax.net.ssl.trustStorePassword
 *
 * More details can be found in JSSE docs.
 *
 * For example:
 * 
 *     java -cp classes \
 *         -Djavax.net.ssl.keyStore=keystore \
 *         -Djavax.net.ssl.keyStorePassword=passphrase \
 *         -Djavax.net.ssl.trustStore=keystore \
 *         -Djavax.net.ssl.trustStorePassword=passphrase \
 *             TLSv13Test
 *
 * For testing purposes, you can download the keystore file from 
 *
 *     https://github.com/openjdk/jdk/tree/master/test/jdk/javax/net/ssl/etc
 */
public class TLSv13Test {

    private static final int delay = 1000; // in millis
    private static final String message =
            ""Like most of life's problems, this one can be solved with bending!"";

    public static void main(String[] args) throws Exception {
        try (EchoServer server = EchoServer.create()) {
            new Thread(server).start();
            Thread.sleep(delay);

            var port = server.port();

            try (SSLSocket socket = createSocket(""localhost"", port)) {
                talkToServer(socket);
            }
            Thread.sleep(delay);
            try (SSLSocket socket = createSocket(""localhost"", port)) {
                // This time on JDK17 (OpenJDK Runtime Environment Temurin-17+35 (build 17+35))
                // the Client Hello will contain the same data in pre_shared_key and session_ticket
                // as can be observed in Wireshark for example
                talkToServer(socket);
            }
        }
    }

    private static void talkToServer(SSLSocket socket) throws IOException {
        InputStream is = new BufferedInputStream(socket.getInputStream());
        OutputStream os = new BufferedOutputStream(socket.getOutputStream());
        os.write(message.getBytes());
        os.flush();
        byte[] data = new byte[2048];
        int len = is.read(data);
        if (len <= 0) {
            throw new IOException(""no data received"");
        }
        System.out.printf(""client received %d bytes: %s%n"",
                len, new String(data, 0, len));
    }

    public static SSLSocket createSocket(String host, int port) throws IOException {
        SSLSocket socket = (SSLSocket) SSLSocketFactory.getDefault()
                .createSocket(host, port);
        socket.setEnableSessionCreation(true);
        return socket;
    }

    public static class EchoServer implements Runnable, AutoCloseable {

        private static final int FREE_PORT = 0;

        private final SSLServerSocket sslServerSocket;

        private EchoServer(SSLServerSocket sslServerSocket) {
            this.sslServerSocket = sslServerSocket;
        }

        public int port() {
            return sslServerSocket.getLocalPort();
        }

        @Override
        public void close() throws IOException {
            if (sslServerSocket != null && !sslServerSocket.isClosed()) {
                sslServerSocket.close();
            }
        }

        @Override
        public void run() {
            System.out.printf(""server started on port %d%n"", port());

            while (!sslServerSocket.isClosed()) {
                try (SSLSocket socket = (SSLSocket) sslServerSocket.accept()) {
                    System.out.println(""accepted"");
                    InputStream is = new BufferedInputStream(socket.getInputStream());
                    OutputStream os = new BufferedOutputStream(socket.getOutputStream());
                    byte[] data = new byte[2048];
                    int len = is.read(data);
                    if (len <= 0) {
                        throw new IOException(""no data received"");
                    }
                    System.out.printf(""server received %d bytes: %s%n"",
                            len, new String(data, 0, len));
                    os.write(data, 0, len);
                    os.flush();
                } catch (Exception e) {
                    System.out.printf(""exception: %s%n"", e.getMessage());
                    e.printStackTrace(System.err);
                }
            }
        }

        public static EchoServer create() throws IOException {
            return create(FREE_PORT);
        }

        public static EchoServer create(int port) throws IOException {
            SSLServerSocket socket = (SSLServerSocket)
                    SSLServerSocketFactory.getDefault().createServerSocket(port);
            return new EchoServer(socket);
        }
    }
}
---------- END SOURCE ----------

CUSTOMER SUBMITTED WORKAROUND :
Set jdk.tls.client.enableSessionTicketExtension=false on the client

FREQUENCY : often


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JI-9071774,,,,,,,,,,,,,,,,,,,,,,JDK-8211018,,,,,,,,,,"2021-11-15 03:19;tongwan;TLSv13Test.java;https://bugs.openjdk.org/secure/attachment/97090/TLSv13Test.java",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2usjf:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@39d9862,,,,,,,Verified,,"2021-10-27 20:28;tongwan;The observations on Windows 10:
JDK 11: Failed, both server and client received 66 bytes.
JDK 17: Failed.
JDK 18ea+1: Failed.

There was no regression observed.;;;","2021-10-28 05:31;tongwan;Requested the submitter to confirm the outputs of the reproducer.;;;","2021-11-15 02:48;pkoppula;This is expected behavior, was introduced as part of JDK-8211018 and it's not backported to jdk11u yet, hence we see the difference in jdk11u. ;;;","2021-11-18 20:50;pnarayanaswa;Additional Information from submitter:
===========================
The concrete error this issue caused was that the client hello message grew too large for one record > 16kB, which Spring Boot embedded Tomcat (9.0.54) didn't expect. The pre_shared_key is about 8kB, probably because of mTLS being used.;;;","2021-12-14 04:21;pkoppula;It's expected behavior. Hence proposing to close this request/ issue.;;;","2022-05-23 11:37;djelinski;This is not the expected behavior; when resuming a session using TLS1.3, we should send:

    ""session_ticket (35)"": {
      <empty>
    },
    ""pre_shared_key (41)"": {
      ""PreSharedKey"": { ... }
    }

instead we are sending the same bytes under PSK identity and session_ticket, inflating the client hello size for no practical reason.
We should only send data under session_ticket when resuming a pre-TLS1.3 session, otherwise we should send an empty extension.;;;","2022-05-27 07:08;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8922
Date: 2022-05-27 13:20:24 +0000;;;","2022-06-07 23:37;dukebot;Changeset: 4662e06b
Author:    Daniel Jeliński <djelinski@openjdk.org>
Date:      2022-06-08 06:33:40 +0000
URL:       https://git.openjdk.java.net/jdk/commit/4662e06bff2cef7425c194a9cdd7a6fe7469179e
;;;","2022-06-09 08:18;wetmore;> The concrete error this issue caused was that the client hello message grew too large
> for one record > 16kB, which Spring Boot embedded Tomcat (9.0.54) didn't expect.

[~pnarayanaswa]/[~pkoppula]

What TLS stack is the Spring Boot embedded Tomcat using?  

We believe SunJSSE correctly fragments/reassembles handshake messages up to the limits in SSLConfiguration (jdk.tls.maxHandshakeMessageSize), so if Spring Boot embedded Tomcat was using SunJSSE or if our messages are incorrect, please open a new bug.   Thanks.;;;",,,,,,,,,,,,
Terminology mismatch between JLS17-3.9 and SE17's javax.lang.model.SourceVersion method specs,JDK-8277303,5062857,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,darcy,dbessono,dbessono,2021-11-16 15:00,2021-11-25 00:25,2023-10-01 09:57,2021-11-17 12:24,17,,,,,,,,,,,,,18,core-libs,,0,conformance,,,,,,,,,,,,,,,,"SE17's specification of javax.lang.model.SourceVersion methods
https://docs.oracle.com/en/java/javase/17/docs/api/java.compiler/javax/lang/model/SourceVersion.html
uses ""restricted keywords and restricted identifiers"" terms.
Methods that use these terms refer to Java Language Specification.

However JLS17 doesn't mention ""restricted keywords"" or ""restricted identifiers"" any more; instead the new term seems to be ""contextual keywords""
https://docs.oracle.com/javase/specs/jls/se17/html/jls-3.html#jls-3.9

""restricted keywords"" / ""restricted identifiers"" are present in JLS16
https://docs.oracle.com/javase/specs/jls/se16/html/jls-3.html#jls-3.9

""restricted keywords"" first appeared in JLS9 
https://docs.oracle.com/javase/specs/jls/se9/html/jls-3.html#jls-3.9",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277325,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v2xf:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3c6c40,,,,,,,,,"2021-11-17 12:24;roboduke;Changeset: 007ad7c7
Author:    Joe Darcy <darcy@openjdk.org>
Date:      2021-11-17 20:23:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/007ad7c77c6277ce733386b4402b787d81dd41cf
;;;",,,,,,,,,,,,,,,,,,,,
Issues with javadoc support for preview features,JDK-8277300,5062850,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jlahoda,jjg,jjg,2021-11-16 12:51,2022-03-22 08:11,2023-10-01 09:57,2022-02-18 01:43,18,,,,,,,,,,,,,19,tools,,0,javadoc-preview,,,,,,,,,,,,,,,,"Loom has announced a new preview API, StructuredExecutor. javadoc's preview flagging is looking good -- see https://download.java.net/java/early_access/loom/docs/api/java.base/java/util/concurrent/StructuredExecutor.html -- but two observations:

1. [Missing anchor] See the paragraph that begins ""StructuredExecutor defines the ..."" -- the open method has a PREVIEW superscript because the method's declaration refers, in its return type, to a preview API. However, the superscript's link goes to a non-existent anchor, because the method's declaration doesn't have a box announcing preview status (since the method is declared in StructuredExecutor which has a class-level box). We should not generate a PREVIEW superscript for a reference in a preview class to an element in the same preview class. The link to, e.g., join in the same class already has no superscript.
(If a different class was to link to StructuredExecutor::open then a PREVIEW superscript linking to StructuredExecutor's class-level box would be appropriate.)
(The PREVIEW superscripts for methods work well in https://download.java.net/java/early_access/loom/docs/api/java.base/java/lang/Thread.html -- see the sentence ""The ofPlatform()PREVIEW and ofVirtual()PREVIEW methods are used ..."" -- because the superscript links go to the method-level boxes announcing preview status.)

2. [Missing superscript] Please see the method declaration for fork(Callable<V> task, BiConsumer<StructuredExecutor,Future<U>> onComplete). The type argument StructuredExecutor in that signature should have a PREVIEW superscript which links to #preview-java.util.concurrent.StructuredExecutor.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8281552,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v2vv:",9223372036854775807,b11,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2022-02-08 08:50;jjg;A pull request was submitted for review.

(Dummy comment, to help issue show up in JBS filters and dashboards);;;","2022-02-18 01:43;roboduke;Changeset: 834d55c5
Author:    Jan Lahoda <jlahoda@openjdk.org>
Date:      2022-02-18 09:41:12 +0000
URL:       https://git.openjdk.java.net/jdk/commit/834d55c59f94674f521efda0b9801551a39c7c4d
;;;",,,,,,,,,,,,,,,,,,,
STACK_OVERFLOW in Java_sun_awt_shell_Win32ShellFolder2_getIconBits,JDK-8277299,5062849,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,kizune,dgrieve,dgrieve,2021-11-16 12:44,2022-06-16 11:29,2023-10-01 09:57,2021-12-10 12:28,17,,,,,,,,,,,,,18,client-libs,,0,jdk17u-fix-request,jdk17u-fix-yes,regression,regression_8182043,sn_106,sn_107,,,,,,,,,,,"The fix for JDK-8182043 causes a regression for 32 bit builds. The change of MAX_ICON_SIZE from 128 to 256 increases stack usage by 370k, which causes an overflow because the default Windows 32 bit stack size is 320k. 

Workaround is to set stack size, e.g. -Xss1m

Reproduces with 

import javax.swing.UIManager;

public class Repro {
    public static void main(final String... args) throws Exception {
        UIManager.setLookAndFeel(""com.sun.java.swing.plaf.windows.WindowsLookAndFeel"");
        UIManager.getIcon(""Tree.openIcon""); // Same with ""Tree.closedIcon"" and ""Tree.leafIcon""
    }
}
","bash configure --with-debug-level=release --with-jvm-variants=client,server --with-target-bits=32 --target=x86",,,,,,,,,JDK-8278646,JDK-8281714,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8182043,JDK-8287446,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86,,,,,,,,,,b25,17,,windows,,,,,,"0|i2v2vn:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5a9b3fd3,,,,,,,,,"2021-11-16 12:54;prr;I see in Java_sun_awt_shell_Win32ShellFolder2_getIconBits that the pre-existing code :
            long colorBits[MAX_ICON_SIZE * MAX_ICON_SIZE];

previously would max out at 16K, now its 64K.

For good measure there's also
                long maskBits[MAX_ICON_SIZE * MAX_ICON_SIZE];

So we could be up to 128K .. 

Hmm .. seems like an increase of up to 96K not 370K .. I must be missing something else.

These allocations maybe should be on the heap not the stack.



;;;","2021-11-16 13:12;macarte;the arrays are longs so thats 16k*4 and 64k*4 respectively;;;","2021-11-16 13:18;prr;ah .. so they are !  I don't know why my brain assumed bytes.
These likely should always have been on heap as it could have been 128K even before the change.;;;","2021-12-10 12:28;roboduke;Changeset: 94127f43
Author:    Alexander Zuev <kizune@openjdk.org>
Date:      2021-12-10 20:27:07 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/94127f43a4a28a89094fa93cd1da49763134f9db
;;;","2021-12-16 05:45;dgrieve;Will this be backported to 17?;;;","2022-01-06 10:58;prr;> Will this be backported to 17?
Since Oracle is no longer contributing to the open JDK 17u updates, the backport will need to be initiated and done by an external contributor.
Also since Oracle does not produce 32 bit binaries, and this is merely a nice-to-have for 64 bit binaries,
since the larger stack size there can accommodate the larger icons, there's no visible benefit to an Oracle JDK backport.;;;","2022-01-06 11:51;dgrieve;Microsoft will pick up the backport. No problem. Thanks for the feedback!;;;","2022-01-18 14:43;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/98
Date: 2022-01-14 20:52:25 +0000;;;","2022-01-28 01:38;sgehwolf;[~macarte] When adding fix request labels, please also add a ""Fix Request"" comment to the bug. This helps evaluating the request. Thanks! See description here: 
https://openjdk.java.net/projects/jdk-updates/approval.html;;;","2022-01-28 09:32;macarte;Fix Request
 
Makes colorBits and maskBits dynamic variables to force allocation on the heap instead of the stack and avoid a stackoverflow. Also adds a test to confirm this stackoverflow is no longer happening.

Tier1 and the newly added test passes on Windows. Clean backport.

^ copied from PR;;;",,,,,,,,,,,
Check for NonRepudiation as well when validating a TSA certificate,JDK-8277246,5062795,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,weijun,weijun,weijun,2021-11-16 11:32,2021-11-25 00:25,2023-10-01 09:57,2021-11-17 12:04,,,,,,,,,,,,,,18,security-libs,,0,,,,,,,,,,,,,,,,,"In sun.security.validator.EndEntityChecker::checkTSAServer, we needs KU_SIGNATURE in KeyUsage and OID_EKU_TIME_STAMPING in ExtendedKeyUsage, but https://datatracker.ietf.org/doc/html/rfc3161#section-2.3 only has requirement on EKU.

In reality, sigstore’s timestamp server does not have KU_SIGNATURE. Its KeyUsage is a single nonRepudiation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v2jn:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2ec284e3,,,,,,,,,"2021-11-17 12:04;roboduke;Changeset: 262d0700
Author:    Weijun Wang <weijun@openjdk.org>
Date:      2021-11-17 20:03:55 +0000
URL:       https://git.openjdk.java.net/jdk/commit/262d07001babcbe7f9acd2053aa3b7bac304cf85
;;;",,,,,,,,,,,,,,,,,,,,
java -Xshare:on document needs to be updated,JDK-8277241,5062785,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ssatish,iklam,iklam,2021-11-16 10:41,2022-01-25 15:15,2023-10-01 09:57,2022-01-11 02:25,17,,,,,,,,,,,,,17.0.3-oracle,docs,,0,cds,jdk17u-na,,,,,,,,,,,,,,,"https://docs.oracle.com/en/java/javase/17/vm/class-data-sharing.html#GUID-0260F857-A70E-4399-A1DF-A5766BE33285

The existing text:

Note:The -Xshare:on is for testing purposes only and may cause intermittent failures due to the use of address space layout randomization by the operating system. This option should not be used in production environments.

should be replaced with

Note:The -Xshare:on option is for testing purposes only. It may cause the VM to unexpectedly exit during start-up when the CDS archive cannot be used (for example, when certain VM parameters are changed, or when a different JDK is used). This option should not be used in production environments.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8231610,JDK-8280543,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v2hf:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1c18c2e4,,,,,,,,,"2021-11-16 10:43;iklam;The ""intermittent failures due to the use of address space layout randomization by the operating system"" mentioned in the original text has been fixed in JDK-8231610. However, since -Xshare:on still have other failure modes, it should not be used in production.;;;","2022-01-11 00:27;iklam;[~ssatish] the above changes for JDK-8277241 looks OK to me.;;;",,,,,,,,,,,,,,,,,,,
SIGSEGV in vrshift_reg_maskedNode::emit,JDK-8277239,5062782,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,jbhateja,sviswanathan,sviswanathan,2021-11-16 10:06,2022-02-08 05:02,2023-10-01 09:57,2021-11-22 08:40,18,,,,,,,,,,,,,18,hotspot,,0,c2,intermittent,oracle-triage-11,oracle-triage-17,oracle-triage-18,regression,tier4,tier5,vectorapi,,,,,,,,"ASHRInt256VectorTestsMasked test in test/jdk/jdk/incubator/vector/Int256VectorTests.java fails with sigsegv due to null pointer access.

The failure is seen with the following command line on x86_64 ICX both Windows and Linux platform:
-XX:+CreateCoredumpOnCrash -ea -esa -XX:CompileThreshold=100 -XX:+UnlockExperimentalVMOptions  -Xcomp -server -XX:-TieredCompilation

The issue is observed at instruct vrshift_reg_masked in x86.ad file at line:

bool is_varshift = !VectorNode::is_vshift_cnt_opcode(in(2)->isa_Mach()->ideal_Opcode());

Here in(2) is a phi node and isa_Mach() returns null.

The phi node handling also needs to be done for is_vshift_cnt() check in the predicates in x86.ad file.


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277248,,,,,,,JDK-8278267,,,,,,,,,,,,,,,JDK-8271515,,,,,,,,,,"2021-11-17 09:50;sviswanathan;hs_err_pid86980.log;https://bugs.openjdk.org/secure/attachment/97128/hs_err_pid86980.log",,,,,,,,x86_64,,,,,,,,,,,18,,,,,,,,"0|i2v2gr:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,Verified,,"2021-11-16 22:57;thartmann;[~sviswanathan] could you please add the hs_err file?;;;","2021-11-16 23:07;thartmann;This triggers with multiple tests, see JDK-8277248.

ILW = SIGSEGV during C2 compilation (regression in JDK 18 from JDK-8271515), multiple vectorapi tests at tier4/5, no workaround but disable compilation of affected method = HMM = P2;;;","2021-11-17 02:24;jbhateja;Crash log with graph dump:

nmatched  Memory: @BotPTR *+bot, idx=Bot; !jvms: Int256VectorTests::ASHRInt256VectorTestsMasked @ bci:102 (line 2228)
 499  Region  ===  499  156  [[ 499  547  254  152 ]]  !jvms: IntVector::intoArray @ bci:-1 (line 3163) Int256VectorTests::ASHRInt256VectorTestsMasked @ bci:148 (line 2231)
 519  Region  ===  519  227  [[ 519  493  314  321  322  323  324  226 ]]  !jvms: IntVector::intoArray @ bci:-1 (line 3163) Int256VectorTests::ASHRInt256VectorTestsMasked @ bci:148 (line 2231)
 495  Region  ===  495  135  [[ 495  494 ]]  !jvms: IntVector::intoArray @ bci:-1 (line 3163) Int256VectorTests::ASHRInt256VectorTestsMasked @ bci:148 (line 2231)
 760  MemToRegSpillCopy  === _  744  [[ 251  772  786 ]] vectory[8]:{int} !jvms: IntVector::intoArray @ bci:-1 (line 3163) Int256VectorTests::ASHRInt256VectorTestsMasked @ bci:148 (line 2231)
 254  loadV  ===  499  231  755  758  [[ 251  634 ]] vectory[8]:{int} !jvms: Int256VectorTests::ASHRInt256VectorTestsMasked @ bci:102 (line 2228)
 773  DefinitionSpillCopy  === _  251  [[ 863  138 ]] vectory[8]:{int} !jvms: IntVector::intoArray @ bci:-1 (line 3163) Int256VectorTests::ASHRInt256VectorTestsMasked @ bci:148 (line 2231)
 493  jmpDir  ===  519  [[ 134 ]]  !orig=451 !jvms: IntVector::intoArray @ bci:-1 (line 3163) Int256VectorTests::ASHRInt256VectorTestsMasked @ bci:148 (line 2231)
 494  jmpDir  ===  495  [[ 134 ]]  !orig=451 !jvms: IntVector::intoArray @ bci:-1 (line 3163) Int256VectorTests::ASHRInt256VectorTestsMasked @ bci:148 (line 2231)
 251  vand_reg  === _  254  760  [[ 773  787 ]] vectory[8]:{int} !jvms: Int256VectorTests::ASHRInt256VectorTestsMasked @ bci:115 (line 2229)
 863  PhiLocationDifferToInputLocationSpillCopy  === _  773  [[ 787 ]] vectory[8]:{int} !jvms: IntVector::intoArray @ bci:-1 (line 3163) Int256VectorTests::ASHRInt256VectorTestsMasked @ bci:148 (line 2231)
 134  Region  ===  134  494  493  [[ 134  221  243  133  312  786  787 ]]  !jvms: IntVector::intoArray @ bci:-1 (line 3163) Int256VectorTests::ASHRInt256VectorTestsMasked @ bci:148 (line 2231)
 787  Phi  ===  134  863  251  [[ 245  599 ]]  #vectory[8]:{int} !jvms: IntVector::intoArray @ bci:-1 (line 3163) Int256VectorTests::ASHRInt256VectorTestsMasked @ bci:148 (line 2231)
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007fac81eeab38, pid=2355419, tid=2355434
#
# JRE version: OpenJDK Runtime Environment (18.0) (slowdebug build 18-internal+0-adhoc.root.jdk)
# Java VM: OpenJDK 64-Bit Server VM (slowdebug 18-internal+0-adhoc.root.jdk, compiled mode, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0x3deb38]  vrshift_reg_masked_0Node::emit(CodeBuffer&, PhaseRegAlloc*) const+0x15a

;;;","2021-11-17 02:38;jbhateja;Currently instruction selector differentiates between two kinds of vector shift operations i.e. with vector shift count and scalar shift count passed though LShiftCntV/RShiftCntV nodes by looking at the ideal opcode of shift count node.
A more robust scheme is to set a flag over vector shift node if it has variable vector shift count  and replace the opcode based check with flag based check in various shift instruction selection patterns.
;;;","2021-11-22 04:59;dholmes;Please fix this or problem_list the tests.;;;","2021-11-22 08:40;roboduke;Changeset: e5298655
Author:    Jatin Bhateja <jbhateja@openjdk.org>
Date:      2021-11-22 16:38:52 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e529865531d0eb5a2119a1d220b195d088794226
;;;","2021-11-23 07:21;dcubed;The fix for this bug is in jdk-18+25-1671.;;;","2022-02-08 05:02;enikitin;As this bug is intermittent, to verify this I run the test 200 times, of which 26 failed (pass rate is 87%). The fixed version passed through its own 200 runs with flying colours.

I mark the test Verified.;;;",,,,,,,,,,,,,
 sun.security.pkcs.PKCS9Attributes.toString() throws NPE,JDK-8277224,5062767,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,coffeys,coffeys,coffeys,2021-11-16 08:52,2022-09-01 14:15,2023-10-01 09:57,2021-11-17 12:51,11.0.14-oracle,18,7u331,8u321,,,,,,,,,,18,security-libs,,0,CPU22_01-critical-approved,CPU22_01-critical-SQE-OK,jdk11u-fix-request,jdk11u-fix-yes,jdk15u-fix-request,jdk15u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,jdk8u-fix-request,jdk8u-fix-yes,regression,sqebug,,,,"Since the JDK-8242151 fix, some array elements of the PKCS9Attribute.PKCS9_OIDS array are null. 

PKCS9Attributes.toString() doesn't take this into account.

java.lang.NullPointerException: Cannot invoke ""Object.hashCode()"" because ""key"" is null
        at java.base/java.util.Hashtable.get(Hashtable.java:381)
        at java.base/sun.security.pkcs.PKCS9Attributes.getAttribute(PKCS9Attributes.java:262)
        at java.base/sun.security.pkcs.PKCS9Attributes.toString(PKCS9Attributes.java:331)
        at java.base/java.lang.StringConcatHelper.stringOf(StringConcatHelper.java:453)
        at java.base/java.lang.StringConcatHelper.simpleConcat(StringConcatHelper.java:408)
        at NonStandardNames.main(NonStandardNames.java:66)
        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
        at java.base/java.lang.reflect.Method.invoke(Method.java:577)
        at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
        at java.base/java.lang.Thread.run(Thread.java:833)

",,,,,,,,,,JDK-8277462,JDK-8277461,JDK-8277490,JDK-8277840,JDK-8278424,JDK-8279059,JDK-8277731,JDK-8277410,JDK-8277670,JDK-8277722,JDK-8277701,JDK-8281126,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277200,,,,,,,JDK-8277200,,,,,,,,,,,,,,,JDK-8242151,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v2df:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2ec284e3,,,,,,,Verified,,"2021-11-17 09:20;coffeys;JDK 17u Fix request:
Correct a minor regression on a jdk internal class
;;;","2021-11-17 12:51;roboduke;Changeset: 6bb04626
Author:    Sean Coffey <coffeys@openjdk.org>
Date:      2021-11-17 20:50:46 +0000
URL:       https://git.openjdk.java.net/jdk/commit/6bb04626af6574ef1e8d4b7dad0389d4b59f5d08
;;;","2021-11-23 13:33;mdoerr;Fix Request (11u):
Should get backported for parity with 11.0.14-oracle. Applies cleanly.;;;","2021-12-01 10:59;zgu;8u code review: https://mail.openjdk.java.net/pipermail/jdk8u-dev/2021-December/014452.html;;;","2021-12-01 12:42;zgu;Fix Request (8u)

Backport for parity with Oracle 8u331. 

The original patch does not apply cleanly.  8u patch has been reviewed by @phh
;;;","2021-12-03 09:56;zgu;8u: Rebased to monojdk8u-dev: http://cr.openjdk.java.net/~zgu/JDK-8277224-8u/webrev.01/;;;","2021-12-20 07:58;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk15u-dev/pull/154
Date: 2021-12-20 15:53:21 +0000
;;;","2021-12-21 02:55;yan;Fix request (15u)
the patch applies cleanly, relevant tests pass.;;;","2022-04-13 04:18;sqetools;verified;;;","2022-09-01 14:15;roboduke;Changeset: 4f1e60c4
Author:    Sean Coffey <coffeys@openjdk.org>
Date:      2021-11-17 20:50:46 +0000
URL:       https://git.openjdk.org/shenandoah-jdk8u/commit/4f1e60c4ba84187c08c5fea583a94e12cd9d991c
;;;",,,,,,,,,,,
CompileTask_lock is acquired out of order with MethodCompileQueue_lock,JDK-8277213,5062752,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,thartmann,chagedorn,chagedorn,2021-11-16 05:39,2021-11-25 00:26,2023-10-01 09:57,2021-11-18 23:14,18,,,,,,,,,,,,,18,hotspot,,0,oracle-triage-11,oracle-triage-17,oracle-triage-18,regression,,,,,,,,,,,,,"The test taken from the currently open PR of JDK-8277042 (https://github.com/openjdk/jdk/pull/6364) fails with the following assertion.
 
To reproduce:
1. Run CodeCacheFullCountTest.java normally with JTreg
2. cd JTwork/scratch
3. Run the command line of the child VM:
java -cp [...] -XX:ReservedCodeCacheSize=2496k -XX:-UseCodeCacheFlushing CodeCacheFullCountTest WasteCodeCache

This fails intermittently (1 out of 20) on my local machine but is reliably triggered in tier testing

[2.709s][warning][codecache] CodeCache is full. Compiler has been disabled.
[2.709s][warning][codecache] Try increasing the code cache size using -XX:ReservedCodeCacheSize=
Java HotSpot(TM) 64-Bit Server VM warning: CodeCache is full. Compiler has been disabled.
Java HotSpot(TM) 64-Bit Server VM warning: Try increasing the code cache size using -XX:ReservedCodeCacheSize=
CodeCache: size=2496Kb used=2484Kb max_used=2488Kb free=11Kb
 bounds [0x00007f9153a98000, 0x00007f9153d08000, 0x00007f9153d08000]
 total_blobs=1753 nmethods=1014 adapters=661
 compilation: disabled (not enough contiguous free space left)
              stopped_count=0, restarted_count=0
 full_count=1
Java HotSpot(TM) 64-Bit Server VM warning: C2 initialization failed. Shutting down all compilers
 Locks owned:
Mutex: [0x00007f914c0240f0] MethodCompileQueue_lock - owner: 0x00007f914c20fce0 safepoint
# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/mutex.cpp:444
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S13706/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/42974813-fa1f-4628-8b00-f1c20979f765/runs/338c8ac4-37b2-4196-9ab6-b7102b51007b/workspace/open/src/hotspot/share/runtime/mutex.cpp:444), pid=146467, tid=146480
#  assert(false) failed: Attempting to acquire lock CompileTask_lock/safepoint out of order with lock MethodCompileQueue_lock/safepoint -- possible deadlock
#
# JRE version: Java(TM) SE Runtime Environment (18.0+24) (fastdebug build 18-ea+24-1591)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+24-1591, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0x15641fd]  Mutex::check_rank(Thread*)+0x29d
.............
Command Line: -XX:ReservedCodeCacheSize=2496k -XX:-UseCodeCacheFlushing CodeCacheFullCountTest WasteCodeCache
.............
Current thread (0x00007f914c20fce0):  JavaThread ""C2 CompilerThread0"" daemon [_thread_in_vm, id=146480, stack(0x00007f913c80c000,0x00007f913c90d000)]

Stack: [0x00007f913c80c000,0x00007f913c90d000],  sp=0x00007f913c90bbc0,  free space=1022k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x15641fd]  Mutex::check_rank(Thread*)+0x29d
V  [libjvm.so+0x15649f1]  Mutex::lock(Thread*)+0x31
V  [libjvm.so+0xa88dc8]  CompileQueue::free_all()+0x48
V  [libjvm.so+0xa8c25c]  CompileBroker::shutdown_compiler_runtime(AbstractCompiler*, CompilerThread*)+0xac
V  [libjvm.so+0xa9569f]  CompileBroker::compiler_thread_loop()+0x50f
V  [libjvm.so+0x191456a]  JavaThread::thread_main_inner()+0x25a
V  [libjvm.so+0x191c900]  Thread::call_run()+0x100
V  [libjvm.so+0x15fe854]  thread_native_entry(Thread*)+0x104
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277042,,,,,,,,,,,,,,,JDK-8273917,,,,,,,,,,"2021-11-16 05:48;chagedorn;hs_err_pid146467.log;https://bugs.openjdk.org/secure/attachment/97109/hs_err_pid146467.log",,,,,,,,,,,,,,,,,,b18,18,,,,,,,,"0|i2v2a3:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-16 05:53;chagedorn;ILW = Assertion due to possible deadlock, rare, possibly use -XX:+UseCodeCacheFlushing and use high enough ReservedCodeCacheSize = HLL = P4;;;","2021-11-17 07:56;thartmann;I think this might be a regression from JDK-8176393/JDK-8273917. I'll have a look.;;;","2021-11-17 08:15;thartmann;Verified that it's a regression in JDK 18 b18. This can only happen if compilation is disabled forever (i.e., if compiler initialization failed or if the code cache is full and sweeping is disabled).;;;","2021-11-18 23:14;roboduke;Changeset: f34f1190
Author:    Tobias Hartmann <thartmann@openjdk.org>
Date:      2021-11-19 07:13:05 +0000
URL:       https://git.openjdk.java.net/jdk/commit/f34f119080b4e8baf396fb26c21d572dd432fd91
;;;",,,,,,,,,,,,,,,,,
GC accidentally cleans valid megamorphic vtable inline caches,JDK-8277212,5062751,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,stefank,stefank,stefank,2021-11-16 05:28,2022-07-31 18:15,2023-10-01 09:57,2021-11-19 07:35,11,17,18,8,,,,,,,,,,18,hotspot,,0,gc-shenandoah,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,redhat-interest,release-note=yes,zgc,,,,,,,,,,"We got a report on the zgc-dev list about a large performance issue affecting ZGC:
https://mail.openjdk.java.net/pipermail/zgc-dev/2021-November/001086.html

One of the issues that the reporter identified was that we could get extremely long class unloading / unlinking times:

[17606.140s][info][gc,phases ] GC(719) Concurrent Process Non-Strong References 25781.928ms
[17610.181s][info][gc,stats ] Subphase: Concurrent Classes Unlink 14280.772 / 25769.511 1126.563 / 25769.511 217.882 / 68385.750 217.882 / 68385.750 ms

and while this were happening we got a huge number of ICBufferFull safepoints.

It turns out that we have a 10-year-old bug in the inline cache cleaning code. This code came in with the permgen removal. See how the original code only calls set_to_clean when ic_oop is non-null:

https://github.com/openjdk/jdk/commit/5c58d27aac7b291b879a7a3ff6f39fca25619103
---
        CompiledIC *ic = CompiledIC_at(iter.reloc());
        oop ic_oop = ic->cached_oop();
        if (ic_oop != NULL && !is_alive->do_object_b(ic_oop)) {
          // The only exception is compiledICHolder oops which may
          // yet be marked below. (We check this further below).
          if (ic_oop->is_compiledICHolder()) {
            compiledICHolderOop cichk_oop = compiledICHolderOop(ic_oop);
            if (is_alive->do_object_b(
                  cichk_oop->holder_method()->method_holder()) &&
                is_alive->do_object_b(cichk_oop->holder_klass())) {
              continue;
            }
          }
          ic->set_to_clean();
          assert(ic->cached_oop() == NULL,
                 ""cached oop in IC should be cleared"");
        }
      }
---

The rewritten code put the set_to_clean call in a different scope, causing the CompiledIC to also be cleaned when ic_oop is NULL:
---
        CompiledIC *ic = CompiledIC_at(iter.reloc());
        if (ic->is_icholder_call()) {
          // The only exception is compiledICHolder oops which may
          // yet be marked below. (We check this further below).
          CompiledICHolder* cichk_oop = ic->cached_icholder();
          if (cichk_oop->holder_method()->method_holder()->is_loader_alive(is_alive) &&
              cichk_oop->holder_klass()->is_loader_alive(is_alive)) {
              continue;
            }
        } else {
          Metadata* ic_oop = ic->cached_metadata();
          if (ic_oop != NULL) {
            if (ic_oop->is_klass()) {
              if (((Klass*)ic_oop)->is_loader_alive(is_alive)) {
                continue;
              }
            } else if (ic_oop->is_method()) {
              if (((Method*)ic_oop)->method_holder()->is_loader_alive(is_alive)) {
                continue;
              }
            } else {
              ShouldNotReachHere();
            }
          }
          }
          ic->set_to_clean();
      }
---

Note the weird indentation, which could be seen as a hint that this might be a dubious / accidental change.

To understand why this is causing the problems we are seeing it's good to start by reading:
https://wiki.openjdk.java.net/display/HotSpot/Overview+of+CompiledIC+and+CompiledStaticCall

When the GC hits this path and finds an ic_oop that is NULL, it means that it is dealing with an inline cache that is a megamorphic vtable call (or clean). Those should not be cleaned (at least that wasn't the intention of the old code).

But now we do clean them, and to do so we use an ICStub (to make a safe transition to the clean state), which uses up slots in the ICBuffer. When the ICBuffer is full, concurrent GCs have to stop and schedule an ICBufferFull safepoint stop-the-world operation, which removes the ICStub from the inline cache and completely frees up the ICBuffer. If the GC cleans a lot of these megamorphic vtable inline caches, then we'll create a large number of ICBufferFull safepoints.

But it is even worse than that. After the class unloading GCs have destroyed all megamorphic vtable inline caches, the Java threads will see these cleaned inline caches and correct them. Correcting the cleaned inline caches from the Java threads will also use ICStubs, and eventually the inline caches will transition back to be a megamorphic vtable calls. Because of this we can end up in a situation where the GC and Java threads change the inline cache back and forth between clean and megamorphic vtable calls. When this happen both GC and Java threads will continuously schedule ICBufferFull safepoints, and this can go on for many seconds, even minutes, if we are unlucky. For ZGC this has the effect that it blocks any further GC work, and eventually the Java threads will run out of memory and hit allocation stalls. The Java threads will then wait for the GC ""clean"" all inline caches and exit the class unloading phase and proceed to the phase where memory is reclaimed. You can see in the GC logs that even though the problematic unlinking phase goes on for many seconds, the allocation stalls are ""only"" a few hundred milliseconds. This shows that when the Java threads stop fighting over the inline caches, the GC can finish the work relatively quickly.

G1 performs the inline cache cleaning while the Java threads are stopped, and therefore don't have to use ICStubs when the megamorphic vtables are accidentally cleaned. So, G1 (and other stop-the-world class unloading GCs) won't enter the situation where the GC and Java thread concurrently fight over the inline caches. It still causes the Java threads to have to take a slow path and fix the inline caches, which can result in unnecessary ICBufferFull safepoints.

I been able to reproduce the issue where ZGC and the Java threads fight over the ICStubs, causing minute long unloading times, by running one of the microbenchmarks from the Blackbird library used by the reporter of this issue. See description in:
https://mail.openjdk.java.net/pipermail/zgc-dev/2021-November/001096.html

I think this could be reproduced in other workloads as well. I've also been able to reproduce the excessive ICBufferFull safepoints with Kitchensink (an oracle-internal stress test).

I've verified that restoring the set_to_clean code to the right scope fixes the issue that I can reproduce with both Blackbird and Kitchensink. After the fix, the class unloading times go back to normal levels.

To identify this issue, it's good to run with -Xlog:gc*,safepoint and take note of the ""Concurrent Process Non-Strong References"" times and ICBufferFull safepoint lines.

Example logs from ZGC where concurrent cleaning causes ICBufferFull safepoints:
---
[38.557s][1637062062666ms][info ][gc,phases   ] GC(222) Concurrent Mark Free 0.001ms
[38.565s][1637062062673ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 7389821 ns, Reaching safepoint: 167546 ns, At safepoint: 6840 ns, Total: 174386 ns
[38.565s][1637062062673ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 27749 ns, Reaching safepoint: 89368 ns, At safepoint: 5710 ns, Total: 95078 ns
[38.566s][1637062062674ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 678872 ns, Reaching safepoint: 145967 ns, At safepoint: 6969 ns, Total: 152936 ns
[38.567s][1637062062675ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 934596 ns, Reaching safepoint: 165826 ns, At safepoint: 5460 ns, Total: 171286 ns
[38.567s][1637062062675ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 16500 ns, Reaching safepoint: 91147 ns, At safepoint: 5770 ns, Total: 96917 ns
[38.568s][1637062062677ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 1124041 ns, Reaching safepoint: 154426 ns, At safepoint: 6280 ns, Total: 160706 ns
[38.570s][1637062062678ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 1222819 ns, Reaching safepoint: 152646 ns, At safepoint: 6920 ns, Total: 159566 ns
[38.571s][1637062062679ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 1070303 ns, Reaching safepoint: 152686 ns, At safepoint: 6029 ns, Total: 158715 ns
[38.571s][1637062062679ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 23650 ns, Reaching safepoint: 83208 ns, At safepoint: 6170 ns, Total: 89378 ns
[38.572s][1637062062681ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 1005014 ns, Reaching safepoint: 148206 ns, At safepoint: 5660 ns, Total: 153866 ns
[38.572s][1637062062681ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 15110 ns, Reaching safepoint: 84047 ns, At safepoint: 5690 ns, Total: 89737 ns
[38.574s][1637062062682ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 1370755 ns, Reaching safepoint: 171876 ns, At safepoint: 5030 ns, Total: 176906 ns
[38.574s][1637062062682ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 19749 ns, Reaching safepoint: 82478 ns, At safepoint: 4740 ns, Total: 87218 ns
[38.574s][1637062062682ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 12480 ns, Reaching safepoint: 86707 ns, At safepoint: 5040 ns, Total: 91747 ns
[38.575s][1637062062684ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 904007 ns, Reaching safepoint: 162666 ns, At safepoint: 5160 ns, Total: 167826 ns
[38.575s][1637062062684ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 14269 ns, Reaching safepoint: 80878 ns, At safepoint: 5420 ns, Total: 86298 ns
[38.577s][1637062062685ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 1240908 ns, Reaching safepoint: 144267 ns, At safepoint: 7030 ns, Total: 151297 ns
[38.578s][1637062062686ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 971325 ns, Reaching safepoint: 175725 ns, At safepoint: 4710 ns, Total: 180435 ns
[38.578s][1637062062686ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 16140 ns, Reaching safepoint: 80258 ns, At safepoint: 5389 ns, Total: 85647 ns
[38.578s][1637062062686ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 10290 ns, Reaching safepoint: 80858 ns, At safepoint: 5530 ns, Total: 86388 ns
[38.579s][1637062062687ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 430509 ns, Reaching safepoint: 159906 ns, At safepoint: 4610 ns, Total: 164516 ns
[38.579s][1637062062687ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 18269 ns, Reaching safepoint: 83838 ns, At safepoint: 4520 ns, Total: 88358 ns
[38.579s][1637062062687ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 13270 ns, Reaching safepoint: 77928 ns, At safepoint: 4790 ns, Total: 82718 ns
[38.579s][1637062062688ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 384230 ns, Reaching safepoint: 193705 ns, At safepoint: 4080 ns, Total: 197785 ns
[38.579s][1637062062688ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 14099 ns, Reaching safepoint: 80908 ns, At safepoint: 4840 ns, Total: 85748 ns
[38.580s][1637062062688ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 9150 ns, Reaching safepoint: 79268 ns, At safepoint: 4890 ns, Total: 84158 ns
[38.580s][1637062062689ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 549396 ns, Reaching safepoint: 143086 ns, At safepoint: 6430 ns, Total: 149516 ns
[38.580s][1637062062689ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 12540 ns, Reaching safepoint: 94717 ns, At safepoint: 5800 ns, Total: 100517 ns
[38.581s][1637062062690ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 847758 ns, Reaching safepoint: 146687 ns, At safepoint: 5969 ns, Total: 152656 ns
[38.582s][1637062062691ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 972285 ns, Reaching safepoint: 128177 ns, At safepoint: 6350 ns, Total: 134527 ns
[38.584s][1637062062692ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 986975 ns, Reaching safepoint: 136396 ns, At safepoint: 5770 ns, Total: 142166 ns
[38.584s][1637062062692ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 17280 ns, Reaching safepoint: 87097 ns, At safepoint: 5270 ns, Total: 92367 ns
[38.585s][1637062062693ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 1143131 ns, Reaching safepoint: 188315 ns, At safepoint: 5250 ns, Total: 193565 ns
[38.585s][1637062062694ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 12200 ns, Reaching safepoint: 80168 ns, At safepoint: 7480 ns, Total: 87648 ns
[38.586s][1637062062695ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 1153410 ns, Reaching safepoint: 166846 ns, At safepoint: 7060 ns, Total: 173906 ns
[38.587s][1637062062695ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 21549 ns, Reaching safepoint: 89898 ns, At safepoint: 5360 ns, Total: 95258 ns
[38.588s][1637062062696ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 1129411 ns, Reaching safepoint: 156726 ns, At safepoint: 4810 ns, Total: 161536 ns
[38.588s][1637062062696ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 14089 ns, Reaching safepoint: 80588 ns, At safepoint: 5170 ns, Total: 85758 ns
[38.589s][1637062062697ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 644824 ns, Reaching safepoint: 140666 ns, At safepoint: 5990 ns, Total: 146656 ns
[38.590s][1637062062699ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 1085312 ns, Reaching safepoint: 254264 ns, At safepoint: 5440 ns, Total: 259704 ns
[38.590s][1637062062699ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 14609 ns, Reaching safepoint: 83748 ns, At safepoint: 5610 ns, Total: 89358 ns
[38.591s][1637062062699ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 387680 ns, Reaching safepoint: 201215 ns, At safepoint: 5340 ns, Total: 206555 ns
[38.591s][1637062062699ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 18929 ns, Reaching safepoint: 85098 ns, At safepoint: 5910 ns, Total: 91008 ns
[38.591s][1637062062700ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 380750 ns, Reaching safepoint: 175066 ns, At safepoint: 4730 ns, Total: 179796 ns
[38.592s][1637062062700ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 14500 ns, Reaching safepoint: 80577 ns, At safepoint: 6790 ns, Total: 87367 ns
[38.592s][1637062062700ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 14660 ns, Reaching safepoint: 78498 ns, At safepoint: 7180 ns, Total: 85678 ns
[38.592s][1637062062701ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 655783 ns, Reaching safepoint: 141717 ns, At safepoint: 6089 ns, Total: 147806 ns
[38.594s][1637062062702ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 916657 ns, Reaching safepoint: 144226 ns, At safepoint: 5360 ns, Total: 149586 ns
[38.595s][1637062062703ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 1012334 ns, Reaching safepoint: 133037 ns, At safepoint: 10439 ns, Total: 143476 ns
[38.597s][1637062062705ms][info ][gc,phases   ] GC(222) Concurrent Process Non-Strong References 39.443ms
---

Example logs from G1 where the Java threads fixes the cleaned inline caches and run out of ICStubs:
[125.998s][1637065197322ms][info ][gc          ] GC(1040) Pause Remark 586M->414M(2048M) 6.609ms
[125.998s][1637065197322ms][info ][gc,cpu      ] GC(1040) User=0.08s Sys=0.00s Real=0.01s
[125.998s][1637065197322ms][info ][safepoint   ] Safepoint ""G1Concurrent"", Time since last: 33150646 ns, Reaching safepoint: 103457 ns, At safepoint: 6666988 ns, Total: 6770445 ns
[125.998s][1637065197322ms][info ][gc,marking  ] GC(1040) Concurrent Mark 38.296ms
[125.998s][1637065197322ms][info ][gc,marking  ] GC(1040) Concurrent Rebuild Remembered Sets
[126.001s][1637065197326ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 2621782 ns, Reaching safepoint: 626684 ns, At safepoint: 9340 ns, Total: 636024 ns
[126.002s][1637065197326ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 19949 ns, Reaching safepoint: 714022 ns, At safepoint: 12160 ns, Total: 726182 ns
[126.007s][1637065197331ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 4665009 ns, Reaching safepoint: 339751 ns, At safepoint: 9640 ns, Total: 349391 ns
[126.009s][1637065197334ms][info ][safepoint   ] Safepoint ""ICBufferFull"", Time since last: 2274802 ns, Reaching safepoint: 365760 ns, At safepoint: 9250 ns, Total: 375010 ns
[126.027s][1637065197352ms][info ][gc,marking  ] GC(1040) Concurrent Rebuild Remembered Sets 29.618ms

I've tested the performance of the change with SPECjbb2015, SPECjvm2008, DaCapo, Renaissance.

I've tested run the patch through tier1-7.",,,,,,,,,,JDK-8277714,JDK-8277641,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8291596,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v29v:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,Verified,,"2021-11-16 05:47;stefank;https://github.com/stefank/jdk/tree/8277212_fix_inline_cache_cleaning_bug
;;;","2021-11-16 06:18;stefank;For a brief explanation of CompiledIC, ICBuffer, megamorphic, etc. see:
https://wiki.openjdk.java.net/display/HotSpot/Overview+of+CompiledIC+and+CompiledStaticCall;;;","2021-11-18 02:20;shade;Ouch! I think we have seen a few similar reports from Shenandoah users, but all those were ""resolved""^W worked around by changing the load profile, or the issue went away after updates. That apparently magically alleviates the race between GC and IC machinery, but of course it does not fix the issue itself.;;;","2021-11-18 02:33;stefank;We have a few ideas on how to completely remove the need to use ICStubs when cleaning the inline caches from the GC. Though changing this code is not for the faint of heart. A more long-term solution would be to remove the inline caches with this JDK-8221828.;;;","2021-11-18 05:47;eosterlund;A more complete fix that removes the need to use ICStubs at all from the GC, when cleaning inline caches, might look something like this:
http://cr.openjdk.java.net/~eosterlund/faster_class_unloading/webrev.02/

The idea is to reason about every single possible state of the inline caches, and find a solution for each state, how we can do sufficient cleaning without ICStubs. A short summary here:
1. monomorphic inline caches to the interpreter can clear the metadata in the CompiledICHolder, requiring no ICStub.
2. monomorphic inline caches to compiled methods with a dead speculative class can be cleaned without ICStubs because reasons.
3. monomorphic inline caches to is_unloading nmethods, but live speculative classes can be partially cleaned with a new ""half clean"" state, requiring only patching of the destination, relieving the use of ICStubs, but deferring the use of ICStubs to the java thread's next monomorphic transition. The metadata is't cleaned, but if it eventually dies, it will go through case 3.
4. megamorphic inline caches to vtable stubs have nothing to clean and shouldn't clean anything
5. megamorphic inline caches to itable stubs have a CompiledICHolder, but neither of the two classes can die as they are kept alive by the caller method holder, now that we no longer have to clean inline caches on unloaded nmethods.

The main disadvantage with going in this direction is that it adds another layer of complexity to the inline cache machinery, which makes it even more obscure to reason about. I tried sprinkling some comments, but there is more to it still.

Going forward, rather than doing this, I would like to focus on phasing out inline caches instead, as their complexity budget seem to exceed their value.;;;","2021-11-19 07:35;roboduke;Changeset: 976c2bb0
Author:    Stefan Karlsson <stefank@openjdk.org>
Date:      2021-11-19 15:34:22 +0000
URL:       https://git.openjdk.java.net/jdk/commit/976c2bb05611cdc7b11b0918aaf50ff693507aae
;;;","2021-11-22 00:53;stefank;Fix Request

* This fix solves a pathological case where the GC may end up in minutes long cleanup tasks, preventing both GC and Java threads from making significant progress. This causes extreme Java thread latencies for workloads running with concurrent class unloading GCs (ZGC and Shenandoah).

* The fix is small (adds a return statement to a branch), and restores the behavior that we had in JDK 7. This bug seems to have been accidentally introduced when the code was rewritten for the PermGen removal. It's likely to be caused by an incorrect merge.

* The change is minimal and restores old behavior, so the risk seems small. Not fixing this on the other hand, could be a great performance risk.

*  Tested with:
** Oracle's tier1-7 testing
** Benchmarks reproducing the problem
** Benchmarks to verify that this doesn't introduce any unexpected performance issues

* The patch applies cleaning to jdk17u.;;;",,,,,,,,,,,,,,
missing CAccessibility definition in [CommonComponentAccessibility accessibilityHitTest],JDK-8277195,5062735,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,asemenov,ant,ant,2021-11-16 02:49,2022-04-06 06:02,2023-10-01 09:57,2021-11-23 00:21,17.0.2,,,,,,,,,,,,,17.0.2,client-libs,,0,11-na,18-na,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,macos,regression,regression_8267385,,,,,,,,,"A part of the fix JDK-8274381 has already been back ported to 17u, however after the fix JDK-8267385 the rest changes need to be back ported too.

It's this chunk:

- (id)accessibilityHitTest:(NSPoint)point
{
    JNIEnv* env = [ThreadUtilities getJNIEnv];

+  GET_CACCESSIBILITY_CLASS_RETURN(nil);",,,,,,,,,,JDK-8277707,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8283347,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,17.0.2,,os_x,,,,,,"0|i2v26b:",9223372036854775807,b06,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4785f47c,,,,,,,Not verified,,"2021-11-17 01:08;asemenov;Fix request (17u) 
A part of the fix for JDK-8274381
PR: https://github.com/openjdk/jdk17u/pull/275;;;","2021-11-23 00:21;roboduke;Changeset: 7ffac791
Author:    Artem Semenov <asemenov@openjdk.org>
Committer: Anton Tarasov <ant@openjdk.org>
Date:      2021-11-23 08:20:15 +0000
URL:       https://git.openjdk.java.net/jdk17u/commit/7ffac79187c7d90a39413d05a96b5a3d66eaf11b
;;;",,,,,,,,,,,,,,,,,,,
applications/runthese/RunThese30M.java crashes with jfrSymbolTable.cpp:305 assert(_instance != null),JDK-8277194,5062732,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mgronlun,tschatzl,tschatzl,2021-11-16 02:40,2021-12-08 17:44,2023-10-01 09:57,2021-12-02 01:57,18,,,,,,,,,,,,,18,hotspot,,0,intermittent,tier4,tier7,,,,,,,,,,,,,,"applications/runthese/RunThese30M.java crashes with

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (.../open/src/hotspot/share/jfr/support/jfrSymbolTable.cpp:305), pid=779059, tid=779067
#  assert(_instance != __null) failed: invariant
#
# JRE version: Java(TM) SE Runtime Environment (18.0+24) (fastdebug build 18-ea+24-1582)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+24-1582, compiled mode, sharing, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0xfd913c]  unsigned long JfrSymbolTable::add_impl<char>(char const*)+0xfc
#
[...]

---------------  T H R E A D  ---------------

Current thread (0x00007fe3ec25bfd0):  VMThread ""VM Thread"" [stack: 0x00007fe3ad7a7000,0x00007fe3ad8a7000] [id=779067]

Stack: [0x00007fe3ad7a7000,0x00007fe3ad8a7000],  sp=0x00007fe3ad8a4f10,  free space=1015k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xfd913c]  unsigned long JfrSymbolTable::add_impl<char>(char const*)+0xfc
V  [libjvm.so+0xf5b3ee]  send_event(FinalizerEntry const*, InstanceKlass const*, TimeInstant<CounterRepresentation, FastUnorderedElapsedCounterSource> const&, Thread*)+0x5e
V  [libjvm.so+0xf5bb1e]  JfrFinalizerStatisticsEvent::send_unload_event(InstanceKlass const*)+0xfe
V  [libjvm.so+0xf84dd8]  JfrKlassUnloading::on_unload(Klass const*)+0x218
V  [libjvm.so+0x9fa3d6]  ClassLoaderData::classes_do(void (*)(Klass*))+0x36
V  [libjvm.so+0xa05601]  ClassLoaderDataGraph::classes_unloading_do(void (*)(Klass*))+0x51
V  [libjvm.so+0xfff9ac]  JfrTypeSet::on_unloading_classes(JfrCheckpointWriter*)+0x4c
V  [libjvm.so+0xf32027]  JfrCheckpointManager::on_unloading_classes()+0x57
V  [libjvm.so+0x18adffe]  SystemDictionary::do_unloading(GCTimer*)+0x6de
V  [libjvm.so+0xcba82d]  G1ConcurrentMark::weak_refs_work()+0x5fd
V  [libjvm.so+0xcbb968]  G1ConcurrentMark::remark()+0x1c8
V  [libjvm.so+0xd75071]  VM_G1Concurrent::doit()+0x1c1
V  [libjvm.so+0x1a1132a]  VM_Operation::evaluate()+0x18a
V  [libjvm.so+0x1a34a03]  VMThread::evaluate_operation(VM_Operation*)+0x183
V  [libjvm.so+0x1a35877]  VMThread::inner_execute(VM_Operation*)+0x3f7
V  [libjvm.so+0x1a359a5]  VMThread::loop()+0xb5
V  [libjvm.so+0x1a35ac4]  VMThread::run()+0xb4
V  [libjvm.so+0x191caa0]  Thread::call_run()+0x100
V  [libjvm.so+0x15fe994]  thread_native_entry(Thread*)+0x104",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v25n:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2021-12-02 01:57;roboduke;Changeset: 84ca14d0
Author:    Markus Grönlund <mgronlun@openjdk.org>
Date:      2021-12-02 09:56:39 +0000
URL:       https://git.openjdk.java.net/jdk/commit/84ca14d0e90fd2c0390a07fc1bcfad0fce14cd3b
;;;",,,,,,,,,,,,,,,,,,,,
Remove stray comment mentioning instr_size_for_decode_klass_not_null on x64,JDK-8277172,5062708,Bug,Resolved,JDK,JDK,software,duke,,,P5,Fixed,stuefe,stuefe,stuefe,2021-11-15 22:51,2021-12-13 02:51,2023-10-01 09:57,2021-11-15 23:50,15,16,17,18,,,,,,,,,,18,hotspot,,0,cleanup,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,,https://bugs.openjdk.java.net/browse/JDK-8241825 removed instr_size_for_decode_klass_not_null() on x64 but left a comment in place. Remove obsolete comment.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8241825,,,,,,,,,,,,,,,,,,x86,,,,,,,,,,,,,,,,,,,"0|i2v20b:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-15 23:50;roboduke;Changeset: 7719a74c
Author:    Thomas Stuefe <stuefe@openjdk.org>
Date:      2021-11-16 07:49:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7719a74cec8c47fd036226b520a5fce7887386da
;;;","2021-11-16 00:38;chagedorn;ILW = Left over comment that needs to be cleaned up = LLL = P5;;;",,,,,,,,,,,,,,,,,,,
Data race in jdeps VersionHelper,JDK-8277166,5062689,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mchung,jvernee,jvernee,2021-11-15 17:31,2022-03-17 01:36,2023-10-01 09:57,2021-11-25 17:57,18,,,,,,,,,,,,,18,tools,,0,jdeps,starter-bug,,,,,,,,,,,,,,,"There's a data race in the following code in VersionHelper:

                if (nameToVersion.containsKey(name)) {
                    if (!version.equals(nameToVersion.get(name))) {
                        throw new MultiReleaseException(
                                ""err.multirelease.version.associated"",
                                name, nameToVersion.get(name), version
                        );
                    }
                } else {
                    nameToVersion.put(name, version);
                }

2 threads might be running this code concurrently. Both threads could first run the nameToVersion.containsKey(name) check, see false as the result, and then both continue to the else block to put the result in the nameToVersion map, where 1 of the 2 threads will end up overwriting the value the other thread inserted.",,,,,,,,,,JDK-8282488,JDK-8283302,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277165,,,,,,,,,,,,,,,JDK-8277564,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v1wb:",9223372036854775807,b26,,,,,,,,,,,,,"2021-11-15 17:33;jvernee;Suggest maybe re-writing the code using putIfAbsent:

                String prevVersion = nameToVersion.putIfAbsent(name, version);
                if (prevVersion != null && !prevVersion.equals(version)) {
                    throw new MultiReleaseException(
                            ""err.multirelease.version.associated"",
                            name, prevVersion, version
                    );
                }

I think then only 1 thread will be able to insert a value.;;;","2021-11-25 17:57;roboduke;Changeset: 7e54d065
Author:    Mandy Chung <mchung@openjdk.org>
Date:      2021-11-26 01:55:58 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7e54d065a17f1277adf1b8561fadb8a480bc6bed
;;;","2022-03-15 02:39;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/256
Date: 2022-03-15 09:34:18 +0000;;;",,,,,,,,,,,,,,,,,,
jdeps --multi-release --print-module-deps fails if module-info.class in different versioned directories,JDK-8277165,5062688,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mchung,jvernee,jvernee,2021-11-15 17:23,2022-03-17 01:36,2023-10-01 09:57,2021-11-25 17:57,18,,,,,,,,,,,,,18,tools,,0,jdeps,jdk17u-fix-request,jdk17u-fix-SQE-ok-next,jdk17u-fix-yes,,,,,,,,,,,,,"To reproduce, create 2 module source folders with a simple module-info.java class:

    ├───mod.bar
    │       module-info.java
    │
    ├───mod.baz
    │       module-info.java

Compile and create 2 jar files, each with the module-info class under a separate version:

    $ javac --module-source-path . -d out -m mod.bar
    $ javac --module-source-path . -d out -m mod.baz
    $ jar --create --file mod-bar.jar --release 11 -C 'out/mod.bar' module-info.class
    $ jar --create --file mod-baz.jar --release 12 -C 'out/mod.baz' module-info.class

Then run jdeps over both jars with the higher of the 2 release versions passed to multi-release:

    jdeps --multi-release 12 --print-module-deps mod-bar.jar mod-baz.jar

This will sometimes produce an exception (just spam it in the console a few times, and you should see it):

Exception in thread ""main"" java.lang.Error: java.util.concurrent.ExecutionException: com.sun.tools.jdeps.MultiReleaseException
	at jdk.jdeps/com.sun.tools.jdeps.DependencyFinder.waitForTasksCompleted(DependencyFinder.java:271)
	at jdk.jdeps/com.sun.tools.jdeps.DependencyFinder.parse(DependencyFinder.java:133)
	at jdk.jdeps/com.sun.tools.jdeps.DepsAnalyzer.run(DepsAnalyzer.java:129)
	at jdk.jdeps/com.sun.tools.jdeps.ModuleExportsAnalyzer.run(ModuleExportsAnalyzer.java:74)
	at jdk.jdeps/com.sun.tools.jdeps.JdepsTask$ListModuleDeps.run(JdepsTask.java:1047)
	at jdk.jdeps/com.sun.tools.jdeps.JdepsTask.run(JdepsTask.java:574)
	at jdk.jdeps/com.sun.tools.jdeps.JdepsTask.run(JdepsTask.java:533)
	at jdk.jdeps/com.sun.tools.jdeps.Main.run(Main.java:64)
	at jdk.jdeps/com.sun.tools.jdeps.Main$JDepsToolProvider.run(Main.java:73)
	at java.base/java.util.spi.ToolProvider.run(ToolProvider.java:138)
	at main.JDepsMultiRelease.main(JDepsMultiRelease.java:12)
Caused by: java.util.concurrent.ExecutionException: com.sun.tools.jdeps.MultiReleaseException
	at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)
	at jdk.jdeps/com.sun.tools.jdeps.DependencyFinder.waitForTasksCompleted(DependencyFinder.java:267)
	... 10 more
Caused by: com.sun.tools.jdeps.MultiReleaseException
	at jdk.jdeps/com.sun.tools.jdeps.VersionHelper.add(VersionHelper.java:62)
	at jdk.jdeps/com.sun.tools.jdeps.ClassFileReader$JarFileReader.readClassFile(ClassFileReader.java:360)
	at jdk.jdeps/com.sun.tools.jdeps.ClassFileReader$JarFileIterator.hasNext(ClassFileReader.java:402)
	at jdk.jdeps/com.sun.tools.jdeps.DependencyFinder.lambda$parse$5(DependencyFinder.java:179)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:833)

 The reason that an exception is only reported _sometimes_ is the result of a data-race in jdep's VersionHelper. See: https://bugs.openjdk.java.net/browse/JDK-8277166 (applying the fix I suggested in the comments there makes this 100% reproducible).

2 jars defining a module-info.class in a different versioned directory is valid as far as I know (it's not a case of split packages). So, an exception should not be thrown in this case I think.
    ",,,,,,,,,,JDK-8282063,JDK-8283301,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277564,,,,,,,,,,,,,,JDK-8277123,,,,,,,,,,,,,,,JDK-8277166,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v1w3:",9223372036854775807,b26,,,,,,,,,,,,,"2021-11-23 12:15;mchung;module-info.class should be excluded when checking if there are multiple versions of the same class file.;;;","2021-11-25 17:57;roboduke;Changeset: 7e54d065
Author:    Mandy Chung <mchung@openjdk.org>
Date:      2021-11-26 01:55:58 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7e54d065a17f1277adf1b8561fadb8a480bc6bed
;;;","2021-11-29 17:01;mchung;Backport Fix Request to jdk17u:

This fixes jdeps --print-module-deps and relevant options in analyzing the module dependences among multi-release JARs that contain module-info.class in its versioned entry.  jdeps intends to detect if there are multiple versions of the same class present and reports as an error.    It's a bug in jdeps that should skip module-info.class for such checking.   The fix is straight-forward and simply skip module-info.class for multiple versions check.   This patch also includes trivial fix for JDK-8277166 and JDK-8277123 to fix the data race in multiple versions checking as well as proper reporting of the multiple versions error message.

The backport is direct import of the commit openjdk/jdk/7e54d065.;;;","2022-03-15 02:32;goetz;
Fix request [17u]

I backport this for parity with 17.0.4-oracle.
Clean backport.
Small change, low risk. Fix requested by several parties.
SAP nightly testing passes.;;;","2022-03-15 02:39;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/256
Date: 2022-03-15 09:34:18 +0000;;;",,,,,,,,,,,,,,,,
Fix java/nio/file/FileStore/Basic.java test by ignoring /run/user/* mount points,JDK-8277159,5062681,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,akasko,akasko,akasko,2021-11-15 14:09,2022-10-10 01:59,2023-10-01 09:57,2021-11-17 09:49,11,17,18,8,,,,,,,,,,18,core-libs,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,noreg-self,,,,,,,,,,,"java/nio/file/FileStore/Basic.java test is failing on Linux with the following stacktrace:

/run/user/1000/doc (portal) (name=portal type=fuse.portal)
----------System.err:(16/985)----------
java.nio.file.FileSystemException: /run/user/1000/doc: Operation not permitted
	at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:100)
	at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)
	at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)
	at java.base/sun.nio.fs.UnixFileStore.readAttributes(UnixFileStore.java:115)
	at java.base/sun.nio.fs.UnixFileStore.getTotalSpace(UnixFileStore.java:122)
	at Basic.doTests(Basic.java:135)
	at Basic.main(Basic.java:49)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
	at java.base/java.lang.Thread.run(Thread.java:833)

The problem is the same as in JDK-8272369 and caused by the mount points of fuse.portal type that return EPERM: Operation not permitted on access.

To reproduce the problem with /run/user/1000/doc mount on Fedora 34 one can run:

$ /usr/libexec/xdg-document-portal

This behaviour is also known to cause problems to various Linux utilities, references:

https://lists.debian.org/debian-user/2021/06/msg00022.html
https://bugzilla.redhat.com/show_bug.cgi?id=1952714
https://bugzilla.redhat.com/show_bug.cgi?id=1913358
https://git.savannah.gnu.org/gitweb/?p=gnulib.git;a=commitdiff;h=9a38d499ca16f2f4304992eb1ab0894cd0b478e1
https://github.com/flatpak/xdg-desktop-portal/issues/512


",,,,,,,,,,JDK-8277938,JDK-8278007,JDK-8295052,JDK-8290056,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8272369,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,linux,,,,,,"0|i2v1uj:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,,,"2021-11-17 09:49;roboduke;Changeset: b6876649
Author:    Alex Kasko <akasko@openjdk.org>
Committer: Zhengyu Gu <zgu@openjdk.org>
Date:      2021-11-17 17:48:07 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b6876649a82bed508d817ccbde1600d00937e4b2
;;;","2021-11-26 04:44;akasko;Fix request (17u)

Clean backport of a test fix.;;;","2022-10-08 10:47;goetz;Fix request [11u]

I backport this for parity with 11.0.17-oracle.
No risk, only a test change.
Clean backport.
Test passes. SAP nighlty testing passed.;;;","2022-10-08 12:27;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1414
Date: 2022-10-08 17:47:15 +0000;;;",,,,,,,,,,,,,,,,,
Dragboard contents retrieved all over again during a DND process on WebView,JDK-8277133,5062653,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jpereda,jpereda,jpereda,2021-11-15 09:12,2021-12-08 04:01,2023-10-01 09:57,2021-11-24 12:10,jfx17,,,,,,,,,,,,,jfx18,javafx,,0,,,,,,,,,,,,,,,,,"WebView has a drag and drop eventHandler which is added to several drag events:

        setOnDragEntered(destHandler);
        setOnDragExited(destHandler);
        setOnDragOver(destHandler);
        setOnDragDropped(destHandler);

As part of this eventHandler, the dragboard content is retrieved from QuantumClipboard, which has a cache strategy in place, but unfortunately the cache is flushed away when the drag events starts (QuantumToolkit::startDrag). 

This means that such content (for instance, an Image), is being retrieved from a given URL over and over again (via QuantumClipboard::readImage), on every mouse move/drag over, causing a high lag in showing the image and moving it as the drag view.

This issue can be reproduced on all platforms and JavaFX versions, but there are different cases.

On Windows and Linux, dragging an image from a web page (wrapped or not with an hyperlink) uses Clipboard::getLocalData, and QuantumClipboard::readImage tries to create a new Image(url) on every call, without background loading, which takes around 200 ms for the first image of https://openjdk.java.net. 

Running the attached test from Ubuntu 20.04 with JavaFX 18-ea+6 gives:

location = https://openjdk.java.net/
DND readImage time = 407
DND readImage time = 225
DND readImage time = 226
DND readImage time = 230
location = https://openjdk.java.net/faq/
DND readImage time = 178
DND readImage time = 177
DND readImage time = 177

Similar values on Windows 10 with 18-ea+6:
location = https://openjdk.java.net/
DND readImage time = 174
DND readImage time = 173
DND readImage time = 174
DND readImage time = 178
DND readImage time = 175
DND readImage time = 176
location = https://openjdk.java.net/faq/
DND readImage time = 178
DND readImage time = 179
DND readImage time = 176
DND readImage time = 174
DND readImage time = 174
DND readImage time = 180
DND readImage time = 176


On Mac, however, SystemClipboard::popFromSystem is used.
If the image is not in an hyperlink, the load is done via pixels/rawData, which is really fast (the first image of https://openjdk.java.net. takes 2 ms) as it doesn't call new Image(url).

However, when the image is in an hyperlink (after the proposed patch for JDK-8160597 is applied), QuantumClipboard::readImage goes through new Image(url) on every call, again without background loading. For a given image, like the one on https://openjdk.java.net/projects/jdk/17/, this can take up to 700  ms.

Running the test from Mac OS 11.6 and JavaFX built from head+patch for JDK-8160597:

location = https://openjdk.java.net/
DND readImage time = 910
DND readImage time = 1
DND readImage time = 1
DND readImage time = 2
DND readImage time = 1
DND readImage time = 1
DND readImage time = 2
DND readImage time = 2
DND readImage time = 1
location = https://openjdk.java.net/faq/
DND readImage time = 1093
DND readImage time = 705
DND readImage time = 705
DND readImage time = 705
DND readImage time = 713
DND readImage time = 713
DND readImage time = 704
DND readImage time = 705

While enabling background loading of images in QuantumClipboard::readImage should make an big improvement, it seems necessary to use the linkedLists in the WebView eventHandler to cache the content, avoiding creating over and over again the same image/content.",,,,,,,,,,JDK-8277979,JDK-8277978,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-15 09:12;jpereda;WebTestApp.java;https://bugs.openjdk.org/secure/attachment/97092/WebTestApp.java",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v1ob:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5a8b92bd,,,,,,,,,"2021-11-24 12:10;roboduke;Changeset: 423e1be1
Author:    Jose Pereda <jpereda@openjdk.org>
Date:      2021-11-24 20:09:14 +0000
URL:       https://git.openjdk.java.net/jfx/commit/423e1be18b62b92d3a2355d91243ee6fb29f237f
;;;",,,,,,,,,,,,,,,,,,,,
jdeps does not report some exceptions correctly,JDK-8277123,5062641,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mchung,jvernee,jvernee,2021-11-15 06:00,2022-03-17 01:36,2023-10-01 09:57,2021-11-25 17:57,18,,,,,,,,,,,,,18,tools,,0,jdeps,starter-bug,,,,,,,,,,,,,,,"Found through this stack overflow question: https://stackoverflow.com/q/69943899

If e.g. a MultiReleaseException is thrown from VersionHelper.java:60 [1], it will be wrapped in an ExecutionException, and then re-wrapped in an Error in DependencyFinder.java:271 [2].

As a result, the main logic for reporting errors in JdepsTask::run will not recognize the exception and report the error properly [3], resulting in a stack trace with an empty exception message instead (like in the SO question).

Perhaps the cause of the ExecutionException at [2] should be re-thrown instead of wrapping it in an Error.

See https://bugs.openjdk.java.net/browse/JDK-8277165 for a reproducer.

[1] : https://github.com/openjdk/jdk/blob/master/src/jdk.jdeps/share/classes/com/sun/tools/jdeps/VersionHelper.java#L60
[2] : https://github.com/openjdk/jdk/blob/master/src/jdk.jdeps/share/classes/com/sun/tools/jdeps/DependencyFinder.java#L270
[3] : https://github.com/openjdk/jdk/blob/master/src/jdk.jdeps/share/classes/com/sun/tools/jdeps/JdepsTask.java#L549",,,,,,,,,,JDK-8282489,JDK-8283303,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277564,JDK-8277165,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v1ln:",9223372036854775807,b26,,,,,,,,,,,,,"2021-11-15 06:02;jvernee;Initially found on Java 17, but AFAICS the relevant code has not changed in the latest mainlain;;;","2021-11-15 21:37;jpai;I guess this explains this other issue (which is now closed) https://bugs.openjdk.java.net/browse/JDK-8264267 which was reported against Java 11. ;;;","2021-11-25 17:57;roboduke;Changeset: 7e54d065
Author:    Mandy Chung <mchung@openjdk.org>
Date:      2021-11-26 01:55:58 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7e54d065a17f1277adf1b8561fadb8a480bc6bed
;;;","2022-03-15 02:39;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/256
Date: 2022-03-15 09:34:18 +0000;;;",,,,,,,,,,,,,,,,,
SplitPane divider drag can hang the layout,JDK-8277122,5062640,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mhanl,mhanl,mhanl,2021-11-15 05:10,2022-02-04 08:55,2023-10-01 09:57,2022-01-31 07:02,jfx11,jfx17,,,,,,,,,,,,jfx19,javafx,,0,hang,Layout,layoutChildren,SplitPane,,,,,,,,,,,,,"When moving a SplitPane divider it may happen that the layout hang.  

Example: Move the divider to the right (nothing will happen, but that's okay). Now select one value in the combobox. Nothing happens. Now move the divider a bit -> ComboBox will finally refresh the button cell.

Note: Other controls will have other problems:
- Another SplitPane -> you can't resize it
- TableView -> When scrolling with the scroll thumb nothing happens
- ...

--- SOURCE START ---
import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.scene.Scene;
import javafx.scene.control.ComboBox;
import javafx.scene.control.SplitPane;
import javafx.scene.control.Tab;
import javafx.scene.control.TabPane;
import javafx.scene.layout.StackPane;
import javafx.scene.text.Text;
import javafx.stage.Stage;

public class SplitPaneBug extends Application {
    @Override
    public void start(Stage stage) {
        StackPane root = new StackPane();
        // Does not need to be a ComboBox.
        ComboBox<Object> objectComboBox = new ComboBox<>(FXCollections.observableArrayList(""1"", ""2"", ""3""));

        TabPane tabPane = new TabPane(new Tab(""Tab"", objectComboBox));

        SplitPane pane = new SplitPane();
        pane.getItems().addAll(new Text(""AAAAA""), tabPane);

        root.getChildren().add(pane);

        Scene scene = new Scene(root);
        stage.setScene(scene);
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}
--- SOURCE END ---",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v1lf:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@67282485,,,,,,,,,"2022-01-31 07:02;roboduke;Changeset: ee52d146
Author:    Marius Hanl <mhanl@openjdk.org>
Committer: Jeanette Winzenburg <fastegal@openjdk.org>
Date:      2022-01-31 14:59:58 +0000
URL:       https://git.openjdk.java.net/jfx/commit/ee52d14653996921a9bd30e9b568151d3d4d06de
;;;",,,,,,,,,,,,,,,,,,,,
Support for Windows SSPI isn't properly documented,JDK-8277117,5062166,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,rgallard,webbuggrp,webbuggrp,2021-11-07 01:34,2022-01-04 05:51,2023-10-01 09:57,2021-11-30 14:04,11,,,,,,,,,,,,,18,docs,,0,dcsad,jdk11u-na,jdk17u-na,noreg-doc,securitydocs,webbug,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
There's now support directly in the JDK for using the Windows SSPI as a GSS-API implementation. This was implemented in Java 13 and backported to Java 11.0.10.

However, it is not reflected in the ""Accessing Native GSS-API"" page [1][2].  (neither for Java 11 nor 13).

Additionally, I can find it mentioned in the release notes for Java 13 but I cannot find it in the release notes for Java 11.0.10 (the update version it was backported into).



[1]:  https://docs.oracle.com/en/java/javase/11/security/accessing-native-gss-api.html
[2]:  https://docs.oracle.com/en/java/javase/13/security/accessing-native-gss-api.html



",,,,,,,,,,JDK-8277872,JDK-8277874,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uypv:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4eba8c33,,,,,,,,,"2021-11-15 03:24;adev;The support in the JDK for using the Windows SSPI as a GSS-API implementation. was backported to Java 11.0.10.
However, it is not reflected in the ""Accessing Native GSS-API"" page [1][2]. (neither for Java 11 nor 13).
[1]: https://docs.oracle.com/en/java/javase/11/security/accessing-native-gss-api.html
[2]: https://docs.oracle.com/en/java/javase/13/security/accessing-native-gss-api.html

It can be found it mentioned in the release notes for Java 13 but not in 11.0.10 as well(the update version it was backported into). ;;;","2022-01-04 05:51;goetz;17u notice:
No need for Open 17u to backport: public documentation by Oracle ;;;",,,,,,,,,,,,,,,,,,,
"Incorrect type casts in ""Effects of Type Erasure and Bridge Methods"" tutorial ",JDK-8277116,5062590,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,rgallard,webbuggrp,webbuggrp,2021-11-12 22:49,2021-11-26 07:31,2023-10-01 09:57,2021-11-26 07:31,18,,,,,,,,,,,,,,docs,,0,18ea,dcsad,reproducer-other,webbug,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
Consider this snippet at https://docs.oracle.com/javase/tutorial/java/generics/bridgeMethods.html:

""Consider the following code:

MyNode mn = new MyNode(5);
Node n = mn;            // A raw type - compiler throws an unchecked warning
n.setData(""Hello"");     // Causes a ClassCastException to be thrown.
Integer x = mn.data;    
After type erasure, this code becomes:

MyNode mn = new MyNode(5);
Node n = (MyNode)mn;         // A raw type - compiler throws an unchecked warning
n.setData(""Hello"");          // Causes a ClassCastException to be thrown.
Integer x = (String)mn.data;""

The type casts in ""After type erasure"" are incorrect:
  1. Actual: ""Node n = (MyNode)mn;""
      Expected: either ""Node n = (Node) mn;"" (for illustration purposes) or""Node n = mn;"" (preferred) because the compiler doesn't generate any cast here since none is required

  2. Actual: ""Integer x = (String)mn.data;"",
      Expected: ""Integer x = (Integer) mn.data;"" because the compiler generates a ""24: checkcast     #8                  // class java/lang/Integer""


FREQUENCY : always


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v1ab:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@69527b4b,,,,,,,,,"2021-11-15 03:19;adev;The sample code is at https://docs.oracle.com/javase/tutorial/java/generics/bridgeMethods.html
The type casts in ""After type erasure"" are incorrect:
  1. Actual: ""Node n = (MyNode)mn;""
      Expected: either ""Node n = (Node) mn;""  or""Node n = mn;"" 

  2. Actual: ""Integer x = (String)mn.data;"",
      Expected: ""Integer x = (Integer) mn.data;"" ;;;",,,,,,,,,,,,,,,,,,,,
Cannot compile certain sources with --release,JDK-8277106,5062626,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jlahoda,jlahoda,jlahoda,2021-11-15 01:00,2021-12-15 17:51,2023-10-01 09:57,2021-12-08 10:51,17,18,,,,,,,,,,,,18,tools,,0,,,,,,,,,,,,,,,,,"Some sources cannot be compiles with --release 16, as some public, exported, classes extend internal classes that are not available iin the ct.sym. Examples include:
---
import jdk.jfr.Event;

public class EventTest {
    private void t(Event evt) {
        evt.isEnabled();
    }
}
---
$ javac --release 16 /tmp/EventTest.java 
/tmp/EventTest.java:5: error: cannot access Event
        evt.isEnabled();
           ^
  class file for jdk.internal.event.Event not found
1 error
---
public class VectorTest {
     {
         jdk.incubator.vector.Vector v = null;
         v.toString();
     }
}
---
$ javac --release 16 --add-modules jdk.incubator.vector /tmp/VectorTest.java 
warning: using incubating module(s): jdk.incubator.vector
/tmp/VectorTest.java:4: error: cannot access VectorSupport
         v.toString();
          ^
  class file for jdk.internal.vm.vector.VectorSupport not found
1 error
1 warning
---
",,,,,,,,,,JDK-8278675,,,,,,,,,,,,,,,,,,JDK-8278378,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v1ib:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,,,"2021-12-08 10:51;roboduke;Changeset: 42d9b1ba
Author:    Jan Lahoda <jlahoda@openjdk.org>
Date:      2021-12-08 18:50:38 +0000
URL:       https://git.openjdk.java.net/jdk/commit/42d9b1baac25df649a8d575f5ffa3a0d5b8e7ed0
;;;",,,,,,,,,,,,,,,,,,,,
Inconsistent handling of missing permitted subclasses,JDK-8277105,5062625,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jlahoda,jlahoda,jlahoda,2021-11-15 00:54,2021-12-08 17:46,2023-10-01 09:57,2021-12-06 07:45,17,18,,,,,,,,,,,,18,tools,,0,,,,,,,,,,,,,,,,,"Consider code like:
lib:
---
public abstract sealed class Lib permits Impl1, Impl2 {}
final class Impl1 extends Lib {}
final class Impl2 extends Lib {}
---
test:
---
public class Test1 {
    public void test(Lib lib) {
        Runnable r = (Runnable) lib;
    }
}
public class Test2 {
    public void test(Lib lib) {
        switch (lib) {
            case Impl2 i -> {}
        }
    }
}
---

If Impl1 is missing, the behavior differs:
---
$ javac -d out -classpath out --enable-preview -source 17 test/Test1.java 
test/Test1.java:3: error: cannot access Impl1
        Runnable r = (Runnable) lib;
                     ^
  class file for Impl1 not found
1 error
---
$ javac -d out -classpath out --enable-preview -source 17 test/Test2.java 
test/Test2.java:3: error: the switch statement does not cover all possible input values
        switch (lib) {
        ^
Note: test/Test2.java uses preview features of Java SE 17.
Note: Recompile with -Xlint:preview for details.
1 error
---

The switch handling should be more consistent with the case, and should report an error on missing classfiles for the permitted subtypes.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v1i3:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,,,"2021-12-06 07:45;roboduke;Changeset: ab781874
Author:    Jan Lahoda <jlahoda@openjdk.org>
Date:      2021-12-06 15:43:42 +0000
URL:       https://git.openjdk.java.net/jdk/commit/ab781874b27ee4fe1bc6b5fa2cd7997e451e2026
;;;",,,,,,,,,,,,,,,,,,,,
Dubious PrintCompilation output,JDK-8277102,5062622,Bug,Resolved,JDK,JDK,software,duke,,,P5,Fixed,yyang,yyang,yyang,2021-11-15 00:36,2023-07-04 23:44,2023-10-01 09:57,2021-11-18 18:06,17,18,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,"Reproduce: this appears in arbitrary command(e.g java -XX:+PrintCompilation Reduced) with arbitrary build mode.

The output of PrintCompilation is ill-formed:

     22 1 3 java.lang.Object::<init> (1 bytes)
     25 2 3 java.lang.String::hashCode (60 bytes)
     25 3 3 java.lang.String::coder (15 bytes)
     27 4 3 Reduced::foo (12 bytes)
     27 5 3 java.lang.Boolean::valueOf (14 bytes)
     27 6 3 java.lang.Boolean::hashCode (8 bytes)
     27 8 4 Reduced::foo (12 bytes)
     27 7 2 java.lang.Boolean::hashCode (14 bytes)
   4 3 Reduced::foo (12 bytes) made not entrant            <------missing timestamp
     29 9 % 3 Reduced::main @ 4 (33 bytes)
     29 10 3 Reduced::main (33 bytes)
     29 11 % 4 Reduced::main @ 4 (33 bytes)
   9 % 3 Reduced::main @ 4 (33 bytes) made not entrant
  11 % 4 Reduced::main @ 4 (33 bytes) made not entrant

This seems related to JDK-8272586, which print timestamp optionally.",,,,,,,,,,JDK-8310377,JDK-8310611,JDK-8311439,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8272586,,,,,,,,,,"2021-11-15 00:36;yyang;Reduced.java;https://bugs.openjdk.org/secure/attachment/97089/Reduced.java",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v1hf:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-15 00:42;yyang;For ill-formed deopt line, it seems related to JDK-8272586;;;","2021-11-15 05:39;chagedorn;Hi [~yyang], can you also provide the commands with the exact builds (also if fastdebug or product) which you've used to get these outputs?;;;","2021-11-15 18:14;yyang;Hi [~chagedorn], this appears in arbitrary command(e.g java -XX:+PrintCompilation Recuced), it seems caused by a recent change JDK-8272586, which omit timestamp. I've prepare a PR to address this problem. Also JBS description has been updated. Thanks!;;;","2021-11-16 02:24;chagedorn;Thanks for the update! Looking at your PR, it seems that you only handle the wrong format but not the reduced number of compilations. I suggest to update the synopsis and description accordingly and file a separate bug for the latter if it is a bug which needs to be addressed as well.;;;","2021-11-16 02:36;yyang;That makes sense. If the reduced number of compilations is a real bug, I will file a new issue later, but this may take some time.;;;","2021-11-16 03:11;chagedorn;Thanks Yi! That sounds good, there is no hurry.;;;","2021-11-16 03:14;chagedorn;ILW = Wrong format of PrintCompilation due to missing timestamp, medium?, no workaround = LMH = P5;;;","2021-11-18 18:06;roboduke;Changeset: 2f0bde1a
Author:    Yi Yang <yyang@openjdk.org>
Date:      2021-11-19 02:04:48 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2f0bde1a658b0910304c110920a2e8ccbe4557f8
;;;","2023-06-19 06:14;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1446
Date: 2023-06-15 16:57:40 +0000;;;",,,,,,,,,,,,
jcmd VM.cds dynamic_dump should not regenerate holder classes,JDK-8277101,5062620,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,minqi,iklam,iklam,2021-11-15 00:00,2022-02-07 13:04,2023-10-01 09:57,2022-01-31 11:29,18,,,,,,,,,,,,,19,hotspot,,0,cds,jcmd,,,,,,,,,,,,,,,"https://github.com/openjdk/jdk/blob/ca2efb73f59112d9be2ec29db405deb4c58dd435/src/hotspot/share/cds/metaspaceShared.cpp#L645

void MetaspaceShared::link_shared_classes(TRAPS) {
  LambdaFormInvokers::regenerate_holder_classes(CHECK); << here

This causes new holder classes to be stored into the dictionary of the boot class loader. Since the VM will continue to execute after ""VM.cds dynamic_dump"" has finished, the existence of these classes may have unexpected results.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v1gz:",9223372036854775807,b08,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2022-01-27 19:01;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7256
Date: 2022-01-28 02:40:07 +0000;;;","2022-01-31 11:29;roboduke;Changeset: 319b7749
Author:    Yumin Qi <minqi@openjdk.org>
Date:      2022-01-31 19:27:59 +0000
URL:       https://git.openjdk.java.net/jdk/commit/319b77492f78a08b7b9488c73876b027c3076c76
;;;",,,,,,,,,,,,,,,,,,,
Dynamic dump can inadvertently overwrite default CDS archive,JDK-8277100,5062619,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ccheung,iklam,iklam,2021-11-14 23:56,2022-01-03 14:45,2023-10-01 09:57,2021-12-20 15:06,18,,,,,,,,,,,,,19,hotspot,,0,cds,dynamic-cds,,,,,,,,,,,,,,,"$ java -Xlog:cds -version  | grep Opened.archive
[0.006s][info][cds] Opened archive /work/images/jdk/lib/server/classes.jsa.
java version ""18-internal"" 2022-03-15
Java(TM) SE Runtime Environment (build 18-internal+0-adhoc.iklam.open)
Java HotSpot(TM) 64-Bit Server VM (build 18-internal+0-adhoc.iklam.open, mixed mode, sharing)

$ ls -l /work/images/jdk/lib/server/classes.jsa
-r--r--r-- 1 iklam dba 13410304 Nov  9 20:25 /work/images/jdk/lib/server/classes.jsa
$ java -XX:ArchiveClassesAtExit=/work/images/jdk/lib/server/classes.jsa -Xlog:cds -version 
[.......]
[0.172s][info][cds] Dumping shared data to file: 
[0.172s][info][cds]    /work/images/jdk/lib/server/classes.jsa
[0.172s][info][cds] Shared file region (rw )  0:    45352 bytes, addr 0x0000000800ba9000 file offset 0x00001000 crc 0x165e738d
[0.173s][info][cds] Shared file region (ro )  1:    53944 bytes, addr 0x0000000800bb5000 file offset 0x0000d000 crc 0x728b4f18
[0.173s][info][cds] Shared file region (bm )  2:     1616 bytes, addr 0x0000000000000000 file offset 0x0001b000 crc 0xf9e817cf

$ ls -l /work/images/jdk/lib/server/classes.jsa
-r--r--r-- 1 iklam dba 114688 Nov 14 23:52 /work/images/jdk/lib/server/classes.jsa

$ java -Xlog:cds -version
[0.005s][info][cds] trying to map /work/images/jdk/lib/server/classes.jsa
[0.005s][info][cds] Opened archive /work/images/jdk/lib/server/classes.jsa.
[0.005s][info][cds] _magic expected: 0xf00baba2
[0.005s][info][cds]          actual: 0xf00baba8
[0.005s][info][cds] UseSharedSpaces: The shared archive file has a bad magic number.
[0.005s][info][cds] UseSharedSpaces: Unable to map shared spaces
java version ""18-internal"" 2022-03-15
Java(TM) SE Runtime Environment (build 18-internal+0-adhoc.iklam.open)
Java HotSpot(TM) 64-Bit Server VM (build 18-internal+0-adhoc.iklam.open, mixed mode)
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v1gr:",9223372036854775807,b03,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-12-20 10:45;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk/pull/6896
Date: 2021-12-20 18:14:05 +0000
;;;","2021-12-20 15:06;roboduke;Changeset: 8549d8b5
Author:    Calvin Cheung <ccheung@openjdk.org>
Date:      2021-12-20 23:04:40 +0000
URL:       https://git.openjdk.java.net/jdk/commit/8549d8b5697606ef87bb3f72abcf14dd7eb8a151
;;;",,,,,,,,,,,,,,,,,,,
Vector should throw ClassNotFoundException for a missing class of an element,JDK-8277093,5062596,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,rriggs,rriggs,rriggs,2021-11-13 09:12,2022-04-05 02:57,2023-10-01 09:57,2021-11-23 07:26,11,17,8,,,,,,,,,,,17.0.2,core-libs,,0,18-na,bugdb_33321368,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,release-note=yes,,,,,,,,,"Java.util.Vector reports a StreamCorruptedException instead of ClassNotFoundException due to the incorrect handling of a missing class by ObjectInputStream.GetField.get(name, val).
Vector checks the deserialized 'data' field for null and throws StreamCorruptedException.
The null can be a reflection of more than one condition, including the field is null, the field is not present in the stream, and the field is null because one of the array elements could not be deserialized due to a missing class.
The first two cases reflect a corrupted stream but the third should be treated as ClassNotFoundException.

Currently, there is a bug in ObjectInputStream.FieldValues.get(name, val).

        public Object get(String name, Object val) {
            int off = getFieldOffset(name, Object.class);
            if (off >= 0) {
                int objHandle = objHandles[off];
                handles.markDependency(passHandle, objHandle);
                return (handles.lookupException(objHandle) == null) ?
                    objValues[off] : null;
            } else {
                return val;
            }

Here, a call to handles.lookupException is made, however rather than throwing the associated exception, the method simply returns null.

This is causing ClassNotFoundExceptions to be buried by the stack and the exception being thrown further up the stack by the caller of the method.

The method signature for FieldValues.get cannot be changed. However, given that FieldValues implements the GetField interface, the GetField.get(name, value) method throws an IOException.

The CNFE exception could be wrapped in an IOException and get thrown here, rather than incorrectly further up the stack.",,,,,,,,,,JDK-8278195,JDK-8278193,JDK-8277715,JDK-8284346,,,,,,,,,,,,,,,JDK-8277153,,,,,,,,,,,JDK-8273660,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v1bn:",9223372036854775807,b06,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7e74daa7,,,,,,,,,"2021-11-17 06:58;rriggs;Fix Request

This fix to java.util.Vector corrects the reporting of a ClassNotFoundException that occurs during deserialization using java.io.ObjectInputStream when the class of an element of the vector is not found.
Without this fix, a StreamCorruptedException is thrown that does not provide information about the missing class.

The risk is minimal and targets a very specific case under well defined conditions.

The fix is specific to JDK 17 and earlier versions and is being reviewed as https://github.com/openjdk/jdk17u/pull/279.

The fix for the JDK Project (current) is different and due to compatibility concerns is not appropriate to backport.  
JDK-8276665: ObjectInputStream.GetField.get(name, object) should throw ClassNotFoundException

A new test is included that verifies the specific condition and response.
;;;","2021-11-23 07:26;roboduke;Changeset: 85716333
Author:    Roger Riggs <rriggs@openjdk.org>
Date:      2021-11-23 15:24:41 +0000
URL:       https://git.openjdk.java.net/jdk17u/commit/857163336f357f01e1c0a5061214ab7d18133c1b
;;;","2022-04-01 04:45;goetz;Fix request [11u]

I backport this for parity with 11.0.16-oracle.
The CSR is approved for 11. 
Although this is a slight change in behavouir, we should go along here with Oracle JDK. Maybe especially because it is so.
Clean backport.
Test passes.  SAP nightly testing passed.;;;","2022-04-01 05:39;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/985
Date: 2022-04-01 12:34:58 +0000;;;",,,,,,,,,,,,,,,,,
"TestMetaspaceAllocationMT2.java#ndebug-default fails with ""RuntimeException: Committed seems high: NNNN expected at most MMMM""",JDK-8277092,5062594,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,stuefe,dcubed,dcubed,2021-11-13 06:05,2022-11-06 21:41,2023-10-01 09:57,2021-11-19 11:50,17.0.7-oracle,18,,,,,,,,,,,,18,hotspot,,0,intermittent,jdk17u-fix-request,jdk17u-fix-yes,metaspace,tier6,,,,,,,,,,,,"The following test failed in the JDK18 CI:

runtime/Metaspace/elastic/TestMetaspaceAllocationMT2.java#ndebug-default

Here's a snippet from the log file:

----------System.err:(13/913)----------
java.lang.RuntimeException: Committed seems high: 12541952 expected at most 10217430
	at MetaspaceTestContext.checkStatistics(MetaspaceTestContext.java:223)
	at MetaspaceTestManyArenasManyThreads.runTest(MetaspaceTestManyArenasManyThreads.java:89)
	at TestMetaspaceAllocationMT2.main(TestMetaspaceAllocationMT2.java:193)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.RuntimeException: Committed seems high: 12541952 expected at most 10217430
JavaTest Message: shutting down test

STATUS:Failed.`main' threw exception: java.lang.RuntimeException: Committed seems high: 12541952 expected at most 10217430
----------rerun:(38/7197)*----------

The test task's JVM args are: <none>",,,,,,,,,,JDK-8291035,JDK-8294021,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276731,JDK-8277381,,,,,,,,,"2021-11-17 09:13;dcubed;TestMetaspaceAllocationMT2.log;https://bugs.openjdk.org/secure/attachment/97127/TestMetaspaceAllocationMT2.log","2021-11-17 23:24;stuefe;failed-aarch64-21-11-13.txt;https://bugs.openjdk.org/secure/attachment/97132/failed-aarch64-21-11-13.txt",,,,,,,x86_64,,,,,,,,,,,,,linux,os_x,,,,,"0|i2v1b7:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-16 12:40;mseledtsov;ILW = MLM = P4;;;","2021-11-16 22:52;stuefe;[~dcubed]
How often does this happen? Since when? On what platforms? Could you please attach the JTR? Thanks!;;;","2021-11-17 09:14;dcubed;Single sighting in jdk-18+24-1558-tier6 on linux-x64. I've attached the log file.;;;","2021-11-17 23:24;stuefe;Second sighting in SAP nightlies (linux aarch64);;;","2021-11-18 02:32;stuefe;Culprit ist JDK-8276731. Before that change, Metaspace chunks were uncommitted transparently by the buddy allocator before getting added to the freelist. Now, they are uncommitted as part of `Metaspace::purge()`. In real life, that makes no difference since these two things happen back to back in `CLDG::purge()`. But these tests isolate metaspace arenas and test them as separate units, without involving GC or CLDG, and therefore we need to purge manually.

The fact that this only shows rare intermittent errors instead of failing consistently is because these tests are actually a bit too lenient when checking commit memory size after test against expectations. That involves heuristics, but these need to be improved. I opened https://bugs.openjdk.java.net/browse/JDK-8277381 to track that separately.;;;","2021-11-19 11:50;roboduke;Changeset: a3406a1d
Author:    Thomas Stuefe <stuefe@openjdk.org>
Date:      2021-11-19 19:49:57 +0000
URL:       https://git.openjdk.java.net/jdk/commit/a3406a1d8ab4228b06b4f2978f87275093c39468
;;;","2022-09-16 03:54;goetz;Fix request [17u]

I backport this for parity with 17.0.6-oracle.
No risk, only a test change.
Clean backport.
Test passes. SAP nightly testing passed.;;;","2022-09-16 04:10;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/685
Date: 2022-09-16 10:59:48 +0000;;;",,,,,,,,,,,,,
jsr166 refresh for jdk19,JDK-8277090,5062592,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,dl,dl,dl,2021-11-13 05:20,2023-01-27 00:12,2023-10-01 09:57,2022-05-04 12:27,11.0.10-oracle,,,,,,,,,,,,,19,core-libs,,0,,,,,,,,,,,,,,,,,"[Renamed from ""ForkJoinPool initialization interferes with other static initialization"", because the related changes can't be disentangled.]

This CR mainly provides updates enabling planned loom and related jdk enhancements. The main goal is to streamline initialization by removing other JDK  dependencies including VarHandles, and access control (currently only when deprecated SecurityManagers are not used; eventually further removable). It also includes performance improvements for async usages, as well as a few new methods (ForkJoinPool.lazySubmit and setParallelism) needed by other jdk enhancements. Also, to simplify upcoming integrations, it includes java.util.concurrent API updates in Future and ExecutorService that are introduced by loom, but do not directly involve VirtualThreads, and are independently useful.",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8285450,,,,,,,,,,,,,,,,,,,JDK-8257781,,,,,,,JDK-8301216,,,,,,,,,,,,,,,JDK-8295962,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v1ar:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@239b1eeb,,,,,,,,,"2021-11-14 08:45;dl;On further thought and experimentation, steps (2) and (4) are less likely to be useful, and they both require adding public methods, so should just be noted as potential further steps for now. Anyone interested in looking at the other changes (ForkJoin{Pool,Task}, CountedCompleter)  can find them in jsr166 cvs (via http://gee.cs.oswego.edu/dl/concurrency-interest/index.html);;;","2021-11-14 16:05;dholmes;[~dl] This seems like an enhancement request, not a bug. Is this for mainline or for Loom? ;;;","2021-11-15 03:56;dl;My view is that is a performance bug with impact that has gotten increasingly worse over past few releases and even more so for loom.
;;;","2022-04-22 03:58;dl;Note: I edited description to combine initialization improvements with other mainly-loom-related updates because they should be considered at the same time.;;;","2022-05-01 05:26;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8490
Date: 2022-05-01 10:53:55 +0000;;;","2022-05-04 05:35;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8536
Date: 2022-05-04 12:30:53 +0000;;;","2022-05-04 12:27;dukebot;Changeset: 00e6c63c
Author:    Doug Lea <dl@openjdk.org>
Date:      2022-05-04 19:24:19 +0000
URL:       https://git.openjdk.java.net/jdk/commit/00e6c63cd12e3f92d0c1d007aab4f74915616ffb
;;;",,,,,,,,,,,,,,
ZipException: zip END header not found at ZipFile#Source.findEND,JDK-8277087,5062588,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,serb,serb,serb,2021-11-12 15:29,2022-04-29 05:43,2023-10-01 09:57,2021-11-23 00:59,11,17,18,,,,,,,,,,,18,core-libs,,0,jdk13u-fix-request,jdk13u-fix-yes,jdk15u-fix-request,jdk15u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,,,,,,,,,,,"The ZipOutputStream class may be used to a bad zip file. The root cause is how the comment field is stored by the ZipOutputStream. According to the zip specification, the comment field should not be longer than 0xFFFF bytes, and we try to validate the length of the comment, but unfortunately, we do this after the comment was assigned already. So if the application saves the comment based on the user's input and then gets an exception from the ZipOutputStream.setComment() it may assume that the comment is too long and it will be ignored, but it will be saved as-is to the file.",,,,,,,,,,JDK-8283429,JDK-8285920,JDK-8285917,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v19v:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@62714d2c,,,,,,,Verified,,"2021-11-12 15:34;serb;The root cause is this kind of behavior change:
https://github.com/openjdk/jdk/commit/c435a0905dfae827687ed46015269f9c1b36c239#diff-736e247f0ec294323891a77e16a9f0dba8bc1872131c857edf18c3f349e750eeL117;;;","2021-11-12 23:34;alanb;The original bug description was incomplete and didn't have a test case. Sergey has created a PR for the issue so I've copied some of the text from the PR to here so that people looking at the JBS issue have some idea what this is about.;;;","2021-11-23 00:59;roboduke;Changeset: e3243ee9
Author:    Sergey Bylokhov <serb@openjdk.org>
Date:      2021-11-23 08:57:34 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e3243ee963d074c892a0ed16a00fd91b440c96ac
;;;","2022-03-18 01:50;goetz;Fix request [17u]

I think this is a simple fix that should not be missed in 17.
Small risk, obvious fix.
Clean backport.
SAP nightly testing passed.;;;","2022-03-18 01:56;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/263
Date: 2022-03-18 08:49:02 +0000;;;","2022-04-13 04:18;sqetools;verified;;;","2022-04-29 04:36;yan;Fix request (15u, 13u):

This change fixes rather suspicious situation with Zip file comment length. Risk seems minimal. Clean patch; zip tests run fine.;;;","2022-04-29 04:42;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk15u-dev/pull/204
Date: 2022-04-29 11:35:45 +0000;;;","2022-04-29 05:37;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk13u-dev/pull/347
Date: 2022-04-29 12:29:05 +0000;;;",,,,,,,,,,,,
Qualified exported types show up in JavaDoc,JDK-8277074,5062575,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,hannesw,psandoz,psandoz,2021-11-12 11:13,2023-01-03 11:32,2023-10-01 09:57,2022-12-19 11:15,17,,,,,,,,,,,,,20,core-libs,,0,noreg-doc,,,,,,,,,,,,,,,,"The Vector API resides in an incubating module `jdk.incubator.vector`. It however requires access to functionality in the `java.base` module for the support of runtime compiler intrinsics.

The class `jdk.incubator.vector.Vector` extends from the class `jdk.internal.vm.vector.VectorSupport.Vector` that resides in the `java.base` module. The package `jdk.internal.vm.vector` is exported only to `jdk.incubator.vector` (a qualified export).

The class `jdk.internal.vm.vector.VectorSupport.Vector<E>` and its super class `jdk.internal.vm.vector.VectorSupport.VectorPayload` are visible in the JDK 17 JavaDoc:

https://docs.oracle.com/en/java/javase/17/docs/api/jdk.incubator.vector/jdk/incubator/vector/Vector.html 

In addition the protected method `VectorPayload.getPayload` is also presented.

When/if the Vector API exits incubation the `jdk.incubator.vector` module will collapse into `java.base` and this will no longer be an issue. Although this kind of pattern would not be generally recommended perhaps others might be affected by it.

Separately i will experiment with sealing to see if it reduces the exposure of `VectorPayload.getPayload` method.",,,,,,,,,,JDK-8299103,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v16z:",9223372036854775807,b29,,,,,,,,,,,,,"2021-11-16 12:28;psandoz;See also https://docs.oracle.com/en/java/javase/17/docs/api/jdk.jfr/jdk/jfr/Event.html;;;","2022-11-15 03:51;hannesw;We encountered this problem in the past with the new Random code. Back then we considered changing the class visibility rules in javadoc but decided against it because of possible implications/unintended consequences. The workaround is to use the javadoc `@hidden` tag in internal classes that shouldn't be visible.;;;","2022-11-15 04:23;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/11163
Date: 2022-11-15 12:15:42 +0000;;;","2022-12-19 08:34;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk20/pull/56
Date: 2022-12-19 16:28:17 +0000;;;","2022-12-19 11:15;dukebot;Changeset: 188aaef3
Author:    Hannes Wallnöfer <hannesw@openjdk.org>
Date:      2022-12-19 19:13:29 +0000
URL:       https://git.openjdk.org/jdk20/commit/188aaef38594658288e9222ed815d5af4b8d3dad
;;;",,,,,,,,,,,,,,,,
ObjectStreamClass caches keep ClassLoaders alive,JDK-8277072,5062573,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,rkennke,rkennke,rkennke,2021-11-12 10:52,2022-10-12 10:26,2023-10-01 09:57,2021-12-10 08:25,11,17,18,19,8,,,,,,,,,19,core-libs,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jdk18u-fix-request,jdk18u-fix-SQE-OK-next,jdk18u-fix-yes,redhat-interest,,,,,,,,,"The caches in ObjectStreamClass basically map WeakReference<Class> to SoftReference<ObjectStreamClass>, where the ObjectStreamClass also references the same Class. That means that the cache entry, and thus the class and its class-loader, will not get reclaimed, unless the GC determines that memory pressure is very high.

However, this seems bogus, because that unnecessarily keeps ClassLoaders and all its classes alive much longer than necessary: as soon as a ClassLoader (and all its classes) become unreachable, there is no point in retaining the stuff in OSC's caches.

This can be demonstrated by compiling the attached .java files, and run:
java TestObjectStreamClass
",,,,,,,,,,JDK-8283588,JDK-8283678,JDK-8284129,JDK-8293079,JDK-8293080,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8199589,,,,,,,JDK-8199589,,,,,,,,,,,,,,,JDK-8278065,JDK-8280041,JDK-8283276,,,,,,,,"2021-11-12 10:51;rkennke;osc-cl-leak.zip;https://bugs.openjdk.org/secure/attachment/97079/osc-cl-leak.zip",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v16j:",9223372036854775807,b02,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7e74daa7,,,,,,,Verified,,"2021-12-10 08:25;roboduke;Changeset: 8eb453ba
Author:    Roman Kennke <rkennke@openjdk.org>
Date:      2021-12-10 16:24:16 +0000
URL:       https://git.openjdk.java.net/jdk/commit/8eb453baebe377697286f7eb32280ca9f1fd7775
;;;","2022-03-09 05:14;rkennke;Fix-request (jdk18u, jdk17u):
This fixes a memory leak under certain conditions. The fix has baked in JDK19, and I will backport the follow-ups (JDK-8280041 and JDK-8278065) as soon as this backport is integrated (they depend on this one). Backport is clean.;;;","2022-03-09 05:16;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18/pull/117
Date: 2022-03-09 13:11:27 +0000;;;","2022-03-09 06:08;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/210
Date: 2022-03-09 14:02:30 +0000;;;","2022-03-09 08:16;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/869
Date: 2022-03-09 16:09:31 +0000;;;","2022-03-09 08:18;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18u/pull/36
Date: 2022-03-09 16:11:13 +0000;;;","2022-03-09 08:28;rkennke;Fix-request (jdk11u):
This fixes a memory leak under certain conditions. The fix has baked in JDK19, and I will backport the follow-ups (JDK-8280041 and JDK-8278065) as soon as this backport is integrated (they depend on this one). Backport is not clean, there have been some minor differences in context.;;;","2022-03-11 00:04;goetz; [~rkennke], can you please make a dependent pull request for JDK-8280041?
I'm not sure JDK-8278065 is needed in 17, especially not in 11. It's only a cleanup, right?;;;","2022-03-14 03:35;rkennke;[~goetz] I am not 100% sure about JDK-8278065, I believe there is a similar leak like this one here (JDK-8277072), but much smaller because it's only one Boolean object per cached Class, and also much rarer (afaiu, this code path is only used when running with SecurityManager).;;;","2022-03-15 03:06;goetz;Hi [~rkennke], ok, then better backport JDK-8278065 too.;;;",,,,,,,,,,,
Regularize logic for cursor -> position conversion,JDK-8277070,5062571,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mcimadamore,mcimadamore,mcimadamore,2021-11-12 10:11,2021-11-12 10:49,2023-10-01 09:57,2021-11-12 10:49,repo-panama,,,,,,,,,,,,,,tools,,0,foreign-jextract,,,,,,,,,,,,,,,,"The TreeMaker class has a nice helper function to extract a Position from a clang cursor. This logic checks for NPEs at various steps, and returns a default NO_POSITION object if an error occurs.

Unfortunately, the jextract code is not using this helper function uniformly. This causes issues when running jextract against clang-13 (it appears that the position attached to the internal va_list struct is no longer there).

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v163:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2251e2f8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"[lworld] C2 compilation fails with ""not drained yet"" assert",JDK-8277062,5062563,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,thartmann,thartmann,thartmann,2021-11-12 07:21,2021-11-12 08:05,2023-10-01 09:57,2021-11-12 08:05,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,c2,lw3,lworld,,,,,,,,,,,,,,"# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S136876/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/947d413a-f0a4-4fd1-9ef2-7510eff5ae38/runs/f2277412-6e56-42a1-ba7a-c4d46341e1c9/workspace/open/src/hotspot/share/opto/compile.cpp:4776), pid=6246, tid=6282
#  assert(_late_inlines.length() == 0) failed: not drained yet
#
# JRE version: Java(TM) SE Runtime Environment (18.0+1) (fastdebug build 18-valhalla+1-113)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-valhalla+1-113, mixed mode, sharing, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0xa502d4]  Compile::process_print_inlining()+0x424


Current CompileTask:
C2:  14167 2482    b        com.sun.imageio.plugins.tiff.TIFFDecompressor::decodeRaw (328 bytes)

Stack: [0x00007fb8eccf4000,0x00007fb8ecdf5000],  sp=0x00007fb8ecdeff70,  free space=1007k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xa502d4]  Compile::process_print_inlining()+0x424
V  [libjvm.so+0xa530ed]  Compile::Optimize()+0x195d
V  [libjvm.so+0xa54866]  Compile::Compile(ciEnv*, ciMethod*, int, bool, bool, bool, bool, bool, DirectiveSet*)+0x1656
V  [libjvm.so+0x848360]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x6a0
V  [libjvm.so+0xa64a69]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xc39
V  [libjvm.so+0xa656c8]  CompileBroker::compiler_thread_loop()+0x518
V  [libjvm.so+0x197790c]  JavaThread::thread_main_inner()+0x27c
V  [libjvm.so+0x197dec0]  Thread::call_run()+0x100
V  [libjvm.so+0x162e964]  thread_native_entry(Thread*)+0x104",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8273715,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v14b:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
EXCEPTION_INT_DIVIDE_BY_ZERO in TypeAryPtr::dump2 with -XX:+TracePhaseCCP,JDK-8277060,5062561,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,tholenstein,thartmann,thartmann,2021-11-12 07:06,2022-07-25 06:50,2023-10-01 09:57,2022-07-01 06:37,11,17,18,19,20,,,,,,,,,20,hotspot,,0,c2,oracle-triage-18,starter,,,,,,,,,,,,,,"memory		 891  StoreL  ===  82  87  892  129  [[ 90 ]]  @long[int:>=0]:exact+any *, idx=7;  Memory: @rawptr:NotNull, idx=Raw; !orig=[131] !jvms: UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:51 (line 161)
{0:control, 1:abIO, 2:memory, 3:rawptr:BotPTR, 4:return_address}	 90  Initialize  ===  82  1  93  1  1  89  891  [[ 91  92 ]]  !jvms: UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:6 (line 155)
control		 91  Proj  ===  90  [[ 142  94  877  128 ]] #0 !jvms: UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:6 (line 155)
{0:control, 1:control}	 142  If  ===  91  139  [[ 143  144 ]] P=0.999999, C=-1.000000 !jvms: UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:58 (line 162)
long[int:1]:NotNull:exact *	 94  CheckCastPP  ===  91  89  [[ 808  494  463  877  443  130  130  163 ]]  #long[int:1]:NotNull:exact * !jvms: UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:6 (line 155)
control		 143  IfTrue  ===  142  [[ 157  151 ]] #1 !jvms: UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:58 (line 162)
memory		 92  Proj  ===  90  [[ 772  755  755  440  460  460  460  419  419  419  440  440  140  140  140  440  382  185  159  159  159  185  185  755  140  460  159  419  185 ]] #2  Memory: @rawptr:BotPTR, idx=Raw; !orig=893,[131] !jvms: UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:6 (line 155)
bottom[int:1]:NotNull *	 877  CMoveP  ===  91  106  94  63  [[ 377  377  443  463  494  190  163  758  758 ]]  #bottom[int:1]:NotNull * !orig=[115] !jvms: UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:22 (line 157)
control		 144  IfFalse  ===  142  [[ 146 ]] #0 !jvms: UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:58 (line 162)
int[int:>=0]:NotNull:exact *	 151  CastPP  ===  143  136  [[ 173  153  153  163  173  172  768  768 ]]  #int[int:>=0]:NotNull:exact * !orig=[767] !jvms: UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:58 (line 162)
{0:top, 1:top}	 157  RangeCheck  ===  143  156  [[ 158  161 ]] P=0.999999, C=-1.000000 !jvms: UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:58 (line 162)
memory		 772  StoreB  ===  766  92  771  27  [[ 755 ]]  @rawptr:BotPTR, idx=Raw;  Memory: @rawptr:BotPTR, idx=Raw; !jvms: Unsafe::copyMemory @ bci:29 (line 806) UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:76 (line 164)
bottom[int:1]:NotNull+8 * [narrowklass]	 377  AddP  === _  877  877  74  [[ 378 ]]  !jvms: Unsafe::checkPrimitivePointer @ bci:12 (line 579) Unsafe::copyMemoryChecks @ bci:9 (line 832) Unsafe::copyMemory @ bci:9 (line 800) UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:76 (line 164)
long[int:1]:NotNull:exact[0] *	 130  AddP  === _  94  94  72  [[ 819 ]]  !jvms: UnsafeCopyMemory::testHeapToHeapLocalSrcMismatched @ bci:51 (line 161)
bottom[int:1]:NotNull#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_INT_DIVIDE_BY_ZERO (0xc0000094) at pc=0x00007ffc6d879bd3, pid=11228, tid=18256
#
# JRE version: Java(TM) SE Runtime Environment (18.0+24) (fastdebug build 18-ea+24-1542)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+24-1542, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, windows-amd64)
# Problematic frame:
# V  [jvm.dll+0xd29bd3]  TypeAryPtr::dump2+0x143

This only reproduces on Windows with -XX:+TracePhaseCCP and compiler/unsafe/UnsafeCopyMemory.java",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-12 07:05;thartmann;hs_err_pid11228.log;https://bugs.openjdk.org/secure/attachment/97065/hs_err_pid11228.log","2021-11-12 07:05;thartmann;replay_pid11228.log;https://bugs.openjdk.org/secure/attachment/97064/replay_pid11228.log",,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v13v:",9223372036854775807,b05,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-12 07:09;thartmann;ILW = Crash due to division by zero in debug printing code, with single test and -XX:+TracePhaseCCP on Windows, no workaround but disable flag = MLH = P4;;;","2021-11-12 07:12;thartmann;Probably this code is to blame:

st->print(""[%d]"", (offset() - array_base)/elem_size);;;;","2022-06-29 07:35;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/9295
Date: 2022-06-27 08:45:19 +0000;;;","2022-07-01 06:37;dukebot;Changeset: b9b900a6
Author:    Tobias Holenstein <tholenstein@openjdk.org>
Date:      2022-07-01 13:34:38 +0000
URL:       https://git.openjdk.org/jdk/commit/b9b900a61ca914c7931d69bd4a8aeaa948be1d64
;;;",,,,,,,,,,,,,,,,,
Combining several C2 Print* flags asserts in xmlStream::pop_tag,JDK-8277056,5062554,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,tholenstein,thartmann,thartmann,2021-11-12 06:19,2022-05-03 03:59,2023-10-01 09:57,2022-04-22 01:42,11,17,18,19,,,,,,,,,,19,hotspot,,0,c2,oracle-triage-18,starter,,,,,,,,,,,,,,"Combining many print flags leads to:

# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/oracle/jdk/open/src/hotspot/share/utilities/xmlstream.cpp:206), pid=547411, tid=547430
#  assert(false) failed: bad tag in log

Current CompileTask:
C2:  49478 11381       4       compiler.codecache.stress.TestCaseImpl::method (31 bytes)

Stack: [0x00007fd1fccac000,0x00007fd1fcdad000],  sp=0x00007fd1fcda9b10,  free space=1014k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x19ec571]  xmlStream::pop_tag(char const*)+0x1f1
V  [libjvm.so+0x19ed594]  xmlStream::tail(char const*)+0x14
V  [libjvm.so+0xa05dac]  Compile::Compile(ciEnv*, ciMethod*, int, Options, DirectiveSet*)+0x22fc
V  [libjvm.so+0x81f5f4]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x664
V  [libjvm.so+0xa15489]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xd09
V  [libjvm.so+0xa16128]  CompileBroker::compiler_thread_loop()+0x518
V  [libjvm.so+0x188d14e]  JavaThread::thread_main_inner()+0x27e
V  [libjvm.so+0x1893610]  Thread::call_run()+0x100
V  [libjvm.so+0x15745f4]  thread_native_entry(Thread*)+0x104

For example, running test/hotspot/jtreg/compiler/codecache/stress/UnexpectedDeoptimizationTest.java with the following flags:
-XX:+PrintOpto -XX:+PrintIdeal -XX:+PrintOptoStatistics -XX:+PrintOptoAssembly -XX:+PrintParseStatistics -XX:+PrintOptoPeephole -XX:+PrintCFGBlockFreq -XX:+PrintLockStatistics -XX:+PrintPreciseRTMLockingStatistics -XX:+PrintEliminateLocks -XX:+PrintEscapeAnalysis -XX:+PrintEliminateAllocations -XX:+PrintOptimizePtrCompare -XX:+PrintOptimizeStringConcat -XX:+PrintDominators -XX:+PrintIntrinsics ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8153527,,,,,,,,,,"2021-11-12 06:17;thartmann;hs_err_pid547411.log;https://bugs.openjdk.org/secure/attachment/97063/hs_err_pid547411.log","2021-11-12 06:17;thartmann;replay_pid547411.log;https://bugs.openjdk.org/secure/attachment/97062/replay_pid547411.log",,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v12b:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-12 06:21;thartmann;ILW = Assert during C2 compilation in logging code, only when combining many print flags, no workaround but disable flag = MLH = P4;;;","2022-04-14 10:08;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8203
Date: 2022-04-12 13:15:28 +0000;;;","2022-04-22 01:42;dukebot;Changeset: 165f5161
Author:    Tobias Holenstein <tobias.holenstein@oracle.com>
Committer: Tobias Hartmann <thartmann@openjdk.org>
Date:      2022-04-22 08:40:12 +0000
URL:       https://git.openjdk.java.net/jdk/commit/165f516101016e84ebea1444fbac9b3880a940f3
;;;",,,,,,,,,,,,,,,,,,
"Assert ""missing inlining msg"" with -XX:+PrintIntrinsics",JDK-8277055,5062553,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,tholenstein,thartmann,thartmann,2021-11-12 05:46,2022-04-03 22:53,2023-10-01 09:57,2022-03-03 00:03,16,17,18,19,,,,,,,,,,19,hotspot,,0,c2,jdk17u-fix-request,jdk17u-fix-yes,jdk18u-fix-request,jdk18u-fix-SQE-OK-next,jdk18u-fix-yes,oracle-triage-11,oracle-triage-17,oracle-triage-18,starter,,,,,,,"Running test/hotspot/jtreg/runtime/exceptionMsgs/ArrayIndexOutOfBoundsException/ArrayIndexOutOfBoundsExceptionTest.java with -XX:+PrintIntrinsics triggers: 
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/oracle/jdk/open/src/hotspot/share/opto/compile.cpp:4242), pid=543482, tid=543497
#  assert(_print_inlining_stream->size() > 0) failed: missing inlining msg

Current CompileTask:
C2:   9090 2573    b        jdk.internal.module.SystemModuleFinders$1::find (19 bytes)

Stack: [0x00007f135cede000,0x00007f135cfdf000],  sp=0x00007f135cfd9ea0,  free space=1007k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x9fb3e4]  Compile::print_inlining_update_delayed(CallGenerator*)+0x204
V  [libjvm.so+0x828c65]  CallGenerator::do_late_inline_helper()+0xf05
V  [libjvm.so+0xa013ed]  Compile::inline_incrementally_one()+0x33d
V  [libjvm.so+0xa01cd7]  Compile::process_late_inline_calls_no_inline(PhaseIterGVN&)+0x117
V  [libjvm.so+0xa038b0]  Compile::Optimize()+0x1af0
V  [libjvm.so+0xa0504e]  Compile::Compile(ciEnv*, ciMethod*, int, Options, DirectiveSet*)+0x159e
V  [libjvm.so+0x81f5f4]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x664
V  [libjvm.so+0xa15489]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xd09
V  [libjvm.so+0xa16128]  CompileBroker::compiler_thread_loop()+0x518
V  [libjvm.so+0x188d14e]  JavaThread::thread_main_inner()+0x27e
V  [libjvm.so+0x1893610]  Thread::call_run()+0x100
V  [libjvm.so+0x15745f4]  thread_native_entry(Thread*)+0x104",,,,,,,,,,JDK-8283832,JDK-8283945,JDK-8284263,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8257211,,,,,,,,,,"2021-11-12 05:44;thartmann;hs_err_pid543482.log;https://bugs.openjdk.org/secure/attachment/97061/hs_err_pid543482.log","2021-11-12 05:44;thartmann;replay_pid543482.log;https://bugs.openjdk.org/secure/attachment/97060/replay_pid543482.log",,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v123:",9223372036854775807,b13,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-12 05:52;thartmann;ILW = Assert during C2 compilation in debug code, rare with diagnostic flag, no workaround but disable flag = MLH = P4;;;","2022-01-07 08:37;tholenstein;simply this triggers the error as well: java -XX:+PrintIntrinsics -Xcomp -XX:-TieredCompilation --version ;;;","2022-01-10 06:43;tholenstein;start failing with JDK-8273165;;;","2022-02-28 02:49;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7385
Date: 2022-02-08 16:57:20 +0000;;;","2022-03-03 00:02;dukebot;Changeset: b1f935c1
Author:    Tobias Holenstein <tobias.holenstein@oracle.com>
Committer: Tobias Hartmann <thartmann@openjdk.org>
Date:      2022-03-03 07:59:45 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b1f935c1d0d3729470b57832cf74c43d49ea1f71
;;;","2022-03-29 06:53;mdoerr;Fix Request (17u):
Should get backported for parity with 17.0.4-oracle. Applies cleanly. Test has passed.;;;","2022-03-29 07:00;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/303
Date: 2022-03-29 13:55:23 +0000;;;","2022-03-29 08:15;thartmann;Fix Request (JDK 18u)
Fixes an assert in C2. The fix is low risk and applies cleanly. Already tested and backported to Oracle JDK 17u. Tier 1-3 testing is running for JDK 18u.;;;","2022-03-29 08:20;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18u/pull/63
Date: 2022-03-29 15:14:34 +0000;;;",,,,,,,,,,,,
Tiny improvements to the specification text for java.util.Properties.load,JDK-8277048,5062548,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prappo,prappo,prappo,2021-11-12 04:12,2021-11-17 17:18,2023-10-01 09:57,2021-11-15 03:26,18,,,,,,,,,,,,,18,core-libs,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v10z:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@38ded199,,,,,,,,,"2021-11-15 03:26;roboduke;Changeset: fdcd16a3
Author:    Pavel Rappo <prappo@openjdk.org>
Date:      2021-11-15 11:25:23 +0000
URL:       https://git.openjdk.java.net/jdk/commit/fdcd16a38fb9a14a819d68682f9666ebfe7285db
;;;",,,,,,,,,,,,,,,,,,,,
JMM GetDiagnosticXXXInfo APIs should verify output array sizes,JDK-8277029,5062519,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,stuefe,stuefe,stuefe,2021-11-11 09:50,2022-06-13 14:33,2023-10-01 09:57,2021-11-16 01:50,11,17,18,,,,,,,,,,,18,hotspot,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,,,,,,,,,,,,"jmm_GetDiagnosticCommandArgumentsInfo and jmm_GetDiagnosticCommandInfo are used to query the hotspot about diagnostic commands. They provide output arrays for the information:

```
void jmm_GetDiagnosticCommandArgumentsInfo(JNIEnv *env,
          jstring command, dcmdArgInfo* infoArray)
```

but array size is implicitly assumed to be known to both caller and callee. Caller and callee negotiate those sizes in prior steps, but things can go wrong. E.g. I recently hunted a bug where `DCmd::number_arguments()` was off - did not reflect the real number of its jcmd parameters - which led to a hidden memory overwriter.

Thankfully, JDK-8264565 rewrote the dcmd framework to deal with this particular issue (The VM I analyzed was older). Still, it would be good if we had additional safety measures here.
",,,,,,,,,,JDK-8277692,JDK-8277476,JDK-8277482,JDK-8288366,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8264565,JDK-8282419,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v0uj:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2846162a,,,,,,,,,"2021-11-12 09:37;dcubed;Moving from hotspot/runtime to hotspot/svc.
These JMM functions belong to the Serviceability team.;;;","2021-11-15 19:15;sspitsyn;Targeted to 18 as it is already in review.;;;","2021-11-16 01:50;roboduke;Changeset: b8d33a2a
Author:    Thomas Stuefe <stuefe@openjdk.org>
Date:      2021-11-16 09:49:03 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b8d33a2a4e4ac1be322644102e8f09ce1435b4fb
;;;","2021-11-17 01:10;stuefe;Fix Request JDK17:

I'd like to backport this patch to jdk17. It is very relevant for jdk11 (see separate fix request comment). Jdk17 downport mainly because it makes no sense to fix 11 and head and leave 17 as it is.

Fix applies cleanly.

The patch carries very little risk. The change is very simple. It just adds a check in the JMM interface to the dcmd framework that prevents memory overwrites when returning data in an array.

No compatibility issues.;;;","2021-11-17 01:22;stuefe;Fix Request JDK11:

I'd like to backport this patch to jdk11 since it prevent difficult-to-spot dowport errors early - in jdk11, the DCmd framework is different and may expose unwary authors to surprising bugs (C-heap overwrites) when dcmd changes are ported down.

Fix applies cleanly.

The patch carries very little risk. The change is very simple. It just adds a check in the JMM interface to the dcmd framework that prevents memory overwrites when returning data in an array.

No compatibility issues.;;;",,,,,,,,,,,,,,,,
Use service type documentation as fallback for @provides,JDK-8277028,5062518,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,hannesw,hannesw,hannesw,2021-11-11 09:43,2021-11-17 17:18,2023-10-01 09:57,2021-11-15 07:55,11,,,,,,,,,,,,,18,tools,,1,,,,,,,,,,,,,,,,,"JDK-8192007 fixed the issue that `@provides` and `@uses` items on javadoc module summary pages displayed both the tag description as well as the first sentence of the service type. 

The new behaviour for ""uses"" items is to display the `@uses' tag description if it exists, and otherwise fall back to the first sentence of the description of the service type. For ""provides"" items, only the description from the `@provides` tag is displayed. If no description is provided by the tag, no description is displayed.

Although displaying the first sentence of the service type description is not ideal, it is still better than to display nothing. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v0ub:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2021-11-15 07:55;roboduke;Changeset: 7fc344dc
Author:    Hannes Wallnöfer <hannesw@openjdk.org>
Date:      2021-11-15 15:53:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7fc344dc96008f277dacf5518b28447f3a598cde
;;;",,,,,,,,,,,,,,,,,,,,
"Treat unrecognized markup as snippet text, but warn about it",JDK-8277027,5062517,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,prappo,prappo,prappo,2021-11-11 09:40,2021-12-13 19:19,2023-10-01 09:57,2021-12-07 10:59,18,,,,,,,,,,,,,18,tools,,0,,,,,,,,,,,,,,,,,"Source files may use comments that *resemble* snippet markup but target other systems. For example, when developed in an IDE, a snippet might use @formatter:on/@formatter:off. Such comments should not be confused with snippet markup.",,,,,,,,,,JDK-8278694,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v0u3:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2021-12-07 10:59;roboduke;Changeset: a8a1fbce
Author:    Pavel Rappo <prappo@openjdk.org>
Date:      2021-12-07 18:58:08 +0000
URL:       https://git.openjdk.java.net/jdk/commit/a8a1fbce5b8efe014b2dac16b83e60de4cf65a3e
;;;",,,,,,,,,,,,,,,,,,,,
Remove blank lines remaining from snippet markup,JDK-8277026,5062516,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,prappo,prappo,prappo,2021-11-11 09:34,2021-12-07 07:56,2023-10-01 09:57,2021-11-30 17:50,18,,,,,,,,,,,,,18,tools,,0,,,,,,,,,,,,,,,,,"While blank lines resulting from stripping markup can be avoided in ""java"" snippets by re-positioning the markup, in ""properties"" files such blank lines are unavoidable.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276803,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v0tv:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2021-11-30 17:50;roboduke;Changeset: da2be99c
Author:    Pavel Rappo <prappo@openjdk.org>
Date:      2021-12-01 01:25:17 +0000
URL:       https://git.openjdk.java.net/jdk/commit/da2be99cfe1121d5a59fa575ea0ac425ad4dbd0f
;;;",,,,,,,,,,,,,,,,,,,,
Use blessed modifier order in jdk.httpserver,JDK-8277016,5062502,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ihse,ihse,ihse,2021-11-11 06:57,2021-11-17 17:17,2023-10-01 09:57,2021-11-12 06:13,18,,,,,,,,,,,,,18,core-libs,,0,,,,,,,,,,,,,,,,,"I ran bin/blessed-modifier-order.sh on source in jdk.httpserver. This scripts verifies that modifiers are in the ""blessed"" order, and fixes it otherwise. I have manually checked the changes made by the script to make sure they are sound.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v0qr:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2021-11-12 06:13;roboduke;Changeset: 51a5731d
Author:    Magnus Ihse Bursie <ihse@openjdk.org>
Date:      2021-11-12 14:12:37 +0000
URL:       https://git.openjdk.java.net/jdk/commit/51a5731d6dc4b6f6feac920a4b8b49c15fd6b34f
;;;",,,,,,,,,,,,,,,,,,,,
Use blessed modifier order in src/utils,JDK-8277012,5062498,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ihse,ihse,ihse,2021-11-11 06:30,2021-11-17 17:17,2023-10-01 09:57,2021-11-12 06:09,18,,,,,,,,,,,,,18,hotspot,,0,,,,,,,,,,,,,,,,,"I ran bin/blessed-modifier-order.sh on source code in src/utils. This scripts verifies that modifiers are in the ""blessed"" order, and fixes it otherwise. I have manually checked the changes made by the script to make sure they are sound.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v0pv:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@11336cca,,,,,,,,,"2021-11-12 06:09;roboduke;Changeset: c4b44329
Author:    Magnus Ihse Bursie <ihse@openjdk.org>
Date:      2021-11-12 14:08:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/c4b44329c1d250f790ca82dd419cdf3330da16f5
;;;",,,,,,,,,,,,,,,,,,,,
java/nio/channels/Channels/TransferTo.java leaves multi-GB files in /tmp,JDK-8276994,5062476,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,lancea,alanb,alanb,2021-11-11 03:58,2022-01-21 12:57,2023-10-01 09:57,2021-11-11 11:10,18,,,,,,,,,,,,,18,core-libs,,0,ursqe-triaged,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v0kz:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,Verified,,"2021-11-11 04:13;mkarg;I assumed that is not a problem as build containers would be discarded anyways. I did not know that the build machines are kept after the build. I could file a PR that simply cleans up the created temp files this test piles up, that should solve the problem completely.;;;","2021-11-11 04:33;alanb;This issue is caused significant problems on Oracle CI system. If you can't get to it today then Lance or I will take it. I think we just need a try-finally where the finally block deletes the file and doesn't let /tmp fill up. ;;;","2021-11-11 11:10;roboduke;Changeset: b0d7a9da
Author:    Lance Andersen <lancea@openjdk.org>
Date:      2021-11-11 19:09:17 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b0d7a9daa6ceb1959bc701043fe3f0397d2ba6f7
;;;","2021-11-12 15:48;erikj;Thanks for fixing this so promptly! 
Regardless of how distributed systems handle file system cleanups, a normal developer running this test a few times locally would quickly fill up the disk that java.io.tmpdir pointed to, so attempting to remove temporary files is generally a good thing. I have seen other tests in the same area that were already producing temp files in the 10s of MB range, totaling in the 100s of MB for the full tier2. I think this would also qualify as a big enough nuisance for developers running these tests repeatedly. In my experience, the OS is usually not quick enough at cleaning up temp dirs to cover such a situation. So if anyone feels compelled to do some additional cleanup, I would appreciate it. :);;;","2021-11-13 01:14;mkarg;Erik, just to make you understand my different view on this: It is the task of the OS to clean up tmp file before the disk is full, that is why files are marked as tmp or non-tmp and open vs. closed by an application or test. I understand that Linux and possibly more OS are too lazy to fulfil that job, but please understand that other OS are not. Windows in particular is really quick with that as it runs a cleanup in the background as soon as the disk is filled up to a certain threshold. So while I am open for manually cleaning the temp files in applications and temp folders, what I actually would appreciate is that all OS would cleanup closed temp files much quicker, hence thousands of applications and tests could get rid of useless delete commands.;;;","2021-11-13 04:53;alanb;[~mkarg] When we talk about the tmp file system then we really mean the location that java.io.tmpdir is set to. make/RunTests.gmk sets java.io.tmpdir to $(OUTPUTDIR)/test-support, that's the location that we are concerned about.;;;","2021-11-13 05:01;mkarg;I could rework the TransferTo test so it will also remove ALL temp files of that test, not just the huge ones. Would that make sense? Shall I file a PR?;;;","2021-11-13 13:58;mkarg;I have prepared a PR for a more comprehensive solution in https://github.com/openjdk/jdk/pull/6379. WDYT?;;;","2022-01-21 12:57;msheppar;verified in promoted JDK18 b32 build

https://mach5.us.oracle.com/mdash/builds/jdk-18+32-2068/results?search=status%3A*%20%20AND%20name%3Ajava%2Fnio%2Fchannels%2FFileChannel%2FTransfer2GPlus.java

It looks like this test case has evolved since this fix has been merged in build 24 ... the main virtue of the fix which deletes the tmp files is still in place.;;;",,,,,,,,,,,,
Memory leak in invoker.c fillInvokeRequest() during JDI operations,JDK-8276990,5062475,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,rkennke,rkennke,rkennke,2021-11-11 03:13,2022-05-25 16:20,2023-10-01 09:57,2022-02-02 23:25,11,17,18,8,,,,,,,,,,19,core-svc,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jdk18u-fix-request,jdk18u-fix-SQE-OK,jdk18u-fix-yes,redhat-interest,,,,,,,,,"As reported here:
https://bugzilla.redhat.com/show_bug.cgi?id=2010221

We observe a native memory leak when repeating JDI operations from Eclipse in a debuggee JVM.

jemalloc reports the biggest memory leak as:

[76800 bytes leaked]
je_prof_backtrace (/home/sandreev/git/misc/jemalloc/src/prof.c:636 (discriminator 2))
je_malloc_default (/home/sandreev/git/misc/jemalloc/src/jemalloc.c:2289)
os::malloc (/data/git/jdk11/src/hotspot/share/runtime/os.cpp:697)
os::malloc (/data/git/jdk11/src/hotspot/share/runtime/os.cpp:660 (discriminator 3))
JvmtiEnvBase::allocate (/data/git/jdk11/src/hotspot/share/prims/jvmtiEnvBase.hpp:195)
JvmtiEnvBase::jvmtiMalloc (/data/git/jdk11/src/hotspot/share/prims/jvmtiEnvBase.cpp:501)
JvmtiEnv::GetMethodName (/data/git/jdk11/src/hotspot/share/prims/jvmtiEnv.cpp:2954)
jvmti_GetMethodName (/data/git/jdk11/build/linux-x86_64-normal-server-slowdebug/hotspot/variant-server/gensrc/jvmtifiles/jvmtiEnter.cpp:4366)
methodSignature (/data/git/jdk11/src/jdk.jdwp.agent/share/native/libjdwp/util.c:728)
fillInvokeRequest (/data/git/jdk11/src/jdk.jdwp.agent/share/native/libjdwp/invoker.c:284)
invoker_requestInvoke (/data/git/jdk11/src/jdk.jdwp.agent/share/native/libjdwp/invoker.c:371)
sharedInvoke (/data/git/jdk11/src/jdk.jdwp.agent/share/native/libjdwp/util.c:609)
invokeStatic (/data/git/jdk11/src/jdk.jdwp.agent/share/native/libjdwp/ClassTypeImpl.c:175)
debugLoop_run (/data/git/jdk11/src/jdk.jdwp.agent/share/native/libjdwp/debugLoop.c:159)
connectionInitiated (/data/git/jdk11/src/jdk.jdwp.agent/share/native/libjdwp/transport.c:296)
attachThread (/data/git/jdk11/src/jdk.jdwp.agent/share/native/libjdwp/transport.c:370)
JvmtiAgentThread::call_start_function (/data/git/jdk11/src/hotspot/share/prims/jvmtiImpl.cpp:85)
JvmtiAgentThread::start_function_wrapper (/data/git/jdk11/src/hotspot/share/prims/jvmtiImpl.cpp:79)
JavaThread::thread_main_inner (/data/git/jdk11/src/hotspot/share/runtime/thread.cpp:1752)
JavaThread::run (/data/git/jdk11/src/hotspot/share/runtime/thread.cpp:1732)
thread_native_entry (/data/git/jdk11/src/hotspot/os/linux/os_linux.cpp:698)
start_thread (/usr/src/debug/glibc-2.17-c758a686/nptl/pthread_create.c:308)
?? (/usr/src/debug////////glibc-2.17-c758a686/misc/../sysdeps/unix/sysv/linux/x86_64/clone.S:113)

How reproducible:

Run JDI operations with Eclipse in any Java program. E.g. can be done with a command handler:

public class SampleHandler extends AbstractHandler {

	@Override
	public Object execute(ExecutionEvent event) throws ExecutionException {
		Job job = new Job(""JDI operation"") {
			@Override
			protected IStatus run(IProgressMonitor monitor) {
				int n = 20 * 60;
				for (int i = 0; i < n; ++i) {
					try {
						IJavaDebugTarget javaTarget = getFirstJavaDebugTarget();
						if (javaTarget != null) {
							IJavaThread javaThread = getFirstSuspendedJavaThread(javaTarget);
							if (javaThread != null) {
								IJavaType[] javaClass = javaTarget.getJavaTypes(""java.lang.String"");
								if (javaClass[0] instanceof IJavaClassType) {
									IJavaClassType jdiClassType = (IJavaClassType) javaClass[0];
									IJavaObject instance = jdiClassType.newInstance(""()V"", null, javaThread);
									try {
										instance.disableCollection();
										if (!monitor.isCanceled()) {
											instance.sendMessage(""isEmpty"", ""()Z"", null, javaThread, false);
										}
									} finally {
										instance.enableCollection();
									}
								}
							}
						}
					} catch (DebugException e) {
						e.printStackTrace();
					}
				}
				return Status.OK_STATUS;
			}
		};
		job.schedule();

		return null;
	}

	private IJavaDebugTarget getFirstJavaDebugTarget() {
		for (IDebugTarget debugTarget : DebugPlugin.getDefault().getLaunchManager().getDebugTargets()) {
			if (debugTarget instanceof IJavaDebugTarget) {
				return (IJavaDebugTarget) debugTarget;
			}
		}
		return null;
	}

	private IJavaThread getFirstSuspendedJavaThread(IJavaDebugTarget javaDebugTarget) throws DebugException {
		for (IThread thread : javaDebugTarget.getThreads()) {
			if (thread.isSuspended() && (thread instanceof IJavaThread)) {
				return (IJavaThread) thread;
			}
		}
		return null;
	} 
}

Actual results:

Memory consumption of debuggee JVM increases as JDI operations are repeated.

Expected results:

No memory is leaked by fillInvokeRequest() in invoker.c.
",,,,,,,,,,JDK-8282808,JDK-8287345,JDK-8284385,JDK-8287188,JDK-8282807,JDK-8282806,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v0kr:",9223372036854775807,b09,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3397f701,,,,,,,,,"2021-11-30 10:17;mwthomps;ILW=MMH=P3;;;","2022-02-01 06:49;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7306
Date: 2022-02-01 14:44:43 +0000;;;","2022-02-02 23:25;roboduke;Changeset: 5ab22e88
Author:    Roman Kennke <rkennke@openjdk.org>
Date:      2022-02-03 07:24:59 +0000
URL:       https://git.openjdk.java.net/jdk/commit/5ab22e88da8d79f9e19e8afffdd06206f42bab94
;;;","2022-03-02 12:12;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18u/pull/32
Date: 2022-03-02 19:06:11 +0000;;;","2022-03-02 12:18;rkennke;Fix-request (18u,17u,11u):
The change fixes a memory leak. Original change has not caused any troubles in 19 in some weeks. Backport applies cleanly, local testing looks good.;;;","2022-03-02 12:31;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u/pull/334
Date: 2022-03-02 20:26:38 +0000;;;","2022-03-03 11:10;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/852
Date: 2022-03-03 19:05:25 +0000;;;","2022-03-04 00:40;goetz;[17u] [~rkennke] you need to make the pr against jdk17u-dev, alternatively you have to tag it as jd17u-critical-request.;;;","2022-03-04 02:19;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/192
Date: 2022-03-04 10:16:23 +0000;;;",,,,,,,,,,,,
"riscv: C1 should not allocate x3, which is the gp register",JDK-8276989,5062472,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,fyang,ddong,ddong,2021-11-11 01:20,2021-11-15 01:25,2023-10-01 09:57,2021-11-15 01:25,repo-riscv-port,,,,,,,,,,,,,repo-riscv-port,hotspot,,0,c1,,,,,,,,,,,,,,,,"On behalf of Xiaolin Zheng(yunyao.zxl@alibaba-inc.com)

x3 is a special register on RISCV and we should not use it as a register allocation candidate - if users write JNI programs referencing global variables, where ld could link global reference loading logic to an instruction like 'ld $Rtmp, $offset(x3)', and try to call vm functions, C1 will zap x3's value and causes a crash. It seems C2 doesn't use x3 so we are just aligning the logic with C2 properly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,riscv,,,,,,,,,,,,,linux,,,,,,"0|i2v0k3:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
riscv: Fix a register name string: lr to x5,JDK-8276988,5062471,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,fyang,ddong,ddong,2021-11-11 01:18,2021-11-15 01:24,2023-10-01 09:57,2021-11-15 01:24,repo-riscv-port,,,,,,,,,,,,,repo-riscv-port,hotspot,,0,,,,,,,,,,,,,,,,,"On behalf of Xiaolin Zheng(yunyao.zxl@alibaba-inc.com)

Simply fix a register name string: 'lr' is names[1] so names[5] should be 'x5'
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,riscv,,,,,,,,,,,,,linux,,,,,,"0|i2v0jv:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Small fixes to DumpAllocStat::print_stats,JDK-8276983,5062466,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,stuefe,stuefe,stuefe,2021-11-10 22:05,2021-11-17 17:18,2023-10-01 09:57,2021-11-14 22:48,18,,,,,,,,,,,,,18,hotspot,,0,cds,,,,,,,,,,,,,,,,"When looking at CDS code in the context of Lilliput, I had to spend some time in DumpAllocStat::print(). I noticed two small things which can be fixed independently:

- the divide-by-zero check at lines 45ff are not needed, since `percent_of` does this already. It also can cause the asserts at the end of the function to fire wrongly.

- About those asserts, it makes sense to flush the debug message before scope end, otherwise we won't see the debug message if the asserts fire. If they fire, the debug message would be helpful.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v0ir:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-14 22:48;roboduke;Changeset: 296780c7
Author:    Thomas Stuefe <stuefe@openjdk.org>
Date:      2021-11-15 06:47:15 +0000
URL:       https://git.openjdk.java.net/jdk/commit/296780c7ae5c129d24997007600f428b697d3365
;;;",,,,,,,,,,,,,,,,,,,,
VM.class_hierarchy jcmd help output and man page text needs clarifications/improvements,JDK-8276982,5062465,Bug,Resolved,JDK,JDK,software,duke,,,P5,Fixed,cjplummer,cjplummer,cjplummer,2021-11-10 21:28,2022-01-03 14:40,2023-10-01 09:57,2021-12-16 15:17,,,,,,,,,,,,,,19,hotspot,,0,jcmd,,,,,,,,,,,,,,,,"The man page output for the VM.class_hierarchy jcmd is incorrect w.r.t. the -s option. It says:

-s: (Optional) If a class name is specified, it prints the subclasses.  If the  class  name
is not specified, only the superclasses are printed.  (BOOLEAN, false)

This is incorrect. The second sentence should say something along the lines of ""If the -s option is not specified...""

The jcmd help output is a bit better, but also a bit ambiguous:

-s : [optional] If a classname is specified, print its subclasses. Otherwise only its 
superclasses are printed.   (BOOLEAN, false)

""Otherwise"" could interpreted as ""if a classname is NOT specified"", but the intended meaning is ""If the -s option is not specified"". I think the wording for each should be changed to:

-s: [optional] If a classname is specified print its subclasses in addition to its superclasses. Without this option only the superclasses will be printed.  (BOOLEAN, false)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276265,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v0ij:",9223372036854775807,b03,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2846162a,,,,,,,,,"2021-12-16 15:30;roboduke;Changeset: 7ce4aa89
Author:    Chris Plummer <cjplummer@openjdk.org>
Date:      2021-12-16 23:25:07 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7ce4aa894279b76b6033bb4a1d0caa00d4213406
;;;",,,,,,,,,,,,,,,,,,,,
Better indicate that a snippet (and other invalid input) could not be processed,JDK-8276964,5062435,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,hannesw,prappo,prappo,2021-11-10 10:02,2022-01-05 08:43,2023-10-01 09:57,2021-12-07 23:09,18,,,,,,,,,,,,,18,tools,,0,release-note=yes,,,,,,,,,,,,,,,,"If a snippet cannot be processed (due to an error), the resulting documentation will contain barely noticeable text, ""bad snippet"", instead of the snippet content. This is unhelpful. We should make failed snippets more noticeable to alert authors who are eyeballing the resulting documentation before publishing it.",,,,,,,,,,JDK-8278704,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v0bv:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2021-11-23 00:58;hannesw;I am thinking of using a box with a one pixel border similar to the one used for valid snippets or the preview API notice, but with some red details and light-red background to make it stand out as an error message. 

Ideally, we might want to use an icon such as an exclamation mark to make it stand out even more, but the time till 18 is rather tight and these things usually require some amount of bike-shedding.;;;","2021-12-07 23:09;roboduke;Changeset: b334d968
Author:    Hannes Wallnöfer <hannesw@openjdk.org>
Date:      2021-12-08 07:07:57 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b334d9680b2ee796d5058d68881215bb11499aad
;;;",,,,,,,,,,,,,,,,,,,
Fix broken JDK 8 documentation links,JDK-8276957,5062423,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,bhoran,bhoran,bhoran,2021-11-10 08:18,2022-04-04 11:18,2023-10-01 09:57,2021-11-12 04:55,8,,,,,,,,,,,,,8u331,docs,,0,,,,,,,,,,,,,,,,,"Several of the links in the JDK8 documentation are broken.

Run linklint on the guides and tech notes and fix where necessary.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2v097:",9223372036854775807,b01,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4eba8c33,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clarify how DateTimeFormatterBuilder.appendFraction handles value ranges,JDK-8276947,5062412,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,redestad,redestad,redestad,2021-11-10 05:50,2021-11-17 17:17,2023-10-01 09:57,2021-11-11 12:38,,,,,,,,,,,,,,18,core-libs,,0,,,,,,,,,,,,,,,,,"Improve the specification of DateTimeFormatterBuilder.appendFraction to indicate an exception will be thrown if the value is outside of the allowed range, as suggested by Stephen Colebourne in https://github.com/openjdk/jdk/pull/6188",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276948,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v06r:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@a9a7756,,,,,,,,,"2021-11-11 12:38;roboduke;Changeset: 0ca0acf6
Author:    Claes Redestad <redestad@openjdk.org>
Date:      2021-11-11 20:36:46 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0ca0acf63cb5cec4c62a9948956a04822d6f74a5
;;;",,,,,,,,,,,,,,,,,,,,
Backout JDK-8274338 11u backport ,JDK-8276943,5062408,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,zgu,zgu,zgu,2021-11-10 05:36,2021-11-11 00:15,2023-10-01 09:57,2021-11-10 08:50,11.0.14,,,,,,,,,,,,,11.0.14,hotspot,,0,jdk11u-fix-request,jdk11u-fix-yes,,,,,,,,,,,,,,,"It caused some of cds tests to fail.


http://mail.openjdk.java.net/pipermail/jdk-updates-dev/2021-November/009840.html <http://mail.openjdk.java.net/pipermail/jdk-updates-dev/2021-November/009840.html>",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8274338,,,,,,,,,,,,,,,JDK-8276785,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v05v:",9223372036854775807,b02,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-10 06:35;goetz;Fix request 11u

I just labeled it to make sure the process is followed.;;;","2021-11-10 08:50;roboduke;Changeset: c406da13
Author:    Zhengyu Gu <zgu@openjdk.org>
Date:      2021-11-10 16:49:19 +0000
URL:       https://git.openjdk.java.net/jdk11u-dev/commit/c406da13284934c11f04146daa9ebc960d0f5f4f
;;;","2021-11-11 00:10;roboduke;Changeset: c406da13
Author:    Zhengyu Gu <zgu@openjdk.org>
Date:      2021-11-10 16:49:19 +0000
URL:       https://git.openjdk.java.net/jdk11u/commit/c406da13284934c11f04146daa9ebc960d0f5f4f
;;;",,,,,,,,,,,,,,,,,,
Update ProblemList,JDK-8276930,5062395,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jwilhelm,jwilhelm,jwilhelm,2021-11-10 01:22,2021-11-17 17:16,2023-10-01 09:57,2021-11-10 17:15,18,,,,,,,,,,,,,18,hotspot,,0,noreg-trivial,,,,,,,,,,,,,,,,Update a few entries in the problemlist that refer to bugs that have been closed as duplicates.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v02z:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@11336cca,,,,,,,,,"2021-11-10 17:15;roboduke;Changeset: e27a67a9
Author:    Jesper Wilhelmsson <jwilhelm@openjdk.org>
Date:      2021-11-11 01:14:30 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e27a67a91647e584411a9ef57c0a028ab37af19b
;;;",,,,,,,,,,,,,,,,,,,,
Crash on iOS 15.1 in GlassRunnable::dealloc,JDK-8276915,5062366,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,jvos,webbuggrp,webbuggrp,2021-11-09 15:25,2021-11-23 05:06,2023-10-01 09:57,2021-11-11 07:04,jfx18,,,,,,,,,,,,,jfx18,javafx,,0,dcspn,ios,reproducer-other,webbug,,,,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
Using javafx.version 18-ea+6, gluonfx.plugin.version 1.0.9 to build the iOS native image.

A DESCRIPTION OF THE PROBLEM :
Referring to https://bugs.openjdk.java.net/browse/JDK-8275723

I am getting a very similar crash on iOS 15.1, the console output of my iPad is showing following line:
*** Assertion failure in -[GlassRunnable dealloc], GlassApplication.m:268

I see that for MacOS, this has been fixed. Comparing with the source code for iOS at https://github.com/openjdk/jfx/blob/master/modules/javafx.graphics/src/main/native-glass/ios/GlassApplication.m
the iOS dealloc method still looks like the macOS code before the fix. So I suppose with iOS 15.1, the same issue got introduced as it was with macOS 12.
This behaviour has not been seen in previous iOS releases, including iOS 15.0.2.

From the comments in the aforementioned macOS bug report, the discussion mentions a follow-up effort to check other deallocs...this might be one of those to fix.


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275723,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,os_x,,,,,,"0|i2uzwj:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4143e3f7,,,,,,,,,"2021-11-10 10:12;kcr;Yes, it does look like a similar bug in the iOS-specific glass code.;;;","2021-11-10 12:01;jvos;Thanks for reporting.
The iOS code suffers from the same issue indeed, we will fix it.;;;","2021-11-11 07:04;roboduke;Changeset: d122ed00
Author:    Jose Pereda <jpereda@openjdk.org>
Date:      2021-11-11 15:04:06 +0000
URL:       https://git.openjdk.java.net/jfx/commit/d122ed00557eeeb823a42e0c5503ab55f754e921
;;;",,,,,,,,,,,,,,,,,,
Use appropriate macosx_version_minimum value while compiling metal shaders,JDK-8276905,5062369,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jdv,vprovodin,vprovodin,2021-11-09 16:37,2021-11-23 13:00,2023-10-01 09:57,2021-11-16 05:20,17,18,,,,,,,,,,,,18,client-libs,,0,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,lanai,sn_105,sn_106,,,,,,,,,,,"If OpenJDK is built on BigSur with Xcode12.5 then a lot of AWT & Swing tests failed with the following message on machines (e.g. macOS10.15) with Xcode <=12.4 or without Xcode:

#section:main
----------messages:(5/257)----------
command: main -Dsun.java2d.uiScale=1 bug6796710
reason: User specified action: run main/othervm -Dsun.java2d.uiScale=1 bug6796710 
Mode: othervm [/othervm specified]
Additional options from @modules: --add-modules java.desktop
elapsed time (seconds): 0.592
----------configuration:(3/40)----------
Boot Layer
  add modules: java.desktop

----------System.out:(0/0)----------
----------System.err:(1/307)----------
2021-10-25 05:36:42.170 java[6916:107817] Failed to create pipeline state, error Error Domain=CompilerError Code=1 ""Function frag_col has a deployment target which is incompatible with this OS."" UserInfo={NSLocalizedDescription=Function frag_col has a deployment target which is incompatible with this OS.}

The issue was observed in Metal configurations, the tests passed well in OGL configurations

Steps to reproduce
$ jtreg -testjdk:$JDK_HOME -javaoptions:'-Dsun.java2d.metal=true' test/jdk:jdk_awt test/jdk:jdk_swing

The tests pass successfully in case -Dsun.java2d.metal=false

Note: adding --with-macosx-version-max=10.12.00 to configure does not resolve the issue.",,,,,,,,,,JDK-8277696,JDK-8277480,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277125,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,os_x,,,,,,"0|i2uzx7:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4b09ce31,,,,,,,,,"2021-11-10 02:52;jdv;It looks similar to https://developer.apple.com/forums/thread/105719 . We might need to explicitly specify minimum deployment target while generating .air using xcrun.;;;","2021-11-16 05:20;roboduke;Changeset: 9a9a157a
Author:    Jayathirth D V <jdv@openjdk.org>
Date:      2021-11-16 13:18:56 +0000
URL:       https://git.openjdk.java.net/jdk/commit/9a9a157a7d45cbfb016d4427931e1d5345210f7a
;;;","2021-11-16 08:36;jdv;Fix Request (17u)

Clean backport to 17u.
Metal pipeline was introduced in JDK17 and this fix resolves deployment target issue and needed in JDK17. Also Metal pipeline is off by default in JDK 17 so this change is low risk.

JDK 17u PR : https://github.com/openjdk/jdk17u/pull/273;;;",,,,,,,,,,,,,,,,,,
Optional.toString() is unnecessarily expensive,JDK-8276904,5062367,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,emcmanus,emcmanus,emcmanus,2021-11-09 16:01,2022-10-06 15:08,2023-10-01 09:57,2021-12-08 13:25,,,,,,,,,,,,,,18,core-libs,,0,amazon-interest,jdk17u-fix-request,jdk17u-fix-yes,noreg-trivial,,,,,,,,,,,,,"This is Optional.toString() https://github.com/openjdk/jdk/blob/0699220830a457959b784b35af125b70f43fa3b0/src/java.base/share/classes/java/util/Optional.java#L454

    /**
     * Returns a non-empty string representation of this {@code Optional}
     * suitable for debugging.  The exact presentation format is unspecified and
     * may vary between implementations and versions.
     *
     * @implSpec
     * If a value is present the result must include its string representation
     * in the result.  Empty and present {@code Optional}s must be unambiguously
     * differentiable.
     *
     * @return the string representation of this instance
     */
    @Override
    public String toString() {
        return value != null
            ? String.format(""Optional[%s]"", value)
            : ""Optional.empty"";
    }

String.format is surprisingly expensive, and we are seeing Optional.toString() showing up as a measurable fraction of CPU time in Google's servers. This code could just as easily use string concatenation, which would certainly be cheaper.

Similar remarks apply to the other Optional* classes like OptionalInt, though they are used much less.",,,,,,,,,,JDK-8278727,JDK-8294925,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275190,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uzwr:",9223372036854775807,b28,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@38ded199,,,,,,,,,"2021-12-08 13:25;roboduke;Changeset: fe2ae8e3
Author:    Eamonn McManus <emcmanus@openjdk.org>
Date:      2021-12-08 21:24:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/fe2ae8e38bd8660cc637f13f425ccea17a11aa4f
;;;","2022-09-30 13:49;dlutker;Fix request (17u)
Trivial performance improvement, clean backport, was tested as part of https://bugs.openjdk.org/browse/JDK-8275190;;;","2022-09-30 13:50;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/763
Date: 2022-09-30 20:43:44 +0000;;;","2022-10-06 14:59;phh;Changed ""jdk17u-fix-yew"" label to ""jdk17u-fix-yes"".
;;;",,,,,,,,,,,,,,,,,
Remove java/lang/RuntimeTests/exec/ExecWithDir as unnecessary,JDK-8276880,5062296,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,rriggs,rriggs,rriggs,2021-11-09 07:53,2023-05-09 23:23,2023-10-01 09:57,2021-11-09 12:45,,,,,,,,,,,,,,18,core-libs,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,,,,,,,,,,,,"The java/lang/RuntimeTests/exec/ExecWithDir test forks 500 subprocesses hoping to trigger an intermittent problem fixed in 2002.

The test can be removed, it does not exercise the condition it was created for.",,,,,,,,,,JDK-8284438,JDK-8284523,JDK-8289513,JDK-8307797,JDK-8289578,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-4750978,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,linux,,,,,,"0|i2uzgz:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4c088d55,,,,,,,,,"2021-11-09 07:55;rriggs;The origin of the test in 2002.  JDK-4750978;;;","2021-11-09 12:45;roboduke;Changeset: d7012fbd
Author:    Roger Riggs <rriggs@openjdk.org>
Date:      2021-11-09 20:43:51 +0000
URL:       https://git.openjdk.java.net/jdk/commit/d7012fbd604fc1a54a2d7364a6ca4a32f47ffc7c
;;;","2022-04-06 03:27;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/337
Date: 2022-04-06 10:21:38 +0000;;;","2022-04-06 03:28;mdoerr;Fix Request (17u):
Should get backported for parity with 17.0.4-oracle. It's not recognized as clean backport, but a trivial change (file removal).;;;","2023-05-08 05:51;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1866
Date: 2023-05-08 12:43:40 +0000;;;","2023-05-09 02:21;clanger;Fix Request (11u):
Should get backported for parity with Oracle. Test removal only, no risk. Original change had to be adapted because removed file is in a different location in 11u.;;;",,,,,,,,,,,,,,,
Remove test/jdk/sun/security/ec/ECDSAJavaVerify.java,JDK-8276863,5062277,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,weijun,weijun,weijun,2021-11-09 06:21,2022-04-11 00:41,2023-10-01 09:57,2021-11-09 06:48,,,,,,,,,,,,,,18,security-libs,,0,jdk17u-fix-request,jdk17u-fix-yes,noreg-cleanup,noreg-self,ursqe-triaged,,,,,,,,,,,,The test was added in JDK-8237218 to confirm that Java impl is used when verifying a signature. It is useless now since the native implementation is completely removed.,,,,,,,,,,JDK-8280231,JDK-8284652,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8235710,JDK-8237218,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uzcr:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2ec284e3,,,,,,,,,"2021-11-09 06:48;roboduke;Changeset: c27afb31
Author:    Weijun Wang <weijun@openjdk.org>
Date:      2021-11-09 14:46:32 +0000
URL:       https://git.openjdk.java.net/jdk/commit/c27afb313b77d19e7ace7101c6f21aa5b2c56505
;;;","2022-04-08 10:50;goetz;Fix request [17u]

I backport this for parity with 17.0.3-oracle.
No risk, only a test change.
Clean backport.;;;","2022-04-08 11:12;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/343
Date: 2022-04-08 18:07:12 +0000;;;",,,,,,,,,,,,,,,,,,
Windows GHA builds fail due to broken Cygwin,JDK-8276854,5062268,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,asarkar,shade,shade,2021-11-09 05:20,2022-05-26 09:03,2023-10-01 09:57,2021-11-09 21:53,11,17,18,,,,,,,,,,,18,infrastructure,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,,,,,,,,,,,,"This is seen in GHA Windows builds:

Building configuration 'windows-x64' (matching CONF_NAME=windows-x64)
Building configuration 'windows-x64' (matching CONF_NAME=windows-x64)
Building target 'default (product-bundles test-bundles)' in configuration 'windows-x64'
Compiling 8 files for BUILD_TOOLS_LANGTOOLS
Compiling 1 files for BUILD_TOOLS_HOTSPOT
Compiling 12 properties into resource bundles for jdk.jdeps
/usr/bin/bash: line 1:   950 Segmentation fault      (core dumped) /usr/bin/make -s -r -R -I /cygdrive/d/a/jdk/jdk/jdk/make/common SPEC=/cygdrive/d/a/jdk/jdk/jdk/build/windows-x64/spec.gmk MAKE_LOG_FLAGS=""-s"" -f ModuleWrapper.gmk -I /cygdrive/d/a/jdk/jdk/jdk/make/common/modules -I/cygdrive/d/a/jdk/jdk/jdk/make/modules/java.base MODULE=java.base MAKEFILE_PREFIX=Copy
make[2]: *** [make/Main.gmk:157: java.base-copy] Error 139
make[2]: *** Waiting for unfinished jobs....

I am able to reproduce it in my local Windows VM, so this must be something in OpenJDK/Cygwin, rather than in GH infrastructure.

At this point I believe the recent Cygwin is broken. My machines have recently updated and started to fail. I downgraded ""cygwin"" and ""cygwin-devel"" packages, and the build works again. The last version that works is apparently 3.2.0. The first version that is broken is apparently 3.3.0. GHA always checks out the most recent Cygwin, which currently pulls {cygwin,cygwin-devel}:3.3.2.

The hypothesis that Cygwin is broken is also corroborated by sightings of the same failure in 17u and 11u forests, which do not have a lot of changes backported from mainline:
  https://github.com/shipilev/jdk17u/runs/4137529809?check_suite_focus=true
  https://github.com/shipilev/jdk11u-dev/runs/4136989053?check_suite_focus=true

Unfortunately, Cygwin setup does not allow (?) specifying package versions, which means it is hard to workaround.",,,,,,,,,,JDK-8277214,JDK-8277296,JDK-8276984,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8287378,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uzar:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-11-09 11:48;asarkar;[shipilev] 

Cygwin allows specifying package versions. Once Windows GHA build in my fork is completed, I will create the pull request.

https://github.com/AnirvanSarkar/jdk/commit/55d5ea4975e6192df0bd91fa7a1b670625a6bfa2
https://github.com/AnirvanSarkar/jdk/actions/runs/1441041186;;;","2021-11-09 21:53;roboduke;Changeset: 403f3185
Author:    Anirvan Sarkar <asarkar@openjdk.org>
Committer: Christoph Langer <clanger@openjdk.org>
Date:      2021-11-10 05:51:39 +0000
URL:       https://git.openjdk.java.net/jdk/commit/403f3185f0988dcf6ef4e857d6659533bfa2943f
;;;","2021-11-10 01:33;shade;Blocked by JDK-8268860 for 17u backport.;;;","2021-11-10 03:20;shade;Fix Request (11u)

Works around the bug in Windows GHA testing. Does not apply cleanly, because Windows AArch64 hunks are missing in 11u. Passes GHA. Acked by aph.;;;","2021-11-10 04:13;ihse;[~asarkar] I was not aware that cygwin allowed that! That's great news. We should in fact specify versions for all our cygwin packages, to avoid future surprises with unplanned externally driven upgrades.;;;","2021-11-10 22:50;clanger;[~shade] this needs to go in jdk17u as well. I guess that you're waiting with the backport because you want JDK-8268860 to go in first as a prerequiste, as per https://github.com/openjdk/jdk17u/pull/243. This makes perfect sense. Assuming that you'll take care of the 17u backport after that, I'm approving this one now for 11u to get rid of the GHA errors.;;;","2021-11-15 08:49;shade;Reported the bug to Cygwin, see links.;;;","2021-11-16 00:18;shade;Fix Request (17u)

Works around the bug in Windows GHA testing. Applies cleanly. ;;;",,,,,,,,,,,,,
sun.net.httpserver.simpleserver.CommandLinePositiveTest: test does not specify port,JDK-8276848,5062261,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jboes,jboes,jboes,2021-11-09 03:06,2021-11-17 17:17,2023-10-01 09:57,2021-11-12 04:06,18,,,,,,,,,,,,,18,core-libs,,0,noreg-self,,,,,,,,,,,,,,,,The testBindAllInterfaces method of CommandLinePositiveTest should specify the port. An additional manual test should be added to cover the case where the port is not specified.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uz97:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2021-11-12 04:06;roboduke;Changeset: 13deb384
Author:    Julia Boes <jboes@openjdk.org>
Date:      2021-11-12 12:05:45 +0000
URL:       https://git.openjdk.java.net/jdk/commit/13deb38433444a196af5e22e9b29bea6a9a15400
;;;",,,,,,,,,,,,,,,,,,,,
JSException: ReferenceError: Can't find variable: IntersectionObserver,JDK-8276847,5062260,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jpereda,jpereda,jpereda,2021-11-09 02:35,2022-01-11 09:52,2023-10-01 09:57,2021-11-30 07:14,8,jfx11,jfx18,,,,,,,,,,,jfx18,javafx,,0,,,,,,,,,,,,,,,,,"If a web page uses the Intersection Observer web API, when loading it from the JavaFX WebView the page load but such functionality doesn't work. As expected, it works when opening the page from Safari, Chrome and other browsers.

Also, trying to run a script that invokes such functionality, like the one in the attached sample, fails with:

Exception in thread ""JavaFX Application Thread"" netscape.javascript.JSException: ReferenceError: Can't find variable: IntersectionObserver
        at javafx.web@18-ea/com.sun.webkit.dom.JSObject.fwkMakeException(JSObject.java:160)
        at javafx.web@18-ea/com.sun.webkit.WebPage.twkExecuteScript(Native Method)
        at javafx.web@18-ea/com.sun.webkit.WebPage.executeScript(WebPage.java:1562)
        at javafx.web@18-ea/javafx.scene.web.WebEngine.executeScript(WebEngine.java:985)
        at WebTestApp.lambda$start$0(WebTestApp.java:19)
 
This can be reproduced with any JavaFX version (11 to head).

In WebKit, the Intersection Observer feature is marked as experimental and not enabled for WebKitLegacy: 

https://github.com/openjdk/jfx/blob/master/modules/javafx.web/src/main/native/Source/WTF/Scripts/Preferences/WebPreferencesExperimental.yaml#L434

with a comment that says:

# FIXME: This is on by default in WebKit2. Perhaps we should consider turning it on for WebKitLegacy as well.

In fact, enabling such feature works, so maybe what could be already done? 
",,,,,,,,,,JDK-8278331,JDK-8278000,JDK-8278335,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8236989,JDK-8273558,,,,,,,,,,,,,,,,,,,,,JDK-8273558,,,,,,,,,,"2021-11-09 02:36;jpereda;WebTestApp.java;https://bugs.openjdk.org/secure/attachment/97009/WebTestApp.java","2021-11-09 02:27;jpereda;index.html;https://bugs.openjdk.org/secure/attachment/97008/index.html",,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uz8z:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5a8b92bd,,,,,,,,,"2021-11-30 07:14;roboduke;Changeset: b257647e
Author:    Jose Pereda <jpereda@openjdk.org>
Date:      2021-11-30 15:13:00 +0000
URL:       https://git.openjdk.java.net/jfx/commit/b257647eb6011782b414e17c33a024ab95af7263
;;;",,,,,,,,,,,,,,,,,,,,
JDK-8273416 is incomplete for UseSSE=1,JDK-8276846,5062258,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,shade,shade,shade,2021-11-09 02:32,2021-11-17 17:16,2023-10-01 09:57,2021-11-10 03:29,17,18,,,,,,,,,,,,18,hotspot,,0,c2,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,oracle-triage-11,oracle-triage-18,redhat-interest,,,,,,,,,,"Extended testing shows that JDK-8273416 was not complete: the tests still fail with -XX:UseAVX=0 -XX:UseSSE=1. For example:

$ CONF=linux-x86-server-fastdebug make test TEST=compiler/loopopts/TestCastFFAtPhi.java TEST_VM_OPTS=""-XX:UseAVX=0 -XX:UseSSE=1""
o306  ConvF2I  === _ o307  [[o250 o264  4  9 ]] 

--N: o306  ConvF2I  === _ o307  [[o250 o264  4  9 ]] 

   --N: o307  CastFF  === o371 o375  [[o306 ]]  #float unconditional dependency
   REGFPR  0  castFF_PR
   REGFPR1  0  castFF_PR

      --N: o375  Phi  === o371 o422 o82  [[o307 ]]  #float
      REGFPR  0  REGFPR
      REGFPR1  0  REGFPR1
      REGF  0  REGF
      LEGREGF  0  LEGREGF
      VLREGF  0  VLREGF

# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/matcher.cpp:1681
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/home/shade/trunks/jdk/src/hotspot/share/opto/matcher.cpp:1681), pid=1643148, tid=1643164
#  assert(false) failed: bad AD file


The predicates in x86_32.ad should probably be ""UseSSE > 0"" and ""UseSSE == 0"".",,,,,,,,,,JDK-8277290,JDK-8277196,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8252372,JDK-8273416,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uz8j:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-09 04:21;chagedorn;ILW = Same as JDK-8273416 = P3;;;","2021-11-10 03:29;roboduke;Changeset: a0b84453
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-11-10 11:27:13 +0000
URL:       https://git.openjdk.java.net/jdk/commit/a0b84453b087ff368a32b93729c5b30fda22ed48
;;;","2021-11-15 01:28;shade;Fix Request (17u)

Completes JDK-8273416 fix. Applies cleanly. Tests pass.;;;",,,,,,,,,,,,,,,,,,
(fs) java/nio/file/spi/SetDefaultProvider.java fails on x86_32,JDK-8276845,5062253,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,shade,shade,shade,2021-11-09 01:39,2021-11-23 13:00,2023-10-01 09:57,2021-11-10 01:53,17,18,,,,,,,,,,,,18,core-libs,,0,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,noreg-self,redhat-interest,ursqe-triaged,,,,,,,,,,,"$ CONF=linux-x86-server-fastdebug make test TEST=java/nio/file/spi/SetDefaultProvider.java

....

Output and diagnostic info for process 944520 was saved into 'pid-944520-output.log'
Error occurred during initialization of VM
java.lang.ExceptionInInitializerError
	at jdk.internal.module.SystemModuleFinders$SystemModuleReader.containsImageLocation(java.base@18-internal/SystemModuleFinders.java:446)
	at jdk.internal.module.SystemModuleFinders$SystemModuleReader.find(java.base@18-internal/SystemModuleFinders.java:457)
	at jdk.internal.loader.BuiltinClassLoader.findResource(java.base@18-internal/BuiltinClassLoader.java:497)
	at jdk.internal.loader.BuiltinClassLoader.findResource(java.base@18-internal/BuiltinClassLoader.java:277)
	at jdk.internal.loader.BootLoader.findResource(java.base@18-internal/BootLoader.java:164)
	at java.lang.Class.getResource(java.base@18-internal/Class.java:2957)
	at java.lang.System.implSetSecurityManager(java.base@18-internal/System.java:420)
	at java.lang.System.initPhase3(java.base@18-internal/System.java:2214)
Caused by: java.lang.UnsupportedOperationException
	at java.nio.file.spi.FileSystemProvider.newFileChannel(java.base@18-internal/FileSystemProvider.java:535)
	at java.nio.channels.FileChannel.open(java.base@18-internal/FileChannel.java:298)
	at java.nio.channels.FileChannel.open(java.base@18-internal/FileChannel.java:357)
	at jdk.internal.jimage.BasicImageReader.<init>(java.base@18-internal/BasicImageReader.java:106)
	at jdk.internal.jimage.ImageReader$SharedImageReader.<init>(java.base@18-internal/ImageReader.java:229)
	at jdk.internal.jimage.ImageReader$SharedImageReader.open(java.base@18-internal/ImageReader.java:243)
	at jdk.internal.jimage.ImageReader.open(java.base@18-internal/ImageReader.java:67)
	at jdk.internal.jimage.ImageReader.open(java.base@18-internal/ImageReader.java:71)
	at jdk.internal.jimage.ImageReaderFactory$1.apply(java.base@18-internal/ImageReaderFactory.java:70)
	at jdk.internal.jimage.ImageReaderFactory$1.apply(java.base@18-internal/ImageReaderFactory.java:67)
	at java.util.concurrent.ConcurrentHashMap.computeIfAbsent(java.base@18-internal/ConcurrentHashMap.java:1708)
	at jdk.internal.jimage.ImageReaderFactory.get(java.base@18-internal/ImageReaderFactory.java:61)
	at jdk.internal.jimage.ImageReaderFactory.getImageReader(java.base@18-internal/ImageReaderFactory.java:85)
	at jdk.internal.module.SystemModuleFinders$SystemImage.<clinit>(java.base@18-internal/SystemModuleFinders.java:385)
	at jdk.internal.module.SystemModuleFinders$SystemModuleReader.containsImageLocation(java.base@18-internal/SystemModuleFinders.java:446)
	at jdk.internal.module.SystemModuleFinders$SystemModuleReader.find(java.base@18-internal/SystemModuleFinders.java:457)
	at jdk.internal.loader.BuiltinClassLoader.findResource(java.base@18-internal/BuiltinClassLoader.java:497)
	at jdk.internal.loader.BuiltinClassLoader.findResource(java.base@18-internal/BuiltinClassLoader.java:277)
	at jdk.internal.loader.BootLoader.findResource(java.base@18-internal/BootLoader.java:164)
	at java.lang.Class.getResource(java.base@18-internal/Class.java:2957)
	at java.lang.System.implSetSecurityManager(java.base@18-internal/System.java:420)
	at java.lang.System.initPhase3(java.base@18-internal/System.java:2214)



[2021-11-09T09:35:14.128465049Z] Waiting for completion for process 944520
[2021-11-09T09:35:14.128535920Z] Waiting for completion finished for process 944520
test SetDefaultProvider.testClassPathWithSecurityManager(): failure
java.lang.AssertionError: expected [true] but found [false]
	at org.testng/org.testng.Assert.fail(Assert.java:99)
	at org.testng/org.testng.Assert.failNotEquals(Assert.java:1037)
	at org.testng/org.testng.Assert.assertTrue(Assert.java:45)
	at org.testng/org.testng.Assert.assertTrue(Assert.java:55)
	at SetDefaultProvider.testClassPathWithSecurityManager(SetDefaultProvider.java:131)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.testng/org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)
	at org.testng/org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:599)
	at org.testng/org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:174)
	at org.testng/org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng/org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:822)
	at org.testng/org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:147)
	at org.testng/org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng/org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.testng/org.testng.TestRunner.privateRun(TestRunner.java:764)
",,,,,,,,,,JDK-8277471,JDK-8277689,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8266345,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uz7f:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,,,"2021-11-09 01:50;shade;It fails all the way, starting from the initial test case addition by JDK-8266345.;;;","2021-11-09 01:57;alanb;We don't test x86 any more so haven't see the issue. As I recall, the image file is not mmap'ed on 32-bit systems, instead the file is opened and positional-reads are used instead. I'll bet the issue is that TestProvider doesn't override newFileChannel so it doesn't delegate it to the built-in provider.;;;","2021-11-09 02:07;shade;Indeed, see the PR! :);;;","2021-11-10 01:53;roboduke;Changeset: 0f463a7b
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-11-10 09:50:27 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0f463a7bf73791eda9404882ff63daf9040399bb
;;;","2021-11-16 01:03;shade;Fix Request (17u)

Fixes another x86_32 test. Applies cleanly. Affected test passes.;;;",,,,,,,,,,,,,,,,
[macos]: Error when signing the additional launcher,JDK-8276837,5061506,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,herrick,webbuggrp,webbuggrp,2021-10-30 10:48,2023-01-09 01:57,2023-10-01 09:57,2021-12-02 06:09,17,,,,,,,,,,,,,18,tools,,0,dcsad,jdk17u-fix-request,jdk17u-fix-yes,macos,regression,reproducer-no,sn_107,webbug,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
OS X 10.15

A DESCRIPTION OF THE PROBLEM :
The second launcher cannot be signed because it is already signed. It's like being signed twice.
The same build works before version 17.0.0

REGRESSION : Last worked in version 16

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Build an application with a second launcher



EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
jpackage should exit with 0
ACTUAL -
java.io.IOException: Command [/usr/bin/codesign, --timestamp, --options, runtime, -s, ***, --prefix, org.weasis.launcher., -vvvv, --keychain, /Users/runner/Library/Keychains/signing_temp.keychain-db, --entitlements, /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/jdk.jpackage16166130837195785450/config/Weasis.entitlements, weasis-distributions/target/native-dist/Weasis.app/Contents/MacOS/Dicomizer] exited with 1 code
Error: Process completed with exit code 1.

---------- BEGIN SOURCE ----------
Unfortunately, it is not possible to provide a simple test that requires a real certificate and user information. Here is an example of a command:

jpackage --type app-image --add-launcher ""Dicomizer=second-launcher.properties"" --mac-package-identifier"" ""org.launcher"" ""--mac-signing-keychain"" ""$HOME/Library/Keychains/signing_temp.keychain-db"" ""--mac-sign ...
---------- END SOURCE ----------

FREQUENCY : always


",,,,,,,,,,JDK-8289959,JDK-8290788,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278233,JDK-8299793,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,os_x_10.15,,,,,,"0|i2uun7:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3656b41f,,,,,,,,,"2021-11-29 11:45;herrick;this will happen whenever we have a signed runtime, because the jpackaggeapplauncher (which all the launchers are copies of) is signed.  We intentionally skip the main executable in the loop to sign everything, but not the additional launchers.
We then unsign only the runtime and framework files before signing everything.
as a result, main launcher doesn't get unsigned or signed here (that happens at the end), additional launchers don't get unsigned, but they do get signed.
We should be unsigning everything.;;;","2021-12-01 05:10;herrick;We need to unsign all executables and libraries in the app-image before signing (not just those in the runtime or Framework(s).
Also, clean up excessive output by executing the individual file unsigning and signing commands in quiet mode.;;;","2021-12-02 06:09;roboduke;Changeset: 76968979
Author:    Andy Herrick <herrick@openjdk.org>
Date:      2021-12-02 14:08:33 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7696897932a35708b1632517127c1a3a59919878
;;;","2022-07-19 01:20;goetz;Fix request [17u]

I backport this for parity with 17.0.5-oracle.
Needed to properly package on macos.
Clean backport.
SAP nighlty testing passed.;;;","2022-07-19 02:21;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/562
Date: 2022-07-19 09:12:34 +0000;;;",,,,,,,,,,,,,,,,
Error in javac caused by switch expression without result expressions: Internal error: stack sim error,JDK-8276836,5061939,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jlahoda,webbuggrp,webbuggrp,2021-11-03 13:54,2022-06-01 23:30,2023-10-01 09:57,2022-05-31 04:06,16,17,18,19,,,,,,,,,,19,tools,,0,dcsad,reproducer-yes,webbug,,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
The following java code produces a ""Internal error: stack sim error on ...""
---
static int test1(int i, int p){
  return 5 + switch (p){
    case 1 -> throw new RuntimeException(""1"");
    case 2 -> throw new RuntimeException(""2"");
    case 3 -> throw new RuntimeException(""3"");
    default -> {if(true) throw new RuntimeException(); else yield 0;}
  };
}
---
This is most related to the fact that the only ""result expression"" is reachable but because of the if(true) it can be stripped out. 

The following similar variants do compile however and behave as expected.
---
static int test2(int i, int p){
  return switch (p){
    case 1 -> throw new RuntimeException(""1"");
    case 2 -> throw new RuntimeException(""2"");
    case 3 -> throw new RuntimeException(""3"");
    default -> {if(true) throw new RuntimeException(); else yield 0;}
  };
}

static int test3(int i, int p){
  return i < 0 ? 5 + switch (p){
    case 1 -> throw new RuntimeException(""1"");
    case 2 -> throw new RuntimeException(""2"");
    case 3 -> throw new RuntimeException(""3"");
    default -> {if(true) throw new RuntimeException(); else yield 0;}
  } : i;
}

static int test4(int i, int p){
  return switch (i){
    case 5000:
      yield 5 + switch (p){
        case 1 -> throw new RuntimeException(""1"");
        case 2 -> throw new RuntimeException(""2"");
        case 3 -> throw new RuntimeException(""3"");
        default -> {if(true) throw new RuntimeException(); else yield 0;}
      };
    default: yield i;
  };
}
---

Looking at the compiled bytecode 3 and 4, it does seem like the `5` is pushed to the stack, from some minor debugging it seems the stack simulation fails due to an unexpected integer on the stack


STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
use the following code in a project
---
static int test1(int i, int p){
  return 5 + switch (p){
    case 1 -> throw new RuntimeException(""1"");
    case 2 -> throw new RuntimeException(""2"");
    case 3 -> throw new RuntimeException(""3"");
    default -> {if(true) throw new RuntimeException(); else yield 0;}
  };
}
---

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
It compiles without errors
ACTUAL -
It causes javac the throw an Internal Error

---------- BEGIN SOURCE ----------
Note: the following code does NOT compile
---
class Main{
  public static void main(String[] args) {
    test1(0,0);
  }

  static int test1(int i, int p){
    return 5 + switch (p){
      case 1 -> throw new RuntimeException(""1"");
      case 2 -> throw new RuntimeException(""2"");
      case 3 -> throw new RuntimeException(""3"");
      default -> {if(true) throw new RuntimeException(); else yield 0;}
    };
  }
}
---
---------- END SOURCE ----------

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-08 20:56;adev;Pass.java;https://bugs.openjdk.org/secure/attachment/97002/Pass.java","2021-11-08 20:42;adev;Test.java;https://bugs.openjdk.org/secure/attachment/97001/Test.java",,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uxbf:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,,,"2021-11-08 20:44;adev;The reproducer on compilation throws:
Test.java:2: error: Internal error: stack sim error on test1(int,int)
  static int test1(int i, int p){
                                ^
1 error
printing javac parameters to: C:\test\javac.20211109_095815.args
;;;","2021-11-08 20:56;adev;The reproducer Pass.java compiles successfully.;;;","2021-12-26 00:50;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk/pull/6350
Date: 2021-11-11 13:47:17 +0000
;;;","2022-05-24 05:52;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8867
Date: 2022-05-24 12:47:44 +0000;;;","2022-05-31 04:06;dukebot;Changeset: 7ef69935
Author:    Jan Lahoda <jlahoda@openjdk.org>
Date:      2022-05-31 11:04:50 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7ef6993576006d5fd09186870064d4dc1996e846
;;;",,,,,,,,,,,,,,,,
riscv: typo in LIR_Assembler::check_no_conflict,JDK-8276832,5062239,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,yzhu,fyang,fyang,2021-11-08 17:13,2021-12-06 17:24,2023-10-01 09:57,2021-12-06 17:24,repo-riscv-port,,,,,,,,,,,,,repo-riscv-port,hotspot,,0,c1,,,,,,,,,,,,,,,,"This is similar to: 8267625: AARCH64: typo in LIR_Assembler::emit_profile_type.

Difference is that LIR_Assembler::emit_profile_type is refactored and now the typo is in LIR_Assembler::check_no_conflict.

And LIR_Assembler::check_no_conflict is only called by LIR_Assembler::emit_profile_type for now.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8267625,,,,,,,,,,,,,,,,,,riscv,,,,,,,,,,,,,linux,,,,,,"0|i2uz4b:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clarify the ModuleDescriptor.Version specification’s treatment of repeated punctuation characters,JDK-8276826,5062230,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mr,mchung,mchung,2021-11-08 13:55,2022-01-10 09:32,2023-10-01 09:57,2021-12-16 16:35,18,,,,,,,,,,,,,18,core-libs,,0,noreg-doc,,,,,,,,,,,,,,,,"This is to follow up the spec clarification of ModuleDescriptor.Version about a sequence of delimiters, i.e. empty token strings, brought up in the discussion of PR https://github.com/openjdk/jdk/pull/5679. ",,,,,,,,,,JDK-8279729,JDK-8279095,,,,,,,,,,,,,,,,,JDK-8278465,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8250678,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uz2b:",9223372036854775807,b29,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@34132c1c,,,,,,,,,"2021-12-16 16:35;roboduke;Changeset: f5d7c777
Author:    Mark Reinhold <mr@openjdk.org>
Date:      2021-12-17 00:34:03 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/f5d7c777bc516fa2e711c19d5281ebf32384b543
;;;",,,,,,,,,,,,,,,,,,,,
hotspot/runtime/SelectionResolution test errors,JDK-8276825,5062229,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,hseigel,hseigel,hseigel,2021-11-08 12:48,2022-03-11 05:55,2023-10-01 09:57,2021-11-10 05:12,18,,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,,,,,,,,,,,,,,"SelectionResolution test classes ClassBuilder.java and TestBuilder.java have calls to the Clazz constructor with the 'access' and 'index' arguments inverted.

For example:        testClass = new Clazz(""Test"", null, -1, ACC_PUBLIC);",,,,,,,,,,JDK-8281310,JDK-8283035,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uz23:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-08 12:50;hseigel;The calls to the Clazz constructor happen to succeed because the constructor adds ACC_SUPER to the incoming access.  When the access is -1, this results in access being set to 31 because ACC_SUPER equals 32.;;;","2021-11-10 05:12;roboduke;Changeset: 55b36c6f
Author:    Harold Seigel <hseigel@openjdk.org>
Date:      2021-11-10 13:11:16 +0000
URL:       https://git.openjdk.java.net/jdk/commit/55b36c6f3bb7eb066daaf41f9eba46633afedf08
;;;","2022-03-10 08:38;goetz;Fix request [17u]

I backport this for parity with 17.0.4-oracle.
No risk, only a test change.
Clean backport.
SAP nightly testing passed.;;;","2022-03-10 08:46;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/237
Date: 2022-03-10 16:39:53 +0000;;;",,,,,,,,,,,,,,,,,
javax/print/PrintServiceLookup/FlushCustomClassLoader.java fails to free,JDK-8276819,5062219,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,serb,dcubed,dcubed,2021-11-08 09:48,2023-08-30 01:16,2023-10-01 09:57,2021-12-12 13:48,18,,,,,,,,,,,,,19,client-libs,,0,intermittent,jdk17u-fix-request,jdk17u-fix-yes,jdk18u-fix-request,jdk18u-fix-SQE-OK,jdk18u-fix-yes,noreg-self,tier3,,,,,,,,,"The following test failed in the JDK18 CI:

javax/print/PrintServiceLookup/FlushCustomClassLoader.java

Here's a snippet from the log file:

#section:main
----------messages:(5/219)----------
command: main FlushCustomClassLoader
reason: Assumed action based on file name: run main FlushCustomClassLoader 
Mode: othervm
Additional options from @modules: --add-modules java.desktop
elapsed time (seconds): 10.363
----------configuration:(3/40)----------
Boot Layer
  add modules: java.desktop

----------System.out:(10/221)----------
Not freed, attempt: 1
Not freed, attempt: 2
Not freed, attempt: 3
Not freed, attempt: 4
Not freed, attempt: 5
Not freed, attempt: 6
Not freed, attempt: 7
Not freed, attempt: 8
Not freed, attempt: 9
Not freed, attempt: 10
----------System.err:(11/636)----------
java.lang.RuntimeException: Too many attempts: 11
	at FlushCustomClassLoader.main(FlushCustomClassLoader.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.RuntimeException: Too many attempts: 11
JavaTest Message: shutting down test

STATUS:Failed.`main' threw exception: java.lang.RuntimeException: Too many attempts: 11
----------rerun:(36/5266)*----------",,,,,,,,,,JDK-8282035,JDK-8282267,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aarch64,x86_64,,,,,,,,,,,,linux,,,,,,"0|i2uyzv:",9223372036854775807,b02,,,,,,,,,,,,,"2021-11-08 09:59;prr;Looks like this test was added quite recently (about a week ago).;;;","2021-11-08 10:01;prr;The failure was seen on OL8 - on both x64 and aarch64 architectures.;;;","2021-11-08 11:32;serb;Possibly some king of leak.;;;","2021-11-08 13:10;serb;How often the bug is reproduced? I run it in the loop on Linux aarch64 and x64, no issue so far after 2000 iterations.
I can update the test to trigger heap dump on test failure which will help analyze the issue.;;;","2021-11-08 13:27;prr;Twice on Linux - once per architecture  in approximately 50 runs so far of the test tier which runs it.
So 1/50 (approx);;;","2021-12-07 21:25;serb;it was not reproduced since then?;;;","2021-12-07 23:01;prr;It occurred again today on OL 7.9 :-

----------System.out:(10/221)----------
Not freed, attempt: 1
Not freed, attempt: 2
Not freed, attempt: 3
Not freed, attempt: 4
Not freed, attempt: 5
Not freed, attempt: 6
Not freed, attempt: 7
Not freed, attempt: 8
Not freed, attempt: 9
Not freed, attempt: 10
----------System.err:(11/636)----------
java.lang.RuntimeException: Too many attempts: 11
	at FlushCustomClassLoader.main(FlushCustomClassLoader.java:46)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.RuntimeException: Too many attempts: 11
JavaTest Message: shutting down test
;;;","2021-12-12 13:48;roboduke;Changeset: 7c2c5858
Author:    Sergey Bylokhov <serb@openjdk.org>
Date:      2021-12-12 21:47:03 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7c2c58587d4eda5523331eae45e7d897252dc097
;;;","2021-12-23 22:40;dholmes;Still seeing failures in JDK 18 - can we get this backported please?;;;","2022-02-12 16:44;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18u/pull/24
Date: 2022-02-12 23:16:06 +0000;;;","2022-02-12 19:57;serb;Fix request (18u)

This is the test stabilization fix.
Review https://github.com/openjdk/jdk18u/pull/24;;;","2023-08-28 23:57;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1706
Date: 2023-08-29 06:46:53 +0000;;;","2023-08-29 15:53;serb;Fix request (17u)

This is the test stabilization fix.
Review https://github.com/openjdk/jdk17u-dev/pull/1706;;;",,,,,,,,
java/nio/channels/Channels/TransferTo.java timed out,JDK-8276808,5062206,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,bpb,dcubed,dcubed,2021-11-08 06:20,2021-12-02 12:34,2023-10-01 09:57,2021-11-09 11:19,18,,,,,,,,,,,,,18,core-libs,,0,intermittent,noreg-self,tier2,ursqe-triaged,,,,,,,,,,,,,"The following test timed out in the JDK18 CI:

java/nio/channels/Channels/TransferTo.java

Here's a snippet from the log file:

#section:testng
----------messages:(6/206)----------
command: testng TransferTo
reason: User specified action: run testng/othervm TransferTo 
Mode: othervm [/othervm specified]
Timeout information:
--- Timeout information end.
elapsed time (seconds): 501.775
----------configuration:(0/0)----------
----------System.out:(5/308)----------
Seed from RandomFactory = 7611183328771965387L
Timeout refired 480 times
test TransferTo.testMoreThanTwoGB(): success
test TransferTo.testNullPointerException(TransferTo$2@2e92724a, TransferTo$4@a6dd5b5): success
test TransferTo.testNullPointerException(TransferTo$3@fb1475a, TransferTo$1@6b95eb64): success
----------System.err:(0/0)----------
----------rerun:(35/7401)*----------

<snip>

result: Error. Program `/System/Volumes/Data/mesos/work_dir/jib-master/install/jdk-18+23-1484/macosx-aarch64.jdk/jdk-18.jdk/Contents/Home/bin/java' timed out (timeout set to 480000ms, elapsed time including timeout handling was 501765ms).
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278166,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,os_x,,,,,,"0|i2uywz:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,,,"2021-11-08 09:16;bpb;Looks like another case of jtreg timeout being fired while the test is executing. The point to which the test had progressed looks to be approximately 95% of the execution time of the TestNG @Tests.;;;","2021-11-09 11:19;roboduke;Changeset: dde959df
Author:    Brian Burkhalter <bpb@openjdk.org>
Date:      2021-11-09 19:17:59 +0000
URL:       https://git.openjdk.java.net/jdk/commit/dde959dfcef01897fdf51f820d414402e6309b8d
;;;",,,,,,,,,,,,,,,,,,,
java/awt/print/PrinterJob/CheckPrivilege.java fails due to disabled SecurityManager,JDK-8276805,5062202,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,shade,shade,shade,2021-11-08 05:10,2021-11-23 13:00,2023-10-01 09:57,2021-11-10 00:01,17,18,,,,,,,,,,,,18,client-libs,,0,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,redhat-interest,testbug,,,,,,,,,,,,"$ CONF=linux-x86_64-server-fastdebug make test TEST=java/awt/print/PrinterJob/CheckPrivilege.java

STDERR:
Failed to install SecurityManager
java.lang.UnsupportedOperationException: The Security Manager is deprecated and will be removed in a future release
	at java.base/java.lang.System.setSecurityManager(System.java:411)
	at CheckPrivilege.main(CheckPrivilege.java:81)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)
java.lang.RuntimeException: Failed to install SecurityManager
	at CheckPrivilege.main(CheckPrivilege.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)
",,,,,,,,,,JDK-8277470,JDK-8277688,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8267184,JDK-8266459,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uyw3:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4b09ce31,,,,,,,,,"2021-11-10 00:01;roboduke;Changeset: fd0a25e6
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-11-10 07:59:01 +0000
URL:       https://git.openjdk.java.net/jdk/commit/fd0a25e62b2c8abc3a419c2e80abbcf11c9e882f
;;;","2021-11-18 02:44;shade;I think this addition was just missed by JDK-8267184.;;;","2021-11-18 02:49;shade;Fix Request (17u)

Improves testing after SM deprecation. Applies cleanly.;;;",,,,,,,,,,,,,,,,,,
gc/stress/CriticalNativeStress.java fails intermittently with Shenandoah,JDK-8276801,5062182,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,zgu,shade,shade,2021-11-08 01:19,2021-11-23 13:01,2023-10-01 09:57,2021-11-10 16:15,18,,,,,,,,,,,,,18,hotspot,,0,gc-shenandoah,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,redhat-interest,,,,,,,,,,,,"This test intermittently fails:

$ CONF=linux-x86_64-server-fastdebug make test TEST=gc/stress/CriticalNativeStress.java TEST_VM_OPTS=""-XX:+UseShenandoahGC""

# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/home/shade/trunks/jdk/src/hotspot/share/gc/shenandoah/shenandoahNMethod.cpp:178), pid=2501479, tid=2501495
#  assert(_nm->code_contains((address) loc) || _nm->oops_contains(loc)) failed: nmethod should contain the oop*
",,,,,,,,,,JDK-8277483,JDK-8277698,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276205,,,,,,,,,,"2021-11-08 05:26;shade;hs_err_pid357255.log;https://bugs.openjdk.org/secure/attachment/97000/hs_err_pid357255.log",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uytf:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-11-08 05:08;shade;Zhengyu, this is probably due to recent nmethod fixes.;;;","2021-11-10 16:15;roboduke;Changeset: 73e6d7d7
Author:    Zhengyu Gu <zgu@openjdk.org>
Date:      2021-11-11 00:14:52 +0000
URL:       https://git.openjdk.java.net/jdk/commit/73e6d7d74d2ddd27f11775944c6fc4fb5268106d
;;;","2021-11-17 06:18;zgu;Fix Request (17u)

I would like to backport this Shenandoah specific fix to 17u. 

This is a followup fix to JDK-8276205, that prevents concurrent updating nmethod while concurrent walk in progress.

The original patch applies cleanly.

;;;",,,,,,,,,,,,,,,,,,
Fix table headers in NumericShaper.html,JDK-8276800,5062181,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,lujaniuk,lujaniuk,lujaniuk,2021-11-08 01:10,2022-01-10 11:39,2023-10-01 09:57,2021-11-11 08:47,14,,,,,,,,,,,,,18,client-libs,,0,accessibility,doccheck,noreg-doc,,,,,,,,,,,,,,"java.desktop/java/awt/font/NumericShaper.html does not have proper table headers, fix to improve a11y.

More specifically, Doccheck [1] flagged it, my understanding is that every row needs to have a unique row header to aid screen readers. The previous code had one cell work as header for two rows.

One could perhaps look at the standards [2] and implement something even better, but this is what I came up with.

[1]: https://openjdk.java.net/projects/code-tools/doccheck/
[2]: https://html.spec.whatwg.org/multipage/tables.html#attr-tdth-headers",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14,,,,,,,,"0|i2uyt7:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4b09ce31,,,,,,,,,"2021-11-11 08:47;roboduke;Changeset: 5e98f993
Author:    Ludvig Janiuk <ludvig.j.janiuk@oracle.com>
Committer: Alexey Ivanov <aivanov@openjdk.org>
Date:      2021-11-11 16:46:52 +0000
URL:       https://git.openjdk.java.net/jdk/commit/5e98f993b3cd68bb8564ea904f322235f55c4a7c
;;;",,,,,,,,,,,,,,,,,,,,
HttpURLConnection sends invalid HTTP request,JDK-8276798,5061985,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jpai,webbuggrp,webbuggrp,2021-11-04 02:57,2022-06-29 23:07,2023-10-01 09:57,2022-06-22 07:46,11,17,8,,,,,,,,,,,20,core-libs,,0,additional-information-received,dcsaw,noreg-hard,reproducer-yes,webbug,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
HttpURLConnection sends invalid HTTP requests under certain circumstances. (it sends ""User-Agent:"" instead of ""GET"" for the HTTP method).

When HttpURLConnection  initiates a POST on a reused connection but finds the socket closed, it will internally recover and open a new connection. If this POST succeeds and the server sends a redirect status (302) it will attempt to follow the redirect. However, internally it fails to correctly initialise the request headers: after creating a new set of headers (https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/sun/net/www/protocol/http/HttpURLConnection.java#L2871),  it will not set the HTTP method (https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/sun/net/www/protocol/http/HttpURLConnection.java#L630-L634) because failedOnce is true at this point from the first POST on the closed socket.

Logging output from such a client server interaction:

Nov 03, 2021 8:37:01 PM sun.net.www.protocol.http.HttpURLConnection plainConnect0
FINEST: ProxySelector Request for http://localhost:8080/magnoliaAuthor/.magnolia/admincentral
Nov 03, 2021 8:37:01 PM sun.net.www.http.HttpClient logFinest
FINEST: KeepAlive stream retrieved from the cache, sun.net.www.http.HttpClient(http://localhost:8080/magnoliaAuthor/.magnolia/admincentral;jsessionid=44DEE0C8C535782A6B4932E9F0D455ED)
Nov 03, 2021 8:37:01 PM sun.net.www.protocol.http.HttpURLConnection plainConnect0
FINEST: Proxy used: DIRECT
Nov 03, 2021 8:37:01 PM sun.net.www.protocol.http.HttpURLConnection writeRequests
FINE: sun.net.www.MessageHeader@15b170d89 pairs: {POST /magnoliaAuthor/.magnolia/admincentral HTTP/1.1: null}{Content-Type: application/x-www-form-urlencoded}{Cookie: csrf=ZOxgq4P_WMgLjCm3J4mWPEFFNhmIUiHlq9of5JhtKys}{charset: utf-8}{User-Agent: Java/1.8.0_181}{Host: localhost:8080}{Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2}{Connection: keep-alive}{Content-Length: 92}
Nov 03, 2021 8:37:01 PM sun.net.www.protocol.http.HttpURLConnection writeRequests
FINE: sun.net.www.MessageHeader@15b170d89 pairs: {POST /magnoliaAuthor/.magnolia/admincentral HTTP/1.1: null}{Content-Type: application/x-www-form-urlencoded}{Cookie: csrf=ZOxgq4P_WMgLjCm3J4mWPEFFNhmIUiHlq9of5JhtKys}{charset: utf-8}{User-Agent: Java/1.8.0_181}{Host: localhost:8080}{Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2}{Connection: keep-alive}{Content-Length: 92}
Nov 03, 2021 8:37:01 PM sun.net.www.protocol.http.HttpURLConnection getInputStream0
FINE: sun.net.www.MessageHeader@52ae5ad55 pairs: {null: HTTP/1.1 302}{Set-Cookie: JSESSIONID=88DCCC46C9E70CBA8262CF8060A033C0; Path=/magnoliaAuthor; HttpOnly}{Location: /magnoliaAuthor/.magnolia/admincentral;jsessionid=88DCCC46C9E70CBA8262CF8060A033C0}{Content-Length: 0}{Date: Wed, 03 Nov 2021 19:37:01 GMT}
Nov 03, 2021 8:37:01 PM sun.net.www.protocol.http.HttpURLConnection followRedirect0
FINE: Redirected from http://localhost:8080/magnoliaAuthor/.magnolia/admincentral to http://localhost:8080/magnoliaAuthor/.magnolia/admincentral;jsessionid=88DCCC46C9E70CBA8262CF8060A033C0
Nov 03, 2021 8:37:01 PM sun.net.www.protocol.http.HttpURLConnection plainConnect0
FINEST: ProxySelector Request for http://localhost:8080/magnoliaAuthor/.magnolia/admincentral;jsessionid=88DCCC46C9E70CBA8262CF8060A033C0
Nov 03, 2021 8:37:01 PM sun.net.www.protocol.http.HttpURLConnection plainConnect0
FINEST: Proxy used: DIRECT
Nov 03, 2021 8:37:01 PM sun.net.www.protocol.http.HttpURLConnection writeRequests
FINE: sun.net.www.MessageHeader@774fca3c4 pairs: {User-Agent: Java/1.8.0_181}{Host: localhost:8080}{Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2}{Connection: close}
Nov 03, 2021 8:37:01 PM sun.net.www.protocol.http.HttpURLConnection getInputStream0
FINE: sun.net.www.MessageHeader@57256a0d6 pairs: {null: HTTP/1.1 400}{Content-Type: text/html;charset=utf-8}{Content-Language: en}{Content-Length: 2244}{Date: Wed, 03 Nov 2021 19:37:01 GMT}{Connection: close}



FREQUENCY : always


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uxln:",9223372036854775807,b04,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2021-11-08 00:08;tongwan;The observations on Windows 10:
JDK 8: Failed, HttpUrlConnectionTest.urlConnection:70 failed after 363 iterations. ==> expected: <400> but was: <200>
JDK 11: Failed.
JDK 17:The failure was not observed.
JDK 18ea+1: The failure was not observed.;;;","2021-11-08 15:38;tongwan;Additional information from the submitter:
It looks like it does not fail as often on Java 17 than on older versions. But I still see it failing with Java 17 when running it a couple of times. I cannot check Java 18 though as I currently don't have access to such an environment. 

Here's the tail of the output in Java 17:

[...]
Nov 08, 2021 8:48:10 AM sun.net.www.protocol.http.HttpURLConnection writeRequests
FINE: sun.net.www.MessageHeader@6fa590ba4 pairs: {User-Agent: Java/17.0.1}{Host: localhost:8080}{Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2}{Connection: close}
Nov 08, 2021 8:48:10 AM sun.net.www.http.HttpClient logFinest
FINEST: KeepAlive stream used: http://localhost:8080/redirect
Nov 08, 2021 8:48:10 AM sun.net.www.protocol.http.HttpURLConnection getInputStream0
FINE: sun.net.www.MessageHeader@6e9319f3 pairs: {null: HTTP/1.1 400 Bad Request}{Content-Length: 40}{Content-Type: text/html}
[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.814 s <<< FAILURE! - in michid.urlconnectionbug.HttpUrlConnectionTest
[ERROR] michid.urlconnectionbug.HttpUrlConnectionTest.urlConnection  Time elapsed: 1.802 s  <<< FAILURE!
org.opentest4j.AssertionFailedError: failed after 1016 iterations. ==> expected: <400> but was: <200>
at michid.urlconnectionbug.HttpUrlConnectionTest.urlConnection(HttpUrlConnectionTest.java:70)

[INFO]
[INFO] Results:
[INFO]
[ERROR] Failures:
[ERROR]   HttpUrlConnectionTest.urlConnection:70 failed after 1016 iterations. ==> expected: <400> but was: <200>
[INFO]
[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  4.754 s
[INFO] Finished at: 2021-11-08T08:48:11+01:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M5:test (default-test) on project urlconnection-bug: There are test failures.
[ERROR]
[ERROR] Please refer to /Users/mduerig/Downloads/urlconnection-bug/target/surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
~/urlconnection-bug $ java -version
java version ""17.0.1"" 2021-10-19 LTS
Java(TM) SE Runtime Environment (build 17.0.1+12-LTS-39)
Java HotSpot(TM) 64-Bit Server VM (build 17.0.1+12-LTS-39, mixed mode, sharing);;;","2022-06-03 07:42;jpai;What's happening here is that the server (in this case the com.sun.net.httpserver.HttpServer) maintains a cache of open connections. On the client side too (the sun.net.www.protocol.http.HttpURLConnection in co-ordination with sun.net.www.http.HttpClient) maintains a keep alive cache. In the case where the above use case fails, there's a timing issue - the server side closes the connection when it finds it idle (or the idle connections max limit has reached). The client side keep-alive cache at this point, still has this connection in its cache and when the next request comes in, it ends up handing this connection. When using this (stale) connection the HttpURLConnection fails with an error and it marks it the request ""failedOnce"". Additionally, the HttpURLConnection has the ability to create a new connection afresh to reattempt that request. It does so in this case and ends up successfully sending the request. The server side handler then responds back with a redirect response code, which the HttpURLConnection parses on the client side and prepares to send a new request to the new location. One part of this preparation involves setting standard request headers and the request line. The code that it uses to do this writes the request line only if the request hasn't ""failed once"" (i.e. if it is a fresh request). Since we have set the ""failedOnce"" already on this request (when it failed because of using a stale connection) it ends up not writing the request line. This is a bug.

I have a potential fix for this that I'll propose shortly.

The original reporter has done some good work narrowing this down and providing an accurate reproducer. Thank you for doing that.;;;","2022-06-06 02:50;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/9038
Date: 2022-06-06 09:43:50 +0000;;;","2022-06-22 07:46;dukebot;Changeset: 50c37f53
Author:    Jaikiran Pai <jpai@openjdk.org>
Date:      2022-06-22 14:45:52 +0000
URL:       https://git.openjdk.org/jdk/commit/50c37f53f2ebd2fbbfd9dc5dd055658c55e4c69a
;;;",,,,,,,,,,,,,,,,
gc/TestSystemGC.java large pages subtest fails with ZGC,JDK-8276796,5062177,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,shade,shade,shade,2021-11-07 23:50,2022-03-17 23:58,2023-10-01 09:57,2021-11-10 23:09,18,,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,testbug,zgc,,,,,,,,,,,,"gc/TestSystemGC.java fails on my system like this:

$ CONF=linux-x86_64-server-fastdebug make test TEST=gc/TestSystemGC.java TEST_VM_OPTS=""-XX:+UseZGC""
...

STDOUT:
[0.026s][error][gc] Failed to commit memory (Not enough space)
[0.026s][error][gc] Failed to commit memory (Not enough space)
[0.026s][error][gc] Failed to commit memory (Not enough space)
[0.026s][error][gc] Failed to commit memory (Not enough space)
[0.026s][error][gc] Forced to lower max Java heap size from 1006M(100%) to 784M(78%)
[0.026s][error][gc] Failed to allocate initial Java heap (1006M)
STDERR:
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.

Started with JDK-8269077.

The system where it fails has 1G hugetlbfs configured:

HugePages_Total:     512
HugePages_Free:      512
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB
Hugetlb:         1048576 kB

This looks enough for G1 and other GCs to work, but apparently not for ZGC. Adding -Xmx128m makes the test pass with ZGC.",,,,,,,,,,JDK-8281456,JDK-8283359,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8269077,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uysb:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-11-08 00:57;shade;Stefan, is this a ZGC bug? I am suspicious about these lines:

[0.026s][error][gc] Forced to lower max Java heap size from 1006M(100%) to 784M(78%)
[0.026s][error][gc] Failed to allocate initial Java heap (1006M) 

Looks like initial Java heap should have been 784M, not 1006M?;;;","2021-11-09 01:45;stefank;ZGC doesn't support a both large pages and small pages when hugetlbfs large pages are used.  ZGC also won't start if it can't even allocate the initial heap size. So, that's what you see here.;;;","2021-11-09 01:49;shade;That would mean executing -XX:+UseLargePages test config with ZGC is incorrect? It confuses me, because adding -Xmx128m to -XX:+UseLargePages config makes ZGC start. Or do you mean that -XX:+UseLargePages for ZGC means it allocates everything with large pages, whereas other GCs would use small pages in some places, and therefore everything except for ZGC fits?

What originally confused me is that something lowers the max heap size to 784M, but then we try to allocate the initial heap of 1006M? Shouldn't initial heap be also adjusted?;;;","2021-11-09 02:34;pliden;Yes, using -XX:+UseLargePages for ZGC means it allocates the whole heap as large pages (i.e. there's no mix of large and small pages).

The first error you see (""Forced to lower max Java heap size from 1006M(100%) to 784M(78%)"") comes from the ZGC heap allocation logic, which notes that we can't allocate more than 784M of large pages. This type of error can also happen at runtime, if the initial heap size was set to something lower and we later expend the heap. In that case, we're already up and running so we print the error, forcefully lower the max heap size, and continue to run.

The second error (""Failed to allocate initial Java heap (1006M)"") comes from the ZGC startup code that ensures that we could actually allocate the initial heap size. Since the heap allocation logic was only able to allocate 784M we fail the startup.;;;","2021-11-09 02:40;pliden;In summary, it looks like things work as intended here. The system has 512 large pages configured, but other subsystems in HotSpot will allocate some of those during startup. ZGC is left with only 392, which isn't enough to allocate the initial heap size. Makes sense?;;;","2021-11-09 02:44;shade;Yes, that looks like a testbug then. I am trying to figure if 1G is the actual default for hugetlbfs on Debian. Is there a way to let ZGC continue even if large pages allocation fails? Otherwise, the test would probably just need to trim the heap size for UseLargePages config.
;;;","2021-11-09 03:36;shade;The default number of large pages is 0. The system where it fails has 1G hugetlbfs by luck. But that actually means that ZGC would probably not be able to pass that test at all! I see other +UseLargePages tests in our repo have @requires vm.gc != ""Z"" when +UseLargePages is used. Should probably do the same here...;;;","2021-11-10 23:09;roboduke;Changeset: 91bb0d65
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-11-11 07:07:58 +0000
URL:       https://git.openjdk.java.net/jdk/commit/91bb0d658bce010e74b248b56f0fa5b8a79e8802
;;;","2022-03-17 07:06;goetz;Fix request [17u]

I backport this for parity with 17.0.4-oracle.
No risk, only a test change.
Clean backport.
Test passes.
;;;","2022-03-17 08:38;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/261
Date: 2022-03-17 15:32:37 +0000;;;",,,,,,,,,,,
ZonedDateTime/OffsetDateTime.toString return invalid ISO-8601 for years <= 1893,JDK-8276775,5062087,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,naoto,webbuggrp,webbuggrp,2021-11-05 04:30,2021-11-17 17:16,2023-10-01 09:57,2021-11-10 12:55,11,17,18,8,,,,,,,,,,18,core-libs,,0,18ea,dcsaw,noreg-doc,webbug,,,,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
Tested with JDK 1.8.0_66 11.0.5 11.0.4 17.0.1 18-ea, on openjdk:18 docker image, on linux and windows

A DESCRIPTION OF THE PROBLEM :
The following code prints out the string 1893-01-01T00:00+02:30:17. This should be ISO-8601, but this standard doesn't support seconds in the time offset. The time offset itself might be correct, considering there was probably no international time zone standard at that time, and this is probably the offset of the sun's noon location of this time zone city.

But as an ISO-8601, this formatting is simply invalid and cannot be parsed for example by Angular applications.

Code for reproducing:

    import java.time.*;

    ZoneId zone = ZoneId.of(""Europe/Moscow"");
    ZonedDateTime zonedDateTime = ZonedDateTime.of(1893, 1, 1, 0, 0, 0, 0, zone);
    System.out.println(zonedDateTime.toString());  // 1893-01-01T00:00+02:30:17[Europe/Moscow]

    OffsetDateTime offsetDateTime = zonedDateTime.toOffsetDateTime();
    System.out.println(offsetDateTime.toString());  // 1893-01-01T00:00+02:30:17

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Run the code below

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
1893-01-01T00:00+03:00
1893-01-01T00:00+03:00

or 

1893-01-01T00:00+02:30
1893-01-01T00:00+02:30

The time zone should conform to ISO-8601. I guess the time zone information itself is third-party, so there's no influence, but at least the seconds part should be cropped, or the toString method thould not be declared as ISO-8601 compilant (javadoc)
ACTUAL -
1893-01-01T00:00+02:30:17[Europe/Moscow]
1893-01-01T00:00+02:30:17

---------- BEGIN SOURCE ----------
Try the above code, or the complete version

import java.time.OffsetDateTime;
import java.time.ZoneId;
import java.time.ZonedDateTime;

public class Main {
  public static void main(String[] args) {
    ZoneId zone = ZoneId.of(""Europe/Moscow"");
    ZonedDateTime zonedDateTime = ZonedDateTime.of(1893, 1, 1, 0, 0, 0, 0, zone);
    System.out.println(zonedDateTime.toString()); // 1893-01-01T00:00+02:30:17[Europe/Moscow]

    OffsetDateTime offsetDateTime = zonedDateTime.toOffsetDateTime();
    System.out.println(offsetDateTime.toString()); // 1893-01-01T00:00+02:30:17
  }
}
---------- END SOURCE ----------

CUSTOMER SUBMITTED WORKAROUND :
    if (dateTime.getYear() < 1900) {
      return dateTime.atOffset(ZoneOffset.ofHours(3));
    } else {
      return dateTime.atZone(ZoneId.systemDefault()).toOffsetDateTime();
    }

FREQUENCY : always


",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276903,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-06 00:25;tongwan;Main.java;https://bugs.openjdk.org/secure/attachment/96943/Main.java",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uy8b:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@a9a7756,,,,,,,,,"2021-11-06 00:29;tongwan;The observations on Windows 10:
JDK 8: Failed, the returned outputs are not expected.
JDK 11: Failed.
JDK 17: Failed.
JDK 18ea+1: Failed.;;;","2021-11-06 13:02;naoto;Removing the second part from the offset would be incompatible, thus clarifying the javadoc would be preferred. One example is in `DateTimeFormatter.ISO_TIME` as:
```
The offset ID. If the offset has seconds then they will be handled even though this is not part of the ISO-8601 standard.
```;;;","2021-11-10 12:55;roboduke;Changeset: bce35ac1
Author:    Naoto Sato <naoto@openjdk.org>
Date:      2021-11-10 20:53:23 +0000
URL:       https://git.openjdk.java.net/jdk/commit/bce35ac1d6c4115148468a3240ad459074e0b79e
;;;",,,,,,,,,,,,,,,,,,
Cookie stored in CookieHandler not sent if user headers contain cookie,JDK-8276774,5061876,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,dfuchs,webbuggrp,webbuggrp,2021-11-03 02:24,2022-04-13 04:19,2023-10-01 09:57,2021-11-19 05:19,11.0.14,11.0.14-oracle,12,17,18,,,,,,,,,18,core-libs,,0,additional-information-received,CPU22_01-critical-approved,CPU22_01-critical-SQE-OK,dcsaw,httpclient,jdk11u-critical-request,jdk11u-critical-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,regression,reproducer-yes,webbug,,,,"A DESCRIPTION OF THE PROBLEM :
An HTTP client gets a cookie back from a backend, which is stored in the CookieHandler. At the next request, the cookie is correctly added to the HttpRequest through the CookieFilter, but in case a user header ""Cookie"" was added to the request before, then the cookie added by the CookieFilter will be filtered out and not sent to the backend. This is typically the case with session cookies.

I think that the problem lies in the method jdk.internal.net.http.Http1Request.collectHeaders0(StringBuilder): see comment of line 111: ""Filter any headers from systemHeaders that are set in userHeaders"". The line 127 ""collectCookie(...)"" uses the filtered systemHeaders so any cookie set by the CookieFilter in the systemHeaders is filtered out in case the userHeaders contains some Cookie. 

I suppose that the problem is similar with HTTP/2 as the same filter is used in jdk.internal.net.http.Stream.headerFrame(long) at line 657, but I did not test it.

REGRESSION : Last worked in version 11.0.13

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
1. Client sends an HTTP/1.1 request to Backend
2. Backend send a response with a Set-Cookie: mycookie=1
3. The cookie mycookie is stored in the CookieHandler from Client
4. Client creates another request to Backend, adds header ""Cookie: anotherone=2"" and sens the request
5. CookieFilter adds the mycookie from the CookieHandler to the systemHeaders of the request


EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
6. Http1Request.collectHeaders0 merges the Cookie from systemHeaders with the Cookie from userHeaders
7. Backend gets ""Cookie: mycookie=1; anotherone=2""
ACTUAL -
6. Http1Request.collectHeaders0 filters out the Cookie from systemHeaders
7. Backend gets only ""Cookie: anotherone=2""

CUSTOMER SUBMITTED WORKAROUND :
Manage the cookies at application level instead of using CookieHandler: this is not trivial and implies several changes in code of the applications.

FREQUENCY : always


",,,,,,,,,,JDK-8278155,JDK-8277107,JDK-8277779,JDK-8277780,JDK-8278001,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8213189,,,,,,,,,,"2021-11-05 23:52;tongwan;Backend.java;https://bugs.openjdk.org/secure/attachment/96941/Backend.java","2021-11-05 23:52;tongwan;Client.java;https://bugs.openjdk.org/secure/attachment/96942/Client.java",,,,,,,generic,,,,,,,,,,b20,12,,generic,,,,,,"0|i2uwxf:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,Verified,,"2021-11-04 06:32;tongwan;Requested a complete reproducer from the submitter.;;;","2021-11-05 23:54;tongwan;The outputs of the reproducer from the submitter:
Output with Java 11:

---Backend--- Server on port 7777 started
---Backend--- http://localhost:7777 handling GET /
---Backend--- Request headers: 
---Backend---    Connection: [Upgrade, HTTP2-Settings]
---Backend---    Http2-settings: [AAEAAEAAAAIAAAABAAMAAABkAAQBAAAAAAUAAEAA]
---Backend---    Host: [localhost:7777]
---Backend---    Upgrade: [h2c]
---Backend---    User-agent: [Java-http-client/11.0.12]
---Backend---    Content-length: [0]
---Client---  Response Headers: 
---Client---     content-length: [0]
---Client---     date: [Thu, 04 Nov 2021 15:30:06 GMT]
---Client---     set-cookie: [backendcookie=1]
---Backend--- http://localhost:7777 handling GET /
---Backend--- Request headers: 
---Backend---    Cookie: [backendcookie=1]
---Backend---    Connection: [Upgrade, HTTP2-Settings]
---Backend---    Http2-settings: [AAEAAEAAAAIAAAABAAMAAABkAAQBAAAAAAUAAEAA]
---Backend---    Host: [localhost:7777]
---Backend---    Upgrade: [h2c]
---Backend---    User-agent: [Java-http-client/11.0.12]
---Backend---    Content-length: [0]
---Backend--- http://localhost:7777 handling GET /
---Backend--- Request headers: 
---Backend---    Cookie: [backendcookie=1; myclientcookie=2]
---Backend---    Connection: [Upgrade, HTTP2-Settings]
---Backend---    Http2-settings: [AAEAAEAAAAIAAAABAAMAAABkAAQBAAAAAAUAAEAA]
---Backend---    Host: [localhost:7777]
---Backend---    Upgrade: [h2c]
---Backend---    User-agent: [Java-http-client/11.0.12]
---Backend---    Content-length: [0]
---Backend--- Server on port 7777 stopped

Note that the backend gets the backendcookie in the third request as expected.

Output with Java 17:

---Backend--- Server on port 7777 started
---Backend--- http://localhost:7777 handling GET /
---Backend--- Request headers: 
---Backend---    Connection: [Upgrade, HTTP2-Settings]
---Backend---    Http2-settings: [AAEAAEAAAAIAAAABAAMAAABkAAQBAAAAAAUAAEAA]
---Backend---    Host: [localhost:7777]
---Backend---    Upgrade: [h2c]
---Backend---    User-agent: [Java-http-client/17.0.1]
---Backend---    Content-length: [0]
---Client---  Response Headers: 
---Client---     content-length: [0]
---Client---     date: [Thu, 04 Nov 2021 15:24:21 GMT]
---Client---     set-cookie: [backendcookie=1]
---Backend--- http://localhost:7777 handling GET /
---Backend--- Request headers: 
---Backend---    Cookie: [backendcookie=1]
---Backend---    Connection: [Upgrade, HTTP2-Settings]
---Backend---    Http2-settings: [AAEAAEAAAAIAAAABAAMAAABkAAQBAAAAAAUAAEAA]
---Backend---    Host: [localhost:7777]
---Backend---    Upgrade: [h2c]
---Backend---    User-agent: [Java-http-client/17.0.1]
---Backend---    Content-length: [0]
---Backend--- http://localhost:7777 handling GET /
---Backend--- Request headers: 
---Backend---    Cookie: [myclientcookie=2]
---Backend---    Connection: [Upgrade, HTTP2-Settings]
---Backend---    Http2-settings: [AAEAAEAAAAIAAAABAAMAAABkAAQBAAAAAAUAAEAA]
---Backend---    Host: [localhost:7777]
---Backend---    Upgrade: [h2c]
---Backend---    User-agent: [Java-http-client/17.0.1]
---Backend---    Content-length: [0]
---Backend--- Server on port 7777 stopped

Note that the Backend does not get the backendcookie in the third request as expected.

;;;","2021-11-05 23:56;tongwan;The observations on Windows 10:
JDK 11: Passed.
JDK 17ea+1: Failed, returned Cookie: [myclientcookie=2] 
JDK 18ea+1: Failed.;;;","2021-11-08 11:42;dfuchs;The change of behavior described in this bug was caused by  JDK-8213189.
;;;","2021-11-19 05:19;roboduke;Changeset: 03debf27
Author:    Daniel Fuchs <dfuchs@openjdk.org>
Date:      2021-11-19 13:18:12 +0000
URL:       https://git.openjdk.java.net/jdk/commit/03debf277537135974d3f55e3a5c7cf6842ee5e0
;;;","2021-11-22 02:44;ewhelan;Fix Request(17u):
This fix resolves a regression introduced by https://bugs.openjdk.java.net/browse/JDK-8213189
Risk of regression: Low as this change reverts the cookie handling behaviour to its original, pre-regression implementation
Patch applies cleanly to 17u.;;;","2021-11-30 15:49;mdoerr;Fix Request (11u):
Should get backported for parity with 11.0.14-oracle. Applies almost cleanly. New test needs adaptation. Review: https://github.com/openjdk/jdk11u/pull/18;;;","2022-04-13 04:19;sqetools;verified;;;",,,,,,,,,,,,,
Refine javax.lang.model docs,JDK-8276772,5062145,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,darcy,darcy,darcy,2021-11-05 14:27,2021-11-15 15:08,2023-10-01 09:57,2021-11-08 14:21,18,,,,,,,,,,,,,18,core-libs,,0,noreg-doc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8237235,JDK-8216335,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uyl7:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3c6c40,,,,,,,,,"2021-11-08 14:21;roboduke;Changeset: a7dedb5f
Author:    Joe Darcy <darcy@openjdk.org>
Date:      2021-11-08 22:19:55 +0000
URL:       https://git.openjdk.java.net/jdk/commit/a7dedb5f4761a7d0bc4db658d96d369b13b80620
;;;",,,,,,,,,,,,,,,,,,,,
Snippet copy feature should use button instead of link,JDK-8276768,5062141,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,hannesw,hannesw,hannesw,2021-11-05 12:34,2021-11-10 17:56,2023-10-01 09:57,2021-11-08 04:44,,,,,,,,,,,,,,18,tools,,0,,,,,,,,,,,,,,,,,"The copy-to-clipboard feature introduced in JDK-8275406 uses a somewhat flimsy mechanism as its user interface. It is implemented as a `<a>` element with `href=""#""` and an `onclick` handler. While this works within the javadoc generated documentation, the same markup redirects to the top of the page in other HTML contexts. What is more, a link element is not the appropriate element type for this feature as links are meant to redirect to a new page or section. 

A `<button>` element would be a better match as buttons are meant allow the user to trigger actions.  In the process of reimplementing the feature using a button we should also get rid of the ::before CSS pseudo-element use.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uykb:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2021-11-08 04:36;roboduke;Changeset: 0395e4ef
Author:    Hannes Wallnöfer <hannesw@openjdk.org>
Date:      2021-11-08 11:35:26 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0395e4ef8ced8385cc2c9b3bea4c6f4490c62d2b
;;;",,,,,,,,,,,,,,,,,,,,
"java/nio/channels/SocketChannel/AdaptorStreams.java fails with ""SocketTimeoutException: Read timed out""",JDK-8276763,5062136,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,alanb,dcubed,dcubed,2021-11-05 11:48,2022-04-13 07:26,2023-10-01 09:57,2021-11-11 11:08,18,,,,,,,,,,,,,18,core-libs,,0,intermittent,tier2,ursqe-triaged,,,,,,,,,,,,,,"The following test failed in the JDK18 CI:

java/nio/channels/SocketChannel/AdaptorStreams.java

Here's a snippet from the log file:

[2021-11-05T18:26:46,249Z] test AdaptorStreams.testConcurrentReadWrite1(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testConcurrentReadWrite2(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testConcurrentReadWrite3(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testConcurrentTimedReadWrite1(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testConcurrentTimedReadWrite2(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testConcurrentTimedReadWrite3(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testRead1(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testRead2(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testRead3(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testRead4(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testRead5(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testRead6(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testRead7(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testRead8(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testTimedRead1(): success
[2021-11-05T18:26:46,249Z] test AdaptorStreams.testTimedRead2(): failure
[2021-11-05T18:26:46,249Z] java.net.SocketTimeoutException: Read timed out
[2021-11-05T18:26:46,249Z] 	at java.base/sun.nio.ch.SocketChannelImpl.timedRead(SocketChannelImpl.java:1231)
[2021-11-05T18:26:46,249Z] 	at java.base/sun.nio.ch.SocketChannelImpl.blockingRead(SocketChannelImpl.java:1278)
[2021-11-05T18:26:46,249Z] 	at java.base/sun.nio.ch.SocketAdaptor$1.read(SocketAdaptor.java:192)
[2021-11-05T18:26:46,249Z] 	at java.base/sun.nio.ch.SocketAdaptor$1.read(SocketAdaptor.java:184)
[2021-11-05T18:26:46,249Z] 	at AdaptorStreams.lambda$testTimedRead2$13(AdaptorStreams.java:175)
[2021-11-05T18:26:46,249Z] 	at AdaptorStreams.withConnection(AdaptorStreams.java:472)
[2021-11-05T18:26:46,249Z] 	at AdaptorStreams.testTimedRead2(AdaptorStreams.java:171)
[2021-11-05T18:26:46,249Z] 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
[2021-11-05T18:26:46,249Z] 	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
[2021-11-05T18:26:46,249Z] 	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)
[2021-11-05T18:26:46,249Z] 	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:599)
[2021-11-05T18:26:46,249Z] 	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:174)
[2021-11-05T18:26:46,249Z] 	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
[2021-11-05T18:26:46,249Z] 	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:822)
[2021-11-05T18:26:46,249Z] 	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:147)
[2021-11-05T18:26:46,249Z] 	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
[2021-11-05T18:26:46,249Z] 	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
[2021-11-05T18:26:46,249Z] 	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
[2021-11-05T18:26:46,249Z] 	at org.testng.TestRunner.privateRun(TestRunner.java:764)
[2021-11-05T18:26:46,249Z] 	at org.testng.TestRunner.run(TestRunner.java:585)
[2021-11-05T18:26:46,249Z] 	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
[2021-11-05T18:26:46,249Z] 	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
[2021-11-05T18:26:46,250Z] 	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
[2021-11-05T18:26:46,250Z] 	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
[2021-11-05T18:26:46,250Z] 	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
[2021-11-05T18:26:46,250Z] 	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
[2021-11-05T18:26:46,250Z] 	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1218)
[2021-11-05T18:26:46,250Z] 	at org.testng.TestNG.runSuitesLocally(TestNG.java:1140)
[2021-11-05T18:26:46,250Z] 	at org.testng.TestNG.runSuites(TestNG.java:1069)
[2021-11-05T18:26:46,250Z] 	at org.testng.TestNG.run(TestNG.java:1037)
[2021-11-05T18:26:46,250Z] 	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:94)
[2021-11-05T18:26:46,250Z] 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
[2021-11-05T18:26:46,250Z] 	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
[2021-11-05T18:26:46,250Z] 	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
[2021-11-05T18:26:46,250Z] 	at java.base/java.lang.Thread.run(Thread.java:833)
[2021-11-05T18:26:46,250Z] test AdaptorStreams.testTimedRead3(): success
[2021-11-05T18:26:46,250Z] test AdaptorStreams.testTimedRead4(): success
[2021-11-05T18:26:46,250Z] test AdaptorStreams.testTimedRead5(): success
[2021-11-05T18:26:46,250Z] test AdaptorStreams.testTimedRead6(): success
[2021-11-05T18:26:46,250Z] test AdaptorStreams.testWrite1(): success
[2021-11-05T18:26:46,250Z] test AdaptorStreams.testWrite2(): success
[2021-11-05T18:26:46,250Z] test AdaptorStreams.testWrite3(): success
[2021-11-05T18:26:46,250Z] test AdaptorStreams.testWrite4(): success
[2021-11-05T18:26:46,250Z] 
[2021-11-05T18:26:46,250Z] ===============================================
[2021-11-05T18:26:46,250Z] java/nio/channels/SocketChannel/AdaptorStreams.java
[2021-11-05T18:26:46,250Z] Total tests run: 24, Passes: 23, Failures: 1, Skips: 0
[2021-11-05T18:26:46,250Z] ===============================================
[2021-11-05T18:26:46,250Z] 
[2021-11-05T18:26:46,250Z] STDERR:
[2021-11-05T18:26:46,250Z] java.lang.Exception: failures: 1
[2021-11-05T18:26:46,250Z] 	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:96)
[2021-11-05T18:26:46,250Z] 	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
[2021-11-05T18:26:46,250Z] 	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
[2021-11-05T18:26:46,250Z] 	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
[2021-11-05T18:26:46,250Z] 	at java.base/java.lang.Thread.run(Thread.java:833)
[2021-11-05T18:26:46,250Z] 
[2021-11-05T18:26:46,250Z] JavaTest Message: Test threw exception: java.lang.Exception
[2021-11-05T18:26:46,250Z] JavaTest Message: shutting down test
[2021-11-05T18:26:46,250Z] 
[2021-11-05T18:26:46,250Z] 
[2021-11-05T18:26:46,250Z] TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.Exception: failures: 1
[2021-11-05T18:26:46,250Z] --------------------------------------------------",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,linux,,,,,,"0|i2uyj7:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,Verified,,"2021-11-06 01:25;alanb;The log with the output isn't being served up right now so there is very little information to go on. If the machine were hung or there was a STW collect for 3-4 seconds then it would explain the test failure. We could increase the tolerance from 5s to 10 or 20s, it won't slow down the test, if needed.;;;","2021-11-11 02:44;alanb;I'll take this to increase the timeout used by the testTimedRead1 and testTimedRead2 tests. This won't increase the duration of the test but will make it more tolerant when no progress is made for many seconds. Given that the test runs in agentvm mode then we also need to see if there is any possibility that a previous test has left a looping thread behind.;;;","2021-11-11 11:08;roboduke;Changeset: 8aae88b0
Author:    Alan Bateman <alanb@openjdk.org>
Date:      2021-11-11 19:07:09 +0000
URL:       https://git.openjdk.java.net/jdk/commit/8aae88b0fc4acb76ef140f120712403cf4b04a46
;;;",,,,,,,,,,,,,,,,,,
Add section on reproducible builds in building.md,JDK-8276746,5062118,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,ihse,ihse,ihse,2021-11-05 09:17,2021-11-10 17:56,2023-10-01 09:57,2021-11-05 14:22,18,,,,,,,,,,,,,18,infrastructure,,0,build-infra,,,,,,,,,,,,,,,,"Reproducible builds are all the vogue. The JDK has been making great strides in getting there, but still has some way to go. However, to get as close as possible, some special configuration is needed. 

This has been ""tribal knowledge"" of a few persons in the build team. It needs to be properly documented to help other users wanting to create reproducible builds of the JDK.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uyf7:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-11-05 14:22;roboduke;Changeset: 59c3dcc7
Author:    Magnus Ihse Bursie <ihse@openjdk.org>
Date:      2021-11-05 21:21:38 +0000
URL:       https://git.openjdk.java.net/jdk/commit/59c3dcc761ac7a9eab1517743cbb77e5526ca6f3
;;;",,,,,,,,,,,,,,,,,,,,
Metaspace chunks are uncommitted twice,JDK-8276731,5062102,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,stuefe,stuefe,stuefe,2021-11-05 07:50,2021-11-18 02:27,2023-10-01 09:57,2021-11-09 06:13,18,,,,,,,,,,,,,18,hotspot,,0,metaspace,,,,,,,,,,,,,,,,"Metaspace returns memory to the OS by uncommitting free chunks when we unload classes. Today, we uncommit free metaspace chunks twice, and the second uncommit has no effect. Therefore, one of the uncommits is unnecessary.

In detail, when class unloading happens, we enter CLDG::purge():

- CLDG::purge()
  - delete each CLD in the `_unloading` list
    - which deletes the associated metaspace arena(s)
      - which causes the arenas to return all of their now unused chunks to the chunk manager (`ChunkManager::return_chunk()`)
        - where the buddy allocator combines them with their neighbors if they are free
          - (A) and the resulting larger chunk gets uncommitted if it is larger than a commit granule

- then we pop back to CLDG::purge() and call `Metaspace::purge()`
  - (B) `Metaspace::purge()` iterates through all free chunks in the chunk manager, now maximally folded, and uncommits those which are larger than a commit granule.
  
(A) and (B) are redundant. (B) uncommits memory which had already been uncommitted in step (A). Either A or B could be dropped. 

I opt for keeping (B) and dropping (A) since:
- it is the expected behavior. We expect `Metaspace::purge()` to do some purging.
- (B) is less work than (A) since space is maximally defragmented at this point. All free chunks have been processed already and are therefore maximally folded by the buddy allocator.

Note this is a minor, benign error -  just eats up a bit of processing time, but probably not that much since uncommitting memory which is already uncommitted (which amounts to remapping uncommitted memory ranges) is very cheap.
     
   ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277092,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uybn:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-09 06:13;roboduke;Changeset: 4bd5bfd8
Author:    Thomas Stuefe <stuefe@openjdk.org>
Date:      2021-11-09 14:12:40 +0000
URL:       https://git.openjdk.java.net/jdk/commit/4bd5bfd8e2624715ebfa6e4c49172361389fbc98
;;;",,,,,,,,,,,,,,,,,,,,
"breakpointOtherStratum/Test.java  tests failing with ""Stratum mismatch""",JDK-8276713,5062082,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,cjplummer,alanb,alanb,2021-11-05 04:10,2022-06-25 02:12,2023-10-01 09:57,2022-04-29 11:04,repo-loom,,,,,,,,,,,,,repo-loom,core-svc,,0,loom,noreg-self,,,,,,,,,,,,,,,"Two tests are failing in the loom repo with a ""Stratum mismatch"" error:

vmTestbase/vm/mlvm/indy/func/jdi/breakpointOtherStratum/Test.java          
vmTestbase/vm/mlvm/meth/func/jdi/breakpointOtherStratum/Test.java",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8284664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uy77:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3397f701,,,,,,,,,"2021-11-05 13:15;cjplummer;Not sure what's going on here. I've never dealt with source code Stratums or SDE support before. Tried to take a quick look to see if I could get some idea of the root cause, but it's going to require a much deeper dive than I have time for now. But in general I didn't get a feel that this is something that would be impacted by loom. I only see this failure in two jobs from Alan, one today and one from a month ago, but I also don't see any passing runs in loom CI, so it looks like these tests are not part of regular loom testing, and these failures may have been around for a long time. In Alan's job it is showing up in tier2-comp with the following args:

   -XX:+CreateCoredumpOnCrash -ea -esa -XX:CompileThreshold=100 -XX:+UnlockExperimentalVMOptions -server -XX:+TieredCompilation

But I also reproduced with no flags and with -Xcomp. The both failed every run over multiple runs.

The only other thing of note to add is that the tests are explicitly using/testing MethodHandles.;;;","2022-04-11 16:58;cjplummer;I was able to reproduce using the JVM options mentioned in my previous comment. Seems to reproduce 100% of the time. For vmTestbase/vm/mlvm/indy/func/jdi/breakpointOtherStratum/Test.java , when the test passes the output looks like:

binder> Waiting for VM initialized
Initial VMStartEvent received: VMStartEvent in thread main
debugee.stdout> ### TRACE 1: RNG seed = 4038480147701409624 (0x380b904c2c35a758)
debugee.stdout> For random generator using seed: 4038480147701409624
debugee.stdout> To re-run test with same seed value please add ""-Djdk.test.lib.random.seed=4038480147701409624"" to command line.
### TRACE 1: Breakpoint for method invokeMH was hit 1 times. OK.
### TRACE 1: Breakpoint for method invokePlain was hit 1 times. OK.
### TRACE 1: Breakpoint for method mhTarget was hit 1 times. OK.
### TRACE 1: Breakpoint for method plainTarget was hit 1 times. OK.
### TRACE 1: Breakpoint for method stop was hit 1 times. OK.
debugee.stdout> ### TRACE 1: DEBUGGEE PASSED
### TRACE 1: TEST PASSED

When it fails:

binder> Launching debugee
binder> Waiting for VM initialized
Initial VMStartEvent received: VMStartEvent in thread main
debugee.stdout> ### TRACE 1: RNG seed = -7325580522687766491 (0x9a564f53c3ace025)
debugee.stdout> For random generator using seed: -7325580522687766491
debugee.stdout> To re-run test with same seed value please add ""-Djdk.test.lib.random.seed=-7325580522687766491"" to command line.
# ERROR: Stratum mismatch: actual=[SDE_MHDebuggeeBase.java:83]
The following stacktrace is for failure analysis.
nsk.share.TestFailure: Stratum mismatch: actual=[SDE_MHDebuggeeBase.java:83]
	at nsk.share.Log.logExceptionForFailureAnalysis(Log.java:432)
	at nsk.share.Log.complain(Log.java:403)
	at vm.mlvm.share.Env.complain(Env.java:164)
	at vm.mlvm.share.jpda.StratumUtils.checkStratum(StratumUtils.java:51)
	at vm.mlvm.share.jdi.JDIBreakpointTest.run(JDIBreakpointTest.java:293)
	at vm.mlvm.share.MlvmTestExecutor.runMlvmTestInstance(MlvmTestExecutor.java:382)
	at vm.mlvm.share.MlvmTestExecutor.runMlvmTest(MlvmTestExecutor.java:327)
	at vm.mlvm.share.MlvmTestExecutor.launch(MlvmTestExecutor.java:244)
	at vm.mlvm.share.MlvmTestExecutor.launch(MlvmTestExecutor.java:186)
	at vm.mlvm.share.MlvmTestExecutor.launch(MlvmTestExecutor.java:111)
	at vm.mlvm.share.MlvmTestExecutor.launch(MlvmTestExecutor.java:86)
	at vm.mlvm.share.MlvmTest.launch(MlvmTest.java:317)
	at vm.mlvm.meth.func.jdi.breakpointOtherStratum.Test.main(Test.java:114)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:1537)
# ERROR: Test marked failed at vm.mlvm.share.jdi.JDIBreakpointTest.run(JDIBreakpointTest.java:294):
# ERROR: Stratum Logo=[SDE_MHDebuggeeBase.logo:2] mismatch
The following stacktrace is for failure analysis.
nsk.share.TestFailure: Test marked failed at vm.mlvm.share.jdi.JDIBreakpointTest.run(JDIBreakpointTest.java:294): Stratum Logo=[SDE_MHDebuggeeBase.logo:2] mismatch
	at nsk.share.Log.logExceptionForFailureAnalysis(Log.java:432)
	at nsk.share.Log.complain(Log.java:403)
	at nsk.share.Log.complain(Log.java:416)
	at vm.mlvm.share.Env.complain(Env.java:172)
	at vm.mlvm.share.MlvmTest.markTestFailedImpl(MlvmTest.java:265)
	at vm.mlvm.share.MlvmTest.markTestFailed(MlvmTest.java:247)
	at vm.mlvm.share.jdi.JDIBreakpointTest.run(JDIBreakpointTest.java:294)
	at vm.mlvm.share.MlvmTestExecutor.runMlvmTestInstance(MlvmTestExecutor.java:382)
	at vm.mlvm.share.MlvmTestExecutor.runMlvmTest(MlvmTestExecutor.java:327)
	at vm.mlvm.share.MlvmTestExecutor.launch(MlvmTestExecutor.java:244)
	at vm.mlvm.share.MlvmTestExecutor.launch(MlvmTestExecutor.java:186)
	at vm.mlvm.share.MlvmTestExecutor.launch(MlvmTestExecutor.java:111)
	at vm.mlvm.share.MlvmTestExecutor.launch(MlvmTestExecutor.java:86)
	at vm.mlvm.share.MlvmTest.launch(MlvmTest.java:317)
	at vm.mlvm.meth.func.jdi.breakpointOtherStratum.Test.main(Test.java:114)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:1537)
# ERROR: Stratum mismatch: actual=[SDE_MHDebuggeeBase.java:71]
# ERROR: Test marked failed at vm.mlvm.share.jdi.JDIBreakpointTest.run(JDIBreakpointTest.java:294):
# ERROR: Stratum Logo=[SDE_MHDebuggeeBase.logo:3] mismatch
# ERROR: Stratum mismatch: actual=[SDE_MHDebuggeeBase.java:64]
# ERROR: Test marked failed at vm.mlvm.share.jdi.JDIBreakpointTest.run(JDIBreakpointTest.java:294):
# ERROR: Stratum Logo=[SDE_MHDebuggeeBase.logo:4] mismatch
# ERROR: Stratum mismatch: actual=[SDE_MHDebuggeeBase.java:50]
# ERROR: Test marked failed at vm.mlvm.share.jdi.JDIBreakpointTest.run(JDIBreakpointTest.java:294):
# ERROR: Stratum Logo=[SDE_MHDebuggeeBase.logo:5] mismatch
# ERROR: Stratum mismatch: actual=[SDE_MHDebuggeeBase.java:90]
# ERROR: Test marked failed at vm.mlvm.share.jdi.JDIBreakpointTest.run(JDIBreakpointTest.java:294):
# ERROR: Stratum Logo=[SDE_MHDebuggeeBase.logo:6] mismatch
### TRACE 1: Breakpoint for method invokeMH was hit 1 times. OK.
### TRACE 1: Breakpoint for method invokePlain was hit 1 times. OK.
### TRACE 1: Breakpoint for method mhTarget was hit 1 times. OK.
### TRACE 1: Breakpoint for method plainTarget was hit 1 times. OK.
### TRACE 1: Breakpoint for method stop was hit 1 times. OK.
debugee.stdout> ### TRACE 1: DEBUGGEE PASSED
# ERROR: Failed runs: 1 of 1
### TRACE 1: TEST FAILED
;;;","2022-04-25 13:24;cjplummer;I turned some tracing on (use -trace.level=3 in the @run command):

Passing:
### TRACE 3: Got JDI event: BreakpointEvent@vm.mlvm.share.jpda.INDIFY_SDE_DebuggeeBase:72 in thread main
### TRACE 2: Execution hit our breakpoint: [indyWrapper:0] on step 2
### TRACE 3: Stratum [Logo]: required=[INDIFY_SDE_DebuggeeBase.logo:2]
### TRACE 3: Default stratum: location=[INDIFY_SDE_DebuggeeBase.java:72]
### TRACE 3: Stratum matches: actual=[INDIFY_SDE_DebuggeeBase.logo:2]

Failing:
### TRACE 3: Got JDI event: BreakpointEvent@vm.mlvm.share.jpda.INDIFY_SDE_DebuggeeBase:72 in thread main
### TRACE 2: Execution hit our breakpoint: [indyWrapper:0] on step 2
### TRACE 3: Stratum [Logo]: required=[INDIFY_SDE_DebuggeeBase.logo:2]
### TRACE 3: Default stratum: location=[INDIFY_SDE_DebuggeeBase.java:72]
# ERROR: Stratum mismatch: actual=[INDIFY_SDE_DebuggeeBase.java:72]

Notice in the failing case, the issue isn't so much the wrong line number (72 instead 2), it's the wrong source file (.java instead of the .logo). So the breakpoint appears to have hit in the right place (line 72 of the java file), and the test looked up the right stratum info (line 2 of the logo file), but the line number info returned (I assume by JDI) appears to have been for the Java stratum instead of the Logo stratum.

I verified that in the failing case the .class file has the same SourceDebugExtension attribute as does the passing case.

When the debug agent calls JVMTI GetSourceDebugExtension, it is returning JVMTI_ERROR_ABSENT_INFORMATION. I did noticed some pretty significant changes to the classpath when the test is launched. Probably is the source of the problem.;;;","2022-04-25 14:58;cjplummer;
In the working jdk version I find the following in the output:

binder> VirtualMachineManager: version 19.0
binder> Finding connector: default
binder> LaunchingConnector:
binder>     name: com.sun.jdi.CommandLineLaunch
binder>     description: Launches target using Sun Java VM command line and attaches to it
binder>     transport: com.sun.tools.jdi.SunCommandLineLauncher$2@5600006

In loom I see:

binder> VirtualMachineManager: version 19.0
binder> Finding connector: default
binder> ClassPath: <a very long classpath is embedded here>
binder> LaunchingConnector:
binder>     name: com.sun.jdi.CommandLineLaunch
binder>     description: Launches target using Sun Java VM command line and attaches to it
binder>     transport: com.sun.tools.jdi.SunCommandLineLauncher$2@54a0aa48

So in Loom we are launching the binder with the ClassPath arg setup, and for jdk we are not. A few lines later the ""Connector arguments"" are echoed. For jdk I see:

binder>     options=-cp <working classpath>

For Loom I see:

binder>     options=-cp <working classpath> -classpath <""ClassPath"" argument from above>

So there is a -classpath argument embedded in the -cp argument. This use of -classpath overides the previous -cp, so we no longer have the classpath we need for the test to pass.;;;","2022-04-25 15:21;cjplummer;Looks like the following commit introduce the classpath issue:

https://github.com/openjdk/loom/commit/73ff3b549796

[~lmesnik] Do you remember why these classpath changes were needed?

On more thing. The test is run with:

 *      -debugee.vmkeys=""-cp ./bin/classes${path.separator}${test.class.path}""

So this is where the -cp argument is coming from, and I assume was added to make sure the classpath for the .class file is specified so JVMTI can find it, and also the .smap file.;;;","2022-04-25 16:48;lmesnik;[~cjplummer] I don't remember exactly, might be just to find MainWrapper but not sure. 

I think it makes sense to try to add classpath only if wrapper is used for now and see if it helps.;;;","2022-04-26 13:06;lmesnik;Chris already has a fix.;;;","2022-04-29 11:24;cjplummer;The classpath changes were not needed, so I undid them and that fixed the issue:

https://github.com/openjdk/loom/pull/178
https://github.com/openjdk/loom/commit/149f59ad0ce7124fd8161f64acccf30a7f1cef1a;;;",,,,,,,,,,,,,
compiler/codecache/cli tests failing when SegmentedCodeCache used with -Xint,JDK-8276711,5062080,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,coleenp,alanb,alanb,2021-11-05 04:06,2023-09-18 23:08,2023-10-01 09:57,2022-03-03 05:22,17,repo-loom,,,,,,,,,,,,19,hotspot,,0,amazon-interest,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,ursqe-triaged,,,,,,,,,,,,"The following tests are failing in the loom repo because SegmentedCodeCache  can not be set when running with -Xint.

compiler/codecache/cli/TestSegmentedCodeCacheOption.java       
compiler/codecache/cli/printcodecache/TestPrintCodeCacheOption.java 
compiler/codecache/cli/codeheapsize/TestCodeHeapSizeOptions.java ",,,,,,,,,,JDK-8316223,JDK-8316403,JDK-8316483,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8253570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uy6r:",9223372036854775807,b13,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2022-03-01 12:55;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7650
Date: 2022-03-01 20:50:23 +0000;;;","2022-03-03 05:22;dukebot;Changeset: 7822cbce
Author:    Coleen Phillimore <coleenp@openjdk.org>
Date:      2022-03-03 13:20:58 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7822cbce10e0c0c6f9bf521faebc89a0af20734e
;;;","2023-09-12 05:08;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1728
Date: 2023-09-12 12:01:23 +0000;;;","2023-09-12 05:15;roboduke;[jdk17u-fix-request] Approval Request from Evgeny Astigeevich
Prevents allocation of the non-profiled code heap in the interpreter-only mode. Applies cleanly. Tests pass.;;;",,,,,,,,,,,,,,,,,
ParallelObjectIterator freed at the wrong time in VM_HeapDumper,JDK-8276696,5062063,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,eosterlund,tschatzl,tschatzl,2021-11-05 02:35,2023-08-22 11:56,2023-10-01 09:57,2021-11-23 06:36,17,18,,,,,,,,,,,,18,hotspot,,0,amazon-interest,jdk17u-fix-request,jdk17u-fix-yes,Thread-SMR,tier6,tier8,zgc,,,,,,,,,,"#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007f8326824e0a, pid=2139, tid=2160
#
# JRE version: OpenJDK Runtime Environment (18.0+23) (build 18-ea+23-1443)
# Java VM: OpenJDK 64-Bit Server VM (18-ea+23-1443, mixed mode, sharing, tiered, compressed class ptrs, z gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0xd51e0a]  SafeThreadsListPtr::acquire_stable_list_nested_path()+0x3a
#
# Core dump will be written. Default location: Core dumps may be processed with ""/opt/core.sh %p"" (or dumping to .../scratch/1/core.2139)
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x00007f8320097750):  VMThread ""VM Thread"" [stack: 0x00007f830824e000,0x00007f830834e000] [id=2160]
[error occurred during error reporting (printing current thread), id 0xb, SIGSEGV (0xb) at pc=0x00007f83268247af]

Stack: [0x00007f830824e000,0x00007f830834e000],  sp=0x00007f830834c820,  free space=1018k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xd51e0a]  SafeThreadsListPtr::acquire_stable_list_nested_path()+0x3a
V  [libjvm.so+0xd51fad]  ThreadsListHandle::ThreadsListHandle(Thread*)+0x4d
V  [libjvm.so+0xe3311f]  ZRootsIterator::ZRootsIterator(int)+0x15f
V  [libjvm.so+0xe0bfe6]  ZHeapIterator::ZHeapIterator(unsigned int, bool)+0x146
V  [libjvm.so+0xe0ad89]  ZHeap::parallel_object_iterator(unsigned int, bool)+0x39
V  [libjvm.so+0x7606a7]  VM_HeapDumper::doit()+0x257
V  [libjvm.so+0xdc900a]  VM_Operation::evaluate()+0xea
V  [libjvm.so+0xdca9b8]  VMThread::evaluate_operation(VM_Operation*)+0xb8
V  [libjvm.so+0xdcb037]  VMThread::inner_execute(VM_Operation*)+0x377
V  [libjvm.so+0xdcb24f]  VMThread::run()+0xbf
V  [libjvm.so+0xd4a190]  Thread::call_run()+0xc0
V  [libjvm.so+0xbafd61]  thread_native_entry(Thread*)+0xe1


siginfo: si_signo: 11 (SIGSEGV), si_code: 1 (SEGV_MAPERR), si_addr: 0x0000000000000018
",,,,,,,,,,JDK-8311485,,,,,,,,,,,,,,,,JDK-8307348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8252842,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,linux,,,,,,"0|i2uy2z:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-11-05 09:29;eosterlund;The ThreadsListHandle was designed to be used as a StackObj, so that they could be pushed and popped in a balanced fashion. However, the new ParallelObjectIterator object contains a ThreadListHandle embedded inside of it, when using ZGC. This is a CHeapObj, so we must be very careful about allocating and deleting these objects, in a local scoped fashion. But in VM_HeapDumper, the _poi member (a ParallelObjectIterator) is allocated inside of the safepoint, by the VMThread, but is deleted in the destructor of the VM_HeapDumper destructor, run by the requesting JavaThread. The end result is that a ThreadsListHandle runs its constructor in the VM thread, and its destructor in the requesting JavaThread. But it thinks it is being destructed in the VMThread, when going out of scope of a StackObj. That might not blow up all of the time, but it will eventually blow up some of the time.

We should probably run the destructor of the ParallelObjectIterator  right after it was used, and not defer it until some time later.;;;","2021-11-09 11:11;mseledtsov;ILW = HLM = P3;;;","2021-11-09 11:23;dcubed;[~eosterlund] - sending this one your way since this sounds
like a ZGC problem.;;;","2021-11-23 06:36;roboduke;Changeset: f4dc03ea
Author:    Erik Österlund <eosterlund@openjdk.org>
Date:      2021-11-23 14:34:21 +0000
URL:       https://git.openjdk.java.net/jdk/commit/f4dc03ea6de327425ff265c3d2ec16ea7b0e1634
;;;","2021-11-29 11:56;dcubed;The fix for this bug is in jdk-18+25-1689.;;;","2023-06-15 01:51;shade;Historical perspective for backports: This issue improves the ParallelObjectIterator lifecycle, and fixes the issue introduced by JDK-8252842.;;;","2023-06-15 02:16;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1440
Date: 2023-06-15 08:52:39 +0000;;;","2023-07-03 03:33;shade;Fix Request (17u)

Improves the code clarity for ParallelObjectIterator usage. Serves as the pre-requisite for JDK-8307348 backport. Does not apply cleanly due to a number of contextual differences, see JDK 17u PR. Testing passes.;;;",,,,,,,,,,,,,
Pattern trailing unescaped backslash causes internal error,JDK-8276694,5062033,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,igraves,webbuggrp,webbuggrp,2021-11-04 13:59,2022-08-09 09:01,2023-10-01 09:57,2022-01-11 14:38,11,17,18,8,,,,,,,,,,19,core-libs,,0,dcsaw,reproducer-yes,webbug,,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
Compiling a Regex Pattern with an unescaped trailing backslash causes an internal error:
Pattern.compile(""\\"")

Exception:
Exception java.util.regex.PatternSyntaxException: Unexpected internal error near index 1

---

This report is about the fact that an internal error is reported; it is not (like JDK-4783892) about the misunderstanding that backslashes need to be escaped.

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Pattern.compile(""\\"")

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
An exception with a message saying something similar to:
> Unescaped trailing backslash at index ...
ACTUAL -
Exception java.util.regex.PatternSyntaxException: Unexpected internal error near index 1

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-05 01:50;tongwan;Main.java;https://bugs.openjdk.org/secure/attachment/96930/Main.java",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uxwb:",9223372036854775807,b05,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@557d5cff,,,,,,,Verified,,"2021-11-05 01:54;tongwan;The observations on Windows 10:
JDK 8: Failed, Unexpected internal error near index 1
JDK 11: Failed.
JDK 17: Failed.
JDK 18ea+1: Failed.;;;","2021-12-20 02:00;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk/pull/6891
Date: 2021-12-20 09:57:14 +0000
;;;","2022-01-11 14:38;roboduke;Changeset: 3aaa0982
Author:    Masanori Yano <myano@openjdk.org>
Committer: Ian Graves <igraves@openjdk.org>
Date:      2022-01-11 22:37:15 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3aaa0982d8c1735208a331b0097a5aea4a1fef5a
;;;",,,,,,,,,,,,,,,,,,
Remove JLinkReproducibleXXXTest from ProblemList.txt,JDK-8276688,5062056,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jpai,jpai,jpai,2021-11-04 22:27,2023-02-19 03:32,2023-10-01 09:57,2021-11-05 20:37,,,,,,,,,,,,,,18,tools,,0,test-only,ursqe-triaged,,,,,,,,,,,,,,,"The tools/jlink/JLinkReproducibleTest.java and tools/jlink/JLinkReproducible3Test.java tests were ProblemListed because they were intermittently failing. A recent bug fix for https://bugs.openjdk.java.net/browse/JDK-8275509 is expected to address these failures.
Creating this issue to remove these tests from the ProblemList.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275509,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uy1f:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3da653bd,,,,,,,,,"2021-11-05 20:37;roboduke;Changeset: 2653cfbf
Author:    Jaikiran Pai <jpai@openjdk.org>
Date:      2021-11-06 03:36:46 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2653cfbf0f316183ea23dd234896b44f7dd6eae0
;;;",,,,,,,,,,,,,,,,,,,,
Malformed Javadoc inline tags in JDK source in /java/util/regex/Pattern.java,JDK-8276686,5062036,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,igraves,webbuggrp,webbuggrp,2021-11-04 16:12,2022-02-23 17:52,2023-10-01 09:57,2022-02-22 07:43,17,,,,,,,,,,,,,19,core-libs,,0,dcsaw,noreg-doc,webbug,,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
The JDK source contains multiple malformed Javadoc inline tags. For some the `@` is missing, for others the `@` is placed in front of the opening curly bracket (instead of behind).

Affected:

https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.base/share/classes/java/util/regex/Pattern.java#L399



",,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276679,JDK-8276678,JDK-8276681,JDK-8276677,JDK-8276682,JDK-8276674,JDK-8276685,JDK-8276683,JDK-8276684,JDK-8276680,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uxwz:",9223372036854775807,b11,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@557d5cff,,,,,,,,,"2021-11-08 07:37;pnarayanaswa;Additional Information from submitter:
===========================
Re JDK-8276686: The problem in java.util.regex.Pattern was only a missing period at the end of the sentence, it has nothing to do with a malformed Javadoc inline tag.
(Originally all these malformed Javadoc inline tag reports were one single report were this java.util.regex.Pattern issue was just a side note at the end of the report.);;;","2022-02-17 10:08;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7521
Date: 2022-02-17 18:02:20 +0000;;;","2022-02-22 07:43;dukebot;Changeset: 41355e2d
Author:    Ian Graves <igraves@openjdk.org>
Date:      2022-02-22 15:38:52 +0000
URL:       https://git.openjdk.java.net/jdk/commit/41355e2daa43fa8433bf77ed187979c49d453f4a
;;;",,,,,,,,,,,,,,,,,,
Malformed Javadoc inline tags in JDK source in /jdk/management/jfr/RecordingInfo.java,JDK-8276685,5062054,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,egahlin,tongwan,tongwan,2021-11-04 21:03,2021-12-01 17:44,2023-10-01 09:57,2021-11-26 11:14,17,,,,,,,,,,,,,18,hotspot,,0,dcsaw,noreg-doc,webbug,,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
The JDK source contains multiple malformed Javadoc inline tags. For some the `@` is missing, for others the `@` is placed in front of the opening curly bracket (instead of behind).

Affected:

https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/jdk.management.jfr/share/classes/jdk/management/jfr/RecordingInfo.java#L303
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/jdk.management.jfr/share/classes/jdk/management/jfr/RecordingInfo.java#L306


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276686,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uy0z:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2021-11-26 11:14;roboduke;Changeset: b9eb532d
Author:    Erik Gahlin <egahlin@openjdk.org>
Date:      2021-11-26 19:13:38 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b9eb532de20be7c2c18a654a23dcc8dd66654049
;;;",,,,,,,,,,,,,,,,,,,,
Malformed Javadoc inline tags in JDK source /jdk/internal/jshell/tool/Feedback.java,JDK-8276684,5062053,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,prappo,tongwan,tongwan,2021-11-04 20:51,2022-04-30 14:10,2023-10-01 09:57,2022-04-30 14:10,17,18,19,,,,,,,,,,,19,tools,,0,dcsaw,noreg-doc,trivial,webbug,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
The JDK source contains multiple malformed Javadoc inline tags. For some the `@` is missing, for others the `@` is placed in front of the opening curly bracket (instead of behind).

Affected:

https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/jdk.jshell/share/classes/jdk/internal/jshell/tool/Feedback.java#L629


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276686,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uy0r:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@ef6d34f,,,,,,,,,"2021-11-30 10:13;mtrudeau;See method setMode() - line 629, there is a @{code, should be {@code.

That's the only one I could find.
;;;","2021-12-01 05:20;prappo;It looks like this particular issue will be addressed by an earlier issue, JDK-8276674, for which there's already a reviewed PR.;;;","2022-04-30 14:10;prappo;This issue was fixed in JDK-8276674.;;;",,,,,,,,,,,,,,,,,,
Malformed Javadoc inline tags in JDK source in com/sun/tools/javac/util/RawDiagnosticFormatter.java,JDK-8276683,5062052,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prappo,tongwan,tongwan,2021-11-04 20:47,2021-12-07 07:55,2023-10-01 09:57,2021-11-30 14:08,17,18,19,,,,,,,,,,,18,tools,,0,dcsaw,noreg-doc,trivial,webbug,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
The JDK source contains multiple malformed Javadoc inline tags. For some the `@` is missing, for others the `@` is placed in front of the opening curly bracket (instead of behind).

Affected:
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/jdk.compiler/share/classes/com/sun/tools/javac/util/RawDiagnosticFormatter.java#L63

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276686,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uy0j:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,,,"2021-11-30 14:08;roboduke;Changeset: 29426469
Author:    Jonathan Gibbons <jjg@openjdk.org>
Date:      2021-11-30 22:07:07 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2942646957537b2a4b078bc8cb0becab967c21e2
;;;",,,,,,,,,,,,,,,,,,,,
Additional malformed Javadoc inline tags in JDK source,JDK-8276681,5062050,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,tprinzing,tongwan,tongwan,2021-11-04 20:33,2021-12-08 17:44,2023-10-01 09:57,2021-12-02 13:24,17,,,,,,,,,,,,,18,core-libs,,0,dcsaw,httpclient,noreg-doc,starter-bug,webbug,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
The JDK source contains multiple malformed Javadoc inline tags. For some the `@` is missing, for others the `@` is placed in front of the opening curly bracket (instead of behind).

Affected:

https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.net.http/share/classes/jdk/internal/net/http/ResponseSubscribers.java#L1089



",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276686,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uy03:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2021-11-05 03:23;dfuchs;It would be nice to get this fixed but he javadoc in question is on an internal class (and therefore never published). 
This could be a nice starter-bug for someone wanting to get familiar with the OpenJDK Pull-Request process.;;;","2021-11-22 09:10;tprinzing;https://github.com/openjdk/jdk/pull/6486;;;","2021-12-02 13:24;roboduke;Changeset: b8ac0d20
Author:    Tim Prinzing <tim.prinzing@oracle.com>
Committer: Lance Andersen <lancea@openjdk.org>
Date:      2021-12-02 21:22:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b8ac0d20ceec26b3a1dd0b9577817fa6320ea9ef
;;;",,,,,,,,,,,,,,,,,,
Malformed Javadoc inline tags in JDK source in javax/swing,JDK-8276679,5062048,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,psadhukhan,tongwan,tongwan,2021-11-04 20:24,2021-11-29 14:47,2023-10-01 09:57,2021-11-10 00:34,17,,,,,,,,,,,,,18,client-libs,,0,dcsaw,noreg-doc,webbug,,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
The JDK source contains multiple malformed Javadoc inline tags. For some the `@` is missing, for others the `@` is placed in front of the opening curly bracket (instead of behind).

Affected:

https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.desktop/share/classes/javax/swing/JTree.java#L3678
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.desktop/share/classes/javax/swing/SwingUtilities.java#L109
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.desktop/share/classes/javax/swing/SwingUtilities.java#L114
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.desktop/share/classes/javax/swing/event/HyperlinkEvent.java#L178
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.desktop/share/classes/javax/swing/plaf/basic/BasicComboBoxUI.java#L98

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276686,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uxzn:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@568a5b31,,,,,,,Verified,,"2021-11-10 00:34;roboduke;Changeset: e01d6d00
Author:    Prasanta Sadhukhan <psadhukhan@openjdk.org>
Date:      2021-11-10 08:34:07 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e01d6d00bc4ab5ca0d38f8894a78e6d911e0fe93
;;;","2021-11-29 14:47;tongwan;Verified.;;;",,,,,,,,,,,,,,,,,,,
Malformed Javadoc inline tags in JDK source in com/sun/beans/decoder/DocumentHandler.java,JDK-8276678,5062047,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,achung,tongwan,tongwan,2021-11-04 20:17,2021-11-29 14:48,2023-10-01 09:57,2021-11-10 12:09,17,,,,,,,,,,,,,18,client-libs,,0,dcsaw,noreg-doc,sn_105,webbug,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
The JDK source contains multiple malformed Javadoc inline tags. For some the `@` is missing, for others the `@` is placed in front of the opening curly bracket (instead of behind).

Affected:

https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.desktop/share/classes/com/sun/beans/decoder/DocumentHandler.java#L202-L203

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276686,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uxzf:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@41b965df,,,,,,,Verified,,"2021-11-10 12:09;roboduke;Changeset: 2374abda
Author:    Alisen Chung <achung@openjdk.org>
Committer: Alexey Ivanov <aivanov@openjdk.org>
Date:      2021-11-10 20:08:13 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2374abda19213d615a72c83f584ea61d5bbba4a3
;;;","2021-11-29 14:48;tongwan;Verified.;;;",,,,,,,,,,,,,,,,,,,
Malformed Javadoc inline tags in JDK source in javax/net/ssl,JDK-8276677,5062044,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,wetmore,tongwan,tongwan,2021-11-04 20:11,2021-11-29 14:46,2023-10-01 09:57,2021-11-08 17:12,17,,,,,,,,,,,,,18,security-libs,,0,dcsaw,noreg-doc,webbug,,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
The JDK source contains multiple malformed Javadoc inline tags. For some the `@` is missing, for others the `@` is placed in front of the opening curly bracket (instead of behind).

Affected:

https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.base/share/classes/javax/net/ssl/SSLEngine.java#L342
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.base/share/classes/javax/net/ssl/SSLSocket.java#L136





",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276686,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uxyr:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@39d9862,,,,,,,Verified,,"2021-11-08 17:12;roboduke;Changeset: 38e6d5d6
Author:    Bradford Wetmore <wetmore@openjdk.org>
Date:      2021-11-09 01:11:18 +0000
URL:       https://git.openjdk.java.net/jdk/commit/38e6d5d6ed967f68e6ac1bfaa285efa16577c790
;;;","2021-11-29 14:46;tongwan;Verified.;;;",,,,,,,,,,,,,,,,,,,
Malformed Javadoc inline tags in JDK source,JDK-8276674,5062043,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,tprinzing,tongwan,tongwan,2021-11-04 20:07,2021-12-08 17:44,2023-10-01 09:57,2021-12-02 12:49,17,,,,,,,,,,,,,18,core-libs,,0,dcsaw,noreg-doc,webbug,,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
The JDK source contains multiple malformed Javadoc inline tags. For some the `@` is missing, for others the `@` is placed in front of the opening curly bracket (instead of behind).

Affected:
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.base/share/classes/java/util/stream/AbstractTask.java#L183
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.base/share/classes/java/util/stream/FindOps.java#L165
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.base/share/classes/java/util/stream/Node.java#L203
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.base/share/classes/java/util/stream/Node.java#L211
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.base/share/classes/java/util/stream/Node.java#L219
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.base/share/classes/java/util/stream/Nodes.java#L173
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.base/share/classes/java/util/stream/Nodes.java#L211
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.base/share/classes/java/util/stream/Nodes.java#L248
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.base/share/classes/java/util/stream/Nodes.java#L285
https://github.com/openjdk/jdk/blob/7b1916efda95a46439cf42e006593361d12a8823/src/java.base/share/classes/java/util/stream/PipelineHelper.java#L166
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276686,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uxyj:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@38ded199,,,,,,,,,"2021-11-09 10:16;smarks;These are non-public classes, so the problems don't show up in the normal javadoc builds. Probably need to add (temporarily) the -package or -private options to javadoc in order to see error messages for these.;;;","2021-11-09 10:37;darcy;FYI, results of grepping over the java files in $JDK/src looking for ""@{"" :

src/jdk.jshell/share/classes/jdk/internal/jshell/tool/Feedback.java:         * Set mode. Create, changed, or delete a feed
back mode. For @{code /set
src/java.base/share/classes/java/util/stream/Nodes.java:     * Produces a variable size @{link Node.Builder}.
src/java.base/share/classes/java/util/stream/Nodes.java:     * Produces a variable size @{link Node.Builder.OfInt}.
src/java.base/share/classes/java/util/stream/Nodes.java:     * Produces a variable size @{link Node.Builder.OfLong}.
src/java.base/share/classes/java/util/stream/Nodes.java:     * Produces a variable size @{link Node.Builder.OfDouble}.
src/java.base/share/classes/java/util/stream/PipelineHelper.java:     * Constructs a @{link Node.Builder} compatible with 
the output shape of
src/java.base/share/classes/java/util/stream/AbstractTask.java:     * {@code compute()} and the result passed to @{code se
tLocalResult()}
src/java.base/share/classes/java/util/stream/Node.java:         * Specialized @{code Node.Builder} for int elements
src/java.base/share/classes/java/util/stream/Node.java:         * Specialized @{code Node.Builder} for long elements
src/java.base/share/classes/java/util/stream/Node.java:         * Specialized @{code Node.Builder} for double elements
src/java.base/share/classes/java/util/stream/FindOps.java:     * Implementation of @{code TerminalSink} that implements th
e find
src/java.management/share/classes/javax/management/NumericValueExp.java:    /** Creates a new NumericValue representing th
e numeric literal @{code val}.*/
src/java.desktop/share/classes/javax/swing/JTree.java:     * @param state if {@code true}, all parents of @{code path} and
 path are marked as expanded.
src/java.desktop/share/classes/javax/swing/SwingUtilities.java:     * Return {@code true} if @{code a} contains {@code b}
src/java.desktop/share/classes/javax/swing/SwingUtilities.java:     * @return {@code true} if @{code a} contains {@code b}
src/java.desktop/share/classes/javax/swing/plaf/basic/BasicComboBoxUI.java:     * The Component that the @{code ComboBoxEd
itor} uses for editing.
src/java.desktop/share/classes/javax/swing/event/HyperlinkEvent.java:     * that does not specify an {@code InputEvent}, o
r @{code null}
src/java.desktop/share/classes/com/sun/beans/decoder/DocumentHandler.java:     * @return @{code true} if the variable is d
efined;
src/java.desktop/share/classes/com/sun/beans/decoder/DocumentHandler.java:     *         @{code false} otherwise
src/jdk.compiler/share/classes/com/sun/tools/javac/util/RawDiagnosticFormatter.java:     * Otherwise both line and column 
information is included, using the format @{code line:col}"".
;;;","2021-11-22 09:16;tprinzing;https://github.com/openjdk/jdk/pull/6443;;;","2021-12-02 12:49;roboduke;Changeset: 652b5f85
Author:    Tim Prinzing <tim@prinzing.net>
Committer: Brent Christian <bchristi@openjdk.org>
Date:      2021-12-02 20:47:29 +0000
URL:       https://git.openjdk.java.net/jdk/commit/652b5f8546d0453238166f8fcd0cd3d882886bb4
;;;",,,,,,,,,,,,,,,,,
Cannot build hsdis on WSL,JDK-8276672,5062041,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ysuenaga,ysuenaga,ysuenaga,2021-11-04 20:00,2021-11-17 17:16,2023-10-01 09:57,2021-11-10 06:34,18,,,,,,,,,,,,,18,infrastructure,,0,build-infra,,,,,,,,,,,,,,,,"JDK-8275128 introduced new Makefile for hsdis to integrate it to normal build system, however it does not work on WSL 1 Ubuntu 20.04 and MinGW from Ubuntu.

Hsdis.gmk has two problems:

1. MinGW version is fixed to ""9.2.0""
2. Assumes sysroot for MinGW is located at /usr/$MINGW_BASE/sys-root",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275128,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,18,,windows,,,,,,"0|i2uxy3:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-11-10 06:34;roboduke;Changeset: 38ec3a16
Author:    Yasumasa Suenaga <ysuenaga@openjdk.org>
Date:      2021-11-10 14:33:02 +0000
URL:       https://git.openjdk.java.net/jdk/commit/38ec3a16d722d740d0b2128c6f6c2d1eab7a7c08
;;;",,,,,,,,,,,,,,,,,,,,
"ObjectInputStream.GetField.get(name, object) should throw ClassNotFoundException",JDK-8276665,5062031,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,rriggs,rriggs,rriggs,2021-11-04 13:22,2022-04-28 08:06,2023-10-01 09:57,2021-11-24 07:15,18,,,,,,,,,,,,,18,core-libs,,0,bugdb_33321368,release-note=yes,,,,,,,,,,,,,,,"Currently, there is a bug in ObjectInputStream.FieldValues.get(name, val).

        public Object get(String name, Object val) {
            int off = getFieldOffset(name, Object.class);
            if (off >= 0) {
                int objHandle = objHandles[off];
                handles.markDependency(passHandle, objHandle);
                return (handles.lookupException(objHandle) == null) ?
                    objValues[off] : null;
            } else {
                return val;
            }

Here, a call to handles.lookupException is made, however rather than throwing the associated exception, the method simply returns null.

This is causing ClassNotFoundExceptions to be buried by the stack and the exception being thrown further up the stack by the caller of the method.

The method signature for FieldValues.get does not declare it throws ClassNotFoundException.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276742,,,,,,,,,,,JDK-8273660,,,,,,,,JDK-8285427,,,,,,,JDK-8277817,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxvv:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7e74daa7,,,,,,,,,"2021-11-17 07:53;rriggs;The API for ObjectInputStream.GetField.get(name, object) is updated to allow ClassNotFoundException to be thrown.

To revert to the old behavior a system property jdk.serialGetFieldCnfeReturnsNull is added to the implementation. 
Setting the value to true reverts to the old behavior (returning null); leaving it unset or to any other value results in the throwing of ClassNotFoundException.

The CSR: JDK-8276742 provides the rationale and details of the issue and the change in specification and behavior.;;;","2021-11-24 07:15;roboduke;Changeset: 0384739a
Author:    Roger Riggs <rriggs@openjdk.org>
Date:      2021-11-24 15:14:22 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0384739afc2d470ab6a3525e9d85aca0af58f2ed
;;;",,,,,,,,,,,,,,,,,,,
(fs) UserDefinedFileAttributeView no longer works with long path (win),JDK-8276661,5062025,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,bpb,alanb,alanb,2021-11-04 12:20,2022-04-13 07:39,2023-10-01 09:57,2021-12-02 12:54,18,,,,,,,,,,,,,18,core-libs,,0,regression,,,,,,,,,,,,,,,,"The changes in JDK-8273922 introduce a regression for cases with long file paths. 

We need to introduce a getPathWithPrefixForWin32Calls or some such method that returns the file path with the \\?\ prefix, then appends the "":<name>"". 

We also need to expand our tests in this area, it seems that existing long path tests do not include access to user defined attributes.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8273922,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxuj:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,Verified,,"2021-11-04 12:31;bpb;We need to replace this code

53.        String path = join(file.getPathForWin32Calls(), name);
65         WindowsPath wp = WindowsPath.createFromNormalizedPath(wfs, path);
66         return wp.getPathForWin32Calls();

with something like:

         return join(file.getPathWithPrefixForWin32Calls(), name);

where getPathWithPrefixForWin32Calls() returns the file path for win32 with the \\?\ prefix. The reason the L53-L66 doesn’t work is that file.getPathForWin32Call() will return a file path with the \\?\ prefix then it’s long. That is a string for win32 calls, not a string to for createFromNormalizedPath().;;;","2021-12-02 12:54;roboduke;Changeset: 15345e3e
Author:    Brian Burkhalter <bpb@openjdk.org>
Date:      2021-12-02 20:53:13 +0000
URL:       https://git.openjdk.java.net/jdk/commit/15345e3edcd8beee0d2c3192cfaaf76c7accee1f
;;;",,,,,,,,,,,,,,,,,,,
XSLT compiler tries to define a class with empty name,JDK-8276657,5062018,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,joehw,hseigel,hseigel,2021-11-04 10:41,2022-04-08 03:41,2023-10-01 09:57,2021-12-01 22:53,18,,,,,,,,,,,,,18,xml,,0,azul-interest,jdk11u-fix-request,jdk11u-fix-yes,jdk13u-fix-request,jdk13u-fix-yes,jdk15u-fix-request,jdk15u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,noreg-sqe,,,,,,,"The proposed fix for JDK-8276241 causes two JAXP tests to fail because they try to define a class called ""die/verwandlung/"".  It is illegal for a class name to end in a '/'.

The failing tests are javax/xml/jaxp/functional/javax/xml/transform/ptests/URIResolverTest.java and testcase05 and testcase06 of javax/xml/jaxp/functional/javax/xml/transform/ptests/SAXTFactoryTest.java.

The tests fail with the following error:
    javax.xml.transform.TransformerConfigurationException: Could not load the translet class 'die.verwandlung.'.
which is caused by:
    java.lang.ClassFormatError: Illegal class name ""die/verwandlung/"" in class file <Unknown>

The proposed fix for JDK-8276241 is:
--- a/src/hotspot/share/classfile/classFileParser.cpp
+++ b/src/hotspot/share/classfile/classFileParser.cpp
@@ -4855,7 +4855,7 @@ static const char* skip_over_field_name(const char* const name,
     }
     return (not_first_ch) ? old_p : NULL;
   }
-  return (not_first_ch) ? p : NULL;
+  return (not_first_ch && !last_is_slash) ? p : NULL;
 }

",,,,,,,,,,JDK-8283036,JDK-8284577,JDK-8283808,JDK-8284576,,,,,,,,,,,,,JDK-8276241,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxsz:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@11b5a46e,,,,,,,,,"2021-11-30 10:28;joehw;noreg: the fix can be verified by running the tests identified in the bug report, that is, URIResolverTest.java and SAXTFactoryTest.java. These tests are in Tier2.;;;","2021-12-01 22:53;roboduke;Changeset: a093cddd
Author:    Joe Wang <joehw@openjdk.org>
Date:      2021-12-02 06:52:45 +0000
URL:       https://git.openjdk.java.net/jdk/commit/a093cdddaf5ab88eb84a147e523db5c3e1be54be
;;;","2022-03-10 23:24;goetz;Fix request [17u]

This backport was requested by http://mail.openjdk.java.net/pipermail/jdk-updates-dev/2022-March/012660.html
I think it makes sense to include this in 17.
Low risk, simple change.
Clean backport.
SAP nightly testing passed;;;","2022-03-10 23:30;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/239
Date: 2022-03-11 07:24:51 +0000;;;","2022-03-25 03:24;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/947
Date: 2022-03-25 10:19:18 +0000;;;","2022-03-25 03:31;clanger;Fix request [11u]

Same reasoning as for 17u.;;;","2022-04-07 08:15;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk13u-dev/pull/339
Date: 2022-04-07 15:09:34 +0000;;;","2022-04-07 08:15;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk15u-dev/pull/195
Date: 2022-04-07 15:10:20 +0000;;;","2022-04-07 08:18;omikhaltcova;Fix request [13u, 15u] 

I'd like to backport this fix to jdk13u, jdk15u for parity with jdk11u.
The patch is reasonable, small, low risk and applied cleanly. 
All regular tests passed.;;;",,,,,,,,,,,,
[lworld] merge JEP 416: reimplement core reflection with method handles,JDK-8276656,5062017,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mchung,mchung,mchung,2021-11-04 10:15,2021-11-04 10:24,2023-10-01 09:57,2021-11-04 10:24,repo-valhalla,,,,,,,,,,,,,,core-libs,,0,lworld,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxsr:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@313ae9a0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use blessed modifier order in SCTP,JDK-8276655,5062016,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ihse,ihse,ihse,2021-11-04 10:07,2021-11-10 17:55,2023-10-01 09:57,2021-11-04 12:46,18,,,,,,,,,,,,,18,core-libs,,0,,,,,,,,,,,,,,,,,"I ran bin/blessed-modifier-order.sh on source owned by net libs. This scripts verifies that modifiers are in the ""blessed"" order, and fixes it otherwise. I have manually checked the changes made by the script to make sure they are sound.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxsj:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2021-11-04 12:46;roboduke;Changeset: 81203efe
Author:    Magnus Ihse Bursie <ihse@openjdk.org>
Date:      2021-11-04 19:44:05 +0000
URL:       https://git.openjdk.java.net/jdk/commit/81203efe411320ff4e390605f980d14e7f70252f
;;;",,,,,,,,,,,,,,,,,,,,
element-list order is non deterministic,JDK-8276654,5062015,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jjg,jjg,jjg,2021-11-04 09:54,2022-02-15 14:24,2023-10-01 09:57,2021-11-08 12:39,,,,,,,,,,,,,,18,infrastructure,,0,CPU22_04-critical-approved,CPU22_04-critical-SQE-OK,jdk17u-fix-request,jdk17u-fix-yes,reproducible-build,,,,,,,,,,,,"The order of entries in the element list files is non-deterministic,. This leads to non-deterministic builds, which is not good.",,,,,,,,,,JDK-8281935,JDK-8281398,JDK-8279889,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxsb:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-11-04 09:57;ihse;This is files like /jdk.javadoc/jdk/javadoc/internal/doclets/toolkit/resources/releases/element-list-18.txt. They are generated by build.tools.symbolgenerator.JavadocElementList.;;;","2021-11-04 15:48;jjg;Closing as not reproducible for now, for lack of detailed evidence.

Reopen if necessary.;;;","2021-11-05 08:02;aleonard;I also discovered this problem, and also found the cause.
It's a timing issue depending on how many ""jobs"" you have, and the fact that jdk.javadoc ""-gendata"" actually depends on ""-java"" due to the .txt src copy, but if you have many parallel build jobs then by luck you get away with it.
You can reproduce it always I think if you configure --with-jobs=1

I've got a simple fix i'll submit as a PR.
;;;","2021-11-08 12:39;roboduke;Changeset: 14d66bd4
Author:    Andrew Leonard <aleonard@openjdk.org>
Date:      2021-11-08 20:37:24 +0000
URL:       https://git.openjdk.java.net/jdk/commit/14d66bd438dfa1feeafaca39be8f79a91e2968e9
;;;","2022-01-05 07:02;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u/pull/331
Date: 2022-01-05 14:57:45 +0000
;;;","2022-01-05 08:01;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/61
Date: 2022-01-05 15:56:34 +0000
;;;","2022-01-11 01:49;aleonard;Fix request (17u)
This is being backported to jdk17u to enable reproducible builds.
I can't see any risk with this, it fixes the intermittent problem of missing package-list txt files, which causes non-deterministic builds.
;;;","2022-02-08 09:13;jjg;Although initially filed against tools/javadoc(too), the actual fix is in the makefiles, so reassigning to infrastructure/build;;;",,,,,,,,,,,,,
"java/lang/ProcessHandle tests fail with ""RuntimeException: Input/output error"" in java.lang.ProcessHandleImpl$Info.info0",JDK-8276651,5062012,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,rriggs,dcubed,dcubed,2021-11-04 09:40,2023-08-29 00:26,2023-10-01 09:57,2022-08-23 07:39,11,17,18,19,20,,,,,,,,,20,core-libs,,0,17u-tier5,intermittent,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,noreg-sqe,tier1,,,,,,,,,"The following test failed in the JDK18 CI:

java/lang/ProcessHandle/InfoTest.java

Here's a snippet from the log file:

 info: [user: Optional[mach5-one], cmd: /bin/sleep, args: [120], startTime: Optional[2021-11-04T16:28:45.283Z]]
destroyProcessTree destroyForcibly
pid 16506, alive: true; parent: Optional[16480], [user: Optional[mach5-one], cmd: /bin/sleep, args: [128], startTime: Optional[2021-11-04T16:28:45.289Z]]
test InfoTest.test3(): failure
java.lang.RuntimeException: Input/output error
	at java.base/java.lang.ProcessHandleImpl$Info.info0(Native Method)
	at java.base/java.lang.ProcessHandleImpl$Info.info(ProcessHandleImpl.java:587)
	at java.base/java.lang.ProcessHandleImpl.info(ProcessHandleImpl.java:504)
	at java.base/java.lang.Process.info(Process.java:757)
	at InfoTest.test3(InfoTest.java:291)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:599)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:174)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:822)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:147)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.testng.TestRunner.privateRun(TestRunner.java:764)
	at org.testng.TestRunner.run(TestRunner.java:585)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1218)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1140)
	at org.testng.TestNG.runSuites(TestNG.java:1069)
	at org.testng.TestNG.run(TestNG.java:1037)
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:94)
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:54)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)
 total1 vs. mbean: PT0.588529S, getProcessCpuTime: PT0.588363S, diff: PT-0.000166S
 total2 vs. mbean: PT0.588581S, getProcessCpuTime: PT0.588575S, diff: PT-0.000006S
test InfoTest.test4(): success
 infoTotal:    598711000, beanCpu:    598964000, diff:       253000
 infoTotal:    601075000, beanCpu:    601300000, diff:       225000
 infoTotal:    601871000, beanCpu:    601953000, diff:        82000
 infoTotal:    602318000, beanCpu:    602356000, diff:        38000
 infoTotal:    602752000, beanCpu:    602781000, diff:        29000
 infoTotal:    603078000, beanCpu:    603169000, diff:        91000
 infoTotal:    603550000, beanCpu:    603588000, diff:        38000
 infoTotal:    604099000, beanCpu:    604126000, diff:        27000
 infoTotal:    604283000, beanCpu:    604796000, diff:       513000
 infoTotal:    605191000, beanCpu:    605256000, diff:        65000
 infoTotal:    605789000, beanCpu:    605846000, diff:        57000
 infoTotal:    606241000, beanCpu:    606305000, diff:        64000
 infoTotal:    606635000, beanCpu:    606684000, diff:        49000
 infoTotal:    607020000, beanCpu:    607088000, diff:        68000
 infoTotal:    607397000, beanCpu:    607462000, diff:        65000
 infoTotal:    607744000, beanCpu:    607770000, diff:        26000
 infoTotal:    607926000, beanCpu:    607954000, diff:        28000
 infoTotal:    608105000, beanCpu:    608133000, diff:        28000
 infoTotal:    608801000, beanCpu:    608827000, diff:        26000
 infoTotal:    609266000, beanCpu:    609297000, diff:        31000
 infoTotal:    609727000, beanCpu:    610816000, diff:      1089000
 infoTotal:    612361000, beanCpu:    612441000, diff:        80000
 infoTotal:    612820000, beanCpu:    612887000, diff:        67000
 infoTotal:    613045000, beanCpu:    613211000, diff:       166000
 infoTotal:    613472000, beanCpu:    613500000, diff:        28000
 infoTotal:    613628000, beanCpu:    613654000, diff:        26000
 infoTotal:    614136000, beanCpu:    614170000, diff:        34000
 infoTotal:    614796000, beanCpu:    614906000, diff:       110000
 infoTotal:    615369000, beanCpu:    615406000, diff:        37000
 infoTotal:    615929000, beanCpu:    616052000, diff:       123000
test InfoTest.test5(): success

===============================================
java/lang/ProcessHandle/InfoTest.java
Total tests run: 5, Passes: 4, Failures: 1, Skips: 0
===============================================

----------System.err:(12/671)----------
java.lang.Exception: failures: 1
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:96)
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:54)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.Exception: failures: 1
JavaTest Message: shutting down test

STATUS:Failed.`main' threw exception: java.lang.Exception: failures: 1
----------rerun:(37/6769)*----------


I checked the test task's stdout and I don't see any sign
of disk/storage issues with the test machine.",,,,,,,,,,JDK-8314992,JDK-8315210,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8273773,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2022-08-15 12:16;dcubed;jdk-20+10_macosx-aarch64.8276651.zip;https://bugs.openjdk.org/secure/attachment/100419/jdk-20%2B10_macosx-aarch64.8276651.zip","2022-08-01 13:36;dcubed;jdk-20+8_macosx-aarch64.8276651.zip;https://bugs.openjdk.org/secure/attachment/100233/jdk-20%2B8_macosx-aarch64.8276651.zip","2022-08-07 07:20;dcubed;jdk-20+9_macosx-aarch64.8276651.zip;https://bugs.openjdk.org/secure/attachment/100333/jdk-20%2B9_macosx-aarch64.8276651.zip",,,,,,aarch64,,,,,,,,,,,,,os_x,,,,,,"0|i2uxrn:",9223372036854775807,b12,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4c088d55,,,,,,,,,"2021-11-30 14:55;rriggs;From the stack trace, the call `sysctl` to get information about a process failed. 
The man page for sysctl does not mention a ""input/output"" error value of errno.;;;","2021-12-10 09:00;dcubed;Here's a snippet from the log file for the jdk-19+2-13-tier1 sighting: 

java/lang/ProcessHandle/InfoTest.java 

 info: [user: Optional[mach5-one], cmd: /bin/sleep, args: [120], startTime: Optional[2021-12-10T16:54:01.707Z]]
destroyProcessTree destroyForcibly
pid 99716, alive: true; parent: Optional[99678], [user: Optional[mach5-one], cmd: /bin/sleep, args: [128], startTime: Optional[2021-12-10T16:54:01.710Z]]
test InfoTest.test3(): failure
java.lang.RuntimeException: Input/output error
	at java.base/java.lang.ProcessHandleImpl$Info.info0(Native Method)
	at java.base/java.lang.ProcessHandleImpl$Info.info(ProcessHandleImpl.java:587)
	at java.base/java.lang.ProcessHandleImpl.info(ProcessHandleImpl.java:504)
	at java.base/java.lang.Process.info(Process.java:757)
	at InfoTest.test3(InfoTest.java:291)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:599)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:174)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:822)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:147)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.testng.TestRunner.privateRun(TestRunner.java:764)
	at org.testng.TestRunner.run(TestRunner.java:585)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1218)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1140)
	at org.testng.TestNG.runSuites(TestNG.java:1069)
	at org.testng.TestNG.run(TestNG.java:1037)
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:94)
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:54)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)
 total1 vs. mbean: PT0.602696S, getProcessCpuTime: PT0.602664S, diff: PT-0.000032S
 total2 vs. mbean: PT0.602753S, getProcessCpuTime: PT0.602748S, diff: PT-0.000005S
test InfoTest.test4(): success
 infoTotal:    613420000, beanCpu:    613629000, diff:       209000
 infoTotal:    614240000, beanCpu:    614270000, diff:        30000
 infoTotal:    614603000, beanCpu:    614755000, diff:       152000
 infoTotal:    615173000, beanCpu:    615200000, diff:        27000
 infoTotal:    615552000, beanCpu:    615579000, diff:        27000
 infoTotal:    616756000, beanCpu:    616786000, diff:        30000
 infoTotal:    617104000, beanCpu:    617220000, diff:       116000
 infoTotal:    617433000, beanCpu:    617459000, diff:        26000
 infoTotal:    617829000, beanCpu:    617919000, diff:        90000
 infoTotal:    618260000, beanCpu:    618286000, diff:        26000
 infoTotal:    618455000, beanCpu:    618480000, diff:        25000
 infoTotal:    619006000, beanCpu:    619033000, diff:        27000
 infoTotal:    619298000, beanCpu:    619325000, diff:        27000
 infoTotal:    619675000, beanCpu:    619702000, diff:        27000
 infoTotal:    620033000, beanCpu:    620093000, diff:        60000
 infoTotal:    620815000, beanCpu:    620965000, diff:       150000
 infoTotal:    621281000, beanCpu:    621328000, diff:        47000
 infoTotal:    621593000, beanCpu:    621618000, diff:        25000
 infoTotal:    621750000, beanCpu:    621775000, diff:        25000
 infoTotal:    622182000, beanCpu:    622207000, diff:        25000
 infoTotal:    622497000, beanCpu:    622523000, diff:        26000
 infoTotal:    622894000, beanCpu:    622930000, diff:        36000
 infoTotal:    623455000, beanCpu:    623483000, diff:        28000
 infoTotal:    623822000, beanCpu:    623867000, diff:        45000
 infoTotal:    624140000, beanCpu:    624187000, diff:        47000
 infoTotal:    624341000, beanCpu:    624366000, diff:        25000
 infoTotal:    624703000, beanCpu:    624728000, diff:        25000
 infoTotal:    625047000, beanCpu:    625072000, diff:        25000
 infoTotal:    625315000, beanCpu:    625355000, diff:        40000
 infoTotal:    625697000, beanCpu:    625749000, diff:        52000
test InfoTest.test5(): success

===============================================
java/lang/ProcessHandle/InfoTest.java
Total tests run: 5, Passes: 4, Failures: 1, Skips: 0
===============================================

----------System.err:(12/671)----------
java.lang.Exception: failures: 1
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:96)
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:54)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.Exception: failures: 1
JavaTest Message: shutting down test

STATUS:Failed.`main' threw exception: java.lang.Exception: failures: 1
----------rerun:(37/6739)*----------;;;","2022-08-01 13:36;dcubed;I've attached the logs from my sighting in my jdk-20+8 macosx-aarch64 stress testing:

$ unzip -l jdk-20+8_macosx-aarch64.8276651.zip
Archive:  jdk-20+8_macosx-aarch64.8276651.zip
  Length      Date    Time    Name
---------  ---------- -----   ----
    48277  07-29-2022 02:39   jdk-20+8_1/failures.macosx-aarch64/InfoTest.jtr.release
---------                     -------
    48277                     1 file;;;","2022-08-07 07:19;dcubed;Here are the log files for my sightings of
java/lang/ProcessHandle/TreeTest.java failing with
""RuntimeException: Input/output error"" in java.lang.ProcessHandleImpl$Info.info0 in jdk-20+9
stress testing:

$ unzip -l jdk-20+9_macosx-aarch64.8276651.zip
Archive:  jdk-20+9_macosx-aarch64.8276651.zip
  Length      Date    Time    Name
---------  ---------- -----   ----
    70468  08-05-2022 00:30   jdk-20+9_1/failures.macosx-aarch64/TreeTest.jtr.fastdebug
    71530  08-05-2022 02:41   jdk-20+9_1/failures.macosx-aarch64/TreeTest.jtr.release
    77127  08-04-2022 16:35   jdk-20+9_1/failures.macosx-aarch64/TreeTest.jtr.slowdebug
    70322  08-05-2022 23:22   jdk-20+9_2/failures.macosx-aarch64/TreeTest.jtr.fastdebug
    69983  08-06-2022 01:12   jdk-20+9_2/failures.macosx-aarch64/TreeTest.jtr.release
    70620  08-05-2022 15:37   jdk-20+9_2/failures.macosx-aarch64/TreeTest.jtr.slowdebug
    70233  08-06-2022 21:53   jdk-20+9_3/failures.macosx-aarch64/TreeTest.jtr.fastdebug
    71414  08-06-2022 23:42   jdk-20+9_3/failures.macosx-aarch64/TreeTest.jtr.release
    71821  08-06-2022 14:05   jdk-20+9_3/failures.macosx-aarch64/TreeTest.jtr.slowdebug
---------                     -------
   643518                     9 files
;;;","2022-08-15 12:17;dcubed;Here are the log files for my sightings of
java/lang/ProcessHandle/TreeTest.java failing with
""RuntimeException: Input/output error"" in java.lang.ProcessHandleImpl$Info.info0 in jdk-20+10
stress testing:

$ unzip -l jdk-20+10_macosx-aarch64.8276651.zip
Archive:  jdk-20+10_macosx-aarch64.8276651.zip
  Length      Date    Time    Name
---------  ---------- -----   ----
    73911  08-11-2022 23:55   jdk-20+10_1/failures.macosx-aarch64/TreeTest.jtr.fastdebug
    73916  08-12-2022 02:09   jdk-20+10_1/failures.macosx-aarch64/TreeTest.jtr.release
    75711  08-11-2022 15:59   jdk-20+10_1/failures.macosx-aarch64/TreeTest.jtr.slowdebug
    75736  08-12-2022 22:41   jdk-20+10_2/failures.macosx-aarch64/TreeTest.jtr.fastdebug
    73801  08-13-2022 00:53   jdk-20+10_2/failures.macosx-aarch64/TreeTest.jtr.release
    74986  08-12-2022 14:43   jdk-20+10_2/failures.macosx-aarch64/TreeTest.jtr.slowdebug
    74561  08-14-2022 07:12   jdk-20+10_3/failures.macosx-aarch64/TreeTest.jtr.fastdebug
    73573  08-14-2022 13:47   jdk-20+10_3/failures.macosx-aarch64/TreeTest.jtr.release
    74965  08-13-2022 13:29   jdk-20+10_3/failures.macosx-aarch64/TreeTest.jtr.slowdebug
---------                     -------
   671160                     9 files;;;","2022-08-19 10:12;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/9946
Date: 2022-08-19 17:05:38 +0000;;;","2022-08-23 07:39;dukebot;Changeset: d24b7b70
Author:    Roger Riggs <rriggs@openjdk.org>
Date:      2022-08-23 14:36:46 +0000
URL:       https://git.openjdk.org/jdk/commit/d24b7b7026cf85f1aecf44f60819762872cfd5c1
;;;","2023-08-22 07:27;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1685
Date: 2023-08-22 14:21:40 +0000;;;","2023-08-22 23:38;mbaesken;jdk17 backport request
I would like to have the patch in jdk17u-dev as well, because the release is affected too.  Risk is low to medium, the patch applies cleanly.;;;","2023-08-25 00:10;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/2098
Date: 2023-08-25 07:02:31 +0000;;;","2023-08-28 00:35;mbaesken;jdk11 backport request
I would like to have the patch in jdk11u-dev as well, because the release is affected too. Risk is low to medium, the patch applies cleanly.;;;",,,,,,,,,,
GenGraphs does not produce deterministic output,JDK-8276650,5062011,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mchung,ihse,ihse,2021-11-04 09:32,2021-11-10 17:55,2023-10-01 09:57,2021-11-04 16:53,18,,,,,,,,,,,,,18,tools,,0,reproducible-build,,,,,,,,,,,,,,,,"The build tool jigsaw.GenGraphs generates .dot files for module graphs, which are further on consumed by dot (graphviz) to generate svg files, which are included in the documenation.

The svg files has been a source of non-determinism in the build; I have erroneously attributed this to the dot tool. It turned out that it is GenGraphs that are producing slightly varying .dot files instead.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxrf:",9223372036854775807,b23,,,,,,,,,,,,,"2021-11-04 09:34;ihse;This is not technically part of javadoc; feel free to reassign to a better component.

The variance seem to be that lines in the dot files are reordered. When I look at the file, I notice that the lines are sorted alphabetically on the source node, but not the target node. E.g. java.se.dot (one of the files that most often fail) include this snippet:

  ""java.se"" -> ""java.security.jgss"" [weight=10];
  ""java.se"" -> ""java.desktop"" [weight=10];
  ""java.se"" -> ""java.compiler"" [weight=10];
  ""java.se"" -> ""java.scripting"" [weight=10];
  ""java.se"" -> ""java.xml.crypto"" [weight=10];
  ""java.se"" -> ""java.prefs"" [weight=10];
  ""java.se"" -> ""java.sql.rowset"" [weight=10000];
  ""java.se"" -> ""java.net.http"" [weight=10];
  ""java.se"" -> ""java.security.sasl"" [weight=10];
  ""java.se"" -> ""java.management.rmi"" [weight=10];
  ""java.se"" -> ""java.instrument"" [weight=10];

I can readily imagine that the order of these can change everyway around.

I had a quick look at the tool, but could not directly pinpoint where the non-determinism creeps in.;;;","2021-11-04 10:46;jjg;This may be in the `jdeps` tool, which has a builder for dot graphs, and various uses of `HashMap` and `HashSet`.;;;","2021-11-04 11:22;mchung;The edges printed in the dot graph should be printed in sorted order.

diff --git a/src/jdk.jdeps/share/classes/com/sun/tools/jdeps/ModuleDotGraph.java b/src/jdk.jdeps/share/classes/com/sun/tools/jdeps/ModuleDotGraph.java
index c823091a961..47294644777 100644
--- a/src/jdk.jdeps/share/classes/com/sun/tools/jdeps/ModuleDotGraph.java
+++ b/src/jdk.jdeps/share/classes/com/sun/tools/jdeps/ModuleDotGraph.java
@@ -414,7 +414,7 @@ public class ModuleDotGraph {
                 .collect(toSet());
 
             String mn = md.name();
-            edges.forEach(dn -> {
+            edges.stream().sorted().forEach(dn -> {
                 String attr = """";
                 if (dn.equals(""java.base"")) {
                     attr = ""color=\"""" + attributes.requiresMandatedColor() + ""\"""";;;;","2021-11-04 16:53;roboduke;Changeset: e21b5c7b
Author:    Mandy Chung <mchung@openjdk.org>
Date:      2021-11-04 23:51:18 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e21b5c7b3781430ecf568e7f5c89ef3391e06d9e
;;;",,,,,,,,,,,,,,,,,
Downcall stubs are never freed,JDK-8276648,5062009,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jvernee,jvernee,jvernee,2021-11-04 08:40,2022-02-22 08:06,2023-10-01 09:57,2022-02-22 08:06,repo-panama,,,,,,,,,,,,,,tools,,0,foreign-memaccess+abi,foreign-preview,,,,,,,,,,,,,,,"Downcall stubs/native invokers are currently never free. After creation they are stored in a cache, and they stay there for the lifetime of the VM.

We could implement a weak reference cache where the values are NativeEntryPoints, and then register those NativeEntryPoints with a cleaner that frees the downcall stub when the NativeEntryPoint becomes unreachable.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxqz:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2251e2f8,,,,,,,,,"2022-02-22 06:11;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/panama-foreign/pull/651
Date: 2022-02-22 14:06:28 +0000;;;",,,,,,,,,,,,,,,,,,,,
Use blessed modifier order in jshell,JDK-8276641,5062000,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ihse,ihse,ihse,2021-11-04 06:04,2021-11-11 07:29,2023-10-01 09:57,2021-11-05 05:07,18,,,,,,,,,,,,,18,tools,,0,,,,,,,,,,,,,,,,,"I ran bin/blessed-modifier-order.sh on source owned by jshell/project Kulla. This scripts verifies that modifiers are in the ""blessed"" order, and fixes it otherwise. I have manually checked the changes made by the script to make sure they are sound.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxoz:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@ef6d34f,,,,,,,,,"2021-11-05 05:07;roboduke;Changeset: b9331360
Author:    Magnus Ihse Bursie <ihse@openjdk.org>
Date:      2021-11-05 12:06:39 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b9331360f50afe5b4549d7003d4932ebc54a3c71
;;;",,,,,,,,,,,,,,,,,,,,
Use blessed modifier order in jfr code,JDK-8276640,5061999,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ihse,ihse,ihse,2021-11-04 06:01,2021-11-11 07:31,2023-10-01 09:57,2021-11-04 08:07,18,,,,,,,,,,,,,18,hotspot,,0,,,,,,,,,,,,,,,,,"I ran bin/blessed-modifier-order.sh on source owned by the JFR team. This scripts verifies that modifiers are in the ""blessed"" order, and fixes it otherwise. I have manually checked the changes made by the script to make sure they are sound.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxor:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2021-11-04 08:07;roboduke;Changeset: 49b7b2ea
Author:    Magnus Ihse Bursie <ihse@openjdk.org>
Date:      2021-11-04 15:06:08 +0000
URL:       https://git.openjdk.java.net/jdk/commit/49b7b2ea0971fe99567bdbd962d63b90ff2eeefd
;;;",,,,,,,,,,,,,,,,,,,,
Use blessed modifier order in compiler code,JDK-8276635,5061993,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ihse,ihse,ihse,2021-11-04 04:47,2021-11-10 17:56,2023-10-01 09:57,2021-11-05 05:06,18,,,,,,,,,,,,,18,tools,,0,,,,,,,,,,,,,,,,,"I ran bin/blessed-modifier-order.sh on source owned by compiler. This scripts verifies that modifiers are in the ""blessed"" order, and fixes it otherwise. I have manually checked the changes made by the script to make sure they are sound.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxnf:",9223372036854775807,b23,,,,,,,,,,,,,"2021-11-05 05:06;roboduke;Changeset: 0616d868
Author:    Magnus Ihse Bursie <ihse@openjdk.org>
Date:      2021-11-05 12:05:22 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0616d868c7cd5010f017b315fa1cf6cc1617ce29
;;;",,,,,,,,,,,,,,,,,,,,
Remove `usePlainDatagramSocketImpl` option from the test DatagramChannel/SendReceiveMaxSize.java,JDK-8276634,5061992,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,pconcannon,pconcannon,pconcannon,2021-11-04 04:31,2021-11-15 00:15,2023-10-01 09:57,2021-11-05 03:40,18,,,,,,,,,,,,,18,core-libs,,0,17-na,noreg-self,ursqe-triaged,,,,,,,,,,,,,,"The option `usePlainDatagramSocketImpl` for the test `DatagramChannel/SendReceiveMaxSize.java` was not removed during `JDK-8253119 - Remove the legacy PlainSocketImpl and PlainDatagramSocketImpl implementation`. As these implementations have now been removed from the JDK, tests no longer need to check against it.

The test `test/jdk/java/nio/channels/DatagramChannel/SendReceiveMaxSize.java` as well as `test/jdk/java/nio/channels/DatagramChannel/ChangingAddress.java` still have this option as its removal was overlooked in the original issue. It can now be removed from both tests.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276633,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxn7:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2021-11-04 05:25;msheppar;has the system property been retained? 
If it has been retained then it would seem valid to run tests with the property setting, which should have no effect as the old implementation has been removed -- it would function as a no-op property.

So, if the property still exist, with the old iml removed, should the property be retained?;;;","2021-11-04 07:26;dfuchs;The thing is: this test uses DatgramChannel exclusively - so it should never had that property in the first place, since the property only affects DatagramSocket. It was probably a copy paste mistake as a similarly named test exists in test/java/net/DatagramSocket.

The property has not been retained - there's nothing in the code now that reads or depend on the value of that property.;;;","2021-11-04 07:50;msheppar;yes I see it now in the release note. I hadn't followed the links.

Support for the system properties `jdk.net.usePlainSocketImpl` and `jdk.net.usePlainDatagramSocketImpl`, used to select these implementations, has also been removed. Setting these properties will now have no effect.

But in this instance we have arguably seen a side effect that is an intermittent failure with SocketException no buffer space, when testing executes a number of tests in parallel, which afaik didn't occur when the old iml existed and was selected?

So leaving the tests in shouldn't have had any effect;;;","2021-11-04 08:04;dfuchs;As you noticed in JDK-8276633 too - I suspect that JDK-8276633 is a transient issue where buffers that were allocated by previous `@run` of the test haven't been reclaimed by the system yet. Plus maybe some machine overload due to other things running on it. Removing some of the `@run` may help, ... or not... We should keep an eye on intermittent failures of that test... Running the test 4 times instead of just 2 is just a waste of resources.;;;","2021-11-05 03:40;roboduke;Changeset: d95299a4
Author:    Patrick Concannon <pconcannon@openjdk.org>
Date:      2021-11-05 10:39:37 +0000
URL:       https://git.openjdk.java.net/jdk/commit/d95299a4d751449816ad2a88359f1e48e9608246
;;;",,,,,,,,,,,,,,,,
Use blessed modifier order in security-libs code,JDK-8276632,5061990,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ihse,ihse,ihse,2021-11-04 04:18,2021-11-12 07:37,2023-10-01 09:57,2021-11-05 07:11,18,,,,,,,,,,,,,18,security-libs,,0,,,,,,,,,,,,,,,,,"I ran bin/blessed-modifier-order.sh on source owned by security-libs. This scripts verifies that modifiers are in the ""blessed"" order, and fixes it otherwise. I have manually checked the changes made by the script to make sure they are sound.

See https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/reflect/Modifier.html#toString(int) for more details on the modifier order.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxmr:",9223372036854775807,b23,,,,,,,,,,,,,"2021-11-05 07:11;roboduke;Changeset: c393ee8f
Author:    Magnus Ihse Bursie <ihse@openjdk.org>
Date:      2021-11-05 14:09:58 +0000
URL:       https://git.openjdk.java.net/jdk/commit/c393ee8f598850379266bdba1f55af94744dbad1
;;;",,,,,,,,,,,,,,,,,,,,
Use blessed modifier order in core-libs code,JDK-8276629,5061987,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ihse,ihse,ihse,2021-11-04 04:08,2021-11-10 17:55,2023-10-01 09:57,2021-11-04 10:03,18,,,,,,,,,,,,,18,core-libs,,0,,,,,,,,,,,,,,,,,"I ran bin/blessed-modifier-order.sh on source owned by core-libs. This scripts verifies that modifiers are in the ""blessed"" order, and fixes it otherwise. I have manually checked the changes made by the script to make sure they are sound.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276552,,,,,,,,,,,,,,,,,,,,,,JDK-8276348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxm3:",9223372036854775807,b23,,,,,,,,,,,,,"2021-11-04 10:03;roboduke;Changeset: 1533b819
Author:    Magnus Ihse Bursie <ihse@openjdk.org>
Date:      2021-11-04 17:02:42 +0000
URL:       https://git.openjdk.java.net/jdk/commit/1533b8191bed9d65ab4af03945584d8b2276d828
;;;",,,,,,,,,,,,,,,,,,,,
Use blessed modifier order in serviceability code,JDK-8276628,5061986,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,ihse,ihse,ihse,2021-11-04 03:43,2021-11-11 07:31,2023-10-01 09:57,2021-11-05 05:09,18,,,,,,,,,,,,,18,core-svc,,0,,,,,,,,,,,,,,,,,"I ran bin/blessed-modifier-order.sh on source owned by serviceability. This scripts verifies that modifiers are in the ""blessed"" order, and fixes it otherwise. I have manually checked the changes made by the script to make sure they are sound.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxlv:",9223372036854775807,b23,,,,,,,,,,,,,"2021-11-05 05:09;roboduke;Changeset: 7023b3f8
Author:    Magnus Ihse Bursie <ihse@openjdk.org>
Date:      2021-11-05 12:07:58 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7023b3f8a120dda97bc27fdf130c05c1bd7a730b
;;;",,,,,,,,,,,,,,,,,,,,
"JDK-8275650 accidentally pushed ""out"" file",JDK-8276623,5061982,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,shade,shade,shade,2021-11-04 01:15,2022-04-25 10:56,2023-10-01 09:57,2021-11-04 02:05,18,,,,,,,,,,,,,18,core-libs,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,,,,,,,,,,,,,"See the commit:
 https://github.com/openjdk/jdk/commit/32895ac60949ccceb0a3d25c73ec5e3a00c29593",,,,,,,,,,JDK-8279319,JDK-8279661,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8279159,,,,,,,,,,,,,,JDK-8275650,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxkz:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5f132e58,,,,,,,Verified,,"2021-11-04 02:05;roboduke;Changeset: c62b3476
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-11-04 09:03:21 +0000
URL:       https://git.openjdk.java.net/jdk/commit/c62b3476ce12cea633abead0d6376ea0a05f92f9
;;;","2021-12-22 06:20;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/29
Date: 2021-12-22 14:15:45 +0000
;;;","2021-12-22 07:50;goetz;Fix request [17u]

A simple fix I backported for 17.0.3-oracle parity 
requires this follow up. 
Trivial and no risk.;;;","2022-01-04 23:11;goetz;Fix request [11u]

A simple fix I backported for 11.0.15-oracle parity
requires this follow up.
Trivial and no risk. ;;;","2022-01-04 23:19;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk11u-dev/pull/740
Date: 2022-01-05 07:15:09 +0000
;;;","2022-04-25 10:56;sqetools;verified;;;",,,,,,,,,,,,,,,
gc/shenandoah/compiler/TestLinkToNativeRBP.java fails on foreign-memaccess+abi branch,JDK-8276620,5061976,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ngasson,ngasson,ngasson,2021-11-03 20:06,2023-03-03 11:47,2023-10-01 09:57,2023-03-03 11:46,repo-panama,,,,,,,,,,,,,repo-panama,tools,,0,foreign-abi,,,,,,,,,,,,,,,,The test needs to be updated following the API changes.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxjn:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2251e2f8,,,,,,,,,"2021-11-04 05:33;mcimadamore;This is being addressed as part of:
https://git.openjdk.java.net/jdk/pull/5907

So the fix will be merged back into the panama repository when integrated upstream.;;;","2023-03-03 11:47;jvernee;Was addressed as part of linked PR. Marking this as resolved.;;;",,,,,,,,,,,,,,,,,,,
"[lworld] runtime/valhalla/inlinetypes/InlineTypeArray.java crashes with "" memory leak: allocating without ResourceMark""",JDK-8276612,5061968,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,dsimms,mchung,mchung,2021-11-03 17:05,2021-11-04 04:19,2023-10-01 09:57,2021-11-04 04:19,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,lworld,,,,,,,,,,,,,,,,"This is a pre-testing of lworld merged with JEP 416 (which will be promoted in jdk-18+22):  https://github.com/mlchung/valhalla/tree/jep416

runtime/valhalla/inlinetypes/InlineTypeArray.java fails with allocating without ResourceMark.   This test passes when running with -Djdk.reflect.useDirectMethodHandle=false.    InlineTypeArray test fails when invoked via method handle.

#  Internal Error (/Users/mlchung/ws/valhalla/valhalla/open/src/hotspot/share/memory/resourceArea.cpp:53), pid=63893, tid=24067
#  fatal error: memory leak: allocating without ResourceMark

Stack: [0x0000700005be9000,0x0000700005ce9000],  sp=0x0000700005ce7a70,  free space=1018k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.dylib+0x11b5f29]  VMError::report_and_die(int, char const*, char const*, __va_list_tag*, Thread*, unsigned char*, void*, void*, char const*, int, unsigned long)+0x6e9
V  [libjvm.dylib+0x60b111]  report_fatal(VMErrorType, char const*, int, char const*, ...)+0x1a1
V  [libjvm.dylib+0xf9afa5]  ResourceArea::verify_has_resource_mark()+0x45
V  [libjvm.dylib+0xf8823b]  ResourceArea::allocate_bytes(unsigned long, AllocFailStrategy::AllocFailEnum)+0x1b
V  [libjvm.dylib+0x109a1a4]  Symbol::as_klass_external_name() const+0x24
V  [libjvm.dylib+0x33707e]  BarrierSet::throw_array_null_pointer_store_exception(arrayOop, arrayOop, JavaThread*)+0x14e
V  [libjvm.dylib+0xe74c1d]  void ModRefBarrierSet::AccessBarrier<60055654ull, G1BarrierSet>::oop_arraycopy_in_heap<narrowOop>(arrayOop, unsigned long, narrowOop*, arrayOop, unsigned long, narrowOop*, unsigned long)+0x5ed
V  [libjvm.dylib+0xe737cf]  void AccessInternal::PostRuntimeDispatch<G1BarrierSet::AccessBarrier<60055654ull, G1BarrierSet>, (AccessInternal::BarrierType)8, 60055654ull>::oop_access_barrier<HeapWordImpl*>(arrayOop, unsigned long, HeapWordImpl**, arrayOop, unsigned long, HeapWordImpl**, unsigned long)+0x7f
V  [libjvm.dylib+0xe733da]  std::__1::enable_if<!(HasDecorator<60055622ull, AS_RAW>::value), void>::type AccessInternal::PreRuntimeDispatch::arraycopy<60055622ull, HeapWordImpl*>(arrayOop, unsigned long, HeapWordImpl**, arrayOop, unsigned long, HeapWordImpl**, unsigned long)+0xca
V  [libjvm.dylib+0xe686e7]  ArrayAccess<58720256ull>::oop_arraycopy(arrayOop, unsigned long, arrayOop, unsigned long, unsigned long)+0x147
V  [libjvm.dylib+0xe67f85]  ObjArrayKlass::do_copy(arrayOop, unsigned long, arrayOop, unsigned long, int, JavaThread*)+0x755
V  [libjvm.dylib+0xe6982f]  ObjArrayKlass::copy_array(arrayOop, int, arrayOop, int, int, JavaThread*)+0xecf
V  [libjvm.dylib+0xa20e27]  JVM_ArrayCopy+0x347
J 57  java.lang.System.arraycopy(Ljava/lang/Object;ILjava/lang/Object;II)V java.base@18-internal (0 bytes) @ 0x00000001259ddd79 [0x00000001259ddc60+0x0000000000000119]
j  runtime.valhalla.inlinetypes.InlineTypeArray.testComposition()V+195
j  runtime.valhalla.inlinetypes.InlineTypeArray.run()V+21
j  runtime.valhalla.inlinetypes.InlineTypeArray.main([Ljava/lang/String;)V+9
j  java.lang.invoke.LambdaForm$DMH+0x0000000800002000.invokeStatic(Ljava/lang/Object;Ljava/lang/Object;)V+10 java.base@18-internal
j  java.lang.invoke.LambdaForm$MH+0x0000000800005c00.invoke(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;+33 java.base@18-internal
j  java.lang.invoke.LambdaForm$MH+0x0000000800006000.invokeExact_MT(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;+20 java.base@18-internal
j  jdk.internal.reflect.DirectMethodHandleAccessor.invokeImpl(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+55 java.base@18-internal
j  jdk.internal.reflect.DirectMethodHandleAccessor.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+23 java.base@18-internal
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+102 java.base@18-internal
j  com.sun.javatest.regtest.agent.MainWrapper$MainThread.run()V+172",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxhv:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Change ""ccc"" to ""CSR"" in HotSpot sources",JDK-8276588,5061938,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,darcy,darcy,darcy,2021-11-03 13:54,2021-11-10 17:52,2023-10-01 09:57,2021-11-03 14:22,18,,,,,,,,,,,,,18,hotspot,,0,noreg-doc,,,,,,,,,,,,,,,,"Several HotSpot source files reference the ""ccc"" which has been replaced with the ""CSR"" process.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276889,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uxb7:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-03 14:22;roboduke;Changeset: f3320d2f
Author:    Joe Darcy <darcy@openjdk.org>
Date:      2021-11-03 21:20:09 +0000
URL:       https://git.openjdk.java.net/jdk/commit/f3320d2fbd28349fa5eab3ea0da0ff0a3ef54c62
;;;",,,,,,,,,,,,,,,,,,,,
Use blessed modifier order in jdk.javadoc,JDK-8276573,5061916,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prappo,prappo,prappo,2021-11-03 11:56,2021-11-10 17:54,2023-10-01 09:57,2021-11-04 08:57,18,,,,,,,,,,,,,18,tools,,0,noreg-cleanup,,,,,,,,,,,,,,,,(The linked PR is self-descriptive.),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2ux6b:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2021-11-04 08:57;roboduke;Changeset: b57715a1
Author:    Pavel Rappo <prappo@openjdk.org>
Date:      2021-11-04 15:56:19 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b57715a117d9b7f79fcf4fec3b8f369b6aa42598
;;;",,,,,,,,,,,,,,,,,,,,
Fake libsyslookup.so library causes tooling issues,JDK-8276572,5061915,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,andrew,andrew,andrew,2021-11-03 11:32,2021-11-16 12:15,2023-10-01 09:57,2021-11-05 14:06,17,18,,,,,,,,,,,,18,core-libs,,0,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,,,,,,,,,,,,,,"On POSIX platforms, OpenJDK builds a library, libsyslookup.so, which it uses to lookup C library symbols via dlsym.  The file used to build this library, syslookup.c, has no functions, just a header import.

This causes problems with our tooling that expects the library to have the properties of a regular library e.g. debuginfo, recorded compiler flags. On some architectures & platforms, this makes it impossible to build an RPM.

Adding a simple function to the file seems to help things.",,,,,,,,,,JDK-8277264,JDK-8276909,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,17,,linux,,,,,,"0|i2ux63:",9223372036854775807,b23,,,,,,,,,,,,,"2021-11-05 14:06;roboduke;Changeset: a4724332
Author:    Andrew John Hughes <andrew@openjdk.org>
Date:      2021-11-05 21:05:42 +0000
URL:       https://git.openjdk.java.net/jdk/commit/a4724332098cd8bff44ee27e9190fd28fa5c1865
;;;","2021-11-05 16:07;andrew;Fix Request [17u]:

Change backports cleanly [0].  Issue was originally observed in our 17u builds and should be fixed in this LTS release too.

[0] https://github.com/openjdk/jdk/commit/a4724332098cd8bff44ee27e9190fd28fa5c1865#commitcomment-59541616;;;",,,,,,,,,,,,,,,,,,,
Undefined Behaviour in class Assembler,JDK-8276563,5061904,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,aph,aph,aph,2021-11-03 10:25,2022-11-22 10:03,2023-10-01 09:57,2022-01-18 07:28,11,17,18,8,,,,,,,,,,19,hotspot,,0,amazon-interest,oracle-triage-18,redhat-interest,,,,,,,,,,,,,,All instances of type Register exhibit UB in the form of wild pointer (including null pointer) dereferences. This isn't very hard to fix: we should make Registers pointers to something rather than aliases of small integers.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276453,JDK-8255840,JDK-8291895,JDK-8292153,JDK-8289046,,,,,,,,,,,JDK-8280497,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2ux3n:",9223372036854775807,b06,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-03 10:27;aph;It's always been like this as far as I'm aware, and I'm surprised we got away from it for so long. I have a prototype that makes Registers point to something real. This does mean that Register::encoding() has to do some work (rather than just returning this) but it is a trivial subtraction of a PC-relative constant.;;;","2021-11-04 03:44;chagedorn;ILW = Undefined behavior in assembler (potential crash etc.) and not a recent regression, never observed, no workaround = MLH = P4;;;","2021-12-01 00:34;chagedorn;Hi [~aph], just wanted to give you a heads-up that the fork is coming up next Thursday and this bug needs to be integrated before that to get it into 18 (as it's a P4). As the review seems more or less completed I assume that you are going to integrate it into 18?;;;","2022-01-18 07:28;roboduke;Changeset: 64c0c0e1
Author:    Andrew Haley <aph@openjdk.org>
Date:      2022-01-18 15:27:18 +0000
URL:       https://git.openjdk.java.net/jdk/commit/64c0c0e109f9853072f1d306fef1a2e31568ec9e
;;;",,,,,,,,,,,,,,,,,
Fix to JDK-8263155 left out the help text changes,JDK-8276562,5061903,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,herrick,herrick,herrick,2021-11-03 10:01,2021-11-15 15:08,2023-10-01 09:57,2021-11-08 05:46,18,,,,,,,,,,,,,18,tools,,0,sn_105,,,,,,,,,,,,,,,,"The fix to JDK-8263155: Allow additional contents for DMG, left out the help text additions defined in it's CSR: JDK-8275148
The CSR says to add the new option:
  --mac-dmg-content <path to additional content>[,<path to additional content>...]
    Include all the referenced content in the dmg.
    This option can be used multiple times.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8263155,JDK-8275148,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2ux3f:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3656b41f,,,,,,,,,"2021-11-08 05:46;roboduke;Changeset: 71c4b195
Author:    Andy Herrick <herrick@openjdk.org>
Date:      2021-11-08 13:45:23 +0000
URL:       https://git.openjdk.java.net/jdk/commit/71c4b195178029f5414fa45d2c5ac70a1d2536e5
;;;",,,,,,,,,,,,,,,,,,,,
URL$DefaultFactory::PREFIX should be static final,JDK-8276561,5061901,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,michaelm,iklam,iklam,2021-11-03 09:05,2022-07-27 19:42,2023-10-01 09:57,2022-07-21 04:09,,,,,,,,,,,,,,20,core-libs,,0,noreg-cleanup,,,,,,,,,,,,,,,,"https://github.com/openjdk/jdk/blob/724bf3be1458f7da502f8772be6151bed826b4f7/src/java.base/share/classes/java/net/URL.java#L1245

        private static String PREFIX = ""sun.net.www.protocol."";

This field is never modified. It should be static final.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2ux2z:",9223372036854775807,b08,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2021-11-03 09:09;iklam;I found this when writing a static analysis tool for JDK-8275731, to check if we are unintentionally archiving static fields that shouldn't be archived.

Making this a static final field will help the tool, since it's OK to archive such fields, as their values will not change at runtime.;;;","2021-11-03 09:20;dfuchs;Agreed - this should have been final. Thanks for finding this.;;;","2022-07-21 02:57;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/9586
Date: 2022-07-21 09:46:27 +0000;;;","2022-07-21 04:08;dukebot;Changeset: 799a2c84
Author:    Michael McMahon <michaelm@openjdk.org>
Date:      2022-07-21 11:03:48 +0000
URL:       https://git.openjdk.org/jdk/commit/799a2c844d904b675abd324ab09cbda7faf70b0f
;;;",,,,,,,,,,,,,,,,,
ListView scrollTo() is broken after fix for JDK-8089589,JDK-8276553,5061655,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jvos,webbuggrp,webbuggrp,2021-11-02 06:15,2023-04-28 00:11,2023-10-01 09:57,2021-12-03 13:31,jfx17,jfx18,,,,,,,,,,,,jfx18,javafx,,2,dcspn,regression,regression_8089589,reproducer-yes,webbug,,,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
OS - Windows 10 20H2
Java (JRE) - 11.0.12
JavaFX - 17.0.1

A DESCRIPTION OF THE PROBLEM :
The ""scrollTo"" feature on ListView is no longer working on JavaFX 17 or 18 early access builds.
It works fine if I downgrade to JavaFX16
It neither sorts by index nor by the object

countriesListView.scrollTo(lastSelectedIndex);

REGRESSION : Last worked in openjfx 16

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Create a list view in JavaFX
Insert 15-20 elements, such that you get a scrollpane on it.
invoke 
listView.scrollTo(10);  //Scroll to 10th index i.e. 11th element

Launch the program and you'd notice the list didn't scroll to the selected element (scrollTo doesn't work)

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
List View should scroll down to the given index/element in listView.scrollTo() method call.
ACTUAL -
listView does not scrollTo the given index/element and the focus is always at the beginning of the listView i.e. the first element

---------- BEGIN SOURCE ----------

import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.ListView;
import javafx.scene.layout.HBox;
import javafx.stage.Stage;

public class ListClass extends Application  {

        @Override
        public void start(Stage primaryStage) throws Exception {
            primaryStage.setTitle(""ListView ScrollTest"");

            ListView listView = new ListView();

            listView.getItems().add(""Item 1"");
            listView.getItems().add(""Item 2"");
            listView.getItems().add(""Item 3"");
            listView.getItems().add(""Item 4"");
            listView.getItems().add(""Item 5"");
            listView.getItems().add(""Item 6"");
            listView.getItems().add(""Item 7"");
            listView.getItems().add(""Item 8"");
            listView.getItems().add(""Item 9"");
            listView.getItems().add(""Item 10"");
            listView.getItems().add(""Item 11"");
            listView.getItems().add(""Item 12"");
            listView.getItems().add(""Item 13"");
            listView.getItems().add(""Item 14"");
            listView.getItems().add(""Item 15"");
            listView.getItems().add(""Item 16"");
            listView.getSelectionModel().select(10);
            listView.scrollTo(10);

            HBox hbox = new HBox(listView);
            Scene scene = new Scene(hbox, 300, 120);
            primaryStage.setScene(scene);
            primaryStage.show();
        }

        public static void main(String[] args) {
            Application.launch(args);
        }
}

---------- END SOURCE ----------

CUSTOMER SUBMITTED WORKAROUND :
Use JavaFX 16

FREQUENCY : always


",,,,,,,,,,JDK-8286006,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276804,,,,,,,JDK-8306923,,,,,,,JDK-8281207,JDK-8291467,,,,,,,,,,,,,,JDK-8277785,JDK-8089589,JDK-8276056,,,,,,,,"2021-11-03 05:20;pnarayanaswa;Capture.PNG;https://bugs.openjdk.org/secure/attachment/96908/Capture.PNG","2021-11-03 05:20;pnarayanaswa;ListClass.java;https://bugs.openjdk.org/secure/attachment/96909/ListClass.java",,,,,,,generic,,,,,,,,,,,jfx17,,generic,,,,,,"0|i2uvkb:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@67282485,,,,,,,,,"2021-11-03 05:20;pnarayanaswa;Checked with attached test case, Issue is reproducible<attached screenshot for reference>
Test result
========
8u311: Pass
openjfx11:Pass
openjfx16: Pass
openjfx17: Fail <--Regression
openjfx18: Fail ;;;","2021-11-04 04:24;fastegal;might be introduced by the major overhaul of VirtualFlow layout in JDK-8089589;;;","2021-11-24 11:02;kcr;Once fixed, this would be a good candidate for a backport to a future update release of jfx17u.;;;","2021-12-03 13:31;roboduke;Changeset: d3fbb516
Author:    Johan Vos <jvos@openjdk.org>
Date:      2021-12-03 21:30:40 +0000
URL:       https://git.openjdk.java.net/jfx/commit/d3fbb516c428876bd2389bbfd40f95a811ea6af8
;;;","2022-04-30 11:52;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx17u/pull/50
Date: 2022-04-30 18:48:06 +0000;;;",,,,,,,,,,,,,,,,
Fix handling of trap count overflow in Parse::Parse(),JDK-8276545,5061882,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,bstafford,simonis,simonis,2021-11-03 03:37,2022-10-05 23:20,2023-10-01 09:57,2022-09-30 11:41,11,17,18,8,,,,,,,,,,20,hotspot,,0,c2,oracle-triage-18,starter,,,,,,,,,,,,,,"Currently Parse::Parse() has the following code to initialize its trap counts:

  // Accumulate deoptimization counts.
  // (The range_check and store_check counts are checked elsewhere.)
  ciMethodData* md = method()->method_data();
  for (uint reason = 0; reason < md->trap_reason_limit(); reason++) {
    uint md_count = md->trap_count(reason);
    if (md_count != 0) {
      if (md_count == md->trap_count_limit())
        md_count += md->overflow_trap_count();

The intention of this code is to also take into account the `overflow_trap_count()` for trap reasons which have overflowed.

But the code is wrong, because `md->trap_count(reason)` will return `(uint)-1` if an overflow happened and `md->trap_count_limit()` will return `(jubyte)-1` (i.e. 0xff) so the condition `md_count == md->trap_count_limit()` will never be true if an overflow happened.

Instead the code should be something like:

      if (md_count == (uint)-1) {
        md_count = md->trap_count_limit() + md->overflow_trap_count();
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uwyr:",9223372036854775807,b18,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-04 03:33;chagedorn;ILW = Wrong deoptimization count in overflow case, low, no workaround = MLH = P4;;;","2021-11-04 08:50;simonis;Notice that it's not just the logging which is wrong. The wrong value is set with `Compile::set_trap_count()` and later retrieved with `Compile::trap_count()`. I still don't think it is a serious problem (it will just always saturate the counter) but it is definitely not a ""logging-only"" issue.;;;","2021-11-05 02:04;chagedorn;You're right. I bumped it up to P4. Thanks for the clarification!

Edited ILW comment.;;;","2021-11-17 08:23;chagedorn;Hi [~simonis], as the fork's soon coming up in early December, are you planning to get this fixed in 18? Otherwise, it needs to be deferred to 19 once RDP 1 starts (because it's a P4).;;;","2022-09-13 09:10;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/10187
Date: 2022-09-06 22:17:09 +0000;;;","2022-09-30 11:41;dukebot;Changeset: da4e96d5
Author:    Dhamoder Nalla <dhanalla@microsoft.com>
Committer: Vladimir Kozlov <kvn@openjdk.org>
Date:      2022-09-30 18:38:48 +0000
URL:       https://git.openjdk.org/jdk/commit/da4e96d5960e9a8fd8f6d91ac51932e9f7aec38e
;;;",,,,,,,,,,,,,,,
Howl Full CardSet container iteration marks too many cards,JDK-8276540,5061875,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,tschatzl,tschatzl,tschatzl,2021-11-03 01:59,2022-02-10 14:26,2023-10-01 09:57,2021-11-08 05:00,18,,,,,,,,,,,,,18,hotspot,,0,gc-g1,gc-g1-remset,gc-pending-review,,,,,,,,,,,,,,"When iterating over a Howl ""Full"" card set to mark these cards, the current code iterates over too many cards, the number of cards in a (card) region, not the number of cards the bucket of the Howl card set the partition actually covers.

I.e.

    case G1CardSet::CardSetHowl: { // actually FullCardSet
      if (found.start_iterate(G1GCPhaseTimes::MergeRSHowlFull)) {
        assert(card_set == G1CardSet::FullCardSet, ""Must be"");
        uint offset = index << config->log2_num_cards_in_howl_bitmap();
        for (uint i = 0; i < config->max_cards_in_region(); i++) {
          found((offset | (uint)i));
        }
      }
      return;
    }


The config->max_cards_in_region() should be config->num_cards_in_howl_bitmap(). Also we should probably call the found() method with the range parameters.

This problem can cause crashes/memory overwrites.",,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275056,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8017163,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uwx7:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,Verified,,"2021-11-08 05:00;roboduke;Changeset: ff6863c9
Author:    Thomas Schatzl <tschatzl@openjdk.org>
Date:      2021-11-08 12:59:00 +0000
URL:       https://git.openjdk.java.net/jdk/commit/ff6863c98dbd15c4f3920402eb0991727d1a380c
;;;",,,,,,,,,,,,,,,,,,,,
[lworld] [AArch64] LIR_Assembler::emit_profile_inline_type temporary register conflict,JDK-8276538,5061873,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,ngasson,ngasson,ngasson,2021-11-03 00:38,2021-11-08 01:54,2023-10-01 09:57,2021-11-08 01:54,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,c1,lw3,lworld,,,,,,,,,,,,,,"LIR_Assembler::as_Address() may use rscratch1 as a temporary register for the address offset, but rscratch1 is also used at the same time to hold the updated MDO value.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276108,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,,,,,,,"0|i2uwwr:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update TimeZoneNames files to follow the changes made by JDK-8275766,JDK-8276536,5061871,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,ysatowse,ysatowse,ysatowse,2021-11-02 23:57,2022-06-27 11:45,2023-10-01 09:57,2021-11-10 17:40,18,,,,,,,,,,,,,18,core-libs,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk13u-fix-request,jdk13u-fix-yes,jdk15u-fix-request,jdk15u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,jdk8u-critical-request,jdk8u-critical-yes,regression,,,,,"Some short name changes are not integrated to the JDK.  It was detected by the change made in JDK-8275766.  
- Africa/Juba change was done by 2017c
- Africa/Windhoek changes were done by 2018e
- Antarctica/Macquarie change was done by 2017a",,,,,,,,,,JDK-8277298,JDK-8277599,JDK-8277378,JDK-8281342,JDK-8277330,JDK-8277326,JDK-8278395,JDK-8277669,JDK-8277219,JDK-8277363,JDK-8277727,JDK-8277721,JDK-8277312,JDK-8277222,JDK-8279137,,,,,,,,,,,,,,,,JDK-8276341,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275766,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uwwb:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@a9a7756,,,,,,,Verified,,"2021-11-10 17:40;roboduke;Changeset: ad3be04d
Author:    Yoshiki Sato <ysatowse@openjdk.org>
Committer: Naoto Sato <naoto@openjdk.org>
Date:      2021-11-11 01:39:06 +0000
URL:       https://git.openjdk.java.net/jdk/commit/ad3be04d2ac84836e393d696ff03ddfe72779094
;;;","2021-11-15 13:19;mdoerr;Fix Request (11u):
Needs to get backported on top of JDK-8275766: (tz) Update Timezone Data to 2021e. Applies cleanly.;;;","2021-11-15 15:59;ysatowse;Fix request (17u): 
request to include in 17u, applies cleanly, all relevant tests passed.;;;","2021-11-16 07:53;yan;Fix request (15u):
follow-up to  JDK-8275766. Applies cleanly.;;;","2021-11-17 02:11;yan;Fix request (13u):
follow-up to JDK-8275766. Applies cleanly. No test failure detected.;;;","2021-11-25 05:01;dcherepanov;Fix request (8u):
request to backport to 8u
RFR: https://mail.openjdk.java.net/pipermail/jdk8u-dev/2021-November/014437.html
Applies clean after JDK-8275766, tested with sun.util.calendar and java.time.test;;;",,,,,,,,,,,,,,,
"Incorrect path for duplicate x and y values, when path falls outside axis bound",JDK-8276490,5061825,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,abagarwal,abagarwal,abagarwal,2021-11-02 22:10,2022-02-23 05:36,2023-10-01 09:57,2021-11-25 21:25,jfx17,,,,,,,,,,,,,jfx18,javafx,,0,regression,,,,,,,,,,,,,,,,"This regression is caused by JDK-8183530.

If the visible area of the chart is smaller than the chart itself, the last path is drawn incorrectly.

---------- BEGIN SOURCE ----------
import javafx.application.Application;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.chart.AreaChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.stage.Stage;

public class LineAndAreaChartBug extends Application {

    @Override
    public void start(Stage stage) {
        // Define the x-axis upperbound lower than data set
        NumberAxis xAxis = new NumberAxis(1960, 2020, 10);
        xAxis.setLabel(""Years"");

        // Define the y-axis upperbound lower than data set
        NumberAxis yAxis = new NumberAxis(0, 350, 50);
        yAxis.setLabel(""No.of schools"");

        AreaChart areaChart = new AreaChart(xAxis, yAxis);
        XYChart.Series series = new XYChart.Series();
        series.setName(""No of schools in an year"");

        series.getData().add(new XYChart.Data(1970, 15));
        series.getData().add(new XYChart.Data(1980, 30));
        series.getData().add(new XYChart.Data(1990, 60));
        series.getData().add(new XYChart.Data(2000, 120));
        series.getData().add(new XYChart.Data(2000, 160));
        series.getData().add(new XYChart.Data(2013, 240));
        series.getData().add(new XYChart.Data(2014, 300));
        series.getData().add(new XYChart.Data(2030, 300)); // repeat y-value
        series.getData().add(new XYChart.Data(2030, 600));

        areaChart.getData().add(series);
        Group root = new Group(areaChart);
        Scene scene = new Scene(root, 600, 400);
        stage.setTitle(""JDK-8183530"");
        stage.setScene(scene);
        stage.show();
    }

    public static void main(String args[]) {
        launch(args);
    }
}
---------- END SOURCE ----------

",,,,,,,,,,JDK-8278334,JDK-8278338,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8282093,JDK-8183530,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-02 22:05;abagarwal;JDK 10 and later.png;https://bugs.openjdk.org/secure/attachment/96904/JDK+10+and+later.png","2021-11-02 22:05;abagarwal;JDK 8 and 9.png;https://bugs.openjdk.org/secure/attachment/96903/JDK+8+and+9.png",,,,,,,,,,,,,,,,,,10,,linux_ubuntu,,,,,,"0|i2uwm3:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4143e3f7,,,,,,,,,"2021-11-03 16:20;kcr;[~abagarwal] If you want to contribute a PR, then you can assign this JBS bug to yourself.;;;","2021-11-25 21:25;roboduke;Changeset: 0dbdec4a
Author:    Abhinay Agarwal <abhinay_agarwal@live.com>
Committer: Ajit Ghaisas <aghaisas@openjdk.org>
Date:      2021-11-26 05:23:54 +0000
URL:       https://git.openjdk.java.net/jfx/commit/0dbdec4af97063248758d917434d09242af42729
;;;",,,,,,,,,,,,,,,,,,,
Undefined behavior in C1 LIR_OprDesc causes SEGV in fastdebug build,JDK-8276453,5061790,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,manc,manc,manc,2021-11-02 16:46,2022-04-29 00:16,2023-10-01 09:57,2021-11-12 14:35,10,11,12,13,14,15,16,17,18,6,7,8,9,18,hotspot,,0,c1,noreg-build,oracle-triage-11,oracle-triage-17,oracle-triage-18,redhat-interest,,,,,,,,,,,"Building HotSpot with LLVM 13 fails due to SEGV at  FrameMap::java_calling_convention(GrowableArray<BasicType> const*, bool). See attached log.

The root cause is the following code in LIR_OprDesc:
  // Conversion
  intptr_t value() const                         { return (intptr_t) this; }

This pattern is a source of undefined behavior in C++. This is similar to the issue with markOop/markOopDesc that was fixed in JDK-8229258.

In this case, the undefined behavior happens with:
  bool check_value_mask(intptr_t mask, intptr_t masked_value) const {
    return (value() & mask) == masked_value;
  }
Compiler can make various optimizations if it believes ""this"" pointer is aligned. The LLVM optimization that tripped this is https://reviews.llvm.org/rG16d03818412415c56efcd482d18c0cbdf712524c , which is a roll-forward of https://reviews.llvm.org/D99790.

Properly fixing this requires wide refactoring of the use cases of LIR_OprDesc.

Colleagues James Y Knight and [~rasbold] have contributed a workaround patch with some hacks to reduce the patch size. I will publish this partial fix to collect initial feedback, and see if we could proceed with the patch, or if there are volunteers to pick up this work.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8229258,,,,,,,,,,,,,,,JDK-8276563,JDK-8277077,JDK-8276976,,,,,,,,"2021-11-11 15:29;manc;20211110-upstreamJdk-C1-TierStop3CICount1-thisValueFix-dacapo4G-nonorm-keepOutliers.html;https://bugs.openjdk.org/secure/attachment/97050/20211110-upstreamJdk-C1-TierStop3CICount1-thisValueFix-dacapo4G-nonorm-keepOutliers.html","2021-11-02 16:29;manc;LLVM13_C1_SEGV.log;https://bugs.openjdk.org/secure/attachment/96901/LLVM13_C1_SEGV.log",,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uweb:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-03 02:08;chagedorn;ILW = Crash in C1 when building, only known with LLVM 13, no workaround = HLH = P2;;;","2021-11-12 14:35;roboduke;Changeset: 8c5f0304
Author:    Man Cao <manc@openjdk.org>
Date:      2021-11-12 22:34:10 +0000
URL:       https://git.openjdk.java.net/jdk/commit/8c5f03049196e66a4f8411bdd853b287134e7ce5
;;;","2022-04-06 01:25;apavlyutkin;Hi! I'm going to backport this one. Any comments, remarks, objections? Thank you;;;","2022-04-06 13:18;manc;No problem or objection with the backport from our side. We intentionally left some TODOs in this change so it is smaller and easier to backport.;;;","2022-04-21 00:43;apavlyutkin;Hi! Did your check the changes for ARM? I'm trying to verify the backport, but even the baseline fails thanks to the fact that GCC and Clang use different ARM Assembler syntax. For some unknown reason Clang swears at valid 's' suffix for ADD{cond}{S} instructions. On the other hand GGC uses very strange STR/LDR{cond}H syntax. ARM Assembler Guide tells it should STRH/LDRH{cond}, and Clang uses exactly this reading.;;;","2022-04-21 11:58;manc;Sorry I don't get it. Do you mean the changes to .hpp and .cpp files under ""src/hotspot/cpu/arm/"" and ""src/hotspot/cpu/aarch64/"" are causing the ARM assembler syntax problem?

For the original commit into JDK 18, I relied on the Github's pre-submit tests to check for ARM builds: https://github.com/openjdk/jdk/pull/6221/checks?check_run_id=4200833982. It passed for ""hs arm"" build and ""hs aarch64"" build. I haven't manually checked when backporting it to JDK 11 for ARM though.;;;","2022-04-25 23:55;apavlyutkin;Please correct me if I'm wrong, but the changes fix LLVM-13+ builds, so at the first we must ensure that the problem is solved, and we can do it only by building the code with Clang-13+, and pre-submit tests cannot help here, cuz they use either GGC or Clang-11/12 for macOS while the issue was raised against LLVM-13. Then the changes touch specific aarch64/arm/ppc/s390/x86 sources. To me that means that changes are to be verified with LLVM-13+ build for each supported architecture, and the regression must be done also for each supported architecture including ARM (pre-submit tests do not check ARM at all) with default toolkit.

I tried to reproduce the issue for ARM by cross-build x86->ARM with Clang-13, and faced several issues. That why I asked you if you'd seen them. It looks like Clang build is not supported for ARM. That does not relate to your changes, that is the baseline problem, and I'm going to add such support. BTW, the issue is not reproducible for ARM.;;;","2022-04-26 16:48;manc;Thanks for the clarification!

At the time I was working on this change, I only tested building with LLVM-13 for x86 locally. So LLVM-13+ for x86->ARM cross-build was not tested.
However, recently our internal JDK (based on JDK 11) has started supporting x86->ARM cross-build with LLVM, and it is built with bleeding-edge LLVM-15 (currently based on Git commit 5c116d50e42f93ef4fa9a9719121378ec6b99b69 on 03/25/2022).

So let me check if I can do the x86->ARM cross-build for JDK 11u with LLVM-13 or LLVM-15+.

;;;","2022-04-27 17:05;manc;I have set up cross-build for 11u for ARM with LLVM-13.0.1. I have to directly set autoconf variables CC, CXX, BUILD_CC, BUILD_CXX, AR, BUILD_AR, NM, BUILD_NM and a few others, so they use clang, clang++, and llvm's toolchain such as llvm-ar, llvm-nm. OpenJDK's configure rule does not seem to directly support for cross-build with Clang.

I did not run into the ARM Assembler syntax problem. However, I ran into another build failure that is fixed by JDK-8229258. The error is:
#  Internal Error (/usr/local/google/home/manc/ws/jdk11udev/src/hotspot/share/memory/virtualspace.cpp:632), pid=2084863, tid=2084869
#  assert(markOopDesc::encode_pointer_as_mark(_base)->decode_pointer() == _base) failed: area must be distinguishable from marks for mark-sweep

We backported JDK-8229258 to our internal JDK a while ago, but it is not yet backported to 11u. In order for 11u to build with LLVM-13+, it needs to at least backport this change and JDK-8229258.

Let me share my cross-build setup for ARM with LLVM-13.0.1 somewhere, and hopefully it can resolve the cross-build issues you see.;;;","2022-04-27 18:11;manc;My cross-build setup: https://github.com/caoman/openjdk_scripts/blob/master/aarch64_cross_build_with_llvm.md.;;;","2022-04-27 22:58;apavlyutkin;You're telling about Aarch64, but I meant ARM-32. OpenJDK covers them with absolutely different architecture-specific snipsets. I'm going to test all the architectures with native builds on Travis CI, that provides all required environments except ARM-32, and that is why I was tied up with ARM cross-build.;;;","2022-04-28 12:01;manc;Ok, I don't have experience for cross-build for ARM-32, and our internal JDK does not support ARM-32.
I'm not sure we have to solve the ""cross-build for ARM-32 with Clang-13+"" problem. Is it OK that as long as this change does not break cross-build for ARM-32 with GCC, we are fine? Is there a real use case that requires using LLVM/Clang for cross-build for ARM-32?;;;","2022-04-29 00:16;apavlyutkin;I just didn't know if the issue is reproducible (or fixed) for ARM until I tried. And now when I've fixed ARM build for Clang compiler I do not see any reason why not to incoporate the fix to Open JDK to provide one more toolkit (currently the only recommended way to build ARM is GCC cross-build);;;",,,,,,,,
"CodeHeapState::print_names() fails with ""assert(klass->is_loader_alive()) failed: must be alive""",JDK-8276429,5061766,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,eastigeevich,dcubed,dcubed,2021-11-02 14:42,2022-02-04 06:17,2023-10-01 09:57,2021-11-04 08:02,18,,,,,,,,,,,,,18,hotspot,,0,intermittent,oracle-triage-11,oracle-triage-17,oracle-triage-18,regression,test-bigapps-Kitchensink,tier3,tier8,zgc,,,,,,,,"The following test fails in the JDK18 CI:

applications/kitchensink/Kitchensink.java

Here's a snippet from the log file:

Output and diagnostic info for process 3224609 was saved into 'pid-3224609-output.log'
[2021-11-02T21:04:37.791283194Z] Gathering output for process 3224697
[2021-11-02T21:04:37.808258155Z] Waiting for completion for process 3224697
[2021-11-02T21:04:37.808422595Z] Waiting for completion finished for process 3224697
Output and diagnostic info for process 3224697 was saved into 'pid-3224697-output.log'
[2021-11-02T21:04:37.813218304Z] Gathering output for process 3224700
[stress.process.out] #
[stress.process.out] # A fatal error has been detected by the Java Runtime Environment:
[stress.process.out] #
[stress.process.out] #  Internal Error (/opt/mach5/mesos/work_dir/slaves/35546316-ed70-4084-8244-d672e7734fd1-S13253/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/f77704ac-b76d-4c7d-8401-dd5325679054/runs/63f441e4-7a25-4688-a50d-3e9dff6960a2/workspace/open/src/hotspot/share/code/codeHeapState.cpp:2340), pid=3222834, tid=3222855
[stress.process.out] #  assert(klass->is_loader_alive()) failed: must be alive
[stress.process.out] #
[stress.process.out] # JRE version: Java(TM) SE Runtime Environment (18.0+22) (fastdebug build 18-ea+22-1414)
[stress.process.out] # Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+22-1414, mixed mode, sharing, tiered, compressed class ptrs, z gc, linux-aarch64)
[stress.process.out] # Problematic frame:
[stress.process.out] # V  [libjvm.so+0x9a9068]  CodeHeapState::print_names(outputStream*, CodeHeap*)+0x1258
[stress.process.out] #
[stress.process.out] # Core dump will be written. Default location: Core dumps may be processed with ""/opt/core.sh %p"" (or dumping to /opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S23284/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/b9a06c7e-55cd-4be4-a1c3-eac989444256/runs/2796c745-9df8-433b-ad47-569744314e62/testoutput/test-support/jtreg_closed_test_hotspot_jtreg_applications_kitchensink_Kitchensink_java/scratch/0/core.3222834)
[stress.process.out] #
[stress.process.out] # JFR recording file will be written. Location: /opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S23284/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/b9a06c7e-55cd-4be4-a1c3-eac989444256/runs/2796c745-9df8-433b-ad47-569744314e62/testoutput/test-support/jtreg_closed_test_hotspot_jtreg_applications_kitchensink_Kitchensink_java/scratch/0/hs_err_pid3222834.jfr
[stress.process.out] #
[stress.process.out] Unsupported internal testing APIs have been used.
[stress.process.out] 
[stress.process.out] # An error report file with more information is saved as:
[stress.process.out] # /opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S23284/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/b9a06c7e-55cd-4be4-a1c3-eac989444256/runs/2796c745-9df8-433b-ad47-569744314e62/testoutput/test-support/jtreg_closed_test_hotspot_jtreg_applications_kitchensink_Kitchensink_java/scratch/0/hs_err_pid3222834.log
[stress.process.out] #
[stress.process.out] # If you would like to submit a bug report, please visit:
[stress.process.out] #   https://bugreport.java.com/bugreport/crash.jsp
[stress.process.out] #
[2021-11-02T21:04:44.006335787Z] Waiting for completion for process 3224700
[2021-11-02T21:04:44.006476507Z] Waiting for completion finished for process 3224700
Output and diagnostic info for process 3224700 was saved into 'pid-3224700-output.log'
[2021-11-02T21:05:44.011122278Z] Gathering output for process 3224749
[2021-11-02T21:05:44.022057573Z] Waiting for completion for process 3224749
[2021-11-02T21:05:44.022458492Z] Waiting for completion finished for process 3224749


Here's the crashing thread's stack:

---------------  T H R E A D  ---------------

Current thread (0x0000fffe803815c0):  JavaThread ""Attach Listener"" daemon [_thread_in_vm, id=3222855, stack(0x0000fffe59c00000,0x0000fffe59e00000)]

Stack: [0x0000fffe59c00000,0x0000fffe59e00000],  sp=0x0000fffe59dfe350,  free space=2040k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x9a9068]  CodeHeapState::print_names(outputStream*, CodeHeap*)+0x1258
V  [libjvm.so+0x99406c]  CodeCache::print_names(outputStream*)+0x14c
V  [libjvm.so+0x9e26e8]  CompileBroker::print_heapinfo(outputStream*, char const*, unsigned long)+0x288
V  [libjvm.so+0xb17aa0]  DCmd::parse_and_execute(DCmdSource, outputStream*, char const*, char, JavaThread*)+0x1c0
V  [libjvm.so+0x66e664]  jcmd(AttachOperation*, outputStream*)+0x64
V  [libjvm.so+0x6702c4]  attach_listener_thread_entry(JavaThread*, JavaThread*)+0x4b0
V  [libjvm.so+0x1755f04]  JavaThread::thread_main_inner()+0x284
V  [libjvm.so+0x175c388]  Thread::call_run()+0xf8
V  [libjvm.so+0x1489cf4]  thread_native_entry(Thread*)+0x104
C  [libpthread.so.0+0x7738]  start_thread+0x198


This test failure occurred in jdk-18+22-1414-tier3 which includes this fix:

JDK-8275729 Qualified method names in CodeHeap Analytics",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275729,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aarch64,x86_64,,,,,,,,,,,,linux,windows,,,,,"0|i2uw8z:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,Verified,,"2021-11-02 14:45;dcubed;The test task's JVM args for the jdk-18+22-1414-tier3 sighting are:

-XX:+CreateCoredumpOnCrash -XX:+UseZGC;;;","2021-11-02 14:50;dcubed;I've started this bug in hotspot/compiler because that's the cat/subcat for:

JDK-8275729 Qualified method names in CodeHeap Analytics;;;","2021-11-02 19:00;kvn;[~eastigeevich] I tested your fix and it passed. This is what I tested:

diff --git a/src/hotspot/share/code/codeHeapState.cpp b/src/hotspot/share/code/codeHeapState.cpp
index 1c5cd874b2c..dad8276730b 100644
--- a/src/hotspot/share/code/codeHeapState.cpp
+++ b/src/hotspot/share/code/codeHeapState.cpp
@@ -2332,14 +2332,17 @@ void CodeHeapState::print_names(outputStream* out, CodeHeap* heap) {
             Symbol* methName  = method->name();
             const char*   methNameS = (methName == NULL) ? NULL : methName->as_C_string();
             methNameS = (methNameS == NULL) ? ""<method name unavailable>"" : methNameS;
+
             Symbol* methSig   = method->signature();
             const char*   methSigS  = (methSig  == NULL) ? NULL : methSig->as_C_string();
             methSigS  = (methSigS  == NULL) ? ""<method signature unavailable>"" : methSigS;
 
             Klass* klass = method->method_holder();
-            assert(klass->is_loader_alive(), ""must be alive"");
+            Symbol* className = klass->name();
+            const char*   classNameS = (className == nullptr) ? nullptr : klass->external_name();
+            classNameS = (classNameS == nullptr) ? ""<class name unavailable>"" : classNameS;
 
-            ast->print(""%s."", klass->external_name());
+            ast->print(""%s."", classNameS);
             ast->print(""%s"", methNameS);
             ast->print(""%s"", methSigS);
           } else {
;;;","2021-11-03 02:06;chagedorn;ILW = Assertion failure when printing heap info, recent regression and only with diagnostic options = HLH = P2;;;","2021-11-04 08:02;roboduke;Changeset: 5acff753
Author:    Evgeny Astigeevich <eastig@amazon.com>
Committer: Vladimir Kozlov <kvn@openjdk.org>
Date:      2021-11-04 15:01:26 +0000
URL:       https://git.openjdk.java.net/jdk/commit/5acff75379a4ad0acfcfc6a64fcc4b588ef048c7
;;;","2021-11-04 08:12;dcubed;This fix is in jdk-18+23-1444.;;;","2022-02-03 01:35;enikitin;Unable to verify as the fix does not contain tests. What's the easiest way to trigger 'CodeHeapState::print_names' with method having no holder?;;;","2022-02-03 06:28;eastigeevich;Hi Evgeny,

The failing test was applications/kitchensink/Kitchensink.java when it ran with -XX:+CreateCoredumpOnCrash -XX:+UseZGC.
You can check it does not fail any more.;;;",,,,,,,,,,,,,
Use blessed modifier order in java.net.http,JDK-8276401,5061736,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,dfuchs,dfuchs,dfuchs,2021-11-02 12:36,2021-11-11 07:30,2023-10-01 09:57,2021-11-03 09:25,,,,,,,,,,,,,,18,core-libs,,0,noreg-cleanup,,,,,,,,,,,,,,,,"See what https://git.openjdk.java.net/jdk/pull/6213 did for java.base
It would be good to do the same for java.net.http.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uw2b:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2021-11-03 09:25;roboduke;Changeset: 7115892f
Author:    Daniel Fuchs <dfuchs@openjdk.org>
Date:      2021-11-03 16:23:57 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7115892f96a5a57ce9d37602038b787d19da5d81
;;;",,,,,,,,,,,,,,,,,,,,
Re-run blessed-modifier-order script on java.desktop and jdk.accessibility,JDK-8276385,5061719,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prr,prr,prr,2021-11-02 11:24,2021-11-12 07:38,2023-10-01 09:57,2021-11-03 09:25,,,,,,,,,,,,,,18,client-libs,,0,noreg-cleanup,,,,,,,,,,,,,,,,"It was noted in this PR https://git.openjdk.java.net/jdk/pull/6213 that since the original blessed modifier script fix was run on the JDK things have slipped a bit.

I ran it on java.desktop and it looks like there is a small number (10) files
that need adjustment. 7 of those are in the Image I/O TIFF plugin which I suspect was integrated AFTER the original fix.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276348,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uvyj:",9223372036854775807,b23,,,,,,,,,,,,,"2021-11-02 11:28;prr;These files in desktop need to be updated
	modified:   src/java.desktop/share/classes/javax/imageio/plugins/tiff/BaselineTIFFTagSet.java
	modified:   src/java.desktop/share/classes/javax/imageio/plugins/tiff/ExifGPSTagSet.java
	modified:   src/java.desktop/share/classes/javax/imageio/plugins/tiff/ExifInteroperabilityTagSet.java
	modified:   src/java.desktop/share/classes/javax/imageio/plugins/tiff/ExifParentTIFFTagSet.java
	modified:   src/java.desktop/share/classes/javax/imageio/plugins/tiff/ExifTIFFTagSet.java
	modified:   src/java.desktop/share/classes/javax/imageio/plugins/tiff/FaxTIFFTagSet.java
	modified:   src/java.desktop/share/classes/javax/imageio/plugins/tiff/GeoTIFFTagSet.java
	modified:   src/java.desktop/share/classes/sun/java2d/cmm/lcms/LCMSTransform.java
	modified:   src/java.desktop/share/classes/sun/java2d/loops/DrawGlyphListColor.java
	modified:   src/java.desktop/windows/classes/sun/awt/shell/Win32ShellFolder2.java;;;","2021-11-02 11:29;prr;I found some more in jdk.accessibility
	modified:   src/jdk.accessibility/share/classes/com/sun/java/accessibility/util/AWTEventMonitor.java
	modified:   src/jdk.accessibility/share/classes/com/sun/java/accessibility/util/AccessibilityEventMonitor.java
	modified:   src/jdk.accessibility/share/classes/com/sun/java/accessibility/util/AccessibilityListenerList.java
	modified:   src/jdk.accessibility/share/classes/com/sun/java/accessibility/util/EventID.java
	modified:   src/jdk.accessibility/share/classes/com/sun/java/accessibility/util/EventQueueMonitor.java
	modified:   src/jdk.accessibility/share/classes/com/sun/java/accessibility/util/SwingEventMonitor.java
	modified:   src/jdk.accessibility/windows/classes/com/sun/java/accessibility/internal/AccessBridge.java;;;","2021-11-03 09:25;roboduke;Changeset: 0ef8cbe3
Author:    Phil Race <prr@openjdk.org>
Date:      2021-11-03 16:22:42 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0ef8cbe32540814d4c0be9c7b0f78486408657a7
;;;",,,,,,,,,,,,,,,,,,
Use blessed modifier order in java.base,JDK-8276348,5061681,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prappo,prappo,prappo,2021-11-02 08:49,2021-11-12 07:38,2023-10-01 09:57,2021-11-03 03:09,18,,,,,,,,,,,,,18,core-libs,,0,noreg-cleanup,,,,,,,,,,,,,,,,(The linked PR is self-descriptive.),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8136583,JDK-8277059,JDK-8276632,JDK-8276655,JDK-8276635,JDK-8276628,JDK-8277015,JDK-8276552,JDK-8276640,JDK-8276641,JDK-8276385,JDK-8277012,JDK-8276401,JDK-8277016,JDK-8276629,JDK-8276573,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uvq3:",9223372036854775807,b23,,,,,,,,,,,,,"2021-11-02 09:48;prappo;[~martin] would thou like to re-bless the modifiers?;;;","2021-11-02 12:32;martin;It's easy to re-run blessed-modifier-order.sh on any desired subset of the source code.
The hardest part is making sure you're modifying the real master copy of the sources and ensuring that identical bytecode is generated.

```
 $ bash bin/blessed-modifier-order.sh  src/java.base/ && git diff -U0
diff --git a/src/java.base/share/classes/java/io/ObjectInputFilter.java b/src/java.base/share/classes/java/io/ObjectInputFilter.java
index f339411593d..c9722ea23e7 100644
--- a/src/java.base/share/classes/java/io/ObjectInputFilter.java
+++ b/src/java.base/share/classes/java/io/ObjectInputFilter.java
@@ -564 +564 @@ public interface ObjectInputFilter {
-        private final static Object serialFilterLock = new Object();
+        private static final Object serialFilterLock = new Object();
@@ -909 +909 @@ public interface ObjectInputFilter {
-        final static class Global implements ObjectInputFilter {
+        static final class Global implements ObjectInputFilter {
diff --git a/src/java.base/share/classes/java/io/ObjectStreamClass.java b/src/java.base/share/classes/java/io/ObjectStreamClass.java
index 82ba054f61f..ff8a934a887 100644
--- a/src/java.base/share/classes/java/io/ObjectStreamClass.java
+++ b/src/java.base/share/classes/java/io/ObjectStreamClass.java
@@ -2518 +2518 @@ public class ObjectStreamClass implements Serializable {
-        static abstract class Key {
+        abstract static class Key {
diff --git a/src/java.base/share/classes/java/lang/Object.java b/src/java.base/share/classes/java/lang/Object.java
index d0ad7d43cd9..b8085b230af 100644
--- a/src/java.base/share/classes/java/lang/Object.java
+++ b/src/java.base/share/classes/java/lang/Object.java
@@ -281 +281 @@ public class Object {
-     *     synchronized static method of that class.
+     *     static synchronized method of that class.
diff --git a/src/java.base/share/classes/java/lang/Process.java b/src/java.base/share/classes/java/lang/Process.java
index 5fad1b889d5..88e3e473e76 100644
--- a/src/java.base/share/classes/java/lang/Process.java
+++ b/src/java.base/share/classes/java/lang/Process.java
@@ -848 +848 @@ public abstract class Process {
-        private final static Charset nativeCharset;
+        private static final Charset nativeCharset;
diff --git a/src/java.base/share/classes/java/lang/StackStreamFactory.java b/src/java.base/share/classes/java/lang/StackStreamFactory.java
index 328154dc04e..0cdb81d1fc7 100644
--- a/src/java.base/share/classes/java/lang/StackStreamFactory.java
+++ b/src/java.base/share/classes/java/lang/StackStreamFactory.java
@@ -121 +121 @@ final class StackStreamFactory {
-    static abstract class AbstractStackWalker<R, T> {
+    abstract static class AbstractStackWalker<R, T> {
@@ -786 +786 @@ final class StackStreamFactory {
-    static abstract class FrameBuffer<F> {
+    abstract static class FrameBuffer<F> {
diff --git a/src/java.base/share/classes/java/lang/System.java b/src/java.base/share/classes/java/lang/System.java
index fac67162435..6d4137c7aa4 100644
--- a/src/java.base/share/classes/java/lang/System.java
+++ b/src/java.base/share/classes/java/lang/System.java
@@ -334 +334 @@ public final class System {
-        final static Map<Class<?>, Boolean> callers
+        static final Map<Class<?>, Boolean> callers
@@ -1598 +1598 @@ public final class System {
-    public static abstract class LoggerFinder {
+    public abstract static class LoggerFinder {
diff --git a/src/java.base/share/classes/java/lang/WeakPairMap.java b/src/java.base/share/classes/java/lang/WeakPairMap.java
index 0e521dc901a..12bc3c552d6 100644
--- a/src/java.base/share/classes/java/lang/WeakPairMap.java
+++ b/src/java.base/share/classes/java/lang/WeakPairMap.java
@@ -343 +343 @@ final class WeakPairMap<K1, K2, V> {
-    private static abstract class WeakRefPeer<K> extends WeakReference<K> {
+    private abstract static class WeakRefPeer<K> extends WeakReference<K> {
diff --git a/src/java.base/share/classes/java/lang/invoke/AbstractConstantGroup.java b/src/java.base/share/classes/java/lang/invoke/AbstractConstantGroup.java
index b61875762a4..679bf70fa3f 100644
--- a/src/java.base/share/classes/java/lang/invoke/AbstractConstantGroup.java
+++ b/src/java.base/share/classes/java/lang/invoke/AbstractConstantGroup.java
@@ -247 +247 @@ abstract class AbstractConstantGroup implements ConstantGroup {
-    static abstract
+    abstract static
diff --git a/src/java.base/share/classes/java/lang/invoke/CallSite.java b/src/java.base/share/classes/java/lang/invoke/CallSite.java
index d6011851d9d..b7ece9932d3 100644
--- a/src/java.base/share/classes/java/lang/invoke/CallSite.java
+++ b/src/java.base/share/classes/java/lang/invoke/CallSite.java
@@ -87,2 +87,2 @@ private static CallSite bootstrapDynamic(MethodHandles.Lookup caller, String nam
-abstract
-public class CallSite {
+public
+abstract class CallSite {
diff --git a/src/java.base/share/classes/java/net/InetAddress.java b/src/java.base/share/classes/java/net/InetAddress.java
index b43c88e4f0e..38e7fc62921 100644
--- a/src/java.base/share/classes/java/net/InetAddress.java
+++ b/src/java.base/share/classes/java/net/InetAddress.java
@@ -218 +218 @@ public class InetAddress implements java.io.Serializable {
-    static transient final int preferIPv6Address;
+    static final transient int preferIPv6Address;
diff --git a/src/java.base/share/classes/java/security/Provider.java b/src/java.base/share/classes/java/security/Provider.java
index ca8c96c3e04..11c8eb29ca7 100644
--- a/src/java.base/share/classes/java/security/Provider.java
+++ b/src/java.base/share/classes/java/security/Provider.java
@@ -823 +823 @@ public abstract class Provider extends Properties {
-    private volatile transient boolean servicesChanged;
+    private transient volatile boolean servicesChanged;
diff --git a/src/java.base/share/classes/java/util/ImmutableCollections.java b/src/java.base/share/classes/java/util/ImmutableCollections.java
index 52a83552f14..0157faecdb1 100644
--- a/src/java.base/share/classes/java/util/ImmutableCollections.java
+++ b/src/java.base/share/classes/java/util/ImmutableCollections.java
@@ -145 +145 @@ class ImmutableCollections {
-    static abstract class AbstractImmutableCollection<E> extends AbstractCollection<E> {
+    abstract static class AbstractImmutableCollection<E> extends AbstractCollection<E> {
@@ -252 +252 @@ class ImmutableCollections {
-    static abstract class AbstractImmutableList<E> extends AbstractImmutableCollection<E>
+    abstract static class AbstractImmutableList<E> extends AbstractImmutableCollection<E>
@@ -745 +745 @@ class ImmutableCollections {
-    static abstract class AbstractImmutableSet<E> extends AbstractImmutableCollection<E>
+    abstract static class AbstractImmutableSet<E> extends AbstractImmutableCollection<E>
diff --git a/src/java.base/share/classes/jdk/internal/icu/util/CodePointTrie.java b/src/java.base/share/classes/jdk/internal/icu/util/CodePointTrie.java
index 74dae2089a0..d15a7bcdaba 100644
--- a/src/java.base/share/classes/jdk/internal/icu/util/CodePointTrie.java
+++ b/src/java.base/share/classes/jdk/internal/icu/util/CodePointTrie.java
@@ -627 +627 @@ public abstract class CodePointTrie extends CodePointMap {
-    private static abstract class Data {
+    private abstract static class Data {
@@ -771 +771 @@ public abstract class CodePointTrie extends CodePointMap {
-    public static abstract class Fast extends CodePointTrie {
+    public abstract static class Fast extends CodePointTrie {
@@ -909 +909 @@ public abstract class CodePointTrie extends CodePointMap {
-    public static abstract class Small extends CodePointTrie {
+    public abstract static class Small extends CodePointTrie {
diff --git a/src/java.base/share/classes/jdk/internal/jimage/BasicImageReader.java b/src/java.base/share/classes/jdk/internal/jimage/BasicImageReader.java
index 75cf8780bd1..7796512a715 100644
--- a/src/java.base/share/classes/jdk/internal/jimage/BasicImageReader.java
+++ b/src/java.base/share/classes/jdk/internal/jimage/BasicImageReader.java
@@ -64 +64 @@ public class BasicImageReader implements AutoCloseable {
-    static private final boolean IS_64_BIT =
+    private static final boolean IS_64_BIT =
@@ -66 +66 @@ public class BasicImageReader implements AutoCloseable {
-    static private final boolean USE_JVM_MAP =
+    private static final boolean USE_JVM_MAP =
@@ -68 +68 @@ public class BasicImageReader implements AutoCloseable {
-    static private final boolean MAP_ALL =
+    private static final boolean MAP_ALL =
diff --git a/src/java.base/share/classes/jdk/internal/jimage/NativeImageBuffer.java b/src/java.base/share/classes/jdk/internal/jimage/NativeImageBuffer.java
index cb22cbf4a03..8d228c050c6 100644
--- a/src/java.base/share/classes/jdk/internal/jimage/NativeImageBuffer.java
+++ b/src/java.base/share/classes/jdk/internal/jimage/NativeImageBuffer.java
@@ -48 +48 @@ class NativeImageBuffer {
-    native static ByteBuffer getNativeMap(String imagePath);
+    static native ByteBuffer getNativeMap(String imagePath);
diff --git a/src/java.base/share/classes/jdk/internal/logger/SimpleConsoleLogger.java b/src/java.base/share/classes/jdk/internal/logger/SimpleConsoleLogger.java
index 769e8d2a1b6..317e475d1a8 100644
--- a/src/java.base/share/classes/jdk/internal/logger/SimpleConsoleLogger.java
+++ b/src/java.base/share/classes/jdk/internal/logger/SimpleConsoleLogger.java
@@ -440 +440 @@ public class SimpleConsoleLogger extends LoggerConfiguration
-        static private final String[] skips;
+        private static final String[] skips;
diff --git a/src/java.base/share/classes/jdk/internal/module/ModuleReferences.java b/src/java.base/share/classes/jdk/internal/module/ModuleReferences.java
index 7edc326bde2..346838b47d9 100644
--- a/src/java.base/share/classes/jdk/internal/module/ModuleReferences.java
+++ b/src/java.base/share/classes/jdk/internal/module/ModuleReferences.java
@@ -124 +124 @@ class ModuleReferences {
-    static abstract class SafeCloseModuleReader implements ModuleReader {
+    abstract static class SafeCloseModuleReader implements ModuleReader {
diff --git a/src/java.base/share/classes/sun/nio/ch/FileChannelImpl.java b/src/java.base/share/classes/sun/nio/ch/FileChannelImpl.java
index a59206d0309..ec0bc767eb7 100644
--- a/src/java.base/share/classes/sun/nio/ch/FileChannelImpl.java
+++ b/src/java.base/share/classes/sun/nio/ch/FileChannelImpl.java
@@ -891 +891 @@ public class FileChannelImpl
-    private static abstract class Unmapper
+    private abstract static class Unmapper
diff --git a/src/java.base/share/classes/sun/security/jca/ProviderList.java b/src/java.base/share/classes/sun/security/jca/ProviderList.java
index 90bb29e17f7..cf0bd736f9d 100644
--- a/src/java.base/share/classes/sun/security/jca/ProviderList.java
+++ b/src/java.base/share/classes/sun/security/jca/ProviderList.java
@@ -74 +74 @@ public final class ProviderList {
-    static private PreferredList preferredPropList = null;
+    private static PreferredList preferredPropList = null;
diff --git a/src/java.base/share/classes/sun/security/rsa/RSAPrivateKeyImpl.java b/src/java.base/share/classes/sun/security/rsa/RSAPrivateKeyImpl.java
index 699a5db6367..efb3258a149 100644
--- a/src/java.base/share/classes/sun/security/rsa/RSAPrivateKeyImpl.java
+++ b/src/java.base/share/classes/sun/security/rsa/RSAPrivateKeyImpl.java
@@ -63 +63 @@ public final class RSAPrivateKeyImpl extends PKCS8Key implements RSAPrivateKey {
-    private transient final KeyType type;
+    private final transient KeyType type;
@@ -68 +68 @@ public final class RSAPrivateKeyImpl extends PKCS8Key implements RSAPrivateKey {
-    private transient final AlgorithmParameterSpec keyParams;
+    private final transient AlgorithmParameterSpec keyParams;
diff --git a/src/java.base/share/classes/sun/security/ssl/SSLHandshake.java b/src/java.base/share/classes/sun/security/ssl/SSLHandshake.java
index db68eb2b7d4..fe0f030f409 100644
--- a/src/java.base/share/classes/sun/security/ssl/SSLHandshake.java
+++ b/src/java.base/share/classes/sun/security/ssl/SSLHandshake.java
@@ -553 +553 @@ enum SSLHandshake implements SSLConsumer, HandshakeProducer {
-    static abstract class HandshakeMessage {
+    abstract static class HandshakeMessage {
```;;;","2021-11-02 12:37;prappo;[~martin] you might want to have a look at the linked PR on GitHub at your convenience.;;;","2021-11-03 03:09;roboduke;Changeset: 61506336
Author:    Pavel Rappo <prappo@openjdk.org>
Date:      2021-11-03 10:07:48 +0000
URL:       https://git.openjdk.java.net/jdk/commit/615063364ab6bdd3fa83401745e05b45e13eacdb
;;;",,,,,,,,,,,,,,,,,
"Minor improve of wording for String.to(Lower|Upper)Case",JDK-8276338,5061668,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prappo,prappo,prappo,2021-11-02 07:01,2021-11-10 17:54,2023-10-01 09:57,2021-11-04 08:52,18,,,,,,,,,,,,,18,core-libs,,0,,,,,,,,,,,,,,,,,(The linked PR is self-descriptive.),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uvn7:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4c088d55,,,,,,,,,"2021-11-04 08:52;roboduke;Changeset: bf4ddf9c
Author:    Pavel Rappo <prappo@openjdk.org>
Date:      2021-11-04 15:51:37 +0000
URL:       https://git.openjdk.java.net/jdk/commit/bf4ddf9cb7408db321e7fd73600a5a9a85ca49eb
;;;",,,,,,,,,,,,,,,,,,,,
"jdk/jfr/event/oldobject/TestLargeRootSet.java failed ""assert(!contains(edge->reference())) failed: invariant""",JDK-8276333,5061663,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mgronlun,dcubed,dcubed,2021-11-02 06:29,2023-07-21 08:49,2023-10-01 09:57,2022-03-08 01:30,11,17,18,19,repo-loom,,,,,,,,,19,hotspot,,0,amazon-interest,intermittent,jdk17u-fix-request,jdk17u-fix-yes,problemlist,tier3,tier5,,,,,,,,,,"The following test failed in an Adhoc Mach5 job set:

jdk/jfr/event/oldobject/TestLargeRootSet.java

Here's a snippet from the log file:

#section:main
----------messages:(5/359)----------
command: main -XX:TLABSize=2k jdk.jfr.event.oldobject.TestLargeRootSet
reason: User specified action: run main/othervm -XX:TLABSize=2k jdk.jfr.event.oldobject.TestLargeRootSet 
Mode: othervm [/othervm specified]
Additional options from @modules: --add-modules jdk.jfr --add-exports jdk.jfr/jdk.jfr.internal.test=ALL-UNNAMED
elapsed time (seconds): 4.944
----------configuration:(4/119)----------
Boot Layer
  add modules: jdk.jfr                       
  add exports: jdk.jfr/jdk.jfr.internal.test ALL-UNNAMED

----------System.out:(23/1465)*----------
# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=\\edgeStore.cpp:291
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (t:\\workspace\\open\\src\\hotspot\\share\\jfr\\leakprofiler\\chains\\edgeStore.cpp:291), pid=30736, tid=34708
#  assert(!contains(edge->reference())) failed: invariant
#
# JRE version: Java(TM) SE Runtime Environment (18.0) (fastdebug build 18-internal+0-2021-11-01-1849543.daniel.daugherty.8249004forjdk18.git)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-internal+0-2021-11-01-1849543.daniel.daugherty.8249004forjdk18.git, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, windows-amd64)
# Core dump will be written. Default location: T:\\testoutput\\test-support\\jtreg_open_test_jdk_jdk_jfr\\scratch\\0\\hs_err_pid30736.mdmp
#
# JFR recording file will be written. Location: T:\\testoutput\\test-support\\jtreg_open_test_jdk_jdk_jfr\\scratch\\0\\hs_err_pid30736.jfr
#
# An error report file with more information is saved as:
# T:\\testoutput\\test-support\\jtreg_open_test_jdk_jdk_jfr\\scratch\\0\\hs_err_pid30736.log

[error occurred during error reporting (), id 0xe0000000, Internal Error (t:\\workspace\\open\\src\\hotspot\\share\\runtime/thread.hpp:1441)]

#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#
----------System.err:(0/0)----------
----------rerun:(44/6618)*----------


Here's the crashing thread's stack:

---------------  T H R E A D  ---------------

Current thread (0x000001a48fce0b80):  VMThread ""VM Thread"" [stack: 0x00000085cbd00000,0x00000085cbe00000] [id=34708]

Stack: [0x00000085cbd00000,0x00000085cbe00000]
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [jvm.dll+0xb55b81]  os::platform_print_native_stack+0xf1  (os_windows_x86.cpp:235)
V  [jvm.dll+0xd92cee]  VMError::report+0x101e  (vmError.cpp:828)
V  [jvm.dll+0xd946ee]  VMError::report_and_die+0x7fe  (vmError.cpp:1656)
V  [jvm.dll+0xd94e74]  VMError::report_and_die+0x64  (vmError.cpp:1437)
V  [jvm.dll+0x4defb7]  report_vm_error+0xb7  (debug.cpp:282)
V  [jvm.dll+0x56e953]  EdgeStore::put_chain+0x113  (edgeStore.cpp:309)
V  [jvm.dll+0x54b53d]  DFSClosure::add_chain+0x2ad  (dfsClosure.cpp:133)
V  [jvm.dll+0x54b920]  DFSClosure::closure_impl+0x390  (dfsClosure.cpp:101)
V  [jvm.dll+0x54ba88]  DFSClosure::do_root+0xa8  (dfsClosure.cpp:158)
V  [jvm.dll+0xc00bd3]  RootSetClosure<DFSClosure>::do_oop+0xf3  (rootSetClosure.cpp:51)
V  [jvm.dll+0x461248]  ClassLoaderData::ChunkedHandleList::oops_do_chunk+0x58  (classLoaderData.cpp:212)
V  [jvm.dll+0x4610ec]  ClassLoaderData::ChunkedHandleList::oops_do+0x3c  (classLoaderData.cpp:224)
V  [jvm.dll+0x462d58]  ClassLoaderDataGraph::always_strong_cld_do+0x58  (classLoaderDataGraph.cpp:286)
V  [jvm.dll+0xc00d28]  RootSetClosure<DFSClosure>::process+0x48  (rootSetClosure.cpp:72)
V  [jvm.dll+0x54bcf5]  DFSClosure::find_leaks_from_root_set+0xd5  (dfsClosure.cpp:69)
V  [jvm.dll+0xb88e76]  PathToGcRootsOperation::doit+0x306  (pathToGcRootsOperation.cpp:125)
V  [jvm.dll+0xd9a589]  VM_Operation::evaluate+0xb9  (vmOperations.cpp:71)
V  [jvm.dll+0xd9c494]  VMThread::evaluate_operation+0xa4  (vmThread.cpp:283)
V  [jvm.dll+0xd9cbb5]  VMThread::inner_execute+0x255  (vmThread.cpp:432)
V  [jvm.dll+0xd9cf40]  VMThread::run+0x160  (vmThread.cpp:175)
V  [jvm.dll+0xd0bbc4]  Thread::call_run+0x1b4  (thread.cpp:365)
V  [jvm.dll+0xb5453e]  thread_native_entry+0xae  (os_windows.cpp:544)
C  [ucrtbase.dll+0x1fb80]
C  [KERNEL32.DLL+0x84d4]
C  [ntdll.dll+0x51791]

VM_Operation (0x00000085ccafe960): JFROldObject, mode: safepoint, requested by thread 0x000001a4942d4b60",,,,,,,,,,JDK-8312514,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8282067,,,,,,,,,,,,,,JDK-8282067,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aarch64,x86_64,,,,,,,,,,,,,,,,,,"0|i2uvm3:",9223372036854775807,b13,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2022-01-18 22:02;dholmes;We now seem to have a product variant of this crash on linux-x64 (where the test is not problem-listed):

Current thread (0x00007f32181a0990):  VMThread ""VM Thread"" [stack: 0x00007f3200838000,0x00007f3200938000] [id=2951]

Stack: [0x00007f3200838000,0x00007f3200938000],  sp=0x00007f32009366d8,  free space=1017k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x685a68]  EdgeStore::get_id(Edge const*) const+0x8
V  [libjvm.so+0x699032]  EventEmitter::write_events(ObjectSampler*, EdgeStore*, bool)+0x152
V  [libjvm.so+0xc3e613]  PathToGcRootsOperation::doit()+0x3d3
V  [libjvm.so+0xe23caa]  VM_Operation::evaluate()+0xea
V  [libjvm.so+0xe25638]  VMThread::evaluate_operation(VM_Operation*)+0xb8
V  [libjvm.so+0xe25cb7]  VMThread::inner_execute(VM_Operation*)+0x377
V  [libjvm.so+0xe25ec7]  VMThread::run()+0xb7
V  [libjvm.so+0xd9f7d0]  Thread::call_run()+0xc0
V  [libjvm.so+0xc03c58]  thread_native_entry(Thread*)+0xd8


siginfo: si_signo: 11 (SIGSEGV), si_code: 1 (SEGV_MAPERR), si_addr: 0x0000000000000008;;;","2022-01-24 21:51;dholmes;Now failing on aarch64 as well!

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x0000fffe314fce74, pid=1238268, tid=1238282
#
# JRE version: Java(TM) SE Runtime Environment (19.0+7) (build 19-ea+7-340)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (19-ea+7-340, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-aarch64)
# Problematic frame:
# V  [libjvm.so+0x67ce74]  EdgeStore::get_id(Edge const*) const+0x4
#;;;","2022-03-06 03:57;mgronlun;This is a specific issue related to how the DFSClosure process roots.

It traverses roots twice to avoid going sideways. To prevent premature termination during the second pass, a marker, ""_ignore_root_set"", is set to signal they have already been processed. It lets the recursion continue, but there is a problem with how the code is laid out. It skips the ""is_marked"" check, but it does not skip add_chain(). If the reference is a stack root, and the pointee is a leak sample candidate, it attempts to construct the reference chain twice. The assertion fires because a reference is only to be added once.

Since the problem has been there from the beginning, i.e. JDK 11, this fix should be backported.

   if (_depth == 0 && _ignore_root_set) {
     // Root set is already marked, but we want
     // to continue, so skip is_marked check.
     assert(_mark_bits->is_marked(pointee), ""invariant"");
-  }  else {
+    _reference_stack[_depth] = reference;
+  } else {
     if (_mark_bits->is_marked(pointee)) {
       return;
     }
+    _mark_bits->mark_obj(pointee);
+    _reference_stack[_depth] = reference;
+    // is the pointee a sample object?
+    if (pointee->mark().is_marked()) {
+      add_chain();
+    }
   }
-  _reference_stack[_depth] = reference;
-  _mark_bits->mark_obj(pointee);
-  assert(_mark_bits->is_marked(pointee), ""invariant"");
-
-  // is the pointee a sample object?
-  if (pointee->mark().is_marked()) {
-    add_chain();
-  }
-;;;","2022-03-06 05:28;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7715
Date: 2022-03-06 13:23:01 +0000;;;","2022-03-08 01:30;dukebot;Changeset: 65ca0a57
Author:    Markus Grönlund <mgronlun@openjdk.org>
Date:      2022-03-08 09:28:46 +0000
URL:       https://git.openjdk.java.net/jdk/commit/65ca0a5776df229ee91f420585ca1e8f91e489c6
;;;","2023-07-19 05:47;rkennke;Fix-request (17u): This change fixes a crash in the JFR leak-profiler. See discussion above. The backport applies cleanly, except for the ProblemList.txt change, which is not needed in 17u. The change has baked since jdk19 without relevant follow-up issues.
PR: https://github.com/openjdk/jdk17u-dev/pull/1601;;;","2023-07-19 05:54;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1601
Date: 2023-07-19 12:45:42 +0000;;;",,,,,,,,,,,,,,
[JVMCI] check alignment of call displacement during code installation,JDK-8276314,5061642,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,dnsimon,dnsimon,dnsimon,2021-11-02 03:46,2022-03-30 01:57,2023-10-01 09:57,2021-11-18 00:36,11-pool,17-pool,18,,,,,,,,,,,18,hotspot,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jvmci,oracle-triage-18,,,,,,,,,,,"We have the following crash on GraalVM:

#  Internal Error (nativeInst_x86.cpp:155), pid=19, tid=0x00007f410b0f4700
#  guarantee(!os::is_MP() || is_aligned) failed: destination must be aligned

This implies a problem in Graal in terms of emitting code that complies with HotSpot's code patching requirements. It would be preferable for the compilation to fail gracefully/silently than for the whole VM to stop. As such, JVMCI should verify these alignment invariants during code installation.",,,,,,,,,,JDK-8278861,JDK-8279193,JDK-8279226,JDK-8279178,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278747,,,,,,,,,,,,,,,JDK-8283306,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uvhf:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-18 00:36;roboduke;Changeset: 2f4b5405
Author:    Doug Simon <dnsimon@openjdk.org>
Date:      2021-11-18 08:32:54 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2f4b5405f0b53782f3ed5274f68b31eb968efb6d
;;;","2021-12-15 09:05;kvn;Fix request for backport to Openjdk JDK 11u:

Simple JVMCI fix with small refactoring which is tested in JDK 18 and is already backported into Oracle's 11u.
Risk low - affects JVMCI only. Backport to 11u is not applied cleanly - will need review. 11u patch is attached.

https://github.com/openjdk/jdk11u-dev/pull/723;;;","2021-12-21 11:53;kvn;[~goetz] Do I need something else to get approval? Patch for 11u was reviewed.;;;","2021-12-21 13:31;kvn;The issue had incorrect type: Enhancement. Changing it to Bug. ;;;","2021-12-22 00:12;goetz;[~kvn] should this go to jdk17u-dev, too?;;;","2021-12-22 00:43;kvn;Yes, it should go into JDK 17u too. I will prepare PR and add backport fix request for 17u after testing.;;;","2021-12-22 15:51;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/33
Date: 2021-12-22 23:48:04 +0000
;;;","2021-12-22 16:04;kvn;Fix request for backport to OpenJDK 17u: 

Simple JVMCI fix with small refactoring which is tested in JDK 18 and is already backported into JDK 11u. 
Risk low - affects JVMCI only. Backport applied cleanly.

Tested tier1-3.
;;;",,,,,,,,,,,,,
ScrollPane scroll delta incorrectly depends on content height,JDK-8276313,5061641,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mstrauss,mstrauss,mstrauss,2021-11-02 03:45,2021-12-08 04:02,2023-10-01 09:57,2021-12-06 02:28,jfx17,,,,,,,,,,,,,jfx18,javafx,,0,,,,,,,,,,,,,,,,,"The amount by which a ScrollPane scrolls its content when receiving a SCROLL event incorrectly depends on the height of its content.

For example, if the content height is 500 and the ScrollPane height is 100, the scroll delta is sufficiently large. However, when the content is only slightly larger than the ScrollPane, the scroll delta becomes increasingly small.

To reproduce the problem, run the following program and test the following steps:

1. Adjust the window size such that the ScrollPane is very small (and consequently its scroll bar has a large scroll range). Now scroll using the mouse wheel and note the delta printed to the console.

2. Adjust the window size such that the ScrollPane is only slightly smaller than its content. Scroll using the mouse wheel and compare the delta to the first step. You will observe that the delta becomes increasingly small.


    @Override
    public void start(Stage primaryStage) {
        var content = new Rectangle();
        content.setHeight(500);
        content.setWidth(100);

        var root = new ScrollPane();
        root.setContent(content);
        root.vvalueProperty().addListener((o, ov, nv) ->
            System.out.println(content.getLocalToSceneTransform().transform(0, 0).getY()));

        primaryStage.setScene(new Scene(root));
        primaryStage.setHeight(390);
        primaryStage.show();
    }",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uvh7:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@67282485,,,,,,,,,"2021-12-06 02:28;roboduke;Changeset: 5805bf8e
Author:    Michael Strauß <mstrauss@openjdk.org>
Committer: Johan Vos <jvos@openjdk.org>
Date:      2021-12-06 10:27:37 +0000
URL:       https://git.openjdk.java.net/jfx/commit/5805bf8e5de90427a68164e52c1fbbd08bfd0aa4
;;;",,,,,,,,,,,,,,,,,,,,
jdk/jshell/CustomInputToolBuilder.java fails intermittently on storage acquisition,JDK-8276306,5061635,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,shade,shade,shade,2021-11-02 00:28,2023-03-26 15:03,2023-10-01 09:57,2021-11-08 07:37,11,17,18,,,,,,,,,,,18,tools,,0,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,redhat-interest,testbug,,,,,,,,,,,,"In my tier1 runs on a heavily parallel machine, jdk/jshell/CustomInputToolBuilder.java fails intermittently. It only happens when it runs in the course of larger langtools:tier1, and the error suggests there is some other test that locks the default preferences storage. 

$ CONF=linux-x86_64-server-fastdebug make run-test TEST=langtools:tier1

STDOUT:
config KullaTesting.setUp(): success
test CustomInputToolBuilder.checkCustomInput(): success
config KullaTesting.tearDown(): success
config KullaTesting.setUp(): success
test CustomInputToolBuilder.checkInteractiveTerminal(): failure
java.lang.IllegalStateException: java.util.prefs.BackingStoreException: Couldn't get file lock.
	at jdk.jshell/jdk.internal.jshell.tool.JShellToolBuilder$PreferencesStorage.flush(JShellToolBuilder.java:313)
	at jdk.jshell/jdk.internal.jshell.tool.ConsoleIOContext.close(ConsoleIOContext.java:291)
	at jdk.jshell/jdk.internal.jshell.tool.JShellTool.start(JShellTool.java:997)
	at jdk.jshell/jdk.internal.jshell.tool.JShellToolBuilder.start(JShellToolBuilder.java:261)
	at CustomInputToolBuilder.doTest(CustomInputToolBuilder.java:91)
	at CustomInputToolBuilder.checkInteractiveTerminal(CustomInputToolBuilder.java:109)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)
	at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:599)
	at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:174)
	at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
	at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:822)
	at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:147)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.testng.TestRunner.privateRun(TestRunner.java:764)
	at org.testng.TestRunner.run(TestRunner.java:585)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:384)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)
	at org.testng.SuiteRunner.run(SuiteRunner.java:286)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1218)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1140)
	at org.testng.TestNG.runSuites(TestNG.java:1069)
	at org.testng.TestNG.run(TestNG.java:1037)
	at com.sun.javatest.regtest.agent.TestNGRunner.main(TestNGRunner.java:94)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.util.prefs.BackingStoreException: Couldn't get file lock.
	at java.prefs/java.util.prefs.FileSystemPreferences.sync(FileSystemPreferences.java:768)
	at java.prefs/java.util.prefs.FileSystemPreferences.flush(FileSystemPreferences.java:863)
	at jdk.jshell/jdk.internal.jshell.tool.JShellToolBuilder$PreferencesStorage.flush(JShellToolBuilder.java:311)
	... 33 more

I believe this test should just run without default persistence to avoid this bug.",,,,,,,,,,JDK-8277469,JDK-8277687,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8304938,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uvfv:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@ef6d34f,,,,,,,,,"2021-11-08 07:37;roboduke;Changeset: 75adf54b
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-11-08 15:35:27 +0000
URL:       https://git.openjdk.java.net/jdk/commit/75adf54bdcc5e06fb8e8ca499a2f326d70b65f76
;;;","2021-11-18 03:07;shade;Fix Request (17u)

Improves 17u testing. Applies cleanly.;;;",,,,,,,,,,,,,,,,,,,
"Locale.filterTags methods ignore actual weight when matching ""*"" (as if it is 1)",JDK-8276302,5061508,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,naoto,webbuggrp,webbuggrp,2021-10-30 23:20,2022-09-14 15:01,2023-10-01 09:57,2021-12-23 06:12,11,17,18,8,,,,,,,,,,19,core-libs,,0,18ea,additional-information-received,dcsaw,reproducer-yes,webbug,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
Locale.filterTags methods ignore actual weight when matching ""*"" (as if it is 1) because LocaleMatcher.{filterBasic,filterExtended} do so.

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Run the attached tests.


---------- BEGIN SOURCE ----------
import java.util.List;
import java.util.Locale;

class LocaleFilterTagsTest {

  public static void main(String[] args) {
    assertFilterTags(""fr-FR, fr-BG;q=0.8, *;q=0.5, en;q=0"",
        List.of(""en-US"", ""fr-FR"", ""fr-CA"", ""fr-BG""), List.of(""fr-FR"", ""fr-BG"", ""fr-CA""));

    assertFilterTags(""fr-FR, fr-*-BG;q=0.8, *;q=0.5, en;q=0"",
        List.of(""en-US"", ""fr-FR"", ""fr-CA"", ""fr-BG""), List.of(""fr-FR"", ""fr-BG"", ""fr-CA""));

    assertFilterTags(""en;q=0.2, *;q=0.6, ja"",
        List.of(""de-DE"", ""en"", ""ja-JP-hepburn"", ""fr-JP"", ""he""),
        List.of(""ja-JP-hepburn"", ""de-DE"", ""en"", ""fr-JP"", ""he""));
  }

  private static void assertFilterTags(String ranges, List<String> tags,
      List<String> expectedTags) {
    final List<String> actualTags = Locale.filterTags(Locale.LanguageRange.parse(ranges), tags);

    if (!expectedTags.equals(actualTags)) {
      throw new AssertionError(
          String.format(""Expected: %s, Actual: %s."", expectedTags, actualTags));
    }
  }
}
---------- END SOURCE ----------

CUSTOMER SUBMITTED WORKAROUND :

Locale.filterTags methods ignore actual weight when matching ""*"" (as if
it is 1) because LocaleMatcher.{filterBasic,filterExtended} do so.

Fix the bug and add regression test cases for it as well as existing
behavior.
---
 .../sun/util/locale/LocaleMatcher.java        | 78 +++++--------------
 test/jdk/java/util/Locale/Bug7069824.java     | 51 +++++++++++-
 2 files changed, 67 insertions(+), 62 deletions(-)

diff --git a/src/java.base/share/classes/sun/util/locale/LocaleMatcher.java b/src/java.base/share/classes/sun/util/locale/LocaleMatcher.java
index 93629220de5..249aee9a705 100644
--- a/src/java.base/share/classes/sun/util/locale/LocaleMatcher.java
+++ b/src/java.base/share/classes/sun/util/locale/LocaleMatcher.java
@@ -124,8 +124,16 @@ public final class LocaleMatcher {
         for (LanguageRange lr : nonZeroRanges) {
             String range = lr.getRange();
             if (range.equals(""*"")) {
-                tags = removeTagsMatchingBasicZeroRange(zeroRanges, tags);
-                return new ArrayList<String>(tags);
+                for (String tag : tags) {
+                    String lowerCaseTag = tag.toLowerCase(Locale.ROOT);
+
+                    if (!caseInsensitiveMatch(list, lowerCaseTag)
+                            && !shouldIgnoreFilterBasicMatch(zeroRanges, lowerCaseTag)) {
+                        list.add(tag);
+                    }
+                }
+
+                break;
             } else {
                 for (String tag : tags) {
                     // change to lowercase for case-insensitive matching
@@ -148,33 +156,6 @@ public final class LocaleMatcher {
         return list;
     }
 
-    /**
-     * Removes the tag(s) which are falling in the basic exclusion range(s) i.e
-     * range(s) with q=0 and returns the updated collection. If the basic
-     * language ranges contains '*' as one of its non zero range then instead of
-     * returning all the tags, remove those which are matching the range with
-     * quality weight q=0.
-     */
-    private static Collection<String> removeTagsMatchingBasicZeroRange(
-            List<LanguageRange> zeroRange, Collection<String> tags) {
-        if (zeroRange.isEmpty()) {
-            tags = removeDuplicates(tags);
-            return tags;
-        }
-
-        List<String> matchingTags = new ArrayList<>();
-        for (String tag : tags) {
-            // change to lowercase for case-insensitive matching
-            String lowerCaseTag = tag.toLowerCase(Locale.ROOT);
-            if (!shouldIgnoreFilterBasicMatch(zeroRange, lowerCaseTag)
-                    && !caseInsensitiveMatch(matchingTags, lowerCaseTag)) {
-                matchingTags.add(tag); // preserving the case of the input tag
-            }
-        }
-
-        return matchingTags;
-    }
-
     /**
      * Remove duplicate tags from the given {@code tags} by
      * ignoring case considerations.
@@ -240,8 +221,16 @@ public final class LocaleMatcher {
         for (LanguageRange lr : nonZeroRanges) {
             String range = lr.getRange();
             if (range.equals(""*"")) {
-                tags = removeTagsMatchingExtendedZeroRange(zeroRanges, tags);
-                return new ArrayList<String>(tags);
+                for (String tag : tags) {
+                    String lowerCaseTag = tag.toLowerCase(Locale.ROOT);
+
+                    if (!caseInsensitiveMatch(list, lowerCaseTag)
+                            && !shouldIgnoreFilterExtendedMatch(zeroRanges, lowerCaseTag)) {
+                        list.add(tag);
+                    }
+                }
+
+                break;
             }
             String[] rangeSubtags = range.split(""-"");
             for (String tag : tags) {
@@ -267,33 +256,6 @@ public final class LocaleMatcher {
         return list;
     }
 
-    /**
-     * Removes the tag(s) which are falling in the extended exclusion range(s)
-     * i.e range(s) with q=0 and returns the updated collection. If the extended
-     * language ranges contains '*' as one of its non zero range then instead of
-     * returning all the tags, remove those which are matching the range with
-     * quality weight q=0.
-     */
-    private static Collection<String> removeTagsMatchingExtendedZeroRange(
-            List<LanguageRange> zeroRange, Collection<String> tags) {
-        if (zeroRange.isEmpty()) {
-            tags = removeDuplicates(tags);
-            return tags;
-        }
-
-        List<String> matchingTags = new ArrayList<>();
-        for (String tag : tags) {
-            // change to lowercase for case-insensitive matching
-            String lowerCaseTag = tag.toLowerCase(Locale.ROOT);
-            if (!shouldIgnoreFilterExtendedMatch(zeroRange, lowerCaseTag)
-                    && !caseInsensitiveMatch(matchingTags, lowerCaseTag)) {
-                matchingTags.add(tag); // preserve the case of the input tag
-            }
-        }
-
-        return matchingTags;
-    }
-
     /**
      * The tag which is falling in the extended exclusion range(s) should
      * not be considered as the matching tag. Ignores the tag matching with the
diff --git a/test/jdk/java/util/Locale/Bug7069824.java b/test/jdk/java/util/Locale/Bug7069824.java
index 0eb1f21c275..dce97ef1246 100644
--- a/test/jdk/java/util/Locale/Bug7069824.java
+++ b/test/jdk/java/util/Locale/Bug7069824.java
@@ -208,27 +208,61 @@ public class Bug7069824 {
     Object[][] LFilterTagsData() {
         return new Object[][] {
                 // Range, LanguageTags, FilteringMode, Expected language tags
+                {""fr-FR, fr-BG;q=0.8, *;q=0.5, en;q=0"", ""en-US, fr-FR, fr-CA, fr-BG"",
+                        null, ""fr-FR, fr-BG, fr-CA""},
+                {""fr-FR, fr-*-BG;q=0.8, *;q=0.5, en;q=0"", ""en-US, fr-FR, fr-CA, fr-BG"",
+                        null, ""fr-FR, fr-BG, fr-CA""},
+
                 {""en;q=0.2, *;q=0.6, ja"", ""de-DE, en, ja-JP-hepburn, fr-JP, he"",
-                        null, ""de-DE, en, ja-JP-hepburn, fr-JP, he""},
+                        null, ""ja-JP-hepburn, de-DE, en, fr-JP, he""},
                 {""en;q=0.2, ja-JP, fr-JP"", ""de-DE, en, ja-JP-hepburn, fr, he"",
                         null, ""ja-JP-hepburn, en""},
                 {""en;q=0.2, ja-JP, fr-JP, iw"", ""de-DE, he, en, ja-JP-hepburn, fr, he-IL"",
                         null, ""ja-JP-hepburn, he, he-IL, en""},
                 {""en;q=0.2, ja-JP, fr-JP, he"", ""de-DE, en, ja-JP-hepburn, fr, iw-IL"",
                         null, ""ja-JP-hepburn, iw-IL, en""},
+
                 {""de-DE"", ""de-DE, de-de, de-Latn-DE, de-Latf-DE, de-DE-x-goethe, ""
                         + ""de-Latn-DE-1996, de-Deva-DE, de, de-x-DE, de-Deva"",
-                        MAP_EXTENDED_RANGES, ""de-DE, de-DE-x-goethe""},
+                        null, ""de-DE, de-DE-x-goethe""},
+                {""de-*-DE"", ""de-DE, de-de, de-Latn-DE, de-Latf-DE, de-DE-x-goethe, ""
+                        + ""de-Latn-DE-1996, de-Deva-DE, de, de-x-DE, de-Deva"",
+                        null,
+                        ""de-DE, de-Latn-DE, de-Latf-DE, de-DE-x-goethe, ""
+                                + ""de-Latn-DE-1996, de-Deva-DE""},
+
                 {""de-DE"", ""de-DE, de-de, de-Latn-DE, de-Latf-DE, de-DE-x-goethe, ""
                         + ""de-Latn-DE-1996, de-Deva-DE, de, de-x-DE, de-Deva"",
                         EXTENDED_FILTERING,
                         ""de-DE, de-Latn-DE, de-Latf-DE, de-DE-x-goethe, ""
-                                + ""de-Latn-DE-1996, de-Deva-DE""},
+                        + ""de-Latn-DE-1996, de-Deva-DE""},
                 {""de-*-DE"", ""de-DE, de-de, de-Latn-DE, de-Latf-DE, de-DE-x-goethe, ""
                         + ""de-Latn-DE-1996, de-Deva-DE, de, de-x-DE, de-Deva"",
                         EXTENDED_FILTERING,
                         ""de-DE, de-Latn-DE, de-Latf-DE, de-DE-x-goethe, ""
-                                + ""de-Latn-DE-1996, de-Deva-DE""},
+                        + ""de-Latn-DE-1996, de-Deva-DE""},
+
+                {""de-DE"", ""de-DE, de-de, de-Latn-DE, de-Latf-DE, de-DE-x-goethe, ""
+                        + ""de-Latn-DE-1996, de-Deva-DE, de, de-x-DE, de-Deva"",
+                        IGNORE_EXTENDED_RANGES,
+                        ""de-DE, de-DE-x-goethe""},
+                {""de-*-DE"", ""de-DE, de-de, de-Latn-DE, de-Latf-DE, de-DE-x-goethe, ""
+                        + ""de-Latn-DE-1996, de-Deva-DE, de, de-x-DE, de-Deva"",
+                        IGNORE_EXTENDED_RANGES,
+                        """"},
+
+                {""de-DE"", ""de-DE, de-de, de-Latn-DE, de-Latf-DE, de-DE-x-goethe, ""
+                        + ""de-Latn-DE-1996, de-Deva-DE, de, de-x-DE, de-Deva"",
+                        MAP_EXTENDED_RANGES, ""de-DE, de-DE-x-goethe""},
+                {""de-*-DE"", ""de-DE, de-de, de-Latn-DE, de-Latf-DE, de-DE-x-goethe, ""
+                        + ""de-Latn-DE-1996, de-Deva-DE, de, de-x-DE, de-Deva"",
+                        MAP_EXTENDED_RANGES, ""de-DE, de-DE-x-goethe""},
+
+                {""de-DE"", ""de-DE, de-de, de-Latn-DE, de-Latf-DE, de-DE-x-goethe, ""
+                        + ""de-Latn-DE-1996, de-Deva-DE, de, de-x-DE, de-Deva"",
+                        REJECT_EXTENDED_RANGES, ""de-DE, de-DE-x-goethe""},
+
+                // The next test in this chain is in testLFilterTagsIAE.
         };
     }
 
@@ -380,6 +414,15 @@ public class Bug7069824 {
                         ranges, tags, expectedTags, actualTags));
     }
 
+    @Test(expectedExceptions = IllegalArgumentException.class)
+    public void testLFilterTagsIAE() {
+        String ranges = ""de-*-DE"";
+        String tags = ""de-DE, de-de, de-Latn-DE, de-Latf-DE, de-DE-x-goethe, ""
+                + ""de-Latn-DE-1996, de-Deva-DE, de, de-x-DE, de-Deva"";
+        List<LanguageRange> priorityList = LanguageRange.parse(ranges);
+        showLanguageTags(Locale.filterTags(priorityList, generateLanguageTags(tags), REJECT_EXTENDED_RANGES));
+    }
+
     @Test(dataProvider = ""LLookupData"")
     public void testLLookup(String ranges, String tags, String expectedLocale) {
         List<LanguageRange> priorityList = LanguageRange.parse(ranges);
-- 
2.25.1



FREQUENCY : always


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-01 21:31;tongwan;LocaleFilterTagsTest.java;https://bugs.openjdk.org/secure/attachment/96886/LocaleFilterTagsTest.java",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uunn:",9223372036854775807,b04,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7644fb4c,,,,,,,,,"2021-10-31 21:43;tongwan;Ask the submitter use expectedTags.containsAll(actualTags) instead of  expectedTags.equals(actualTags), ;;;","2021-11-01 21:30;tongwan;Received further information from the submitter:
expectedTags.equals(actualTags) is required since the order of the filtered tags is guaranteed by Locale.filterTags. (In other words, the assertion we want is containsExactly.)

You could also confirm that this is the case since the matching logic for non-""*"" is order-sensitive.

The JavaDoc for Locale.filterTags says that:
""Returns:a list of matching language tags sorted in descending order based on priority or weight, or an empty list if nothing matches. The list is modifiable.""

;;;","2021-11-01 21:32;tongwan;The observations on Windows 10:
JDK 8: Failed, all tests failed.
JDK 11: Failed.
JDK 17: Failed.
JDK 18ea+1: Failed.;;;","2021-12-09 19:27;tongwan;From the submitter as for creating PR:
I can do that.

Previously, I've submitted patches to compiler-dev@openjdk.java.net. However, it looks like the process has changed. I will:
•	Sign the OCA
•	Open a PR in https://github.com/openjdk/jdk and refer to https://bugs.openjdk.java.net/browse/JDK-8276302
•	Send the PR link in a follow-up email so you could assign reviewers to it
•	Address comments in the PR and get it merged
Let me know if there's anything else I should do. Thank you.

;;;","2021-12-09 19:28;tongwan;Further information about PR from the submitter:
All done. The PR is at https://github.com/openjdk/jdk/pull/6789. I need to wait for Oracle to review the signed OCA but I've written ""/signed"" as instructed.
Please let me know when I should continue with the next step. Thank you.
;;;","2021-12-19 18:48;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk/pull/6789
Date: 2021-12-10 00:02:31 +0000
;;;","2021-12-23 06:12;roboduke;Changeset: 87cc4e50
Author:    Daniel Le <greenrecyclebin@gmail.com>
Committer: Naoto Sato <naoto@openjdk.org>
Date:      2021-12-23 14:11:11 +0000
URL:       https://git.openjdk.java.net/jdk/commit/87cc4e5009f6b900c62a91dda1c2f98e4821a492
;;;",,,,,,,,,,,,,,
Clean up incorrect client-libs ProblemList.txt entries,JDK-8276266,5061593,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prr,prr,prr,2021-11-01 17:32,2022-06-09 22:16,2023-10-01 09:57,2022-06-02 15:47,,,,,,,,,,,,,,19,client-libs,,0,,,,,,,,,,,,,,,,,"There are many client-libs jtreg tests in the ProblemList.txt and some need to be cleaned up.

Reasons include
- An entry is for a bug closed as a duplicate - where the other bug may be open or resolved. If it is open we need to map to that, if it is resolved we need to remove the problem list entries

- An entry is for a bug closed as ""not reproducible"". 
  Here we need to verify that action was correct.

- An entry is for a bug which is resolved, which suggests that it was overlooked to update the problem list when it was fixed.

Whenever removing an entry - we should verify the test does not still fail, although very intermittent failures may unfortunately be missed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uv6j:",9223372036854775807,b26,,,,,,,,,,,,,"2021-11-01 17:34;prr;There are just a very small number entries that need to be cleaned up - a few that are marked as dups of open bugs
and a few that are resolved bugs.;;;","2022-06-01 12:20;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8980
Date: 2022-06-01 19:13:41 +0000;;;","2022-06-02 15:48;dukebot;Changeset: 2776ff3b
Author:    Phil Race <prr@openjdk.org>
Date:      2022-06-02 22:44:39 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2776ff3b038e53703138e5ff09d5b666cbe26ba9
;;;",,,,,,,,,,,,,,,,,,
jcmd man page is outdated,JDK-8276265,5061592,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,dholmes,dholmes,dholmes,2021-11-01 17:12,2021-11-17 17:13,2023-10-01 09:57,2021-11-11 14:11,18,,,,,,,,,,,,,18,hotspot,,0,manpage,,,,,,,,,,,,,,,,"jcmd man page is outdated:

Missing from man page:
- Compiler.perfmap
- System.trim_native_heap
- VM.cds
- VM.classloaders
- VM.events
- VM.metaspace

Documentation in man page outdated:
- GC.class_histogram  (-parallel missing)
- GC.heap_dump
- JFR.check, JFR.configure, JFR.dump, JFR.start, JFR.stop all differ in text (e.g. examples missing from man page)
- ManagementAgent.start - man page mentiones ""jmxremote.ssl.enabled.cipher.suite"" (note singular) which I cannot find in help text
- Thread.print (misses -e)

Sorting in man page not alphabetical.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276982,JDK-8203682,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-02 02:27;stuefe;all-commands.txt;https://bugs.openjdk.org/secure/attachment/96888/all-commands.txt",,,,,,,,,,,,,,,,,,b18,11,,,,,,,,"0|i2uv6b:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2846162a,,,,,,,,,"2021-11-01 23:26;stuefe;I can certainly fix this, but are man pages still maintained? I found this: https://bugs.openjdk.java.net/browse/JDK-8207365 which seems to indicate they aren't. At least wrt jcmd, the man page is very outdated. I think nobody is aware this even exists.;;;","2021-11-01 23:49;dholmes;We have certainly had a problem with people not knowing the jcmd manpage exists and the status of the man pages in general has been somewhat up in the air (and the actual sources (markdown format) remain in the Oracle internal repo with only the nroff formatted versions exported in the OpenJDK repo). But we have been trying to make the manpages more relevant and actively keep the primary set up to date. I think jcmd has suffered from a lack of ownership.

If you, [~stuefe], can provide the text I can add it to the markdown source and generate the nroff version. Thanks.;;;","2021-11-02 00:07;stuefe;Hi David,

How about this. AFAICT the man page contains the command descriptions pretty much verbatim. We could generate the man page sources (or the Oracle-internal sources) directly from jcmd help text.

Today, jcmd can already print a brief command list using ""jcmd help -all"". That contains the command name and the one line description text. We could extend that to print all command details (Impact, suboptions etc). The resulting output would be easily digestable by your tools. I think that would be easier than to fix all commands by hand. And after all, we want the command help, command man page and whatever online resources we have to say the same thing, right?

p.s. I am very much in favor of good man pages btw. This helps also the downstream Linux distros.;;;","2021-11-02 01:00;dholmes;I don't think one-size-fits-all help text is right. The  text from `jcmd help` is likely much briefer than what you would expect from a manpage or other online document IMO.

And isolating the help text to an external file that can be processed by other doc tools is a far bigger effort than what I had envisaged here.;;;","2021-11-02 02:37;stuefe;Hi David,

I looked closer and identified a number of commands outdated or outright missing from the manpage. I don't think making a bug for each of them is effective, so I changed the Issue.

I prepared a text document for you which contains all the information which need to be added.

I did not want a fully automated process, just a help for the occasional maintainer. E.g. the maintainer could call ""jcmd -allall"" and get a list of all commands, diff that manually against the current man page sources (as I just did) and update those.

Wrt to man page vs help texts different: I disagree for practical and usability reasons. I think both should be identical. In practice, where the man page contains content today, it seems to be copied verbatim from the jcmd help text, so this seems to be an established practice. In fact, the help texts are sometimes more verbose than the man page (e.g. wrt JFR options).;;;","2021-11-02 02:49;dholmes;Thanks Thomas I've taken over the bug to add the new information.;;;","2021-11-09 17:38;dholmes;Summary of changes:

New Commands:

    Compiler.perfmap
    System.trim_native_heap
    VM.cds
    VM.classloaders
    VM.events
    VM.metaspace

Missing flags:

    GC.class_histogram -parallel
    GC.heap_dump - gz and overwrite options
    Thread.print -e

There are further improvements that could be made, some mentioned above. I also noticed a general confusion between arguments and options with some subcommands, but I did not try to address that.;;;","2021-11-11 14:11;roboduke;Changeset: 3445e50b
Author:    David Holmes <dholmes@openjdk.org>
Date:      2021-11-11 22:10:18 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3445e50bd573857660908a964886f94714315f4c
;;;",,,,,,,,,,,,,
java/nio/channels/Channels/TransferTo.java  failed with OOM java heap space error,JDK-8276252,5061579,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,bpb,msheppar,msheppar,2021-11-01 15:25,2022-01-31 17:27,2023-10-01 09:57,2021-11-05 10:26,,,,,,,,,,,,,,18,core-libs,,0,intermittent,noreg-self,sbr,ursqe-triaged,,,,,,,,,,,,,"test failed with OOM error

----------System.err:(20/1233)----------
java.lang.OutOfMemoryError: Java heap space
	at java.base/java.util.Arrays.copyOf(Arrays.java:3537)
	at java.base/java.io.ByteArrayOutputStream.ensureCapacity(ByteArrayOutputStream.java:100)
	at java.base/java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:130)
	at java.base/java.io.InputStream.transferTo(InputStream.java:783)
	at java.base/sun.nio.ch.ChannelInputStream.transferTo(ChannelInputStream.java:246)
	at TransferTo.checkTransferredContents(TransferTo.java:124)
	at TransferTo.testStreamContents(TransferTo.java:100)
	at TransferTo.test(TransferTo.java:70)
	at TransferTo.main(TransferTo.java:64)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:76)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:51)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.OutOfMemoryError
JavaTest Message: shutting down test

----------System.out:(1/47)----------
Seed from RandomFactory = 6215617730284918972L
result: Failed. Execution failed: `main' threw exception: java.lang.OutOfMemoryError: Java heap space


test result: Failed. Execution failed: `main' threw exception: java.lang.OutOfMemoryError: Java heap space",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,linux,,,,,,"0|i2uv3f:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,,,"2021-11-02 15:29;bpb;This has not (yet) been observed in the CI. The working assumption is that it fails in an agent VM running multiple tests which in the aggregate use up memory.;;;","2021-11-03 10:29;msheppar;I've just checked and the test is not run with default option, but with explicit setting of 512MB

-J-Xmx512m \
-vmoption:-Xmx512m -J-Xmx512m \
-vmoption:-Xmx512m \
-vmoption:-XX:MaxRAMPercentage=$MAX_RAM_PERCENTAGE 

MAX_RAM_PERCENTAGE == 25/18;;;","2021-11-05 10:26;roboduke;Changeset: b01f1073
Author:    Brian Burkhalter <bpb@openjdk.org>
Date:      2021-11-05 17:25:06 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b01f1073f9691c40fc15b7ed67ae2e019ff729ea
;;;",,,,,,,,,,,,,,,,,,
JVM does not flag constant class entries ending in '/',JDK-8276241,5061562,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,hseigel,hseigel,hseigel,2021-11-01 10:53,2021-12-15 17:33,2023-10-01 09:57,2021-12-13 05:41,18,,,,,,,,,,,,,19,hotspot,,0,classloading,,,,,,,,,,,,,,,,"Originally reported here:

http://mail.openjdk.java.net/pipermail/hotspot-dev/2021-October/055614.html

For class files with class file version < 49, the JVM fails to throw ClassFormatError exceptions for CONSTANT_Class_info entries that end in '/'.",,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276657,,,JDK-8278448,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uuzn:",9223372036854775807,b02,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-01 14:45;dholmes;[~hseigel] so are we skipping ClassFileParser::verify_unqualified_name for old classfiles?;;;","2021-11-02 05:15;hseigel;[~dholmes] Yes, we are skipping verify_unqualified_name().  Here's the relevant code in ClassFileParser::verify_legal_class_name():

    } else if (_major_version < JAVA_1_5_VERSION) {
      if (bytes[0] != JVM_SIGNATURE_SPECIAL) {
        p = skip_over_field_name(bytes, true, length);
        legal = (p != NULL) && ((p - bytes) == (int)length);
      }
    } else {
      legal = verify_unqualified_name(bytes, length, LegalClass);
;;;","2021-11-02 11:17;mseledtsov;ILW = MLM = P4;;;","2021-12-02 19:27;dholmes;It is unusual for us to make backward-incompatible changes for really old classfiles. This at least needs a CSR request.;;;","2021-12-13 05:41;roboduke;Changeset: 15996e40
Author:    Harold Seigel <hseigel@openjdk.org>
Date:      2021-12-13 13:40:54 +0000
URL:       https://git.openjdk.java.net/jdk/commit/15996e407563eda844266f1cbcdc20be74b4b4e4
;;;",,,,,,,,,,,,,,,,
Trivially clean up locale-related code,JDK-8276234,5061548,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prappo,prappo,prappo,2021-11-01 07:31,2021-11-09 09:18,2023-10-01 09:57,2021-11-01 15:51,18,,,,,,,,,,,,,18,core-libs,,0,,,,,,,,,,,,,,,,,The soon-to-be-linked PR describes the change.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uuwj:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7644fb4c,,,,,,,,,"2021-11-01 15:51;roboduke;Changeset: 2eafa036
Author:    Pavel Rappo <prappo@openjdk.org>
Date:      2021-11-01 22:50:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2eafa036c03d3e8f3dba8f67dd37b484874dc3d3
;;;",,,,,,,,,,,,,,,,,,,,
ciReplay: SIGSEGV when replay compiling lambdas,JDK-8276231,5061545,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,dlong,chagedorn,chagedorn,2021-11-01 06:52,2021-12-13 02:51,2023-10-01 09:57,2021-11-16 09:26,18,,,,,,,,,,,,,18,hotspot,,0,ci-replay,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,,"Given the following Test.java:

public class Test {
    public static void main(String[] args) {
    }
}

Results in a SIGSEGV when replay compiling:
$ java -Xcomp -XX:CompileCommand=compileonly,com.sun.tools.javac.parser.JavacParser\$\$Lambda*::* -XX:CompileCommand=option,com.sun.tools.javac.parser.JavacParser\$\$Lambda*::*,bool,DumpReplay,true Test.java
# Picking the first dumped replay file
$ java -XX:+ReplayCompiles -XX:+ReplayIgnoreInitErrors -XX:ReplayDataFile=replay_pid0x269fd_compid71.log

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007f09dfba9a2c, pid=157857, tid=157858
#
# JRE version: Java(TM) SE Runtime Environment (18.0) (slowdebug build 18-internal+0-2021-11-01-1028080.christian...)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (slowdebug 18-internal+0-2021-11-01-1028080.christian..., mixed mode, tiered, compressed oops, compressed class ptrs, serial gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0x591a2c]  Array<unsigned short>::length() const+0xc
.........
Command Line: -XX:+ReplayCompiles -XX:+ReplayIgnoreInitErrors -XX:ReplayDataFile=replay_pid0x269fd_compid71.log 
.........
Stack: [0x00007f3380f95000,0x00007f3381096000],  sp=0x00007f3381094470,  free space=1021k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x591a2c]  Array<unsigned short>::length() const+0xc
V  [libjvm.so+0x7ec268]  Array<unsigned short>::index_of(unsigned short const&) const+0x1c
V  [libjvm.so+0x7ebea5]  Array<unsigned short>::find(unsigned short const&)+0x23
V  [libjvm.so+0x7e375c]  ConstantPool::cp_to_object_index(int)+0x34
V  [libjvm.so+0x7e5416]  ConstantPool::resolve_constant_at_impl(constantPoolHandle const&, int, int, bool*, JavaThread*)+0xc2
V  [libjvm.so+0x5911c9]  ConstantPool::find_cached_constant_at(int, bool&, JavaThread*)+0x51
V  [libjvm.so+0x7199e2]  CompileReplay::parse_cp_ref(JavaThread*)+0x872
V  [libjvm.so+0x719d06]  CompileReplay::parse_klass(JavaThread*)+0x6a
V  [libjvm.so+0x71b300]  CompileReplay::process_instanceKlass(JavaThread*)+0x24
V  [libjvm.so+0x71a3c7]  CompileReplay::process_command(JavaThread*)+0x203
V  [libjvm.so+0x71a12b]  CompileReplay::process(JavaThread*)+0x5b
V  [libjvm.so+0x717012]  ciReplay::replay_impl(JavaThread*)+0xf2
V  [libjvm.so+0x716c80]  ciReplay::replay(JavaThread*)+0x18
V  [libjvm.so+0xb99932]  JNI_CreateJavaVM_inner(JavaVM_**, void**, void*)+0x2c9
V  [libjvm.so+0xb99a76]  JNI_CreateJavaVM+0x32
C  [libjli.so+0x7456]  InitializeJVM+0x13d
C  [libjli.so+0x4251]  JavaMain+0xdc
C  [libjli.so+0xad69]  ThreadJavaMain+0x27",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8254106,,,,,,,,,,,,,,,JDK-8271911,,,,,,,,,,"2021-11-01 06:53;chagedorn;hs_err_pid158246.log;https://bugs.openjdk.org/secure/attachment/96884/hs_err_pid158246.log","2021-11-01 06:51;chagedorn;replay_pid0x269fd_compid71.log;https://bugs.openjdk.org/secure/attachment/96883/replay_pid0x269fd_compid71.log",,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uuvv:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-01 12:23;dlong;ILW = crash in compiler replay = MMH = P3;;;","2021-11-12 19:31;dlong;Linking the holder class first before trying to look up the constant pool object fixes the crash.;;;","2021-11-16 09:26;roboduke;Changeset: e5ffdf91
Author:    Dean Long <dlong@openjdk.org>
Date:      2021-11-16 17:25:38 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e5ffdf9120c14b38e4c8794888d2002e2686ebfc
;;;",,,,,,,,,,,,,,,,,,
ciReplay: SIGSEGV if classfile for replay compilation is not present after JDK-8275868,JDK-8276227,5061540,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,chagedorn,chagedorn,chagedorn,2021-11-01 05:57,2021-11-12 00:01,2023-10-01 09:57,2021-11-04 01:54,18,,,,,,,,,,,,,18,hotspot,,0,ci-replay,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,,"The fix for JDK-8275868 only works if the class file for the method to be replay compiled is present. Otherwise, it results in a SIGSEGV because it tries to access the protection domain of a failed to load class (i.e. a NULL pointer).

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007ffff66063c6, pid=236864, tid=236868
#
# JRE version: Java(TM) SE Runtime Environment (18.0) (slowdebug build 18-internal+0-2021-11-01-1028080.christian...)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (slowdebug 18-internal+0-2021-11-01-1028080.christian..., mixed mode, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0x71b3c6]  CompileReplay::process_instanceKlass(JavaThread*)+0x5a",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275868,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uuur:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-11-01 06:09;chagedorn;ILW = Segfault when replay compiling without class files, low, make sure that class file is present = HLM = P3;;;","2021-11-04 01:54;roboduke;Changeset: a1f4c428
Author:    Christian Hagedorn <chagedorn@openjdk.org>
Date:      2021-11-04 08:53:37 +0000
URL:       https://git.openjdk.java.net/jdk/commit/a1f4c428ba1b78a4e18afb87c94a5c731a5aa706
;;;",,,,,,,,,,,,,,,,,,,
JFR: Clean up jdk.jfr.dcmd,JDK-8276218,5061530,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,egahlin,egahlin,egahlin,2021-11-01 03:46,2021-11-09 09:17,2023-10-01 09:57,2021-11-01 05:34,,,,,,,,,,,,,,18,hotspot,,0,,,,,,,,,,,,,,,,,The System.out.println statement in AbstractDcmd should be removed and the unused source field in DcmdStart deleted.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uusj:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2021-11-01 05:34;roboduke;Changeset: 4ac8403f
Author:    Erik Gahlin <egahlin@openjdk.org>
Date:      2021-11-01 12:33:10 +0000
URL:       https://git.openjdk.java.net/jdk/commit/4ac8403f9a4cedcb5d56bcd34a6bbfa51d67ca18
;;;",,,,,,,,,,,,,,,,,,,,
Negated character classes performance regression in Pattern,JDK-8276216,5061526,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,simonis,xliu,xliu,2021-11-01 00:56,2023-05-17 08:59,2023-10-01 09:57,2021-11-23 01:16,11,17,18,,,,,,,,,,,18,core-libs,,0,amazon-interest,c2,oracle-triage-18,performance,,,,,,,,,,,,,"We observe a significant performance regression in the regex Pattern class for patterns containing negated character classes. The regression was introduced in JDK 9 when function objects implemented as anonymous inner classes in java.util.regex.Pattern were replaced by lambda functions. 

From jdk8u to the tip, CPU utilization increases from 2.14s to 3.25s, 51.8% more.  The total runtime increases from 1.84s to 3.12s, or 1.7x slower. 

Test: 
perf stat -r 20 java -XX:-TieredCompilation Repro on x86_64 Linux. 
----------------------------
jdk8u: 
          2,140.05 msec task-clock                #    1.163 CPUs utilized            ( +-  1.48% )
...
           1.83939 +- 0.00343 seconds time elapsed  ( +-  0.19% )

----------------------------
jdk11u
          3,626.60 msec task-clock                #    1.128 CPUs utilized            ( +-  0.90% )
           3.21589 +- 0.00658 seconds time elapsed  ( +-  0.20% )

----------------------------
tip(6d1d4d52928ed38bbc73ddcbede5389995a8e65f)
          3,257.17 msec task-clock                #    1.043 CPUs utilized            ( +-  0.15% )
           3.12437 +- 0.00545 seconds time elapsed  ( +-  0.17% )",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-01 00:54;xliu;Repro.java;https://bugs.openjdk.org/secure/attachment/96869/Repro.java",,,,,,,,generic,,,,,,,,,,,,,,,,,,,"0|i2uurn:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@557d5cff,,,,,,,,,"2021-11-01 11:50;dlong;ILW = performance regression in one method = MMH = P3;;;","2021-11-23 01:16;roboduke;Changeset: 79350b9b
Author:    Volker Simonis <simonis@openjdk.org>
Date:      2021-11-23 09:15:20 +0000
URL:       https://git.openjdk.java.net/jdk/commit/79350b9b4f42e43a8ab27ea76b9115dae6f448af
;;;",,,,,,,,,,,,,,,,,,,
Some call sites doesn't pass the parameter 'size' to SharedRuntime::dtrace_object_alloc(_base),JDK-8276209,5061517,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ddong,ddong,ddong,2021-10-31 08:04,2021-11-15 15:08,2023-10-01 09:57,2021-11-08 06:32,,,,,,,,,,,,,,18,hotspot,,0,,,,,,,,,,,,,,,,,"JDK-8039904 added a new parameter 'size' to SharedRuntime::dtrace_object_alloc and dtrace_object_alloc_base, but didn't modified the call sites(interpreter/c1/c2).
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uupn:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2846162a,,,,,,,,,"2021-11-02 08:07;ddong;@coleenp Could you help review this fix?;;;","2021-11-08 06:32;roboduke;Changeset: c815c5cb
Author:    Denghui Dong <ddong@openjdk.org>
Date:      2021-11-08 14:30:54 +0000
URL:       https://git.openjdk.java.net/jdk/commit/c815c5cbbb0b6a2aebd0a38cb930c74bd665d082
;;;",,,,,,,,,,,,,,,,,,,
"vmTestbase/nsk/jdb/repeat/repeat001/repeat001.java fails with ""AssertionError: Unexpected output""",JDK-8276208,5061516,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,cjplummer,dcubed,dcubed,2021-10-31 06:58,2021-11-10 17:51,2023-10-01 09:57,2021-11-03 11:19,18,,,,,,,,,,,,,18,core-svc,,0,intermittent,tier4,tier6,tier7,tier8,,,,,,,,,,,,"The following test failed in the an adhoc Mach5 job set:

vmTestbase/nsk/jdb/repeat/repeat001/repeat001.java

Here's a snippet from the log file:

#section:main
----------messages:(4/1765)----------
command: main nsk.jdb.repeat.repeat001.repeat001 -arch=linux-x64 -waittime=5 -debugee.vmkind=java -transport.address=dynamic -jdb=/opt/mach5/mesos/work_dir/jib-master/install/2021-10-30-1448588.daniel.daugherty.8273967_for_jdk18.git/linux-x64-debug.jdk/jdk-18/fastdebug/bin/jdb -jdb.option=""-J-Duser.language=en -J-Duser.country=US"" -java.options=""-XX:MaxRAMPercentage=4.16667 -Djava.io.tmpdir=/opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S14051/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/0e320c3c-7a68-4dfc-a34b-a4efea83d66d/runs/b1e54477-7408-46d3-8b57-0f3c9fd27b35/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jdb/tmp -Xcomp -XX:+CreateCoredumpOnCrash -ea -esa -XX:CompileThreshold=100 -XX:+UnlockExperimentalVMOptions -server -XX:+TieredCompilation"" -workdir=. -debugee.vmkeys=""-XX:MaxRAMPercentage=4.16667 -Djava.io.tmpdir=/opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S14051/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/0e320c3c-7a68-4dfc-a34b-a4efea83d66d/runs/b1e54477-7408-46d3-8b57-0f3c9fd27b35/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jdb/tmp -Xcomp -XX:+CreateCoredumpOnCrash -ea -esa -XX:CompileThreshold=100 -XX:+UnlockExperimentalVMOptions -server -XX:+TieredCompilation""
reason: User specified action: run main/othervm nsk.jdb.repeat.repeat001.repeat001 -arch=${os.family}-${os.simpleArch} -waittime=5 -debugee.vmkind=java -transport.address=dynamic -jdb=${test.jdk}/bin/jdb -jdb.option=""-J-Duser.language=en -J-Duser.country=US"" -java.options=""${test.vm.opts} ${test.java.opts}"" -workdir=. -debugee.vmkeys=""${test.vm.opts} ${test.java.opts}"" 
Mode: othervm [/othervm specified]
elapsed time (seconds): 118.17
----------configuration:(0/0)----------
----------System.out:(16/1545)----------
Launching process by array of args: 
    args[0]: >/opt/mach5/mesos/work_dir/jib-master/install/2021-10-30-1448588.daniel.daugherty.8273967_for_jdk18.git/linux-x64-debug.jdk/jdk-18/fastdebug/bin/jdb<
    args[1]: >-J-XX:MaxRAMPercentage=4.16667<
    args[2]: >-J-Djava.io.tmpdir=/opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S14051/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/0e320c3c-7a68-4dfc-a34b-a4efea83d66d/runs/b1e54477-7408-46d3-8b57-0f3c9fd27b35/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jdb/tmp<
    args[3]: >-J-Xcomp<
    args[4]: >-J-XX:+CreateCoredumpOnCrash<
    args[5]: >-J-ea<
    args[6]: >-J-esa<
    args[7]: >-J-XX:CompileThreshold=100<
    args[8]: >-J-XX:+UnlockExperimentalVMOptions<
    args[9]: >-J-server<
    args[10]: >-J-XX:+TieredCompilation<
    args[11]: >-J-Duser.language=en<
    args[12]: >-J-Duser.country=US<
    args[13]: >-connect<
    args[14]: >com.sun.jdi.CommandLineLaunch:vmexec=java,options= ""-XX:MaxRAMPercentage=4.16667"" ""-Djava.io.tmpdir=/opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S14051/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/0e320c3c-7a68-4dfc-a34b-a4efea83d66d/runs/b1e54477-7408-46d3-8b57-0f3c9fd27b35/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jdb/tmp"" ""-Xcomp"" ""-XX:+CreateCoredumpOnCrash"" ""-ea"" ""-esa"" ""-XX:CompileThreshold=100"" ""-XX:+UnlockExperimentalVMOptions"" ""-server"" ""-XX:+TieredCompilation"",main=nsk.jdb.repeat.repeat001.repeat001a<
----------System.err:(15/875)----------
java.lang.AssertionError: Unexpected output
	at nsk.jdb.repeat.repeat001.repeat001.runCasesNoCleanup(repeat001.java:142)
	at nsk.jdb.repeat.repeat001.repeat001.runCases(repeat001.java:87)
	at nsk.share.jdb.JdbTest.runTest(JdbTest.java:149)
	at nsk.jdb.repeat.repeat001.repeat001.run(repeat001.java:77)
	at nsk.jdb.repeat.repeat001.repeat001.main(repeat001.java:71)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.AssertionError: Unexpected output
JavaTest Message: shutting down test

STATUS:Failed.`main' threw exception: java.lang.AssertionError: Unexpected output
----------rerun:(42/10433)*----------


The test task's JVM args are:

-Xcomp -XX:+CreateCoredumpOnCrash -ea -esa -XX:CompileThreshold=100 -XX:+UnlockExperimentalVMOptions -server -XX:+TieredCompilation


The test is complaining about ""Unexpected output""
but I'm not seeing any unexpected output in the log file.

This is a new test added by the following:

JDK-8271356 Modify jdb to treat an empty command as a repeat of the previous command",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8271356,,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-31 07:17;dcubed;repeat001-windows-x64.log;https://bugs.openjdk.org/secure/attachment/96865/repeat001-windows-x64.log","2021-10-31 07:03;dcubed;repeat001.log;https://bugs.openjdk.org/secure/attachment/96864/repeat001.log",,,,,,,x86_64,,,,,,,,,,,,,linux,os_x,windows,,,,"0|i2uupf:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3397f701,,,,,,,,,"2021-10-31 07:15;dcubed;The windows-x64 failure mode in Tier6 is different:

vmTestbase/nsk/jdb/repeat/repeat001/repeat001.java

#section:main
----------messages:(4/1355)*----------
command: main nsk.jdb.repeat.repeat001.repeat001 -arch=windows-x64 -waittime=5 -debugee.vmkind=java -transport.address=dynamic -jdb=c:\\ade\\mesos\\work_dir\\jib-master\\install\\2021-10-30-1448588.daniel.daugherty.8273967_for_jdk18.git\\windows-x64-debug.jdk\\jdk-18\\fastdebug/bin/jdb -jdb.option=""-J-Duser.language=en -J-Duser.country=US"" -java.options=""-XX:MaxRAMPercentage=4.16667 -Djava.io.tmpdir=t:\\testoutput\\test-support\\jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jdb\\tmp -Xcomp -XX:+CreateCoredumpOnCrash -ea -esa -XX:CompileThreshold=100 -XX:+UnlockExperimentalVMOptions -server -XX:+TieredCompilation"" -workdir=. -debugee.vmkeys=""-XX:MaxRAMPercentage=4.16667 -Djava.io.tmpdir=t:\\testoutput\\test-support\\jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jdb\\tmp -Xcomp -XX:+CreateCoredumpOnCrash -ea -esa -XX:CompileThreshold=100 -XX:+UnlockExperimentalVMOptions -server -XX:+TieredCompilation""
reason: User specified action: run main/othervm nsk.jdb.repeat.repeat001.repeat001 -arch=${os.family}-${os.simpleArch} -waittime=5 -debugee.vmkind=java -transport.address=dynamic -jdb=${test.jdk}/bin/jdb -jdb.option=""-J-Duser.language=en -J-Duser.country=US"" -java.options=""${test.vm.opts} ${test.java.opts}"" -workdir=. -debugee.vmkeys=""${test.vm.opts} ${test.java.opts}"" 
Mode: othervm [/othervm specified]
elapsed time (seconds): 123.011
----------configuration:(0/0)----------
----------System.out:(133/6573)*----------
Launching process by array of args: 
    args[0]: >c:\\ade\\mesos\\work_dir\\jib-master\\install\\2021-10-30-1448588.daniel.daugherty.8273967_for_jdk18.git\\windows-x64-debug.jdk\\jdk-18\\fastdebug/bin/jdb<
    args[1]: >-J-XX:MaxRAMPercentage=4.16667<
    args[2]: >-J-Djava.io.tmpdir=t:\\testoutput\\test-support\\jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jdb\\tmp<
    args[3]: >-J-Xcomp<
    args[4]: >-J-XX:+CreateCoredumpOnCrash<
    args[5]: >-J-ea<
    args[6]: >-J-esa<
    args[7]: >-J-XX:CompileThreshold=100<
    args[8]: >-J-XX:+UnlockExperimentalVMOptions<
    args[9]: >-J-server<
    args[10]: >-J-XX:+TieredCompilation<
    args[11]: >-J-Duser.language=en<
    args[12]: >-J-Duser.country=US<
    args[13]: >-connect<
    args[14]: >com.sun.jdi.CommandLineLaunch:vmexec=java,options= ""-XX:MaxRAMPercentage=4.16667"" ""-Djava.io.tmpdir=t:\\testoutput\\test-support\\jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jdb\\tmp"" ""-Xcomp"" ""-XX:+CreateCoredumpOnCrash"" ""-ea"" ""-esa"" ""-XX:CompileThreshold=100"" ""-XX:+UnlockExperimentalVMOptions"" ""-server"" ""-XX:+TieredCompilation"",main=nsk.jdb.repeat.repeat001.repeat001a<
#>  
#>  WARNING: switching log to verbose mode,
#>      because error is complained
#>  
launcher > Starting jdb launching local debuggee
Creating file for jdb stdout stream: .\\jdb.stdout
Creating file for jdb session: .\\jdb.session
Creating file for jdb stderr stream: .\\jdb.stderr
Setting first breakpoint
Sending command: stop in nsk.jdb.repeat.repeat001.repeat001a.main
reply[0]: Deferring breakpoint nsk.jdb.repeat.repeat001.repeat001a.main.
It will be set after the class is loaded.
reply[1]: > 
Starting debuggee class
Sending command: run 
reply[0]: run nsk.jdb.repeat.repeat001.repeat001a
reply[1]: Set uncaught java.lang.Throwable
reply[2]: Set deferred uncaught java.lang.Throwable
reply[3]: > 
reply[4]: VM Started: Set deferred breakpoint nsk.jdb.repeat.repeat001.repeat001a.main
reply[5]: 
reply[6]: Breakpoint hit: ""thread=main"", nsk.jdb.repeat.repeat001.repeat001a.main(), line=37 bci=0
reply[7]: 37           System.exit(repeat001.JCK_STATUS_BASE + _repeat001a.runIt(args, System.out));
reply[8]: 
reply[9]: main[1] 
Test cases starts.
Sending command: repeat 
reply[0]: Repeat is off
reply[1]: main[1] 
Sending command: list 
reply[0]: 33    public class repeat001a {
reply[1]: 34        static repeat001a _repeat001a = new repeat001a();
reply[2]: 35    
reply[3]: 36        public static void main(String[] args) {
reply[4]: 37 =>        System.exit(repeat001.JCK_STATUS_BASE + _repeat001a.runIt(args, System.out));
reply[5]: 38        }
reply[6]: 39    
reply[7]: 40        public int runIt(String[] args, PrintStream out) {
reply[8]: 41            JdbArgumentHandler argumentHandler = new JdbArgumentHandler(args);
reply[9]: 42            Log log = new Log(out, argumentHandler);
reply[10]: main[1] 
Sending command: list 
reply[0]: 33    public class repeat001a {
reply[1]: 34        static repeat001a _repeat001a = new repeat001a();
reply[2]: 35    
reply[3]: 36        public static void main(String[] args) {
reply[4]: 37 =>        System.exit(repeat001.JCK_STATUS_BASE + _repeat001a.runIt(args, System.out));
reply[5]: 38        }
reply[6]: 39    
reply[7]: 40        public int runIt(String[] args, PrintStream out) {
reply[8]: 41            JdbArgumentHandler argumentHandler = new JdbArgumentHandler(args);
reply[9]: 42            Log log = new Log(out, argumentHandler);
reply[10]: main[1] 
Sending command: 
reply[0]: main[1] 
Sending command: repeat on
reply[0]: main[1] 
Sending command: repeat 
reply[0]: Repeat is on
reply[1]: main[1] 
Sending command: print 0
reply[0]:  0 = 0
reply[1]: main[1] 
Sending command: 
reply[0]: main[1] 
Sending command: 2 2 up 
reply[0]: End of stack.
reply[1]: main[1] 
Sending command: cont
reply[0]: End of stack.
reply[1]: main[1] > 
Sending command: quit
# ERROR: Caught unexpected exception while executing the test: nsk.share.Failure: Debuggee did not exit after 1 <cont> commands
The following stacktrace is for failure analysis.
nsk.share.TestFailure: Caught unexpected exception while executing the test: nsk.share.Failure: Debuggee did not exit after 1 <cont> commands
	at nsk.share.Log.logExceptionForFailureAnalysis(Log.java:432)
	at nsk.share.Log.complain(Log.java:403)
	at nsk.share.jdb.JdbTest.failure(JdbTest.java:74)
	at nsk.share.jdb.JdbTest.runTest(JdbTest.java:158)
	at nsk.jdb.repeat.repeat001.repeat001.run(repeat001.java:77)
	at nsk.jdb.repeat.repeat001.repeat001.main(repeat001.java:71)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)
nsk.share.Failure: Debuggee did not exit after 1 <cont> commands
	at nsk.share.jdb.Jdb.contToExit(Jdb.java:869)
	at nsk.jdb.repeat.repeat001.repeat001.runCases(repeat001.java:89)
	at nsk.share.jdb.JdbTest.runTest(JdbTest.java:149)
	at nsk.jdb.repeat.repeat001.repeat001.run(repeat001.java:77)
	at nsk.jdb.repeat.repeat001.repeat001.main(repeat001.java:71)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)
Waiting for jdb exits
jdb normally exited
# ERROR: TEST FAILED
The following stacktrace is for failure analysis.
nsk.share.TestFailure: TEST FAILED
	at nsk.share.Log.logExceptionForFailureAnalysis(Log.java:432)
	at nsk.share.Log.complain(Log.java:403)
	at nsk.share.jdb.JdbTest.runTest(JdbTest.java:225)
	at nsk.jdb.repeat.repeat001.repeat001.run(repeat001.java:77)
	at nsk.jdb.repeat.repeat001.repeat001.main(repeat001.java:71)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)


#>  
#>  SUMMARY: Following errors occured
#>      during test execution:
#>  
# ERROR: Caught unexpected exception while executing the test: nsk.share.Failure: Debuggee did not exit after 1 <cont> commands
# ERROR: TEST FAILED
----------System.err:(0/0)----------
----------rerun:(47/8180)*----------

The test task's JVM args are: -Xcomp -XX:+CreateCoredumpOnCrash -ea -esa -XX:CompileThreshold=100 -XX:+UnlockExperimentalVMOptions -server -XX:+TieredCompilation;;;","2021-10-31 10:27;cjplummer;For the first failure, the reason you don't see any unexpected output is because the failure is triggered by throwing AssertionError. JdbTest.runTest() does not catch Errors, only Exceptions, so it blows right past the code that enables logging when there is a failure. You can see it being enabled in the second failure with the following in the log:

#> WARNING: switching log to verbose mode,
#> because error is complained 

and then the top of the stack trace is:

nsk.share.TestFailure: TEST FAILED
at nsk.share.Log.logExceptionForFailureAnalysis(Log.java:432)
at nsk.share.Log.complain(Log.java:403)
at nsk.share.jdb.JdbTest.runTest(JdbTest.java:225) 

This is missing from the first failure. It can be fixed by calling failure(msg) rather than throwing an exception, which I think is how these errors are normally reported, although I do see some cases of throwing Failure or TestFailure instead (I'm not sure why). This fix is also need in the new list003 test.

It might be worth doing a separate CR to address this AssertError issue first, especially if it is needed in order to properly diagnose the first failure.;;;","2021-11-01 11:55;dcubed;We just had a sighting on macosx-x64 in Tier8.

I've attached a couple of the logs previously so the ""rerun"" section should be
easy to extract and modify to create a script for reproduction...;;;","2021-11-01 11:59;cjplummer;All failed runs have used the following flags:

-Xcomp -XX:+CreateCoredumpOnCrash -ea -esa -XX:CompileThreshold=100 -XX:+UnlockExperimentalVMOptions -server -XX:+TieredCompilation;;;","2021-11-03 11:19;roboduke;Changeset: c7f070f5
Author:    Jakob Cornell <jakob+gpg@jcornell.net>
Committer: Chris Plummer <cjplummer@openjdk.org>
Date:      2021-11-03 18:18:16 +0000
URL:       https://git.openjdk.java.net/jdk/commit/c7f070f5f17dad661cc3296f2e3cd7a1cd5fc742
;;;","2021-11-04 07:47;dcubed;This fix is in jdk-18+22-1428.;;;",,,,,,,,,,,,,,,
Properties.loadFromXML/storeToXML works incorrectly for supplementary characters,JDK-8276207,5061509,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,asarkar,asarkar,asarkar,2021-10-30 23:24,2022-04-08 03:44,2023-10-01 09:57,2021-11-05 17:43,9,,,,,,,,,,,,,18,core-libs,,0,regression,,,,,,,,,,,,,,,,"Properties.loadFromXML/storeToXML works incorrectly for supplementary characters after JDK-8042889 was integrated in JDK 9.

Execute the below program to store Properties with supplementary characters :

------------------------------------------------------------------------------------------------------------------------
import java.util.Properties;

public class PropertiesStoreSupplementaryCharacters {

	public static void main(String[] args) throws Exception {
		Properties properties = new Properties();

		properties.put(""Emoticons"", ""\uD83D\uDE03"");
		properties.put(""Musical Symbols"", ""\uD834\uDD1E"");
		properties.put(""CJK Unified Ideographs Extension B"", ""\uD840\uDC0B"");

		properties.storeToXML(System.out, null);
	}

}
------------------------------------------------------------------------------------------------------------------------


Output on JDK 8 is :
------------------------------------------------------------------------------------------------------------------------
<?xml version=""1.0"" encoding=""UTF-8"" standalone=""no""?>
<!DOCTYPE properties SYSTEM ""http://java.sun.com/dtd/properties.dtd"">
<properties>
<entry key=""Emoticons"">&#128515;</entry>
<entry key=""Musical Symbols"">&#119070;</entry>
<entry key=""CJK Unified Ideographs Extension B"">&#131083;</entry>
</properties>
------------------------------------------------------------------------------------------------------------------------


Output on JDK 17 is :
------------------------------------------------------------------------------------------------------------------------
<?xml version=""1.0"" encoding=""UTF-8""?>
<!DOCTYPE properties SYSTEM ""http://java.sun.com/dtd/properties.dtd"">
<properties>
<entry key=""Emoticons"">&#xd83d;&#xde03;</entry>
<entry key=""Musical Symbols"">&#xd834;&#xdd1e;</entry>
<entry key=""CJK Unified Ideographs Extension B"">&#xd840;&#xdc0b;</entry>
</properties>
------------------------------------------------------------------------------------------------------------------------

The numeric character references in JDK 17 is incorrect.


Execute the below program to load Properties with supplementary characters :

------------------------------------------------------------------------------------------------------------------------
import java.io.ByteArrayInputStream;
import java.util.Properties;

public class PropertiesLoadSupplementaryCharacters {

	public static void main(String[] args) throws Exception {
		Properties expected = new Properties();
		expected.put(""\uD834\uDD1E"", ""\uD834\uDD1E"");

		String s = ""<?xml version=\""1.0\"" encoding=\""UTF-8\""?>"" +
            	""<!DOCTYPE properties SYSTEM \""http://java.sun.com/dtd/properties.dtd\"">"" +
                ""<properties>"" +
                ""<entry key=\""&#119070;\"">&#x1d11e;</entry>"" +
                ""</properties>"";

		ByteArrayInputStream in = new ByteArrayInputStream(s.getBytes(""UTF-8""));
		Properties props = new Properties();
		props.loadFromXML(in);

		if (props.equals(expected)) {
			System.out.println(""Loaded and Expected properties are same"");
		} else {
			System.out.println(""Loaded and Expected properties are diferent"");
			System.out.println(""loaded: "" + props + "", expected: "" + expected);
		}
	}

}
------------------------------------------------------------------------------------------------------------------------

On JDK 8 it properly parses the character references. Loaded and Expected properties are same.

On JDK 17 it fails to parse the character references and throws InvalidPropertiesFormatException with below stack trace:
------------------------------------------------------------------------------------------------------------------------
Exception in thread ""main"" java.util.InvalidPropertiesFormatException: jdk.internal.org.xml.sax.SAXParseException; 
	at java.base/jdk.internal.util.xml.PropertiesDefaultHandler.load(PropertiesDefaultHandler.java:85)
	at java.base/java.util.Properties.loadFromXML(Properties.java:960)
	at com.openjdk.PropertiesLoadSupplementaryCharacters.main(PropertiesLoadSupplementaryCharacters.java:20)
Caused by: jdk.internal.org.xml.sax.SAXParseException; 
	at java.base/jdk.internal.util.xml.impl.ParserSAX.panic(ParserSAX.java:652)
	at java.base/jdk.internal.util.xml.impl.Parser.ent(Parser.java:1997)
	at java.base/jdk.internal.util.xml.impl.Parser.bqstr(Parser.java:2594)
	at java.base/jdk.internal.util.xml.impl.Parser.attr(Parser.java:1378)
	at java.base/jdk.internal.util.xml.impl.Parser.step(Parser.java:407)
	at java.base/jdk.internal.util.xml.impl.ParserSAX.parse(ParserSAX.java:477)
	at java.base/jdk.internal.util.xml.impl.ParserSAX.parse(ParserSAX.java:411)
	at java.base/jdk.internal.util.xml.impl.ParserSAX.parse(ParserSAX.java:374)
	at java.base/jdk.internal.util.xml.impl.SAXParserImpl.parse(SAXParserImpl.java:97)
	at java.base/jdk.internal.util.xml.PropertiesDefaultHandler.load(PropertiesDefaultHandler.java:83)
	... 2 more
------------------------------------------------------------------------------------------------------------------------",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8042889,,,,,,,,,,,,,,,JDK-8145974,,,,,,,,,,,,,,,,,,,,,,,,,,,,b14,9,,,,,,,,"0|i2uunv:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@38ded199,,,,,,,Verified,,"2021-10-31 00:05;alanb;[~joehw] Do you mind commenting on this issue?;;;","2021-11-01 12:53;joehw;Hi Alan, yes, will do. Thanks.;;;","2021-11-05 17:43;roboduke;Changeset: c7095b20
Author:    Anirvan Sarkar <asarkar@openjdk.org>
Committer: Joe Wang <joehw@openjdk.org>
Date:      2021-11-06 00:41:44 +0000
URL:       https://git.openjdk.java.net/jdk/commit/c7095b20d956e154d9863a7928d26285f1a0a0ac
;;;","2022-04-08 03:44;sqetools;verified;;;",,,,,,,,,,,,,,,,,
Rename TextBinding class to better express its purpose,JDK-8276206,5061505,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mstrauss,mstrauss,mstrauss,2021-10-30 07:43,2022-03-07 11:06,2023-10-01 09:57,2021-11-26 06:01,jfx17,,,,,,,,,,,,,jfx18,javafx,,0,noreg-cleanup,,,,,,,,,,,,,,,,`com.sun.javafx.scene.control.behavior.TextBinding` should probably be named `MnemonicParser`,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uumz:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@67282485,,,,,,,,,"2021-11-26 06:01;roboduke;Changeset: fc3792d5
Author:    Michael Strauß <mstrauss@openjdk.org>
Committer: Jeanette Winzenburg <fastegal@openjdk.org>
Date:      2021-11-26 13:59:48 +0000
URL:       https://git.openjdk.java.net/jfx/commit/fc3792d5cb39cd3706f28953c3f97bdecc07bba6
;;;",,,,,,,,,,,,,,,,,,,,
Shenandoah: CodeCache_lock should always be held for initializing code cache iteration,JDK-8276205,5061504,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,zgu,zgu,zgu,2021-10-30 07:20,2021-11-23 12:59,2023-10-01 09:57,2021-11-01 12:39,16-pool,17-pool,18,,,,,,,,,,,18,hotspot,,0,gc-shenandoah,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,redhat-interest,,,,,,,,,,,,"Before concurrent GC, CodeCache_lock is not required for walking CodeCache at safepoints. But it is not the case for Shenandoah, as code cache iteration can be initialized and run through safepoints.

To initialize concurrent code cache iteration, CodeCache_lock is required, even at safepoints, as the lock is acquired without safepoint check.

There are few bugs in current implementation:
1) No CodeCache_lock is held when initialize code cache iterator at safepoints.

2) Does not notify waiters upon completion of iteration at safepoints

3) Unnecessary held CodeCache_lock during concurrent code cache iteration.


",,,,,,,,,,JDK-8277683,JDK-8277339,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276801,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uumr:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-11-01 12:39;roboduke;Changeset: 99b7b95e
Author:    Zhengyu Gu <zgu@openjdk.org>
Date:      2021-11-01 19:38:49 +0000
URL:       https://git.openjdk.java.net/jdk/commit/99b7b95e014da6e491ba7adfd21de53d6ae166fe
;;;","2021-11-17 06:14;zgu;Fix Request (17u)

I would like to backport this Shenandoah specific fix to jdk17u.

This patch fixed the bug that not holding CodeCache_lock while initializing concurrent nmethod iterations, that can lead to miscount number of concurrent walker and result assertion failure.

The patch fixed a bug that prevents iterators from walking nmethod concurrently due to holding CodeCache_lock during the walk.

17u fix has been reviewed by @shade.;;;","2021-11-17 06:34;zgu;Sorry, I accidentally integrated 17u backport without an approval.

-Zhengyu;;;",,,,,,,,,,,,,,,,,,
LogFileOutput.invalid_file_vm asserts when being executed from a read only working directory,JDK-8276202,5061498,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jsjolen,stuefe,stuefe,2021-10-29 23:47,2022-05-04 23:37,2023-10-01 09:57,2022-04-30 01:02,16,17,18,,,,,,,,,,,19,hotspot,,0,logging,,,,,,,,,,,,,,,,"Executing the gtest launcher from a read-only directory makes it assert:

```
[ RUN      ] LogFileOutput.invalid_file_vm
# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/logTestUtils.inline.hpp:67
assert failed: assert(!failed) failed: failed to create directory tmplogdir#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/shared/projects/openjdk/jdk-jdk/source/test/hotspot/gtest/logging/logTestUtils.inline.hpp:67), pid=19908, tid=19908
#  assert(!failed) failed: failed to create directory tmplogdir
#
```

At the very least, this should not be an assert but a gtest error (ASSERT or EXPECT). VM asserts at this point are just rude :)

Better would be to make gtests use the OS temp dir for these kind of tests.

Arguably the best option would be not to write to the file system at all. Tests needing temp files and modifying the file system are better suited for the jtreg suite, which deals also with temp files (cleanup etc) and where tests like these typically live.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8165702,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uulf:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-02 11:19;mseledtsov;ILW = MLM = P4;;;","2022-04-12 03:24;jsjolen;The reason that VM asserts are used is because ASSERT stops execution by returning, requiring the caller to be a function which returns void. You can rewrite all of the helpers to use out parameters instead.

The issue with using in-memory files is that initialization of the logger becomes quite burdensome (LogConfiguration and LogFileOutput expects files with names).

Regardless, all tests except this failing one uses files in the temporary directory, so we can do the same here at least.;;;","2022-04-12 04:08;stuefe;> The reason that VM asserts are used is because ASSERT stops execution by returning, requiring the caller to be a function which returns void. You can rewrite all of the helpers to use out parameters instead.

Could you use EXPECT instead? That does not have this annoying restriction.;;;","2022-04-12 05:37;jsjolen;> Could you use EXPECT instead? That does not have this annoying restriction. 

You could, but for most of these it doesn't make sense for the test to continue running. So, I think I'll bite the bullet and do a minor refactoring to convert these functions to return status codes instead.

EDIT: Except they won't have status codes as return values of course :-).;;;","2022-04-27 15:33;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8238
Date: 2022-04-14 08:36:26 +0000;;;","2022-04-30 01:02;dukebot;Changeset: d9541c5e
Author:    Johan Sjölén <johan.sjolen@oracle.com>
Committer: Thomas Stuefe <stuefe@openjdk.org>
Date:      2022-04-30 08:00:26 +0000
URL:       https://git.openjdk.java.net/jdk/commit/d9541c5e9f68f2b76e6e1d09bc24750b7c9a5b5b
;;;",,,,,,,,,,,,,,,
Shenandoah: Race results degenerated GC to enter wrong entry point,JDK-8276201,5061496,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,zgu,zgu,zgu,2021-10-29 19:57,2021-11-16 12:14,2023-10-01 09:57,2021-11-01 05:18,11-pool,17-pool,18,8-shenandoah,,,,,,,,,,18,hotspot,,0,gc-shenandoah,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,redhat-interest,,,,,,,,,,"SAP reported:

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/openjdk/nb/darwinaarch64/jdk-dev/src/hotspot/share/gc/shared/satbMarkQueue.cpp:169), pid=11373, tid=17923
#  fatal error: Thread SATB queue has an unexpected active state
#
# JRE version: OpenJDK Runtime Environment (18.0.0.1) (fastdebug build 18.0.0.1-internal+0-adhoc.openjdk.jdk-dev)
# Java VM: OpenJDK 64-Bit Server VM (fastdebug 18.0.0.1-internal+0-adhoc.openjdk.jdk-dev, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, shenandoah gc, bsd-aarch64)
# Core dump will be written. Default location: /cores/core.11373
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#
",,,,,,,,,,JDK-8276853,JDK-8277226,JDK-8277255,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-29 19:57;zgu;java_error185985.log;https://bugs.openjdk.org/secure/attachment/96863/java_error185985.log",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uukz:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-10-29 20:05;zgu;There is subtle race when concurrent GC comes out of final mark safepoint, an allocation failure occurred, then control thread checks OOM conditional and triggers degenerated GC with ""mark"" degenerated point.

Degenerated GC re-executes final mark, then switching off SATB, but it is already off, because concurrent GC already completed final mark, that triggers the assertion.
 ;;;","2021-11-01 05:18;roboduke;Changeset: dbf5100d
Author:    Zhengyu Gu <zgu@openjdk.org>
Date:      2021-11-01 12:17:16 +0000
URL:       https://git.openjdk.java.net/jdk/commit/dbf5100dd705fbe4a3aeae49405ca541d581f106
;;;","2021-11-05 10:26;zgu;Fix Request (17u)

A clean backport of Shenandoah specific bug. The patch fixes a subtle race condition that results degenerated GC to enter wrong degen entry.

;;;","2021-11-10 12:12;zgu;Fix Request (11u)

I would like to backport this Shenandoah specific patch to openjdk11u. The patch fixes a subtle race condition that results degenerated GC to enter wrong degen entry.

The original patch does not apply cleanly, but 11u fix is simple and straight forward. 11u patch has been reviewed by @shade;;;",,,,,,,,,,,,,,,,,
java/nio/channels/FileChannel/LargeGatheringWrite.java fails to terminate correctly,JDK-8276199,5061494,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,bpb,msheppar,msheppar,2021-10-29 15:44,2021-11-14 23:44,2023-10-01 09:57,2021-11-04 09:34,18,,,,,,,,,,,,,18,core-libs,,0,intermittent,noreg-self,problemlist,sbr,sqe,ursqe-triaged,,,,,,,,,,,"java/nio/channels/FileChannel/LargeGatheringWrite.java has been seen to fail, but has actually passed. It is that it has not terminated in a timely manner so that jtreg agentvm reaps the test execution thread.

So this is a placeholder to record the failure.

It may be an issue with agentvm execution mode and jtreg reaper protocol",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,windows_10,,,,,,"0|i2uukj:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,,,"2021-11-02 17:04;dholmes;The timeout in the CI seems a regular timeout:

section:main
----------messages:(6/240)----------
command: main -Xmx4G LargeGatheringWrite
reason: User specified action: run main/othervm -Xmx4G LargeGatheringWrite 
Mode: othervm [/othervm specified]
Timeout information:
--- Timeout information end.
elapsed time (seconds): 502.242
----------configuration:(0/0)----------
----------System.out:(3/111)----------
Seed from RandomFactory = 266143953204284378L
Writing 5368709122 bytes of data...
Timeout refired 480 times
----------System.err:(0/0)----------
----------rerun:(41/5794)*----------

so perhaps the test is borderline and will sometimes timeout within the test (as per CI) and sometimes timeout during tear-down (as per initial report).;;;","2021-11-03 07:26;dcubed;[~msheppar] - This test failure has shown up in 5 of the last 6 Tier2 job sets.
Any idea what changed to make this failure happen in the JDK18 CI?

Update: The SBR failures are reported against jdk-18+19-1178 and the
JDK18 CI failures are reported against jdk-18+22-14{15,17,18,20,21} so far.
So it doesn't seem likely that the sudden appearance in the JDK18 CI has
anything to do with recent integrations.

However, this failure mode is quite noisy so I think we need to ProblemList
this test on windows-x64 to reduce the noise in the JDK18 CI...;;;","2021-11-03 07:57;alanb;This test was added via JDK-8274548 a few days ago, maybe it should be re-assigned to [~bpb] as it will be fresh in his mind.;;;","2021-11-03 08:10;dcubed;[~alanb] - is JDK-8274548 the right bug ID? I'm showing that change was
integrated on 2021.10.12 so that's more than 3 weeks ago...;;;","2021-11-03 08:29;msheppar;The SBR run failures are, in the main, showing the test PASSED, and it looks like ""reaping"" of the test fails to complete within the specified test timeout.

The CI failures are, as per the process capture, showing the test still executing its writev , while a finaliser and cleanup thread are waiting.

the change above looks like it was targeting macOS ?  currently set of failures are windows

I can pass it to bpb;;;","2021-11-03 09:54;alanb;I suspect the issue here is that the timeout occurs when the test is writing the file. It continues to write and then checks the file. So it looks like the test passed but the thread dump taken at the timeout shows that it is still working.;;;","2021-11-04 08:01;msheppar;just a brief aside on this. The increased timeout will hopefully overcome the issue, but may not ... I have seen some intermittent failures where the timeout == 1200 which equates to 1.3 hours timeout when a test is moribund ... high test volumes, large number of processes and threads can sometimes stress the OS or there's a very obscure issue to be handled.;;;","2021-11-04 09:34;roboduke;Changeset: 7bb21733
Author:    Brian Burkhalter <bpb@openjdk.org>
Date:      2021-11-04 16:33:08 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7bb2173383bc1c0d55564d31303a547957d87a15
;;;","2021-11-04 09:46;dcubed;This fix is in jdk-18+23-1449.;;;",,,,,,,,,,,,
"Clarify ""default charset"" descriptions in String class ",JDK-8276188,5061483,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,naoto,naoto,naoto,2021-10-29 11:53,2021-11-09 09:18,2023-10-01 09:57,2021-11-02 09:09,18,,,,,,,,,,,,,18,core-libs,,0,noreg-doc,,,,,,,,,,,,,,,,"This is a left over document adjustment to `String` class, where several occurrences of ""platform's default charset"" appear. Instead, they should refer to `Charset.defaultCharset()` with the integration of JEP 400. Simply removing the word ""platform's"" should suffice, with @link to `defualtChaset()` method.",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276238,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8187041,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uui3:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4c088d55,,,,,,,,,"2021-11-02 09:09;roboduke;Changeset: 495c828a
Author:    Naoto Sato <naoto@openjdk.org>
Date:      2021-11-02 16:08:11 +0000
URL:       https://git.openjdk.java.net/jdk/commit/495c828ae95205885b091dde795b517ba332a2b1
;;;",,,,,,,,,,,,,,,,,,,,
Exclude lambda proxy class from the CDS archive if its caller class is excluded,JDK-8276184,5061477,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ccheung,ccheung,ccheung,2021-10-29 10:34,2023-06-14 09:00,2023-10-01 09:57,2021-11-15 18:36,17,18,,,,,,,,,,,,18,hotspot,,0,amazon-interest,cds,jdk17u-todo,,,,,,,,,,,,,,"If a caller class is being excluded from the archive, its associated lambda proxy class(es) should also be excluded.

A caller class will be excluded from the archive under some situations as follows:
1. it is a signed class;

2. it has been redefined after its lambda proxy class was created.",,,,,,,,,,JDK-8277950,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uugr:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-04 15:34;ccheung;If the lambda proxy class is not excluded, VM crashes during dynamic dump as follows:

#  Internal Error (/curr_jdk/open/src/hotspot/share/cds/archiveBuilder.hpp:293), pid=4880, tid=4888
#  assert(is_in_buffer_space(obj)) failed: must be

Stack: [0x00007f8ceae1e000,0x00007f8ceaf1e000],  sp=0x00007f8ceaf1c6a0,  free space=1017k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x5b368b]  ArchiveBuilder::any_to_offset(unsigned char*) const+0x9b
V  [libjvm.so+0x1832bbc]  SystemDictionaryShared::hash_for_shared_dictionary(unsigned char*)+0x3c
V  [libjvm.so+0x1232a32]  LambdaProxyClassKey::hash() const+0x12
V  [libjvm.so+0x1839dfa]  SystemDictionaryShared::write_lambda_proxy_class_dictionary(LambdaProxyClassDictionary*)+0x28a
V  [libjvm.so+0xb60238]  VM_PopulateDynamicDumpSharedSpace::doit()+0x278
V  [libjvm.so+0x19806ba]  VM_Operation::evaluate()+0x18a
V  [libjvm.so+0x19a3c53]  VMThread::evaluate_operation(VM_Operation*)+0x183
V  [libjvm.so+0x19a4ac7]  VMThread::inner_execute(VM_Operation*)+0x3f7
V  [libjvm.so+0x19a4bf5]  VMThread::loop()+0xb5
V  [libjvm.so+0x19a4d1c]  VMThread::run()+0xbc
V  [libjvm.so+0x1891bc0]  Thread::call_run()+0x100
V  [libjvm.so+0x15722d4]  thread_native_entry(Thread*)+0x104;;;","2021-11-15 18:36;roboduke;Changeset: bd92674b
Author:    Calvin Cheung <ccheung@openjdk.org>
Date:      2021-11-16 02:34:36 +0000
URL:       https://git.openjdk.java.net/jdk/commit/bd92674be563ad291990216b7cdf061c498f5dd3
;;;",,,,,,,,,,,,,,,,,,,
"nsk/jvmti/RedefineClasses/StressRedefineWithoutBytecodeCorruption failed with ""assert(def_ik->is_being_redefined()) failed: should be being redefined to get here""",JDK-8276177,5061467,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,coleenp,dcubed,dcubed,2021-10-29 07:35,2021-12-22 06:15,2023-10-01 09:57,2021-11-17 11:55,11,17,18,,,,,,,,,,,18,hotspot,,0,intermittent,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok-next,jdk17u-fix-yes,problemlist,redhat-interest,tier4,,,,,,,,"The following test failed in the JDK18 CI:

vmTestbase/nsk/jvmti/RedefineClasses/StressRedefineWithoutBytecodeCorruption/TestDescription.java

Here's a snippet from the log file:

[273.575s][trace][redefine,class,iklass,purge] previous version stats: live=32, deleted=1
[273.575s][trace][redefine,class,iklass,add  ] scratch class added; one of its methods is on_stack.
# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/jvmtiRedefineClasses.cpp:155
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/35546316-ed70-4084-8244-d672e7734fd1-S13253/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/a29dbdc8-d4b1-441d-bd87-8509bf4f3b99/runs/335c866a-b223-4ddd-a8da-d156bdb71db5/workspace/open/src/hotspot/share/prims/jvmtiRedefineClasses.cpp:155), pid=2742125, tid=2742507
#  assert(def_ik->is_being_redefined()) failed: should be being redefined to get here
#
# JRE version: Java(TM) SE Runtime Environment (18.0+22) (fastdebug build 18-ea+22-1368)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+22-1368, compiled mode, sharing, compressed oops, compressed class ptrs, g1 gc, linux-aarch64)
# Problematic frame:
# V  [libjvm.so+0x118073c]  VM_RedefineClasses::unlock_classes()+0x2cc
#
# Core dump will be written. Default location: Core dumps may be processed with ""/opt/core.sh %p"" (or dumping to /opt/mach5/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S33720/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/25065e51-582f-41ab-9753-e9c384c77bf7/runs/557e56f4-ee33-477c-8b83-d62f63b6b6b5/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jvmti_quick/scratch/0/core.2742125)
#
# An error report file with more information is saved as:
# /opt/mach5/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S33720/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/25065e51-582f-41ab-9753-e9c384c77bf7/runs/557e56f4-ee33-477c-8b83-d62f63b6b6b5/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jvmti_quick/scratch/0/hs_err_pid2742125.log
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#
<<<<<<<< RedefineClasses() is successfully done
>>>>>>>> Invoke RedefineClasses():
	new class byte count=2286
----------System.err:(0/0)----------
----------rerun:(45/8571)*----------

Here's the crashing thread's stack:

---------------  T H R E A D  ---------------

Current thread (0x0000fffd60133a90):  JavaThread ""Thread-22"" [_thread_in_vm, id=2742507, stack(0x0000fffd03c00000,0x0000fffd03e00000)]

Stack: [0x0000fffd03c00000,0x0000fffd03e00000],  sp=0x0000fffd03dfdfa0,  free space=2039k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x118073c]  VM_RedefineClasses::unlock_classes()+0x2cc
V  [libjvm.so+0x1182564]  VM_RedefineClasses::doit_epilogue()+0x14
V  [libjvm.so+0x186bcc8]  VMThread::execute(VM_Operation*)+0xa8
V  [libjvm.so+0x11450cc]  JvmtiEnv::RedefineClasses(int, jvmtiClassDefinition const*)+0x6c
V  [libjvm.so+0x10e4054]  jvmti_RedefineClasses+0x114
C  [libstressRedefine.so+0xbf70]  Java_nsk_jvmti_RedefineClasses_StressRedefine_makeRedefinition+0xe0
J 9328  nsk.jvmti.RedefineClasses.StressRedefine.makeRedefinition(ILjava/lang/Class;[B)I (0 bytes) @ 0x0000fffdbd141f64 [0x0000fffdbd141ec0+0x00000000000000a4]
C  0x0000fffd6b646af7

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
J 9328  nsk.jvmti.RedefineClasses.StressRedefine.makeRedefinition(ILjava/lang/Class;[B)I (0 bytes) @ 0x0000fffdbd141f64 [0x0000fffdbd141ec0+0x00000000000000a4]
j  nsk.jvmti.RedefineClasses.StressRedefine$Worker.run()V+55
J 1893 c2 java.lang.Thread.run()V java.base@18-ea (17 bytes) @ 0x0000fffdbc46abb0 [0x0000fffdbc46ab40+0x0000000000000070]
v  ~StubRoutines::call_stub


This test also has another unresolved bug:

JDK-8272800 vmTestbase/nsk/jvmti/RedefineClasses/StressRedefineWithoutBytecodeCorruption/TestDescription.java timing out",,,,,,,,,,JDK-8277581,JDK-8279160,JDK-8277580,JDK-8279162,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8272800,,,,,,,,,,,,,,,,,,,,,,JDK-8277216,JDK-8055008,JDK-8276367,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,linux,,,,,,"0|i2uuej:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@661b156a,,,,,,,,,"2021-11-01 11:19;dcubed;The jdk-18+22-1388-tier4 sighting has a different failure mode. Here's a snippet
from the log file:

[379.955s][trace][redefine,class,iklass,purge] previous version 0x0000000801149228 is alive
[379.955s][trace][redefine,class,iklass,purge] previous version stats: live=192, deleted=0
[379.955s][trace][redefine,class,iklass,add  ] scratch class not added; no methods are running
# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/jvmtiRedefineClasses.cpp:155
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/35546316-ed70-4084-8244-d672e7734fd1-S13245/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/743ef649-3cf8-4c60-9469-03662d3c6ad2/runs/8776132f-06f6-47f2-807e-8ee3c630e6d9/workspace/open/src/hotspot/share/prims/jvmtiRedefineClasses.cpp:155), pid=2722366, tid=2722718
#  assert(def_ik->is_being_redefined()) failed: should be being redefined to get here
#
# JRE version: Java(TM) SE Runtime Environment (18.0+22) (fastdebug build 18-ea+22-1388)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+22-1388, compiled mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-aarch64)
# Problematic frame:
# V  [libjvm.so+0x118065c]  VM_RedefineClasses::unlock_classes()+0x2cc
#
# Core dump will be written. Default location: Core dumps may be processed with ""/opt/core.sh %p"" (or dumping to /opt/mach5/mesos/work_dir/slaves/35546316-ed70-4084-8244-d672e7734fd1-S13289/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/3e417405-6842-44ca-a558-0d2e76357045/runs/bf3b8517-685b-4f26-9efe-7a4d0f4f95bf/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jvmti_quick/scratch/3/core.2722366)
#
# An error report file with more information is saved as:
# /opt/mach5/mesos/work_dir/slaves/35546316-ed70-4084-8244-d672e7734fd1-S13289/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/3e417405-6842-44ca-a558-0d2e76357045/runs/bf3b8517-685b-4f26-9efe-7a4d0f4f95bf/testoutput/test-support/jtreg_open_test_hotspot_jtreg_vmTestbase_nsk_jvmti_quick/scratch/3/hs_err_pid2722366.log
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#
<<<<<<<< RedefineClasses() is successfully done
>>>>>>>> Invoke RedefineClasses():
	new class byte count=2286
----------System.err:(0/0)----------
----------rerun:(45/8572)*----------


Here's the crashing thread's stack:

---------------  T H R E A D  ---------------

Current thread (0x0000fffbe841d8b0):  JavaThread ""Thread-34"" [_thread_in_vm, id=2722718, stack(0x0000fffbac920000,0x0000fffbacb20000)]

Stack: [0x0000fffbac920000,0x0000fffbacb20000],  sp=0x0000fffbacb1dfa0,  free space=2039k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x118065c]  VM_RedefineClasses::unlock_classes()+0x2cc
V  [libjvm.so+0x1182484]  VM_RedefineClasses::doit_epilogue()+0x14
V  [libjvm.so+0x186c098]  VMThread::execute(VM_Operation*)+0xa8
V  [libjvm.so+0x1144fec]  JvmtiEnv::RedefineClasses(int, jvmtiClassDefinition const*)+0x6c
V  [libjvm.so+0x10e3f74]  jvmti_RedefineClasses+0x114
C  [libstressRedefine.so+0xbf70]  Java_nsk_jvmti_RedefineClasses_StressRedefine_makeRedefinition+0xe0
J 17886  nsk.jvmti.RedefineClasses.StressRedefine.makeRedefinition(ILjava/lang/Class;[B)I (0 bytes) @ 0x0000fffc4e39dd64 [0x0000fffc4e39dcc0+0x00000000000000a4]
C  0x0000fffc20fe27f7

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
J 17886  nsk.jvmti.RedefineClasses.StressRedefine.makeRedefinition(ILjava/lang/Class;[B)I (0 bytes) @ 0x0000fffc4e39dd64 [0x0000fffc4e39dcc0+0x00000000000000a4]
j  nsk.jvmti.RedefineClasses.StressRedefine$Worker.run()V+55
J 3575 c2 java.lang.Thread.run()V java.base@18-ea (17 bytes) @ 0x0000fffc4d49c430 [0x0000fffc4d49c3c0+0x0000000000000070]
v  ~StubRoutines::call_stub;;;","2021-11-02 09:45;dcubed;This test is being ProblemListed for the hanging failure mode
using the following bug:

JDK-8276367 ProblemList vmTestbase/nsk/jvmti/RedefineClasses/StressRedefineWithoutBytecodeCorruption/TestDescription.java

That ProblemListing will mean that investigating this bug
will require UnProblemListing this test.;;;","2021-11-02 11:20;mseledtsov;ILW = HLM = P3;;;","2021-11-02 15:45;coleenp;There must be a memory ordering problem with aarch64.  There are lots of threads waiting in lock_classes

        if (ik->is_being_redefined()) {
          ml.wait();
          has_redefined = true;
          break;  // for loop

and the one thread that crashes has:

    InstanceKlass* def_ik = get_ik(_class_defs[i].klass);
    if (redef_classes->length() > 0) {
      // Remove the class from _classes_being_redefined list
      Klass* k = redef_classes->pop();
      assert(def_ik == k, ""unlocking wrong class"");
    }
    assert(def_ik->is_being_redefined(),
           ""should be being redefined to get here"");

    // Unlock after we finish all redefines for this class within
    // the thread. Same class can be pushed to the list multiple
    // times (not more than once by each recursive redefinition).
    if (!redef_classes->contains(def_ik)) {
      def_ik->set_is_being_redefined(false);
    }

def_ik and ik above are the same class.  The is_being_redefined flag is false.

Both lock_classes and unlock_classes are holding or waiting on the RedefineClasses_lock, so there's no order access load/stores around the is_being_redefined flag.;;;","2021-11-02 16:57;dholmes;You only need explicit orderAccess operation if the flag is being accessed lock-free. Otherwise the locking provides acquire-release semantics.;;;","2021-11-15 15:23;coleenp;So what's happening is one thread is setting the flag in InstanceKlass:
  void set_has_resolved_methods() {
    _misc_flags |= _misc_has_resolved_methods;
  }

Through this path:
resolve_MemberName
init_method_MemberName
CallInfo::CallInfo(method)
set_resolved_method_name()
java_lang_invoke_ResolvedMethodName::find_resolved_method()
-> InstanceKlass::set_has_resolved_methods()

While the other threads are setting and resetting the _misc_is_being_redefined bit.  Since the & isn't thread safe, the _misc_is_being_redefined bit is getting lost (or reset in the case of the linked bugs).

In the core file:
(gdb) print /x def_ik->_misc_flags
$4 = 0x2087

Which 0x2000 is the _misc_has_resolved_methods flag.

I checked the other _misc flags and most are only set during classfile parsing.  So other than _misc_is_being_redefined, the bits are write once.  We should file an RFE so the setter functions don't look like the values can be toggled, and make sure no other misc flag can reset the value of another concurrently.

It's possible that reflection using MethodHandles may have made this old bug more frequent, but I can't see that from the core file.
;;;","2021-11-15 15:39;dholmes;I would say  _misc_is_being_redefined should not be part of the _misc flags, the same way that we have:

 // _is_marked_dependent can be set concurrently, thus cannot be part of the
  // _misc_flags.
  bool            _is_marked_dependent;   

all misc flags should be set once at ""construction"" time. We've been bitten by bitfields before.;;;","2021-11-15 16:53;dholmes;Code introduced in JDK 9 under JDK-8055008, but also backported to 8u.;;;","2021-11-15 17:22;coleenp;Yes, I remembered the _is_marked_dependent issue which made me suspicious of this flag.  Unfortunately adding another bool for is_being_redefined will leave an alignment gap in InstanceKlass, which is why I chose the atomic operations in AccessFlags to fix this.

The other misc flags should be examined and fixed, whatever the fix is going to be, under a different RFE in order to make this small backport easier.;;;","2021-11-17 11:55;roboduke;Changeset: a907b2b1
Author:    Coleen Phillimore <coleenp@openjdk.org>
Date:      2021-11-17 19:53:55 +0000
URL:       https://git.openjdk.java.net/jdk/commit/a907b2b144f2af27392eb7c2f9656fbb1a759618
;;;","2021-12-06 12:55;zgu;Fix Request (17u)

A clean backport for parity with Oracle 17.0.3.

StressRedefineWithoutBytecodeCorruption.java test now passed with the patch.
;;;","2021-12-10 05:34;zgu;Fix Request (11u)

A clean backport for parity with Oracle 11.0.15.

StressRedefineWithoutBytecodeCorruption.java test now passed with the patch.;;;","2021-12-20 08:10;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/15
Date: 2021-12-20 16:05:30 +0000
;;;",,,,,,,,
codestrings.validate_vm gtest still broken on ppc64 after JDK-8276046,JDK-8276175,5061465,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,stuefe,stuefe,stuefe,2021-10-29 07:11,2021-11-09 09:18,2023-10-01 09:57,2021-11-02 06:05,18,,,,,,,,,,,,,18,hotspot,,0,,,,,,,,,,,,,,,,,"JDK-8276046 failed to work because the #ifdef PPC was added to the existing group of #ifdefs at the very start of test_codestrings.cpp. 

However, PPC is not a primary macro but gets set via macros.hpp if one of PPC32 or PPC64 is set. Therefore this only works after inclusion of macro.hpp. (Works for ZERO and PRODUCT, since those are primary macros)

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276046,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uue3:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-02 06:05;roboduke;Changeset: b889f2a8
Author:    Thomas Stuefe <stuefe@openjdk.org>
Date:      2021-11-02 13:04:09 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b889f2a88a5e182d2424b741d8fedf2c784442f1
;;;",,,,,,,,,,,,,,,,,,,,
JavaFX build fails on macOS aarch64,JDK-8276174,5061400,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jvos,webbuggrp,webbuggrp,2021-10-28 08:33,2023-01-12 10:43,2023-10-01 09:57,2021-11-22 04:14,jfx18,,,,,,,,,,,,,jfx18,javafx,,0,dcspn,noreg-build,reproducer-other,webbug,,,,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
MacBook Air (M1, 2020)
MacOS Monterey
JFX 18
Xcode version 13.1 (13A1030d)
Clang version 13.0.0 (clang-1300.0.29.3)

A DESCRIPTION OF THE PROBLEM :
The following build failure appears on an apple silicon MacBook Air when the build command ""./gradlew"" is executed:
> Task :graphics:linkDecoraNativeShadersMac FAILED
clang: error: invalid arch name '-arch aarch64'

FAILURE: Build failed with an exception.


FREQUENCY : always


",,,,,,,,,,JDK-8286488,JDK-8286010,JDK-8299057,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277479,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,os_x,,,,,,"0|i2utzn:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1556b386,,,,,,,,,"2021-10-29 06:48;kcr;The current build requires running gradle with the following option:

gradle -PTARGET_ARCH=arm64 ...

We should both document this, and consider steps to eliminate it.;;;","2021-11-22 04:14;roboduke;Changeset: d289db94
Author:    andreas-heger <heger@gmx.de>
Committer: Kevin Rushforth <kcr@openjdk.org>
Date:      2021-11-22 12:12:51 +0000
URL:       https://git.openjdk.java.net/jfx/commit/d289db94d15e49ed28f797b516ffccf023fce9c9
;;;","2022-04-30 06:55;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx11u/pull/100
Date: 2022-04-30 13:51:23 +0000;;;","2022-05-09 14:28;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx17u/pull/60
Date: 2022-05-09 21:22:04 +0000;;;",,,,,,,,,,,,,,,,,
VirtualFlow.scrollToTop doesn't scroll to the top of the last element,JDK-8276167,5061452,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,fkirmaier,fkirmaier,fkirmaier,2021-10-29 04:20,2022-05-02 06:37,2023-10-01 09:57,2021-12-13 00:28,jfx17,,,,,,,,,,,,,jfx18,javafx,,0,,,,,,,,,,,,,,,,,"VirtualFlow.scrollToTop doesn't scroll to the top of the last element.
A simple fix will follow as PR.",,,,,,,,,,JDK-8286007,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-12-06 05:24;fkirmaier;VirtualFlowScrollToTop.java;https://bugs.openjdk.org/secure/attachment/97281/VirtualFlowScrollToTop.java",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uub7:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@67282485,,,,,,,,,"2021-10-29 09:40;kcr;Is this a regression? The reason I ask is that JDK-8275711 was filed against VirtualFlow scrolling, and it was tracked down to a regression introduced by the fix for JDK-8089589, which went into JavaFX 17.;;;","2021-12-06 05:24;fkirmaier;Eduard Sedov: If the last item is larger than the viewport, the VirtualFlow.scrollToTop(int) scrolls to the end instead of to top of the item.;;;","2021-12-13 00:28;roboduke;Changeset: 11583392
Author:    Eduard Sedov <eduard.sedov@zeiss.com>
Committer: Johan Vos <jvos@openjdk.org>
Date:      2021-12-13 08:27:53 +0000
URL:       https://git.openjdk.java.net/jfx/commit/115833923a644be8328b8f7a7a6845e5b42a57b3
;;;","2022-05-02 06:19;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx17u/pull/52
Date: 2022-05-02 13:14:05 +0000;;;",,,,,,,,,,,,,,,,,
RandomAccessFile#write method could throw IndexOutOfBoundsException that is not described in javadoc,JDK-8276164,5061449,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,myano,myano,myano,2021-10-29 03:21,2021-11-09 09:18,2023-10-01 09:57,2021-11-01 23:46,18,,,,,,,,,,,,,18,core-libs,,0,,,,,,,,,,,,,,,,,"RandomAccessFile#write method use native writeBytes method that declared on io_util.c. The writeBytes method could throw an IndexOutOfBoundsException, but the javadoc of RandomAccessFile#write doesn't have ""@throws IndexOutOfBoundsException"".

In a similar case, RandomAccessFile#read has a javadoc of ""@throws IndexOutOfBoundsException"".

The javadoc for RandomAccessFile#write is missing an exception.",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276168,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uuaj:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5f132e58,,,,,,,,,"2021-11-01 23:46;roboduke;Changeset: 9bf31652
Author:    Masanori Yano <myano@openjdk.org>
Committer: Alan Bateman <alanb@openjdk.org>
Date:      2021-11-02 06:44:48 +0000
URL:       https://git.openjdk.java.net/jdk/commit/9bf31652cbe8eb2699babe5e52e62ea1f1578588
;;;",,,,,,,,,,,,,,,,,,,,
C2: Compiler stack overflow during escape analysis on Linux x86_32,JDK-8276157,5061440,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,shade,shade,shade,2021-10-29 02:10,2022-02-03 01:40,2023-10-01 09:57,2021-11-03 02:07,11,17,18,,,,,,,,,,,18,hotspot,,0,c2,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,oraclejdk-na,oracle-triage-11,oracle-triage-17,oracle-triage-18,redhat-interest,,,,,,"This seems to manifest on the following test with x86_32. The bisection shows it started with JDK-8267612, but that one probably just triggers it. Confusingly, this only happens with fastdebug, not slowdebug, not release. Maybe the stack is just a little bit too small for fastdebug config.

$ CONF=linux-x86-server-fastdebug make run-test TEST=java/lang/invoke/VarHandles/VarHandleTestAccessShort.java

configuration:
STDOUT:
config VarHandleTestAccessShort.setup(): success
test VarHandleTestAccessShort.testAccess(""VarHandle -> Instance final field"", VarHandleBaseTest$VarHandleAccessTestCase@3d664d): success
test VarHandleTestAccessShort.testAccess(""VarHandle -> Instance final field unsupported"", VarHandleBaseTest$VarHandleAccessTestCase@ac964b): success
test VarHandleTestAccessShort.testAccess(""VarHandle -> Static final field"", VarHandleBaseTest$VarHandleAccessTestCase@b82994): success
test VarHandleTestAccessShort.testAccess(""VarHandle -> Static final field unsupported"", VarHandleBaseTest$VarHandleAccessTestCase@1b983b5): success
test VarHandleTestAccessShort.testAccess(""VarHandle -> Instance field"", VarHandle -> Instance field): success
test VarHandleTestAccessShort.testAccess(""VarHandle -> Instance field unsupported"", VarHandleBaseTest$VarHandleAccessTestCase@1922a2b): success
test VarHandleTestAccessShort.testAccess(""VarHandle -> Static field"", VarHandle -> Static field): success
test VarHandleTestAccessShort.testAccess(""VarHandle -> Static field unsupported"", VarHandleBaseTest$VarHandleAccessTestCase@22ff6b): success
STDERR:


TEST RESULT: Failed. Unexpected exit from test [exit code: 139]
--------------------------------------------------
Test results: failed: 1


There is no hs_err, because it is a native stack overflow. 

Core parse:

Program terminated with signal SIGSEGV, Segmentation fault.
#0  0xf6867f63 in DUIterator_Fast::DUIterator_Fast (offset=188, node=0xbee8ca98, this=0xbe783038)
    at /home/shade/trunks/jdk/src/hotspot/share/opto/node.hpp:1398
1398	    { _outp = node->_out + offset;      debug_only(sample(node)); }
[Current thread is 1 (Thread 0xbe7ffb40 (LWP 811246))]

(gdb) info stack
#0  0xf6867f63 in DUIterator_Fast::DUIterator_Fast (offset=188, node=0xbee8ca98, this=0xbe783038)
    at /home/shade/trunks/jdk/src/hotspot/share/opto/node.hpp:1398
#1  Node::fast_outs (imax=..., this=0xbee8ca98) at /home/shade/trunks/jdk/src/hotspot/share/opto/node.hpp:1429
#2  Compile::start (this=0xbe7fe41c) at /home/shade/trunks/jdk/src/hotspot/share/opto/compile.cpp:1080
#3  0xf69ea5bb in ConnectionGraph::find_inst_mem (this=0xb8879438, orig_mem=0xb89deba0, alias_idx=32, orig_phis=...)
    at /home/shade/trunks/jdk/src/hotspot/share/opto/escape.cpp:2833
#4  0xf69eab83 in ConnectionGraph::find_inst_mem (this=<optimized out>, orig_mem=<optimized out>, alias_idx=<optimized out>, orig_phis=...)
    at /home/shade/trunks/jdk/src/hotspot/share/opto/escape.cpp:2899
#5  0xf69eab83 in ConnectionGraph::find_inst_mem (this=<optimized out>, orig_mem=<optimized out>, alias_idx=<optimized out>, orig_phis=...)
    at /home/shade/trunks/jdk/src/hotspot/share/opto/escape.cpp:2899
#6  0xf69eab83 in ConnectionGraph::find_inst_mem (this=<optimized out>, orig_mem=<optimized out>, alias_idx=<optimized out>, orig_phis=...)
    at /home/shade/trunks/jdk/src/hotspot/share/opto/escape.cpp:2899
#7  0xf69eab83 in ConnectionGraph::find_inst_mem (this=<optimized out>, orig_mem=<optimized out>, alias_idx=<optimized out>, orig_phis=...)
    at /home/shade/trunks/jdk/src/hotspot/share/opto/escape.cpp:2899
#8  0xf69eb953 in ConnectionGraph::split_memory_phi (this=0xb8879438, orig_phi=0xbbf86fa8, alias_idx=32, orig_phi_worklist=...)
    at /home/shade/trunks/jdk/src/hotspot/share/opto/node.hpp:391

The last 6 frames repeat themselves for about 150 more times until they run out of stack. The `orig_phi` are all different, which suggest this is not a guaranteed-recursive stack overflow, but just the recursive optimization running out of stack.",,,,,,,,,,JDK-8277341,JDK-8277176,JDK-8277277,JDK-8277052,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276219,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uu8j:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-29 12:49;dlong;ILW = crash because of stack overflow = HLH = P2;;;","2021-11-03 02:07;roboduke;Changeset: 465d350d
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-11-03 09:06:21 +0000
URL:       https://git.openjdk.java.net/jdk/commit/465d350d0b3cac277a58b9f8ece196c1cde68e80
;;;","2021-11-12 08:54;shade;Fix Request (11u, 17u)

Works around a C2 bug on x86_32. Applies cleanly. tier1 passes.;;;","2021-11-17 02:31;goetz;11u notice:
Change applies only to debug build, so no risk.;;;",,,,,,,,,,,,,,,,,
Correction of finally Block tutorial,JDK-8276156,5061439,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,bhoran,coffeys,coffeys,2021-10-29 01:41,2021-11-19 09:21,2023-10-01 09:57,2021-11-19 09:21,,,,,,,,,,,,,,,docs,,0,,,,,,,,,,,,,,,,,"The finally block tutorial[1] has the following note:

==
Note: If the JVM exits while the try or catch code is being executed, then the finally block may not execute. Likewise, if the thread executing the try or catch code is interrupted or killed, the finally block may not execute even though the application as a whole continues.
==

After consultation with dev members, it's agreed that the 2nd sentence is misleading and needs to be corrected. The JVMLS spec relating to this area[2] suggests that an interrupted thread will still have its finally block executed.

[1] 
https://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html
[2] https://docs.oracle.com/javase/specs/jls/se17/html/jls-14.html#jls-14.20.2",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uu8b:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@69527b4b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AArch64: Incorrect result for double to int vector conversion,JDK-8276151,5061436,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,njian,njian,njian,2021-10-28 23:37,2021-11-12 00:03,2023-10-01 09:57,2021-11-05 00:46,18,,,,,,,,,,,,,18,hotspot,,0,c2,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,,"AArch64 Vector API double to int may get incorrect results for corner cases.

Current vector double to integer conversion generates code to convert double to long first and then narrow to integer, which does not follow
Java language spec [1], and will get incorrect results for double values larger than Integer.MAX_VALUE or less than Integer.MIN_VALUE.
For those too large/small values, result should be the largest/smallest representable value of type int, but converting to long and
then narrowing to int will get different results.

(We ought to update the test cases as well.) ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8259948,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,b21,18,,linux,,,,,,"0|i2uu7n:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-28 23:41;njian;Introduced by JDK-8259948 ;;;","2021-10-29 00:40;chagedorn;ILW = Wrong result with C2 on Aarch64 for vector casts, low?, disable compilation of affected method = HLM = P3;;;","2021-11-05 00:46;roboduke;Changeset: 96c396b7
Author:    Ningsheng Jian <njian@openjdk.org>
Date:      2021-11-05 07:45:54 +0000
URL:       https://git.openjdk.java.net/jdk/commit/96c396b701e290fc3e1124b1c862b41e02e9c1d9
;;;",,,,,,,,,,,,,,,,,,
"Quarantined jpackage apps are labeled as ""damaged""",JDK-8276150,5061343,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,herrick,webbuggrp,webbuggrp,2021-10-27 12:00,2022-07-13 04:17,2023-10-01 09:57,2021-11-19 06:23,16,17,18,,,,,,,,,,,18,tools,,0,dcsad,jdk17u-na,macos,reproducer-yes,sn_105,sn_106,webbug,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
I'm running on macOS 12.0.1 (Monterey) on a MacBook Pro and running OpenJDK 17

A DESCRIPTION OF THE PROBLEM :
I'm actually having the exact same issue as previously reported here:
https://bugs.java.com/bugdatabase/view_bug.do?bug_id=8254662
This bug was closed as not reproducible.  But I'm seeing this exact behavior with the 'dmg' I created with JDK 17: I can run the dmg locally to install the app in /Applications and subsequently run it.  But if I upload that same dmg to a web site and then re-download it, I can still install into /Appliations, but when I run the app, macOS tells me it's damaged and only lets me move it to the trash.

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
See the previously opened ticket.  The 'jpackage' command I used myself is:
jpackage --name SATriage --app-version 1.0.0 --icon /Users/twolf/spectare/git/swing_app/src/com/spectare/gui/images/bigLogo.icns --input ./ --main-jar swing_app.jar

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
The above command creates a SATriage-1.0.0.dmg file.  If I upload this to the web and subsequently download it and run it, I expect it to still install SATriage.app into /Applications folder and that I can still run the .app thereafter.  But I get an error.
ACTUAL -
When I try to run the app, I get an error dialog that says ""SATriage.app"" is damaged and can't be opened. You should move it to the Trash"".

CUSTOMER SUBMITTED WORKAROUND :
Removing attributes from the app lets the application run:
sudo xattr -cr /Applications/XXX.app
But this is not a good workaround as it probably has side effects.

",,,,,,,,,,JDK-8289957,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277493,JDK-8277494,,,,,,,,,,,,,,JDK-8254662,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,os_x,,,,,,"0|i2utmz:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3656b41f,,,,,,,,,"2021-10-28 21:57;adev;The issue is similar to JDK-8254662. As per the comment
https://bugs.openjdk.java.net/browse/JDK-8254662?focusedCommentId=14374620&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-14374620 the issue was checked in JDK 16. However this is reported from JDK 17. 
;;;","2021-10-29 11:58;herrick;I cannot reproduce this as described.
I am running Mac OS 11.2.3

If I build a dmg using jpackage for a simple app, and post it on the web.
Then download that dmg, and open it.
Then install the  app (drag and drop it in the applications folder)
Then try to run the app (either clicking on /Applications/<app name>.app in finder, or running /Applications/Content/Macos/<app name> from terminal window
I get the expected dialog:

""<app name>"" cannot be run because the developer cannot be verified. 
macOS cannot verify this app is free from malware
Firefox downloaded this file today at 2:12 PM  from ...
[Move to Trash]  [Cancel]

xattr /Applications/<app name>.app responds with only :
com.apple.quarantine

same with ""Contents"" or ""Contents/Info.plist"" or ""Contents/MacOS/<app name>

Again, I am both building this on, and downloading to MacOS 11.2.3
;;;","2021-11-01 21:31;pnarayanaswa;Additional Information from submitter:
===========================
The comment said that the related issue was checked in JDK 16 and couldn't reproduce.  But after submitting the bug report, I built my dmg under JDK 16 as well as JDK 18ea and I see the same issue in all 3 versions of the JDK.  This form doesn't let me attach anything, otherwise I would simply give you the DMG to try.
;;;","2021-11-02 09:32;vdyakov;[~almatvee] could you please try to reproduce this issue?;;;","2021-11-08 07:26;pnarayanaswa;Additional Information from submitter:
===========================
I wish I could comment directly on the JIRA issue - since I was the one who reported the problem.  This interface doesn't even let me attach files!  If it did, I could simply send you my application's dmg file and you could reproduce it.

Two coworkers reproduced this on macOS 10.15 (Catalina) and I see it on Monterey (12.0.1), so it's not difficult to reproduce.

One additional piece of feedback: I previously stated that ""sudo xattr -cr /Applications/SATriage.app"" got rid of the problem for me.  This did not work for my Catalina-based coworkers.  But they did get the app working by omitting the 'r' in the above command.

So, reiterating: I'd be happy to upload the dmg bundle to somewhere so you can try it - just tell me how/where! ;;;","2021-11-09 02:43;jpai;FWIW, I am able to reproduce this. Build a dmg using jpackage locally  and then install it locally and open the application, all works fine. I then copy over this dmg to a webserver and then download it and then install it and try to open it, I get the popup saying the app is damaged and can only be moved to Bin.
Reading up on this a bit and then investigating the differences between the local dmg and the downloaded dmg (which is essentially the same, byte for byte), I do see some differences which are crucial. It comes down to the extended attributes that get applied to the downloaded dmg file. 
To list the extended attributes on that file, I did:

xattr /path/to/download/foo.dmg

This resulted in:
... <snipped unrelated attributes>
com.apple.quarantine

When I run that same command against the locally created dmg file, I see no such ""com.apple.quarantine"" attribute. Reading more about this, I found this discussion useful which explains how to view the value of this attribtue and then understand what that value means https://stackoverflow.com/questions/46198557/understanding-output-of-xattr-p-com-apple-quarantine/46219929#46219929.

So I did a:
xattr -p com.apple.quarantine /path/to/download/foo.dmg
on that downloaded file and that output the value. I then used to the UUID that was output to find its details in the sqllite DB as explained in that link. Not much useful info in that table other than it stating that I downloaded that dmg file from a particular URL using Firefox (that's the browser I had used). I then read up some old discussion that this ""com.apple.quarantine"" extended attribute gets applied to a file if the application that downloaded it has ""LSFileQuarantineEnabled"" attribute set to ""true"" in its Info.plist file. Since Firefox was the application that downloaded the dmg, I checked the Info.plist file (which is typically at /Applications/<appname>/Contents/Info.plist) and it indeed had:

	<key>LSFileQuarantineEnabled</key>
	<true/>

So that's actually a hint that it's the tool/application that was used to download the application/dmg which contributes to marking that file app/file as quarantined. So I decided to skip Firefox or any other browser and instead use the curl command line tool to download the same dmg file that I had hosted on the webserver. Once downloaded, I did the same:

xattr /path/to/download/foo.dmg

and this time I didn't see any com.apple.quarantine on it. I then went ahead and installed this app and then even opened it and it all went fine. So it looks like it's not the target application/dmg which is an issue here, instead it's the mode/tool of download which is contributing to it. I have no experience in this area to explain why Firefox (or other similar tools) mark the file with that com.apple.quarantine extended attribute and what value it generally is adding to the whole ""trustability"" aspect.

Give it a try with curl to see if it solves your issue too.

;;;","2021-11-09 08:29;herrick;Now that we have your dmg I can see the problem with your app that I don't see with mine (I get the unsigned app from the internet dialog instead of the damaged app dialog).
will figure out whats the difference ...;;;","2021-11-09 08:46;herrick;DOH#!
this happens for my app also using JDK-17 to build it, I was using JDK-18 ea, and can't see it there - so it appears to already be fixed in JDK-18, I will try to figure out what change fixed it.

Actually - it is not 17 vs 18, but official builds vs private builds.
I suspect the problem is that with the runtime signed, MacOSs is seeing unsigned app (containing a signed runtime) as ""partially signed"" and therefore damaged.

;;;","2021-11-09 15:11;herrick;yes - the above is confirmed, when unsigned app is built including a signed java runtime, the ""damaged"" error occurs, when built with unsigned runtime, the ""developer cannot be verified"" message is shown.

To fix we could unsign the runtime that is put into an unsigned app.  We already unsign everything before signing (to get everything signed the same).  Now we would just use that code to unsign everything when creating unsigned app.;;;","2021-11-10 09:10;herrick;The existing code only unsigns items in ""Contents/runtime"" or ""Contents/Frameworks"" sub-dirs before signing everything.
Should we continue to only unsign the executables and libraries in these sub-directories, or unsign such files anywhere in the app-image ?
Since everything in the input dir will be included in an app-image, it should be possible to have signed executables and/or libraries in the input dir.
This would cause:
1.) This problem if posting unsigned app on the web.
2.) Different problem when signing if different signing attributes are used (which is why we unsign elements in the runtime before signing)
Because of these two problems I propose we unsign everything in an app-image before checking if it needs to be signed.
;;;","2021-11-19 06:23;roboduke;Changeset: 936f7ff4
Author:    Andy Herrick <herrick@openjdk.org>
Date:      2021-11-19 14:23:04 +0000
URL:       https://git.openjdk.java.net/jdk/commit/936f7ff49ed86adb74bb1ff10d93cb3d7f7d70a0
;;;","2022-07-13 04:17;goetz;jdk17u-na: was backed out again.;;;",,,,,,,,,
jshell throws EOF error when throwing exception inside switch expression,JDK-8276149,5061408,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jlahoda,webbuggrp,webbuggrp,2021-10-28 10:50,2021-11-18 03:37,2023-10-01 09:57,2021-11-08 05:24,14,17,18,,,,,,,,,,,18,tools,,0,18ea,dcsad,reproducer-yes,webbug,,,,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
18-ea+14-756

A DESCRIPTION OF THE PROBLEM :
JShell fails to parse certain switch expressions when entered interactively line by line, giving ""Error: reached end of file while parsing""

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Enter the following, line per line, in JShell:
void foo(String bar) {
int v = switch(bar) {
case ""one"" -> throw new RuntimeException();

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
JShell displays the prompt to enter the next line
ACTUAL -
|  Error:
|  reached end of file while parsing
|          case ""one"" -> throw new RuntimeException();
|                                                     ^

CUSTOMER SUBMITTED WORKAROUND :
Enter everything on a single line. For example, entering the following line works:
void foo(String bar) { int v = switch(bar) { case ""one"" -> throw new RuntimeException(); default -> 2;};}

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277387,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uu1f:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@ef6d34f,,,,,,,,,"2021-10-28 21:48;adev;The issue is reproducible from JDK 14 onwards with the following error:
|  Error:
|  reached end of file while parsing
|          case ""one"" -> throw new RuntimeException();
|                            

However if used in single line, the error is not reported.
 void foo(String bar) { int v = switch(bar) { case ""one"" -> throw new RuntimeException(); default -> 2;};} ;;;","2021-11-08 05:24;roboduke;Changeset: fa754b8f
Author:    Jan Lahoda <jlahoda@openjdk.org>
Date:      2021-11-08 13:20:44 +0000
URL:       https://git.openjdk.java.net/jdk/commit/fa754b8ffda0ae16cda03d896260870ff8fb6ae9
;;;",,,,,,,,,,,,,,,,,,,
Update boot JDK to 17.0.1,JDK-8276144,5061428,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,kcr,kcr,kcr,2021-10-28 15:57,2021-11-23 05:08,2023-10-01 09:57,2021-11-19 05:13,jfx18,,,,,,,,,,,,,jfx18,javafx,,0,noreg-build,sn_106,,,,,,,,,,,,,,,"Now that JDK 17.0.1 has released we should consider updating the boot JDK for JavaFX to use JDK 17.0.1. This will require updating gradle to gradle 7.3.
",,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276142,JDK-8277475,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uu5v:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1556b386,,,,,,,,,"2021-11-19 05:13;roboduke;Changeset: 27dce0ad
Author:    Kevin Rushforth <kcr@openjdk.org>
Date:      2021-11-19 13:12:29 +0000
URL:       https://git.openjdk.java.net/jfx/commit/27dce0adebcecaeaf5bbb44d627931bc472cc502
;;;",,,,,,,,,,,,,,,,,,,,
Update gradle to version 7.3,JDK-8276142,5061426,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,kcr,kcr,kcr,2021-10-28 15:54,2022-12-08 17:49,2023-10-01 09:57,2021-11-16 07:25,8,jfx18,,,,,,,,,,,,jfx18,javafx,,0,3rdparty,noreg-build,sn_106,,,,,,,,,,,,,,"As soon as gradle 7.3 is released, we should update the JavaFX build to use it. This is required in order to allow using JDK 17 as the boot JDK.
",,,,,,,,,,JDK-8285969,JDK-8286489,JDK-8282675,,,,,,,,,,,,,,JDK-8275246,JDK-8276144,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8297067,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uu5f:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1556b386,,,,,,,,,"2021-11-10 07:55;kcr;gradle 7.3 was released on 2021-11-09. See https://gradle.org/releases/;;;","2021-11-16 07:25;roboduke;Changeset: 13c24d22
Author:    Kevin Rushforth <kcr@openjdk.org>
Date:      2021-11-16 15:24:09 +0000
URL:       https://git.openjdk.java.net/jfx/commit/13c24d22463436bc953ec5159beec7a78017019f
;;;","2022-04-30 06:48;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx11u/pull/96
Date: 2022-04-30 13:43:09 +0000;;;","2022-05-09 14:18;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jfx17u/pull/56
Date: 2022-05-09 21:14:23 +0000;;;",,,,,,,,,,,,,,,,,
"TestJpsHostName.java not reliable, better to expand HostIdentifierCreate.java test",JDK-8276139,5061423,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,kevinw,kevinw,kevinw,2021-10-28 15:31,2021-12-02 08:39,2023-10-01 09:57,2021-11-17 04:01,11-pool,17-pool,,,,,,,,,,,,18,core-svc,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,tencent-interest,,,,,,,,,,,"
8251155 introduces a test which uses jps to check we can handle a hostname which is numeric.  This test runs jps on a fictional process, e.g. pid 12345, and passes as long as a malformed address exception is not seen.

I see the test taking 2min30s to timeout and fail on my system, and I see mach5 runs that can take 7 minutes, and pass.

My system times out and fails, I see mach5 systems with the error:
Exception creating connection to: 12345; nested exception is: 
	java.net.SocketException: Network is unreachable: connect
..but not a test failure.

As we already have a HostIdentifier test, we should add the test patterns from 
test/jdk/sun/tools/jps/TestJpsHostName.java into
open/test/jdk/sun/jvmstat/monitor/HostIdentifier/HostIdentifierCreate.java and test the creation of a HostIdentifier with the numeric patterns.",,,,,,,,,,JDK-8278160,JDK-8277747,JDK-8277632,JDK-8277708,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8251155,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uu4r:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@22f3cc74,,,,,,,,,"2021-11-17 04:01;roboduke;Changeset: 2af9e597
Author:    Kevin Walls <kevinw@openjdk.org>
Date:      2021-11-17 11:59:52 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2af9e5976fdf94afc7dbe5ad7827553818057bae
;;;","2021-11-21 19:26;jiefu;Fix request for jdk17u

I'd like to backport this fix to jdk17u to improve the test stability.
This is a noreg test improvement, so no risk, applied cleanly.
And the affected tests all passed on linux after this patch.
Thanks. ;;;","2021-11-21 19:43;jiefu;Fix request for jdk11u

I'd like to backport this fix to jdk11u to improve the test stability.
This is a noreg test improvement, so no risk.

Only changes in test/jdk/sun/tools/jps/TestJpsHostName.java can't be applied cleanly.
But it doesn't matter since that file would be removed after this backport.

And the affected tests all passed on linux after this patch.
Thanks.;;;",,,,,,,,,,,,,,,,,,
functional interface extraction broken after API refresh,JDK-8276136,5061419,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mcimadamore,mcimadamore,mcimadamore,2021-10-28 14:05,2021-10-29 05:47,2023-10-01 09:57,2021-10-29 05:47,repo-panama,,,,,,,,,,,,,,tools,,0,foreign-jextract,,,,,,,,,,,,,,,,"The foreign API refresh changed the way in which the linker API deals with by-reference parameters/returns. By-ref parameters are mapped to the Addressable type, while By-ref returns are mapped to the MemoryAddress type. The reverse mapping is used for upcalls.

Since a functional interface generated by jextract has a factory which allows to call an upcall stub using a downcall method handle, this type mismatch has to be rectified, using type conversions, or invokeExact will fail.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uu3v:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2251e2f8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix Github Actions of JDK17u to account for update version scheme,JDK-8276130,5061413,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,clanger,clanger,clanger,2021-10-28 13:24,2022-03-11 01:26,2023-10-01 09:57,2021-10-29 00:29,17.0.1,,,,,,,,,,,,,17.0.2,infrastructure,,0,jdk17u-fix-request,jdk17u-fix-yes,,,,,,,,,,,,,,,"With the release of 17.0.1, the version number of jdk17u now does not only contain the feature part but also interim and update. The current github actions configuration is broken due to that and needs to be updated.",,,,,,,,,,JDK-8276357,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8283017,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uu2j:",9223372036854775807,b04,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-10-28 13:26;clanger;Fix request (17u):
The change is needed to unbreak github actions in jdk17u after the release of 17.0.1. Risk is low as it is only about testing.;;;","2021-10-29 00:29;roboduke;Changeset: 25bfea61
Author:    Christoph Langer <clanger@openjdk.org>
Date:      2021-10-29 07:28:22 +0000
URL:       https://git.openjdk.java.net/jdk17u/commit/25bfea613b1cd0365f1ada3e122924ce0ca3413d
;;;",,,,,,,,,,,,,,,,,,,
(bf) Remove unused constant ARRAY_BASE_OFFSET from Direct-X-Buffer,JDK-8276128,5061410,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,bpb,bpb,bpb,2021-10-28 12:36,2021-11-03 18:02,2023-10-01 09:57,2021-10-29 09:13,18,,,,,,,,,,,,,18,core-libs,,0,noreg-trivial,,,,,,,,,,,,,,,,"The constant

    // Cached array base offset
    private static final long ARRAY_BASE_OFFSET = UNSAFE.arrayBaseOffset($type$[].class);

in Direct-X-Buffer.java.template is unused and should be removed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uu1v:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,,,"2021-10-29 09:13;roboduke;Changeset: 5facaa24
Author:    Brian Burkhalter <bpb@openjdk.org>
Date:      2021-10-29 16:12:19 +0000
URL:       https://git.openjdk.java.net/jdk/commit/5facaa243aef6ad00cf71a047d0325710ce1f0a8
;;;",,,,,,,,,,,,,,,,,,,,
Dump time class transformation causes heap objects of non-boot classes to be archived,JDK-8276126,5061407,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ccheung,ccheung,ccheung,2021-10-28 10:45,2021-12-08 17:44,2023-10-01 09:57,2021-12-02 06:40,17,18,,,,,,,,,,,,18,hotspot,,0,cds,,,,,,,,,,,,,,,,"The following assert in HeapShared::init_subgraph_entry_fields() if classes are being transformed using a java agent during dump time:
      assert(InstanceKlass::cast(ik)->is_shared_boot_class(),
             ""Only support boot classes"");

Stack: [0x00007f6f47128000,0x00007f6f47229000],  sp=0x00007f6f47227930,  free space=1022k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xdcfd54]  HeapShared::init_subgraph_entry_fields(JavaThread*)+0x344
V  [libjvm.so+0x14694ac]  MetaspaceShared::preload_and_dump_impl(JavaThread*)+0x7c
V  [libjvm.so+0x146967b]  MetaspaceShared::preload_and_dump()+0x10b
V  [libjvm.so+0x18bdfad]  Threads::create_vm(JavaVMInitArgs*, bool*)+0x9fd
V  [libjvm.so+0xfb7d88]  JNI_CreateJavaVM+0x98
C  [libjli.so+0x3b3f]  JavaMain+0x8f
C  [libjli.so+0x7d19]  ThreadJavaMain+0x9",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278325,,,,,,,,,,,,,,,JDK-8278174,,,,,,,,,,"2021-10-28 10:47;ccheung;testcase.tar;https://bugs.openjdk.org/secure/attachment/96853/testcase.tar",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uu17:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-28 10:49;ccheung;To reproduce the bug, expand testcase.tar in your jdk18 repo under open/test/hotspot/jtreg/runtime/cds/appcds and use jtreg to run the LambdaWithJavaAgent.java test.

A fix could be to disable heap archiving if bytecode transformation was enabled during dump time.;;;","2021-10-29 10:24;ccheung;Workaround: don't transform classes loaded by the boot class loader if using java agent during CDS dump.;;;","2021-11-02 11:24;mseledtsov;ILW = MLM = P4;;;","2021-12-02 06:40;roboduke;Changeset: d2b16c89
Author:    Calvin Cheung <ccheung@openjdk.org>
Date:      2021-12-02 14:39:27 +0000
URL:       https://git.openjdk.java.net/jdk/commit/d2b16c89855d584a563caa4f725802dc91a83407
;;;",,,,,,,,,,,,,,,,,
RunThese24H.java SIGSEGV in JfrThreadGroup::thread_group_id,JDK-8276125,5061406,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mgronlun,dcubed,dcubed,2021-10-28 09:46,2021-12-13 05:44,2023-10-01 09:57,2021-12-06 06:37,18,,,,,,,,,,,,,18,hotspot,,0,datadog-interest,intermittent,test-bigapps-runThese,tier8,,,,,,,,,,,,,"The following test failed in the JDK18 CI:

applications/runthese/RunThese24H.java

Here are snippets from the hs_err_pid file:

#  SIGSEGV (0xb) at pc=0x00007f9146e18ad0, pid=19322, tid=19373
#
# JRE version: Java(TM) SE Runtime Environment (18.0+21) (build 18-ea+21-1302)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (18-ea+21-1302, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0x4e7ad0]  AccessInternal::PostRuntimeDispatch<G1BarrierSet::AccessBarrier<286822ul, G1BarrierSet>, (AccessInternal::BarrierType)3, 286822ul>::oop_access_barrier(oopDesc*, long)+0x0

<snip>

---------------  T H R E A D  ---------------

Current thread (0x00007f908c0728b0):  JavaThread ""JFR Recorder Thread"" daemon [_thread_in_vm, id=19373, stack(0x00007f90d8ec9000,0x00007f90d8fca000)] _threads_hazard_ptr=0x00007f90dc1579d0

Stack: [0x00007f90d8ec9000,0x00007f90d8fca000],  sp=0x00007f90d8fc89c8,  free space=1022k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x4e7ad0]  AccessInternal::PostRuntimeDispatch<G1BarrierSet::AccessBarrier<286822ul, G1BarrierSet>, (AccessInternal::BarrierType)3, 286822ul>::oop_access_barrier(oopDesc*, long)+0x0
V  [libjvm.so+0x8323fb]  JfrThreadGroup::thread_group_id(JavaThread const*, Thread*)+0xbb
V  [libjvm.so+0x83ee2e]  JfrThreadConstantSet::serialize(JfrCheckpointWriter&)+0x37e
V  [libjvm.so+0x8405c7]  JfrTypeManager::write_threads(JfrCheckpointWriter&)+0x37
V  [libjvm.so+0x7ddfb7]  JfrCheckpointManager::write_threads(JavaThread*)+0xb7
V  [libjvm.so+0x7df038]  JfrCheckpointManager::write_static_type_set_and_threads()+0x58
V  [libjvm.so+0x822879]  JfrRecorderService::rotate(int)+0x1b9
V  [libjvm.so+0x822dca]  recorderthread_entry(JavaThread*, JavaThread*)+0x11a
V  [libjvm.so+0xd42dd2]  JavaThread::thread_main_inner()+0xc2
V  [libjvm.so+0xd46cc0]  Thread::call_run()+0xc0
V  [libjvm.so+0xbac8a1]  thread_native_entry(Thread*)+0xe1


siginfo: si_signo: 11 (SIGSEGV), si_code: 1 (SEGV_MAPERR), si_addr: 0x0000000000000038",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,linux,,,,,,"0|i2uu0z:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2021-11-04 08:02;dcubed;Much less info in the jdk-18+22-1387-tier8 sighting:

applications/runthese/RunThese24H.java 

---------------  T H R E A D  ---------------

Current thread (0x000001e77a8e1830):  JavaThread ""JFR Recorder Thread"" daemon [_thread_in_vm, id=54092, stack(0x0000005b26400000,0x0000005b26500000)] _threads_hazard_ptr=0x000001e7d04fd9a0

Stack: [0x0000005b26400000,0x0000005b26500000],  sp=0x0000005b264ff6c8,  free space=1021k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [jvm.dll+0x120f90]  AccessInternal::PostRuntimeDispatch<G1BarrierSet::AccessBarrier<1335398,G1BarrierSet>,3,1335398>::oop_access_barrier+0x0  (access.inline.hpp:167)


siginfo: EXCEPTION_ACCESS_VIOLATION (0xc0000005), reading address 0x0000000000000038


For this sighting:
- same test
- AccessInternal::PostRuntimeDispatch<G1BarrierSet::AccessBarrier crashed in ""JFR Recorder Thread""

I don't know why there is so little stack shown, but I think associating this failure sighting
with this bug is a reasonable guess.;;;","2021-12-03 07:14;mgronlun;Code in JfrThreadConstantSet iterates over the JavaThreads using the JfrJavaThreadListIterator for threads where _thread_state != _thread_new:

Call Site
jvm!RawAccessBarrier<1335398>::oop_load [t:\workspace\open\src\hotspot\share\oops\accessBackend.inline.hpp @ 80] 
jvm!RawAccessBarrier<1335398>::oop_load_at [t:\workspace\open\src\hotspot\share\oops\accessBackend.inline.hpp @ 87] 
jvm!BarrierSet::AccessBarrier<1335398,G1BarrierSet>::oop_load_in_heap_at [t:\workspace\open\src\hotspot\share\gc\shared\barrierSet.hpp @ 251] 
jvm!G1BarrierSet::AccessBarrier<1335398,G1BarrierSet>::oop_load_in_heap_at [t:\workspace\open\src\hotspot\share\gc\g1\g1BarrierSet.inline.hpp @ 93] 
jvm!AccessInternal::PostRuntimeDispatch<G1BarrierSet::AccessBarrier<1335398,G1BarrierSet>,3,1335398>::oop_access_barrier [t:\workspace\open\src\hotspot\share\oops\access.inline.hpp @ 167] 
jvm!JfrThreadGroupsHelper::populate_thread_group_hierarchy+0x1f [t:\workspace\open\src\hotspot\share\jfr\recorder\checkpoint\types\jfrThreadGroup.cpp @ 155] 
jvm!JfrThreadGroupsHelper::{ctor}+0x68 [t:\workspace\open\src\hotspot\share\jfr\recorder\checkpoint\types\jfrThreadGroup.cpp @ 110] 
jvm!JfrThreadGroup::thread_group_id+0x82 [t:\workspace\open\src\hotspot\share\jfr\recorder\checkpoint\types\jfrThreadGroup.cpp @ 283] 
jvm!JfrCheckpointThreadClosure::do_thread+0x1f3 [t:\workspace\open\src\hotspot\share\jfr\recorder\checkpoint\types\jfrType.cpp @ 103] 
jvm!JfrThreadConstantSet::serialize+0xd8 [t:\workspace\open\src\hotspot\share\jfr\recorder\checkpoint\types\jfrType.cpp @ 113] 
jvm!JfrTypeManager::write_threads+0x2c [t:\workspace\open\src\hotspot\share\jfr\recorder\checkpoint\types\jfrTypeManager.cpp @ 100] 
jvm!JfrCheckpointManager::write_threads+0x88 [t:\workspace\open\src\hotspot\share\jfr\recorder\checkpoint\jfrCheckpointManager.cpp @ 379] 
jvm!JfrCheckpointManager::write_static_type_set_and_threads+0x101 [t:\workspace\open\src\hotspot\share\jfr\recorder\checkpoint\jfrCheckpointManager.cpp @ 387] 
jvm!JfrRecorderService::open_new_chunk+0x2f [t:\workspace\open\src\hotspot\share\jfr\recorder\service\jfrRecorderService.cpp @ 469] 
jvm!JfrRecorderService::chunk_rotation+0x16a [t:\workspace\open\src\hotspot\share\jfr\recorder\service\jfrRecorderService.cpp @ 523] 
jvm!JfrRecorderService::rotate+0x281 [t:\workspace\open\src\hotspot\share\jfr\recorder\service\jfrRecorderService.cpp @ 501] 
jvm!recorderthread_entry+0xdc [t:\workspace\open\src\hotspot\share\jfr\recorder\service\jfrRecorderThreadLoop.cpp @ 81] 
jvm!JavaThread::thread_main_inner+0xb4 [t:\workspace\open\src\hotspot\share\runtime\thread.cpp @ 1282] 
jvm!JavaThread::run+0x131 [t:\workspace\open\src\hotspot\share\runtime\thread.cpp @ 1265] 
jvm!Thread::call_run+0x8a [t:\workspace\open\src\hotspot\share\runtime\thread.cpp @ 370] 
jvm!thread_native_entry+0x75 [t:\workspace\open\src\hotspot\os\windows\os_windows.cpp @ 544] 
ucrtbase!thread_start<unsigned int (__cdecl*)(void * __ptr64)>+0x3a
kernel32!BaseThreadInitThunk+0x14
ntdll!RtlUserThreadStart+0x21

// The thread instance is the earlier main thread, which has now called jni_DestroyJavaVM to terminate the VM.
// It has created a new JavaThread representation (name == ""DestroyJavaVM""), with thread state == _thread_in_vm and it has also registered with the Threads list.
// But it has yet to create a thread oop; if fact, it is blocked in the allocation for this oop (_thread_blocked):

Call Site
ntdll!NtWaitForAlertByThreadId+0x14
ntdll!RtlpWaitOnAddressWithTimeout+0x43
ntdll!RtlpWaitOnAddress+0xae
ntdll!RtlpWaitOnCriticalSection+0xd9
ntdll!RtlpEnterCriticalSectionContended+0xdc
ntdll!RtlEnterCriticalSection+0x40
jvm!os::PlatformMutex::lock+0x14 [t:\workspace\open\src\hotspot\os\windows\os_windows.inline.hpp @ 77] 
jvm!Mutex::lock_contended+0x4e [t:\workspace\open\src\hotspot\share\runtime\mutex.cpp @ 102] 
jvm!Mutex::lock+0x6f [t:\workspace\open\src\hotspot\share\runtime\mutex.cpp @ 123] 
jvm!MutexLocker::{ctor}+0x14 [t:\workspace\open\src\hotspot\share\runtime\mutexLocker.hpp @ 202] 
jvm!G1CollectedHeap::attempt_allocation+0x3f [t:\workspace\open\src\hotspot\share\gc\g1\g1CollectedHeap.cpp @ 713] 
jvm!MemAllocator::allocate_inside_tlab_slow+0x180 [t:\workspace\open\src\hotspot\share\gc\shared\memAllocator.cpp @ 318] 
jvm!MemAllocator::allocate_inside_tlab+0x3f [t:\workspace\open\src\hotspot\share\gc\shared\memAllocator.cpp @ 278] 
jvm!MemAllocator::mem_allocate+0x6f [t:\workspace\open\src\hotspot\share\gc\shared\memAllocator.cpp @ 350] 
jvm!MemAllocator::allocate+0xb0 [t:\workspace\open\src\hotspot\share\gc\shared\memAllocator.cpp @ 363] 
jvm!CollectedHeap::obj_allocate+0x24 [t:\workspace\open\src\hotspot\share\gc\shared\collectedHeap.inline.hpp @ 36] 
jvm!InstanceKlass::allocate_instance+0x3c [t:\workspace\open\src\hotspot\share\oops\instanceKlass.cpp @ 1423] 
jvm!InstanceKlass::allocate_instance_handle+0x64 [t:\workspace\open\src\hotspot\share\oops\instanceKlass.cpp @ 1431] 
jvm!JavaThread::allocate_threadObj+0x44 [t:\workspace\open\src\hotspot\share\runtime\thread.cpp @ 787] 
jvm!attach_current_thread+0x234 [t:\workspace\open\src\hotspot\share\prims\jni.cpp @ 3849] 
jvm!JavaVM_::AttachCurrentThread+0x10 [t:\workspace\build\windows-x64\support\modules_include\java.base\jni.h @ 1939] 
jvm!jni_DestroyJavaVM_inner+0x3d [t:\workspace\open\src\hotspot\share\prims\jni.cpp @ 3746] 
jvm!jni_DestroyJavaVM+0x4c [t:\workspace\open\src\hotspot\share\prims\jni.cpp @ 3770] 
jli!JavaMain+0x18b [t:\workspace\open\src\java.base\share\native\libjli\java.c @ 554] 
ucrtbase!thread_start<unsigned int (__cdecl*)(void * __ptr64)>+0x3a
kernel32!BaseThreadInitThunk+0x14
ntdll!RtlUserThreadStart+0x21

 jvm!JavaThread
   +0x270 _on_thread_list : 1
   ...
   +0x0b8 _threads_hazard_ptr : (null) 
   +0x0c0 _threads_list_ptr : (null) 
   +0x0e8 _threads_do_token : 0x12cc
   +0x278 _threadObj : OopHandle
   +0x330 _thread_state : a ( _thread_blocked ) <----------------- _thread_blocked
   +0x488 _thread_stat : 0x000001e7`aeb03020 ThreadStatistics
   
0:001> dx -r1 (*((jvm!OopHandle *)0x1e7faf61498))
(*((jvm!OopHandle *)0x1e7faf61498))                 [Type: OopHandle]
    [+0x000] _obj             : 0x0 [Type: oopDesc * *] <<-------  no oop


// The code that serialize the thread group for a thread expects the iterated threads to have a thread oop and
// it may very well be that this is an old assumption stemming from the pre-SMR thread-list era.

int JfrThreadGroupsHelper::populate_thread_group_hierarchy(const JavaThread* jt, Thread* current) {
  assert(jt != NULL && jt->is_Java_thread(), ""invariant"");
  assert(current != NULL, ""invariant"");
  assert(_thread_group_hierarchy != NULL, ""invariant"");

  // immediate thread group
  Handle thread_group_handle(current, java_lang_Thread::threadGroup(jt->threadObj())); <<--- here
  if (thread_group_handle == NULL) {
    return 0;
  }

//
// The problem is that it reads a null thread oop, passing it to the Access API.;;;","2021-12-06 06:37;roboduke;Changeset: a885aab6
Author:    Markus Grönlund <mgronlun@openjdk.org>
Date:      2021-12-06 14:36:51 +0000
URL:       https://git.openjdk.java.net/jdk/commit/a885aab696777c99c8c4c5d9a46afc5fe0a4fe47
;;;",,,,,,,,,,,,,,,,,,
Provide snippet support for properties files,JDK-8276124,5061405,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,prappo,jjg,jjg,2021-10-28 09:09,2021-12-01 17:44,2023-10-01 09:57,2021-11-24 12:13,18,,,,,,,,,,,,,18,tools,,0,,,,,,,,,,,,,,,,,The snippets feature does not support languages or file types where the EOL comment marker is not '//`. This means we cannot use it for properties files.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uu0r:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2021-11-12 03:27;prappo;I've changed the summary from ""Provide snippet support for non-Java files"" to ""Provide snippet support for properties files"". I did it because we are primarily interested in properties format which must be supported as per JEP 413.

The task of supporting other formats, let alone to custom ones, is much more complicated and if required, will need to be addressed separately.;;;","2021-11-24 12:13;roboduke;Changeset: e785f699
Author:    Pavel Rappo <prappo@openjdk.org>
Date:      2021-11-24 20:13:06 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e785f699614abc8d557be8fc1782a1f86f272430
;;;",,,,,,,,,,,,,,,,,,,
ZipFile::getEntry will not return a file entry when there is a directory entry of the same name within a Zip File,JDK-8276123,5061404,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,lancea,lancea,lancea,2021-10-28 09:07,2023-05-17 09:00,2023-10-01 09:57,2021-11-12 09:14,15,17,18,,,,,,,,,,,18,core-libs,,0,amazon-interest,regression,,,,,,,,,,,,,,,"JDK 15 through JDK-8242959 introduced a regression where you could not access a   file entry contained within a Zip file when there was also a directory entry  with the same name via ZipFile:getEntry().

Once fixed, the behavior will be consistent with earlier JDK releases.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,15,,,,,,,,"0|i2uu0j:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@62714d2c,,,,,,,Verified,,"2021-11-12 09:14;roboduke;Changeset: b85500e5
Author:    Lance Andersen <lancea@openjdk.org>
Date:      2021-11-12 17:12:13 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b85500e52479c48b02a96b28fddefa2b25d5d9bd
;;;","2022-04-08 03:44;sqetools;verified;;;",,,,,,,,,,,,,,,,,,,
Change openjdk project in jcheck to jdk-updates,JDK-8276122,5061403,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,erikj,erikj,erikj,2021-10-28 09:06,2021-11-11 02:01,2023-10-01 09:57,2021-10-29 09:14,17-pool,,,,,,,,,,,,,17.0.2,infrastructure,,0,jdk17u-fix-request,jdk17u-fix-yes,,,,,,,,,,,,,,,"When we forked the jdk17u repo, we forgot to update the jcheck configuration to use the jdk-updates project. This needs to be corrected so the correct census data is used.",,,,,,,,,,JDK-8276349,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uu0b:",9223372036854775807,b04,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-10-28 09:21;erikj;Fix Request
This configuration change is needed for jcheck to perform the correct checks. The risk to the release is low.;;;","2021-10-29 09:14;roboduke;Changeset: 0364737d
Author:    Erik Joelsson <erikj@openjdk.org>
Date:      2021-10-29 16:13:44 +0000
URL:       https://git.openjdk.java.net/jdk17u/commit/0364737d3116c88745a2d57954ec9ed2f4bfef04
;;;",,,,,,,,,,,,,,,,,,,
Inconsistent scalar replacement debug info at safepoints,JDK-8276112,5061391,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,thartmann,thartmann,thartmann,2021-10-28 06:06,2022-04-01 23:01,2023-10-01 09:57,2021-11-11 05:10,17,18,,,,,,,,,,,,18,hotspot,,0,c2,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,oracle-triage-11,oracle-triage-18,regression,,,,,,,,,,"# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/workspace/open/src/hotspot/share/opto/node.hpp:391), pid=2560545, tid=2564754
#  assert(i < _max) failed: oob: i=16, _max=16

Current CompileTask:
C2: 545601 41515   !   4       jdk.proxy2.$Proxy26::doSomething (32 bytes)

Stack: [0x00007fc1944f1000,0x00007fc1945f2000],  sp=0x00007fc1945ecb00,  free space=1006k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x159325f]  PhaseOutput::FillLocArray(int, MachSafePointNode*, Node*, GrowableArray<ScopeValue*>*, GrowableArray<ScopeValue*>*)+0xd6f
V  [libjvm.so+0x1593cd9]  PhaseOutput::Process_OopMap_Node(MachNode*, int)+0x3c9
V  [libjvm.so+0x1596f4f]  PhaseOutput::fill_buffer(CodeBuffer*, unsigned int*)+0xebf
V  [libjvm.so+0x9f7097]  Compile::Code_Gen()+0x427
V  [libjvm.so+0xa03428]  Compile::Compile(ciEnv*, ciMethod*, int, bool, bool, bool, bool, bool, DirectiveSet*)+0x1668
V  [libjvm.so+0x81ded6]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x646
V  [libjvm.so+0xa13799]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xd09
V  [libjvm.so+0xa14438]  CompileBroker::compiler_thread_loop()+0x518
V  [libjvm.so+0x188962c]  JavaThread::thread_main_inner()+0x27c
V  [libjvm.so+0x188fbe0]  Thread::call_run()+0x100
V  [libjvm.so+0x156f524]  thread_native_entry(Thread*)+0x104

Different but related failure mode:


# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/workspace/open/src/hotspot/share/opto/output.cpp:803), pid=328000, tid=328013
#  assert(local) failed: use _top instead of null
#

Current CompileTask:
C2:    602    2    b  4       Test::test (9 bytes)

Stack: [0x00007faca9d37000,0x00007faca9e38000],  sp=0x00007faca9e32e00,  free space=1007k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x158e3cc]  PhaseOutput::FillLocArray(int, MachSafePointNode*, Node*, GrowableArray<ScopeValue*>*, GrowableArray<ScopeValue*>*)+0x3fc
V  [libjvm.so+0x158e87e]  PhaseOutput::FillLocArray(int, MachSafePointNode*, Node*, GrowableArray<ScopeValue*>*, GrowableArray<ScopeValue*>*)+0x8ae
V  [libjvm.so+0x158f7d9]  PhaseOutput::Process_OopMap_Node(MachNode*, int)+0x3c9
V  [libjvm.so+0x1592a2c]  PhaseOutput::fill_buffer(CodeBuffer*, unsigned int*)+0xe9c
V  [libjvm.so+0x9fc427]  Compile::Code_Gen()+0x427
V  [libjvm.so+0xa08512]  Compile::Compile(ciEnv*, ciMethod*, int, bool, bool, bool, bool, bool, DirectiveSet*)+0x1652
V  [libjvm.so+0x81cd16]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x646
V  [libjvm.so+0xa186a1]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xd31
V  [libjvm.so+0xa193d8]  CompileBroker::compiler_thread_loop()+0x598
V  [libjvm.so+0x1886bec]  JavaThread::thread_main_inner()+0x27c
V  [libjvm.so+0x188d1e0]  Thread::call_run()+0x100
V  [libjvm.so+0x156b3d4]  thread_native_entry(Thread*)+0x104",,,,,,,,,,JDK-8277276,JDK-8277173,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276998,,,,,,,,,,,,,,,JDK-8281075,JDK-8276230,JDK-8284198,JDK-8261137,,,,,,,"2021-10-28 06:06;thartmann;hs_err_pid2560545.log;https://bugs.openjdk.org/secure/attachment/96850/hs_err_pid2560545.log","2021-10-28 06:06;thartmann;replay_pid2560545.log;https://bugs.openjdk.org/secure/attachment/96851/replay_pid2560545.log",,,,,,,,,,,,,,,,,b17,17,,,,,,,,"0|i2utxn:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,Verified,,"2021-10-28 06:09;thartmann;ILW = Assert/crash during C2 compilation, reproducible with large test and stress options, disable scalar replacement or compilation of affected method = HLM = P3;;;","2021-10-28 06:12;thartmann;Replay compilation fails, see JDK-8276230.;;;","2021-11-04 08:03;thartmann;I found a simpler reproducer and suspect that the root cause is JDK-8261137.;;;","2021-11-09 07:29;thartmann;Updated ILW = Wrong execution or crash/assert during C2 compilation, reproducible with simple test but edge case, disable scalar replacement or compilation of affected method = HMM = P2;;;","2021-11-11 05:10;roboduke;Changeset: c29cab8a
Author:    Tobias Hartmann <thartmann@openjdk.org>
Date:      2021-11-11 13:09:05 +0000
URL:       https://git.openjdk.java.net/jdk/commit/c29cab8ab475055e02e4300f212907ff2db955ab
;;;","2021-11-12 01:58;thartmann;Fix Request (17u):
This patch fixes a wrong execution or crash in the C2 compiler (regression in JDK 17). Risk is low because the fix simply disables an optimization (JDK-8261137). Tested in JDK 18 CI and tier1-3 in JDK 17u. The patch applies cleanly.;;;",,,,,,,,,,,,,,,
Problemlist javax/swing/JMenu/4515762/bug4515762.java for macos12,JDK-8276110,5061389,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,psadhukhan,psadhukhan,psadhukhan,2021-10-28 05:41,2021-11-03 18:01,2023-10-01 09:57,2021-10-28 08:39,,,,,,,,,,,,,,18,client-libs,,0,sn_104,test_sprint,,,,,,,,,,,,,,,javax/swing/JMenu/4515762/bug4515762.java is failing in macos12 due to same root cause as in JDK-8273520 and JDK-8273506 so problemlist it till it is fixed.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2utx7:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@568a5b31,,,,,,,,,"2021-10-28 08:39;roboduke;Changeset: c92f2305
Author:    Prasanta Sadhukhan <psadhukhan@openjdk.org>
Date:      2021-10-28 15:37:15 +0000
URL:       https://git.openjdk.java.net/jdk/commit/c92f23055724d2df462f64fc51e57f5a13f679bb
;;;",,,,,,,,,,,,,,,,,,,,
Wrong instruction generation in aarch64 backend,JDK-8276108,5061387,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,phedlin,fparain,fparain,2021-10-28 05:34,2022-09-26 05:35,2023-10-01 09:57,2021-11-29 02:37,11,17,18,,,,,,,,,,,18,hotspot,,0,c1,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,"In assembler_aarch64.hpp, method encode(Instruction_aarch64 *i) sometimes selects the wrong instruction because of a test using the same mask for signed and unsigned value (Thanks to Patric Hedlin for the analysis of the bug).

The fix basically replaces:

        if (_offset < 0 || _offset & mask)
          {
            i->f(0b00, 25, 24);
            i->f(0, 21), i->f(0b00, 11, 10);
            i->sf(_offset, 20, 12);
          } else {
            i->f(0b01, 25, 24);
            i->f(_offset >> size, 21, 10);
          }

with

        if (Assembler::is_simm9(_offset))
          {
            i->f(0b00, 25, 24);
            i->f(0, 21), i->f(0b00, 11, 10);
            i->sf(_offset, 20, 12);
          } else {
            assert(Assembler::is_uimm12(_offset), ""should be"");
            i->f(0b01, 25, 24);
            i->f(_offset >> size, 21, 10);
          }

Th full patch is provided in attachment (the new version of the test requires to move the method from the hpp file to the inline.hpp file).

However, once applied, this patch changes the code generated by C1 and this triggers an assertion failure in the patching code:

#  Internal Error (/home/christian/valhalla_c1/valhalla/open/src/hotspot/cpu/aarch64/macroAssembler_aarch64.cpp:170), pid=1127960, tid=1127979
#  Error: ShouldNotReachHere()
#
# JRE version: Java(TM) SE Runtime Environment (18.0) (fastdebug build 18-lworld3ea+0-2021-10-26-1342512.christian...)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-lworld3ea+0-2021-10-26-1342512.christian..., mixed mode, tiered, compressed oops, compressed class ptrs, g1 gc, linux-aarch64)
# Problematic frame:
# V  [libjvm.so+0x1355970]  MacroAssembler::pd_patch_instruction_size(unsigned char*, unsigned char*)+0x11c
#
# Core dump will be written. Default location: Core dumps may be processed with ""/usr/lib/systemd/systemd-coredump %P %u %g %s %t %c %h %e"" (or dumping to /home/christian/valhalla_c1/valhalla/open/make/core.1127960)
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#

---------------  S U M M A R Y ------------

Command Line: -Xms64M -Xmx1600M --add-exports=java.base/jdk.internal.module=ALL-UNNAMED build.tools.jigsaw.AddPackagesAttribute /home/christian/valhalla_c1/valhalla/build/c1_cleanup/jdk

Host: *, AArch64, 6 cores, 46G, Oracle Linux Server release 8.3
Time: Thu Oct 28 12:06:13 2021 UTC elapsed time: 0.212753 seconds (0d 0h 0m 0s)

---------------  T H R E A D  ---------------

Current thread (0x0000ffff18373320):  JavaThread ""C1 CompilerThread0"" daemon [_thread_in_vm, id=1127979, stack(0x0000ffff04200000,0x0000ffff04400000)]


Current CompileTask:
C1:    212    5       3       java.lang.StringLatin1::hashCode (42 bytes)

Stack: [0x0000ffff04200000,0x0000ffff04400000],  sp=0x0000ffff043fd1d0,  free space=2036k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x1355970]  MacroAssembler::pd_patch_instruction_size(unsigned char*, unsigned char*)+0x11c
V  [libjvm.so+0x9ca4a4]  CodeBuffer::relocate_code_to(CodeBuffer*) const+0x470
V  [libjvm.so+0x9cd4d4]  CodeBuffer::copy_code_to(CodeBlob*)+0x94
V  [libjvm.so+0x14a035c]  nmethod::nmethod(Method*, CompilerType, int, int, int, CodeOffsets*, int, DebugInformationRecorder*, Dependencies*, CodeBuffer*, int, OopMapSet*, ExceptionHandlerTable*, ImplicitExceptionTable*, AbstractCompiler*, int, GrowableArrayView<RuntimeStub*> const&, char*, int, int)+0x448
V  [libjvm.so+0x14a0a6c]  nmethod::new_nmethod(methodHandle const&, int, int, CodeOffsets*, int, DebugInformationRecorder*, Dependencies*, CodeBuffer*, int, OopMapSet*, ExceptionHandlerTable*, ImplicitExceptionTable*, AbstractCompiler*, int, GrowableArrayView<RuntimeStub*> const&, char*, int, int, char const*, FailedSpeculation**)+0x2dc
V  [libjvm.so+0x8c3690]  ciEnv::register_method(ciMethod*, int, CodeOffsets*, int, CodeBuffer*, int, OopMapSet*, ExceptionHandlerTable*, ImplicitExceptionTable*, AbstractCompiler*, bool, bool, RTMState, GrowableArrayView<RuntimeStub*> const&)+0x310
V  [libjvm.so+0x71f120]  Compilation::install_code(int)+0xf0
V  [libjvm.so+0x721eec]  Compilation::compile_method()+0x33c
V  [libjvm.so+0x722764]  Compilation::Compilation(AbstractCompiler*, ciEnv*, ciMethod*, int, BufferBlob*, bool, DirectiveSet*)+0x324
V  [libjvm.so+0x723d28]  Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x158
V  [libjvm.so+0xa2dab8]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0x8b8
V  [libjvm.so+0xa2e51c]  CompileBroker::compiler_thread_loop()+0x2dc
V  [libjvm.so+0x1828e54]  JavaThread::thread_main_inner()+0x284
V  [libjvm.so+0x182f3f8]  Thread::call_run()+0xf8
V  [libjvm.so+0x1535e04]  thread_native_entry(Thread*)+0x104
C  [libpthread.so.0+0x7738]  start_thread+0x198




",,,,,,,,,,JDK-8293878,JDK-8294367,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277928,,,,,,,,,,,,,,,JDK-8276538,JDK-8278417,JDK-8277926,JDK-8277862,,,,,,,"2021-10-28 05:44;fparain;fix_aarch64.patch;https://bugs.openjdk.org/secure/attachment/96845/fix_aarch64.patch","2021-10-28 05:44;fparain;hs_err_pid1127960.log;https://bugs.openjdk.org/secure/attachment/96844/hs_err_pid1127960.log","2021-10-31 20:35;ngasson;lir-as-address.diff;https://bugs.openjdk.org/secure/attachment/96868/lir-as-address.diff","2021-10-29 00:02;ngasson;nick-changes.diff;https://bugs.openjdk.org/secure/attachment/96856/nick-changes.diff",,,,,aarch64,,,,,,,,,,,,,,,,,,,"0|i2utwr:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,Not verified,,"2021-10-29 00:02;ngasson;So previously we always generated LDR (immediate) instructions unless the offset was negative or the least significant 2/3 bits were non-zero. But with this patch we generate LDR (unscaled) any time when the offset is a valid signed 9-bit immediate. That includes the common case of zero offset, which is why we see other things breaking.

The ShouldNotReachHere() is in MacroAssembler::pd_patch_instruction_size() so I thought the problem was just that we don't support patching LDR (unscaled). But that isn't it: NativeInstruction::is_ldr_literal_at() seems to have a bug where it mistakes LDR (unscaled) for LDR (literal). I replaced:

return (Instruction_aarch64::extract(insn, 29, 24) & 0b011011) == 0b00011000;

With:

return Instruction_aarch64::extract(insn, 29, 24) == 0b011000;

And it gets a bit further. The remaining fixes are just to other places that assume we generate the immediate form instead of the unscaled one. I attached a patch (on top of your original one) that can pass hotspot_valhalla jtreg.

I also modified the assertion in Address::encode() slightly so it checks the range of the shifted immediate:

-            assert(Assembler::is_uimm12(_offset), ""should be"");
+            assert((_offset & (1 << size) - 1) == 0, ""misaligned offset"");
+            assert(Assembler::is_uimm12(_offset >> size), ""should be"");

Although I'm not clear what your original bug was: the existing code looks ok to me but maybe I'm missing something. Could it be related to the NativeInstruction::is_ldr_literal_at() problem? GCC generates LDR (immediate) instead of LDR (unscaled) for small non-negative offsets like we do now, so I'd prefer if we could stick with that form if possible.;;;","2021-10-29 12:48;dlong;ILW = crash because of wrong instruction = HLH = P2;;;","2021-10-31 20:52;ngasson;I think the mask check in Address::encode() is correct but the corresponding check in LIR_Assembler::as_Address() isn't:

    intptr_t addr_offset = intptr_t(addr->disp());
    if (Address::offset_ok_for_immed(addr_offset, addr->scale()))
      return Address(base, addr_offset, Address::lsl(addr->scale()));
    else {
      __ mov(tmp, addr_offset);
      return Address(base, tmp, Address::lsl(addr->scale()));
    }

The second argument to Address::offset_ok_for_immed() should be log2 of the operand size (e.g. 2 for a 4 byte load) but here we're using addr->scale() which is the shift value for an address with a register offset. 

  inline bool Address::offset_ok_for_immed(int64_t offset, uint shift) {
    uint mask = (1 << shift) - 1;
    if (offset < 0 || (offset & mask) != 0) {
      // Unscaled signed offset, encoded in a signed imm9 field.
      return Assembler::is_simm9(offset);
    } else {
      // Scaled unsigned offset, encoded in an unsigned imm12:_ field.
      return Assembler::is_uimm12(offset >> shift);
    }
  }

When the offset is an immediate addr->scale() is always zero. So (offset & mask) in offset_ok_for_immed() above is also always zero. This means for e.g. a four byte load at offset=290 we return true here but it should be false as it can't be encoded as LDR-immediate (not four byte aligned) or LDR-unscaled (won't fit in a signed 9-bit immediate).

Could you try the attached lir-as-address.diff by itself without the other two patches? You're right this is a bug in mainline too: I guess we've just been lucky C1 doesn't currently generate an offset that triggers the wrong behaviour.;;;","2021-11-02 02:52;phedlin;You're right Nick, the actual flaw is the use of 'addr->scale()'. The patch seems fine. We could settle for checking the offset is inside simm9, or perhaps change 'offset_ok_for_immed' to favour simm9-encoding? Possibly add an assert on 'offset_ok_for_immed' to Address::encoding (base_plus_offset case). Are you picking this up?, otherwise I will fix it during the day.;;;","2021-11-02 03:10;ngasson;Hi Patric, I haven't done anything with this since that last patch, it's fine for you to take it.

I'd prefer to stick with the current scheme of generating unsigned scaled immediates except where the offset is negative or unaligned: that matches what GCC and others generate for the same offsets, and we already have the patching code set up to handle that.;;;","2021-11-02 07:05;phedlin;Draft: https://github.com/openjdk/jdk/pull/6212;;;","2021-11-02 12:52;fparain;Nick, thank you for the lir-as-address.diff patch which seems to fix the main problem.
However, while trying it, I also noticed tests failures in Valhalla unit tests, further testing showed that those failures don't seem related to the changes I was currently doing in C1.
Applying the lir-as-address.diff patch to the head of the lworld branch in the Valhalla repo causes those failures too. The failing tests are all related to the profiling of type arguments of acmp:

[2021-11-02T15:41:59,219Z] Test Failures (3)
[2021-11-02T15:41:59,219Z] -----------------
[2021-11-02T15:41:59,219Z] Custom Run Test: @Run: test37_verifier - @Test: test37:
[2021-11-02T15:41:59,219Z] compiler.lib.ir_framework.shared.TestRunException: There was an error while invoking @Run method public void compiler.valhalla.inlinetypes.TestLWorldProfiling.test37_verifier(compiler.lib.ir_framework.RunInfo)
[2021-11-02T15:41:59,219Z] 	at compiler.lib.ir_framework.test.CustomRunTest.invokeTest(CustomRunTest.java:162)
[2021-11-02T15:41:59,219Z] 	at compiler.lib.ir_framework.test.AbstractTest.run(AbstractTest.java:104)
[2021-11-02T15:41:59,219Z] 	at compiler.lib.ir_framework.test.CustomRunTest.run(CustomRunTest.java:89)
[2021-11-02T15:41:59,219Z] 	at compiler.lib.ir_framework.test.TestVM.runTests(TestVM.java:808)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.TestVM.start(TestVM.java:239)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.TestVM.main(TestVM.java:154)
[2021-11-02T15:41:59,220Z] Caused by: java.lang.reflect.InvocationTargetException
[2021-11-02T15:41:59,220Z] 	at jdk.internal.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
[2021-11-02T15:41:59,220Z] 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:51)
[2021-11-02T15:41:59,220Z] 	at java.base/java.lang.reflect.Method.invoke(Method.java:570)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.CustomRunTest.invokeTest(CustomRunTest.java:157)
[2021-11-02T15:41:59,220Z] 	... 5 more
[2021-11-02T15:41:59,220Z] Caused by: compiler.lib.ir_framework.shared.TestRunException: public boolean compiler.valhalla.inlinetypes.TestLWorldProfiling.test37(java.lang.Object,java.lang.Object) should have been deoptimized by C2
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.shared.TestRun.check(TestRun.java:32)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.TestVM.assertDeoptimizedByC2(TestVM.java:892)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.TestFramework.assertDeoptimizedByC2(TestFramework.java:499)
[2021-11-02T15:41:59,220Z] 	at compiler.valhalla.inlinetypes.TestLWorldProfiling.test37_verifier(TestLWorldProfiling.java:1006)
[2021-11-02T15:41:59,220Z] 	... 9 more
[2021-11-02T15:41:59,220Z] 
[2021-11-02T15:41:59,220Z] 
[2021-11-02T15:41:59,220Z] Custom Run Test: @Run: test33_verifier - @Test: test33:
[2021-11-02T15:41:59,220Z] compiler.lib.ir_framework.shared.TestRunException: There was an error while invoking @Run method public void compiler.valhalla.inlinetypes.TestLWorldProfiling.test33_verifier(compiler.lib.ir_framework.RunInfo)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.CustomRunTest.invokeTest(CustomRunTest.java:162)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.AbstractTest.run(AbstractTest.java:104)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.CustomRunTest.run(CustomRunTest.java:89)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.TestVM.runTests(TestVM.java:808)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.TestVM.start(TestVM.java:239)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.TestVM.main(TestVM.java:154)
[2021-11-02T15:41:59,220Z] Caused by: java.lang.reflect.InvocationTargetException
[2021-11-02T15:41:59,220Z] 	at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
[2021-11-02T15:41:59,220Z] 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:51)
[2021-11-02T15:41:59,220Z] 	at java.base/java.lang.reflect.Method.invoke(Method.java:570)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.CustomRunTest.invokeTest(CustomRunTest.java:157)
[2021-11-02T15:41:59,220Z] 	... 5 more
[2021-11-02T15:41:59,220Z] Caused by: compiler.lib.ir_framework.shared.TestRunException: public boolean compiler.valhalla.inlinetypes.TestLWorldProfiling.test33(java.lang.Object,java.lang.Object) should have been deoptimized by C2
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.shared.TestRun.check(TestRun.java:32)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.TestVM.assertDeoptimizedByC2(TestVM.java:892)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.TestFramework.assertDeoptimizedByC2(TestFramework.java:499)
[2021-11-02T15:41:59,220Z] 	at compiler.valhalla.inlinetypes.TestLWorldProfiling.test33_verifier(TestLWorldProfiling.java:895)
[2021-11-02T15:41:59,220Z] 	... 9 more
[2021-11-02T15:41:59,220Z] 
[2021-11-02T15:41:59,220Z] 
[2021-11-02T15:41:59,220Z] Custom Run Test: @Run: test35_verifier - @Test: test35:
[2021-11-02T15:41:59,220Z] compiler.lib.ir_framework.shared.TestRunException: There was an error while invoking @Run method public void compiler.valhalla.inlinetypes.TestLWorldProfiling.test35_verifier(compiler.lib.ir_framework.RunInfo)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.CustomRunTest.invokeTest(CustomRunTest.java:162)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.AbstractTest.run(AbstractTest.java:104)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.CustomRunTest.run(CustomRunTest.java:89)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.TestVM.runTests(TestVM.java:808)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.TestVM.start(TestVM.java:239)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.TestVM.main(TestVM.java:154)
[2021-11-02T15:41:59,220Z] Caused by: java.lang.reflect.InvocationTargetException
[2021-11-02T15:41:59,220Z] 	at jdk.internal.reflect.GeneratedMethodAccessor37.invoke(Unknown Source)
[2021-11-02T15:41:59,220Z] 	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:51)
[2021-11-02T15:41:59,220Z] 	at java.base/java.lang.reflect.Method.invoke(Method.java:570)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.CustomRunTest.invokeTest(CustomRunTest.java:157)
[2021-11-02T15:41:59,220Z] 	... 5 more
[2021-11-02T15:41:59,220Z] Caused by: compiler.lib.ir_framework.shared.TestRunException: public boolean compiler.valhalla.inlinetypes.TestLWorldProfiling.test35(java.lang.Object,java.lang.Object) should have been deoptimized by C2
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.shared.TestRun.check(TestRun.java:32)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.test.TestVM.assertDeoptimizedByC2(TestVM.java:892)
[2021-11-02T15:41:59,220Z] 	at compiler.lib.ir_framework.TestFramework.assertDeoptimizedByC2(TestFramework.java:499)
[2021-11-02T15:41:59,220Z] 	at compiler.valhalla.inlinetypes.TestLWorldProfiling.test35_verifier(TestLWorldProfiling.java:951)
[2021-11-02T15:41:59,220Z] 	... 9 more
;;;","2021-11-03 00:44;ngasson;The TestLWorldProfiling failure is caused by a register conflict in LIR_Assembler::emit_profile_inline_type(): as_Address by default uses rscratch1 as a temporary if the offset is too big to fit in an immediate, but we also use rscratch1 in that function to hold the updated MDO value. It's a mistake from when I originally ported that function. I think it worked before because it's a byte load/store, but now we conservatively assume that as_Address() will be used for an 8-byte load/store, and the therefore the offset is unaligned and offset_ok_for_immed() returns false. I raised JDK-8276538 separately for this part and I'll fix it on the lworld branch.;;;","2021-11-05 05:19;phedlin;Unfortunately we cannot ""detach"" the datum size from the alignment shift in the uimm12 encoding. This might render illegal encodings, e.g. given a large (aligned) immediate offset for a byte access, where an assumed 64-bit alignment (log2(size)/shift 3) could determine the access encodable as a ""base-plus-immediate-offset"" requiring a lsl:3 while accessing a byte.

Updated draft.;;;","2021-11-29 02:36;roboduke;Changeset: 72bacf8d
Author:    Patric Hedlin <phedlin@openjdk.org>
Date:      2021-11-29 10:34:13 +0000
URL:       https://git.openjdk.java.net/jdk/commit/72bacf8d256071773d8fd9f9c2d0aebb2cb32dea
;;;","2021-11-29 02:37;roboduke;Changeset: 72bacf8d
Author:    Patric Hedlin <phedlin@openjdk.org>
Date:      2021-11-29 10:34:13 +0000
URL:       https://git.openjdk.java.net/jdk/commit/72bacf8d256071773d8fd9f9c2d0aebb2cb32dea
;;;","2022-02-11 10:00;skonchad;As discussed with Mikael, closing this as not verified;;;","2022-04-25 14:12;clanger;Should this ever be backported to other update releases, the fix for JDK-8278417 (https://github.com/openjdk/jdk18u/commit/6d3fd860d748a092a65ab9700b47686099b81bf4) should be backported, too.;;;","2022-04-26 12:44;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/370
Date: 2022-04-26 19:36:59 +0000;;;","2022-04-26 12:49;mbalao;Fix request (17u)

I'd like to request a backport approval for this fix as the 17u release is affected. Patch applies cleanly. The PR has been created here: https://github.com/openjdk/jdk17u-dev/pull/370 I'm committed to backport the followup fixes that I identified: 8278417 and 8277928.;;;","2022-04-27 05:28;goetz;Hi @mbalao, could you please make dependent pull requests for the two follow-ups? Thanks!;;;","2022-05-15 23:52;goetz;Hi @mbalao, please add the tag again after making the dependent pull requests.  Thanks.;;;","2022-09-14 17:44;mbalao;Fix request (17u)

I'd like to request a backport approval for this fix as the 17u release is affected. Patch applies cleanly. The PR has been created here: https://github.com/openjdk/jdk17u-dev/pull/370 I've also requested follow up fixes to be backported as depedencies: JDK-8277928 (PR https://github.com/openjdk/jdk17u-dev/pull/668) and JDK-8293826 (PR https://github.com/openjdk/jdk17u-dev/pull/669).;;;",,,
Preventive collections trigger before maxing out heap,JDK-8276107,5061385,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,tschatzl,tschatzl,tschatzl,2021-10-28 05:29,2021-11-09 09:17,2023-10-01 09:57,2021-11-01 09:50,18,,,,,,,,,,,,,18,hotspot,,0,gc-g1,gc-g1-preventive-gc,gc-pending-review,,,,,,,,,,,,,,"Preventive collections trigger before maxing out heap, i.e. it uses the current heap size for triggering instead of the maximum available.

As this feature is about preventing evacuation failures, they will not occur anyway if G1 can still expand the heap.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8257774,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2utwb:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-11-01 09:50;roboduke;Changeset: e265f838
Author:    Thomas Schatzl <tschatzl@openjdk.org>
Date:      2021-11-01 16:48:13 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e265f83858b84451258677f130f98be5375a417a
;;;",,,,,,,,,,,,,,,,,,,,
"C2: Conv(D|F)2(I|L)Nodes::Ideal should handle rounding correctly",JDK-8276105,5061381,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,shade,shade,shade,2021-10-28 04:50,2021-12-01 03:11,2023-10-01 09:57,2021-11-01 23:39,11,17,18,,,,,,,,,,,18,hotspot,,0,c2,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,oracle-triage-11,oracle-triage-17,oracle-triage-18,redhat-interest,regression,,,,,,"Seems to only manifest on x86_32, and only with SSE=0. The test sets UseAVX=1, maybe that's the problem.

$ CONF=linux-x86-server-fastdebug make run-test TEST=compiler/loopopts/superword/CoLocatePack.java TEST_VM_OPTS=""-XX:UseAVX=0 -XX:UseSSE=0"" 
...

CompileCommand: compileonly compiler/loopopts/superword/CoLocatePack.test bool compileonly = true
 191  ConvF2L  === _  714  [[ 193 ]]  !jvms: CoLocatePack::test @ bci:30 (line 70)
# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/phaseX.cpp:1128
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/home/shade/trunks/jdk/src/hotspot/share/opto/phaseX.cpp:1128), pid=1717516, tid=1717532
#  fatal error: modified node was not processed by IGVN.transform_old()
#
",,,,,,,,,,JDK-8277197,JDK-8277051,JDK-8278060,JDK-8277291,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8266950,,,,,,,,,,,,,,,,,,,,,,,,,,,,b25,17,,,,,,,,"0|i2utvf:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-28 05:27;shade;Bisection points to JDK-8266950 as the first bad commit.;;;","2021-10-29 00:33;chagedorn;ILW = C2 assertion in IGVN, only single test and observed on x86_32, use UseSSE>=1 or disable compilation of affected method = HLL = P4;;;","2021-10-29 09:09;shade;Aha. I think I understand why. The Conv(D|F)2(I|L)Nodes::Ideal-s have the rules that handle Rounding(Float|Double) inputs. But when those are taken, we do set_req and still return NULL! So GVN is properly confused. This path started to be taken on x86_32 after JDK-8266950, which requires rounding more frequently with low SSE, now that everything is strictfp.;;;","2021-11-01 23:39;roboduke;Changeset: 0488ebdf
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-11-02 06:38:26 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0488ebdf14dacfa79d98de16ed949c813dd88701
;;;","2021-11-12 07:39;shade;Fix Request (11u)

Fixes the long-standing obscure compiler bug, which manifests on x86_32 with strictfp. Patch applies cleanly. Testing passes.;;;","2021-11-15 02:12;shade;Fix Request (17u)

Same reason as for 11u.;;;","2021-11-17 02:29;goetz;11u note:
Hi Aleksey, 
I am not sure whether we should bring this to 11.0.14, I think 11.0.15 would be better. The change is new in head, and the bug, as you say, long-standing, so that there should not be a hurry.  We had to backout an 11.0.15 change just last week.  What do you think?
;;;","2021-11-17 02:36;shade;The fix seems simple, but I don't mind waiting for 11.0.15.;;;",,,,,,,,,,,,,
JDK-8245095 integration reverted JDK-8247980,JDK-8276102,5061378,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,shade,shade,shade,2021-10-28 03:45,2022-04-25 10:56,2023-10-01 09:57,2021-10-29 03:27,18,,,,,,,,,,,,,18,core-libs,,0,regression,,,,,,,,,,,,,,,,"See here:

https://github.com/openjdk/jdk/commit/9d191fce55fa70d6a2affc724fad57b0e20e4bde#diff-5b9b15832385ab8e02ffca3ddef6d65a9dea73f45abbe5e4f0be561be02073ffR30

It reintroduced `java/util/stream` in `exclusiveAccess.dirs`, which effectively reverts JDK-8247980. I noticed this because jdk:tier1 became slow again.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8245095,JDK-8247980,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2utur:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@c356540,,,,,,,Verified,,"2021-10-29 03:27;roboduke;Changeset: 15fd8a30
Author:    Aleksey Shipilev <shade@openjdk.org>
Date:      2021-10-29 10:26:06 +0000
URL:       https://git.openjdk.java.net/jdk/commit/15fd8a300b503fada7611004b5cb1bda6ecc292e
;;;","2022-04-25 10:56;sqetools;verified;;;",,,,,,,,,,,,,,,,,,,
ciReplay: replay failure due to incomplete ciMethodData information,JDK-8276095,5061369,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,dlong,roland,roland,2021-10-28 01:17,2021-12-13 02:50,2023-10-01 09:57,2021-11-15 13:11,18,,,,,,,,,,,,,18,hotspot,,0,ci-replay-failed,noreg-hard,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,"I pulled the proposed PR from:
https://github.com/openjdk/jdk/pull/6099
merged with master, undid the proposed fix. Then running the test reliably triggers a crash but using the replay file that's produced by the crash, I can't trigger the crash again. I tried reverting recent changes to replay compilation and that makes no difference.
Test attached so it doesn't get lost.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276902,,,,,,,JDK-8277076,JDK-8254106,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-28 01:19;roland;TestLoopEndNodeEliminate.java;https://bugs.openjdk.org/secure/attachment/96839/TestLoopEndNodeEliminate.java",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2utsr:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-28 12:36;dlong;ILW = MMH = P3;;;","2021-10-30 00:40;dlong;replay needs to save/restore _invocation_counter in ciMethodData.
;;;","2021-11-15 13:11;roboduke;Changeset: 9326eb14
Author:    Dean Long <dlong@openjdk.org>
Date:      2021-11-15 21:09:23 +0000
URL:       https://git.openjdk.java.net/jdk/commit/9326eb14617bf08e3376f854fc022e11d1ef34dd
;;;",,,,,,,,,,,,,,,,,,
Increase size of metaspace mappings,JDK-8276086,5061360,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,stuefe,stuefe,stuefe,2021-10-27 23:32,2023-01-29 22:54,2023-10-01 09:57,2021-10-29 02:46,18,,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-yes,metaspace,,,,,,,,,,,,,,"Disregarding class space, metaspace consists of a list of individual mappings. Traditionally, individual mappings had been rather small (2 root chunks => 8 MB). That is because the mechanism to release metaspace memory to the OS had been to unmap unused mappings, and the larger the mappings were the smaller the chance of them being completely unused, due to fragmentation.

We recently did away with this old release mechanism in favor of a new one with finer granularity (see JDK-8275582). So there is no motivation anymore to keep mappings particularly small.

There are however good reasons to enlarge them:
- less fragmentation on the OS mapping level (e.g. on Linux, number of VMAs would go down, has a number of advantages)
- Larger mappings -> fewer of them -> list gets smaller, which is good for functions iterating this list (e.g. `Metaspace::contains()`, see JDK-8275704).

The effect of larger mappings is an increase in the step size with process *virtual size* will grow. So, before vsize grew in 8MB steps, now those steps are larger and rarer. In total we should not use much more vsize than before. Larger mappings would have no effect on committed memory size.

And note that vsize is pretty much irrelevant with modern OSes. For our hotspot on 64-bit, it is astronomical anyway, so this change would have no impact in real life. 

The only exception are 32-bit platforms, where address space itself is limited, so this change should only affect 64-bit platforms.",,,,,,,,,,JDK-8301322,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275704,JDK-8275582,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2utqr:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-29 02:46;roboduke;Changeset: e89b2c04
Author:    Thomas Stuefe <stuefe@openjdk.org>
Date:      2021-10-29 09:44:48 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e89b2c040c68aebf6a099602bc0e04f963e89c84
;;;","2023-01-25 09:27;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1113
Date: 2023-01-25 17:18:47 +0000;;;","2023-01-25 22:49;stuefe;Fix Request:

Would like to downport this in preparation for downporting JDK-8294677: chunklevel::MAX_CHUNK_WORD_SIZE too small for some applications

Patch changes the size of non-class-space metaspace mappings on 64-bit from 8Mb to 64Mb. This results in less address space fragmentation and less busywork in the metaspace allocator since the node lists are shorter. 

Applies cleanly, technical risk is quite minimal.;;;","2023-01-27 05:08;stuefe;Fix Request 17u (again):

Would like to downport this in preparation for downporting JDK-8294677: ""chunklevel::MAX_CHUNK_WORD_SIZE too small for some applications"".
The risk is very small. Changes, on 64-bit, the size of non-class-space metaspace mappings from 8m to 64m. This is a benign change.
Patch does apply cleanly.

Tests:
- manually tested hotspot_metaspace (among others, includes runtime/Metaspace, gc/Metaspace, metaspace-gtests) on x64, x86, aarch64 and arm.
- SAP nightlies passed
- GHAs show only unrelated, infrastructure-related errors



Applies cleanly, technical risk is quite minimal. ;;;",,,,,,,,,,,,,,,,,
CheckCastPP with raw oop input floats below a safepoint,JDK-8276064,5061328,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,thartmann,dcubed,dcubed,2021-10-27 06:30,2023-01-09 08:25,2023-10-01 09:57,2022-11-16 22:00,17,18,19,20,,,,,,,,,,20,hotspot,,0,c2,intermittent,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-11,oracle-triage-18,regression,tier3,vectorapi,,,,,,,,"The following test failed in the JDK18 CI:

jdk/incubator/vector/Vector512ConversionTests.java

Here's a snippet from the log file:

 1541  CallStaticJavaDirect  ===  1548  1874  1881  15  0  10671  9054  9056  9061  9053  8757  9055  0  8759  9057  0  0  9040  8823  8872  0  1312  10154  1319  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  9056  0  1697  0  0  0  0  0  0  0  0  1884  1547  0  0  0  0  10263  1546  1885  1885  0  0  0  0  0  0  0  0  0  1886  1545  1544  1543  0  0  0  10668  10668  10667  9068  10485  [[ 1542  1540  1887  1893  6726 ]] Static  java.util.Objects::requireNonNull # java/lang/Object * ( java/lang/Object * ) ByteVector::compareTemplate @ bci:1 (line 1748) Byte512Vector::compare @ bci:5 (line 351) Byte512Vector::compare @ bci:3 (line 41) AbstractShuffle::checkIndexes @ bci:24 (line 127) ByteVector::rearrangeTemplate @ bci:1 (line 2102) Byte512Vector::rearrange @ bci:7 (line 412) Byte512Vector::rearrange @ bci:2 (line 41) ByteVector::sliceTemplate @ bci:55 (line 2018) Byte512Vector::slice @ bci:2 (line 384) Byte512Vector::slice @ bci:2 (line 41) AbstractVector::convertShapeTemplate @ bci:234 (line 371) Byte512Vector::convertShape @ bci:4 (line 248) AbstractVector::castShape @ bci:31 (line 287) AbstractVectorConversionTest::conversion_kernel @ bci:374 (line 449) !jvms: AbstractVectorConversionTest::copyConversionArray @ bci:32 (line 341) AbstractVectorConversionTest::conversion_kernel @ bci:232 (line 438)
# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/buildOopMap.cpp:360
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S13789/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/ae9b8a50-11b3-4a62-a0eb-42987b013aa3/runs/28902ab3-8bff-4d06-9390-2e68644510f4/workspace/open/src/hotspot/share/opto/buildOopMap.cpp:360), pid=21626, tid=21654
#  assert(false) failed: there should be a oop in OopMap instead of a live raw oop at safepoint
#
# JRE version: Java(TM) SE Runtime Environment (18.0+21) (fastdebug build 18-ea+21-1331)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+21-1331, mixed mode, sharing, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0x6ade32]  OopFlow::build_oop_map(Node*, int, PhaseRegAlloc*, int*)+0x832
#
# Core dump will be written. Default location: Core dumps may be processed with ""/opt/core.sh %p"" (or dumping to /opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S13709/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c9e82747-30a9-4a0c-9a72-f2f5a94976d9/runs/b9f1c0fc-fcac-4687-870e-f54d4e6c2394/testoutput/test-support/jtreg_open_test_jdk_jdk_vector/scratch/0/core.21626)
#
# An error report file with more information is saved as:
# /opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S13709/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c9e82747-30a9-4a0c-9a72-f2f5a94976d9/runs/b9f1c0fc-fcac-4687-870e-f54d4e6c2394/testoutput/test-support/jtreg_open_test_jdk_jdk_vector/scratch/0/hs_err_pid21626.log
#
# Compiler replay data is saved as:
# /opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S13709/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/c9e82747-30a9-4a0c-9a72-f2f5a94976d9/runs/b9f1c0fc-fcac-4687-870e-f54d4e6c2394/testoutput/test-support/jtreg_open_test_jdk_jdk_vector/scratch/0/replay_pid21626.log
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#
----------System.err:(1/55)----------
WARNING: Using incubator modules: jdk.incubator.vector
----------rerun:(41/6340)*----------

Here's the crashing thread's stack:

---------------  T H R E A D  ---------------

Current thread (0x00007f607c1fb3c0):  JavaThread ""C2 CompilerThread2"" daemon [_thread_in_native, id=21654, stack(0x00007f609c6c1000,0x00007f609c7c2000)]


Current CompileTask:
C2:   4258  732             AbstractVectorConversionTest::conversion_kernel (436 bytes)

Stack: [0x00007f609c6c1000,0x00007f609c7c2000],  sp=0x00007f609c7bcb20,  free space=1006k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x6ade32]  OopFlow::build_oop_map(Node*, int, PhaseRegAlloc*, int*)+0x832
V  [libjvm.so+0x6ae819]  OopFlow::compute_reach(PhaseRegAlloc*, int, Dict*)+0x339
V  [libjvm.so+0x6b0a52]  PhaseOutput::BuildOopMaps()+0x1a82
V  [libjvm.so+0x159e64f]  PhaseOutput::Output()+0xd2f
V  [libjvm.so+0x9f8dc7]  Compile::Code_Gen()+0x427
V  [libjvm.so+0xa05148]  Compile::Compile(ciEnv*, ciMethod*, int, bool, bool, bool, bool, bool, DirectiveSet*)+0x1668
V  [libjvm.so+0x81f946]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x646
V  [libjvm.so+0xa154b9]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xd09
V  [libjvm.so+0xa16158]  CompileBroker::compiler_thread_loop()+0x518
V  [libjvm.so+0x188e25c]  JavaThread::thread_main_inner()+0x27c
V  [libjvm.so+0x1894810]  Thread::call_run()+0x100
V  [libjvm.so+0x1574004]  thread_native_entry(Thread*)+0x104",,,,,,,,,,JDK-8299816,JDK-8298834,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8271600,JDK-8252372,JDK-8256540,,,,,,,,"2022-11-15 23:42;kvn;hs_err_pid3803.log;https://bugs.openjdk.org/secure/attachment/101623/hs_err_pid3803.log","2022-11-15 23:42;kvn;replay_pid3803.log;https://bugs.openjdk.org/secure/attachment/101624/replay_pid3803.log",,,,,,,x86_64,,,,,,,,,,,,,linux,,,,,,"0|i2utjn:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-27 13:22;psandoz;So far test failing with the following:

-XX:UseAVX=3

CPU: Intel_R__Xeon_R__Gold_6354_CPU___3.00GHz

CPU features:
fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ss ht syscall nx pdpe1gb rdtscp lm constant tsc arch perfmon rep good nopl xtopology cpuid tsc known freq pni pclmulqdq vmx ssse3 fma cx16 pcid sse4 1 sse4 2 x2apic movbe popcnt tsc deadline timer aes xsave avx f16c rdrand hypervisor lahf lm abm 3dnowprefetch cpuid fault invpcid single ssbd ibrs ibpb stibp ibrs enhanced tpr shadow vnmi flexpriority ept vpid ept ad fsgsbase tsc adjust bmi1 avx2 smep bmi2 erms invpcid avx512f avx512dq rdseed adx smap avx512ifma clflushopt clwb avx512cd sha ni avx512bw avx512vl xsaveopt xsavec xgetbv1 xsaves nt good wbnoinvd arat avx512vbmi umip pku ospke avx512 vbmi2 gfni vaes vpclmulqdq avx512 vnni avx512 bitalg avx512 vpopcntdq la57 rdpid md clear arch capabilities;;;","2021-10-27 16:13;dlong;[~roland], could this be a regression caused by JDK-8259609?;;;","2021-10-27 16:16;dlong;ILW = Assert during C2 compilation (regression), single Vector API (incubator) test, no workaround but disable compilation of affected method = HLM = P3 ;;;","2021-10-28 04:02;roland;[~dlong] is there a counted loop with a long iv in this method? That seems unlikely. I tried to reproduce it but I don't have an avx512 system readily available. Do you know if it reproduces with a replay file? Maybe I can force UseAVX=3 then.;;;","2021-10-28 14:11;dlong;[~roland] No, unfortunately I'm not able to reproduce the crash, even with a replay file.;;;","2021-11-21 23:52;thartmann;[~sviswanathan], [~jbhateja], could someone from Intel pick this up? We have a hard time reproducing in our infra because it only triggers in about 4/500 runs on an ""Intel_R__Xeon_R__Gold_6354_CPU___3.00GHz"". Thanks!;;;","2022-01-17 07:40;chagedorn;Hi [~jbhateja], do you plan to get a fix in for this in JDK 18? As it is a P3, it needs to be fixed before RDP 2 is starting this Thursday. Otherwise, we have to defer it to JDK 19.
;;;","2022-01-20 02:57;chagedorn;Deferring to JDK 19 as this is a P3 and RDP 2 is starting today.;;;","2022-05-18 00:42;thartmann;This reproduced last in October 2021 and I was not able to reproduce it with 1000 runs of latest JDK 18u and 19. I suspect that the root cause might be JDK-8252372 and that the issue has been fixed by one of the many follow-up fixes. Assigning to me and closing as Cannot Reproduce for now. Please re-open if it shows up again.;;;","2022-10-17 00:02;thartmann;This showed up again. Re-opening.;;;","2022-10-26 05:34;thartmann;I can reproduce this reliably now with:
jtreg -jdk:... -vmoptions:""-XX:CompileCommand=compileonly,ShortMaxVectorLoadStoreTests::loadStoreMaskArray -Xcomp -XX:-TieredCompilation -XX:+StressMethodHandleLinkerInlining"" test/jdk/jdk/incubator/vector/ShortMaxVectorLoadStoreTests.java

The problem seems to be similar to JDK-8271600 in that a CheckCastPP that should closely follow the Initialize is moved out of a loop and as a result, the raw pointer crosses a safepoint. In this case, the root cause is loop unswitching, namely PhaseIdealLoop::clone_loop_handle_data_uses.;;;","2022-11-01 04:59;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk/pull/10932
Date: 2022-11-01 11:55:04 +0000;;;","2022-11-15 23:42;kvn;I got this failure when run  jdk/incubator/vector/ tests with -XX:+IgnoreUnrecognizedVMOptions -XX:-MonomorphicArrayCheck -XX:-UncommonNullCast flags in AVX512 machines. Test jdk/incubator/vector/Vector512ConversionTests.java failed (1 time from 3 runs). I attached hs_err and replay files.;;;","2022-11-16 22:00;dukebot;Changeset: cd9c688b
Author:    Tobias Hartmann <thartmann@openjdk.org>
Date:      2022-11-17 05:58:38 +0000
URL:       https://git.openjdk.org/jdk/commit/cd9c688bfce36e4b2d37dd68dd8031f197b9eddc
;;;","2023-01-04 01:18;goetz;Fix request [17u]

I backport this for parity with 17.0.7-oracle.
Typical risk of a C2 change. Small change.
Clean backport.
Test passes but passes also without the fix. SAP nightly testing passed.;;;","2023-01-04 01:34;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1028
Date: 2023-01-04 09:27:10 +0000;;;",,,,,
Some swing test fails on specific CI macos system,JDK-8276058,5061321,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,psadhukhan,psadhukhan,psadhukhan,2021-10-27 05:25,2023-07-12 00:36,2023-10-01 09:57,2021-11-17 20:36,18,,,,,,,,,,,,,18,client-libs,,0,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,sn_106,test_sprint,testbug,,,,,,,,,,,"As per JDK-8252813, some tests fails recurringly in CI macos system.
This issue is to create subtask to solve few issues at a time, starting with the open swing tests
javax/swing/plaf/synth/SynthButtonUI/6276188/bug6276188.java
javax/swing/JInternalFrame/8069348/bug8069348.java
javax/swing/JButton/8151303/PressedIconTest.java",,,,,,,,,,JDK-8299066,JDK-8308532,JDK-8299065,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277407,,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-28 11:48;psadhukhan;image-1.png;https://bugs.openjdk.org/secure/attachment/96854/image-1.png","2021-10-28 10:37;psadhukhan;image.png;https://bugs.openjdk.org/secure/attachment/96852/image.png",,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uti3:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@568a5b31,,,,,,,,,"2021-11-17 20:36;roboduke;Changeset: 91607436
Author:    Prasanta Sadhukhan <psadhukhan@openjdk.org>
Date:      2021-11-18 04:33:49 +0000
URL:       https://git.openjdk.java.net/jdk/commit/91607436b79126ccb999deaf38a98209dbfe6ec1
;;;","2023-05-09 02:35;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1337
Date: 2023-05-09 09:27:41 +0000;;;","2023-05-10 00:54;clanger;Fix request (17u):
Backport of test fix for Oracle parity. GHA and SAP nightlies are green. No risk.;;;","2023-05-11 03:48;goetz;[17u]
Please also run the test. It is not run in any of the mentioned tests!;;;","2023-05-11 13:37;clanger;Test results on my MacBook are the same as for head:
test/jdk/java/awt/Dialog/MakeWindowAlwaysOnTop/MakeWindowAlwaysOnTop.java: Failure
test/jdk/javax/swing/JButton/8151303/PressedIconTest.java: Pass
test/jdk/javax/swing/JInternalFrame/8069348/bug8069348.java: Failure
test/jdk/javax/swing/plaf/synth/SynthButtonUI/6276188/bug6276188.java: Pass with JDK-8277407 incorporated;;;",,,,,,,,,,,,,,,,
Control.skin.setSkin(Skin) fails to call dispose() on discarded Skin,JDK-8276056,5060931,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mhanl,webbuggrp,webbuggrp,2021-10-21 12:41,2022-07-09 07:30,2023-10-01 09:57,2022-07-08 08:02,jfx17,jfx18,,,,,,,,,,,,jfx19,javafx,,0,dcspn,regression,reproducer-yes,webbug,,,,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
JavaFX 17.0.0.1 and 18ea+4

A DESCRIPTION OF THE PROBLEM :
Control.skin.setSkin(Skin) discards a new Skin of the same class as the existing Skin, but fails to call Skin.dispose(). That fails to perform the cleanup the discarded Skin's dispose() method should have done, such as removing Behavior InputMappings that the discarded Skin's constructor added.

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Run the attached application. Open the ComboBox popup. Use the down arrow key to navigate past the bottom of the items in the viewport. Observe that the ListView fails to scroll to keep the selected item in the viewport. You can set a breakpoint in ListViewSkin.onSelectNextCell() to see that the skinnable's Skin is a different instance than the instance being called, because the Control's skin property discarded the instance but failed to dispose() it.

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
The ListView should scroll to follow the selected item during keyboard arrow navigation. The discarded ListViewSkin instance's ListViewBehavior should not have InputMap KeyMappings installed on the ListView.
ACTUAL -
The ListView fails to scroll to follow the selected item during keyboard arrow navigation. The discarded ListViewSkin instance's ListViewBehavior's InputMap KeyMappings are installed on the ListView and consuming the events.

---------- BEGIN SOURCE ----------
import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.scene.Scene;
import javafx.scene.control.ComboBox;
import javafx.scene.control.Skin;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

import java.util.stream.Collectors;
import java.util.stream.IntStream;

public class ControlDiscardsSkinOfSameClassWithoutDisposing extends Application {

   public static void main( final String[] args ) {
      launch( args );
   }

   @Override
   public void start( final Stage primaryStage ) throws Exception {
      final ComboBox<Integer> comboBox = new ComboBox<>(
            FXCollections.observableList( IntStream.rangeClosed( 0, 20 )
                                                   .boxed().collect( Collectors.toList() ) )
      );
      comboBox.setEditable( true );
      final StackPane root = new StackPane( comboBox );
      root.setStyle( ""-fx-min-width: 30em; -fx-min-height: 30em;"" );
      final Scene scene = new Scene( root );
      scene.getStylesheets().add( getClass()
            .getResource( ""ControlDiscardsSkinOfSameClassWithoutDisposing.css"" )
            .toExternalForm() );
      primaryStage.setScene( scene );
      primaryStage.sizeToScene();
      primaryStage.centerOnScreen();
      primaryStage.show();
      // Now, the ComboBox popup ListView has an initial ListViewSkin installed on it,
      // but Control.skin.setSkin(Skin) discarded a second ListViewSkin and failed to call dispose() on it.
      // If you open the ComboBox popup and use the down arrow key to navigate past the bottom item in the viewport,
      // then you will see that the ListView fails to scroll to follow the selected item.
      // That is because the second (discarded) ListViewSkin's ListViewBehavior's InputMap KeyMappings are still
      // observing the ListView and consuming events to make calls on the second (discarded) ListViewSkin's
      // VirtualFlow, preventing the first (kept) ListViewSkin's ListViewBehavior's InputMap KeyMappings from
      // receiving the events and making calls on the VirtualFlow that is actually displayed.
   }
}

-----------------------------------

ControlDiscardsSkinOfSameClassWithoutDisposing.css:

.list-view {
   -fx-skin: ""javafx.scene.control.skin.ListViewSkin"";
}

.combo-box {
   -fx-skin: ""javafx.scene.control.skin.ComboBoxListViewSkin"";
}

---------- END SOURCE ----------

CUSTOMER SUBMITTED WORKAROUND :
I could not find a place to hook to implement a general purpose workaround.
In the case of ListView, I implemented a custom ListViewSkin that overrides createVirtualFlow() to return an instance of a derived class of VirtualFlow. That derived class overrides VirtualFlow.scrollTo(int) to check if the skinnable's Skin is not equal to the current Skin. And, just to be sure, it checks if ""ListViewBehavior"" is in one of the class names in the current Thread's stack trace. If so, it assumes that Control.skin.setSkin(Skin) discarded this Skin instance, and then calls dispose() on itself. That disposes the ListViewBehavior and prevents it from consuming future events. Of course, the single event that triggered that call to scrollTo(int) gets consumed, preventing the active VirtualFlow from getting the desired call.

For the actual fix, I suggest that Control.skin.setSkin(Skin) not discard a new Skin merely because it is of the same class as the existing Skin.
If there is a good reason to continue discarding same-class new Skins, then call Skin.dispose() on the discarded Skin, and document the behavior in the javadoc of Control.skinProperty().

FREQUENCY : always


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276553,,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-27 05:04;pnarayanaswa;Capture.PNG;https://bugs.openjdk.org/secure/attachment/96830/Capture.PNG","2021-10-27 04:55;pnarayanaswa;ControlDiscardsSkinOfSameClassWithoutDisposing.css;https://bugs.openjdk.org/secure/attachment/96827/ControlDiscardsSkinOfSameClassWithoutDisposing.css","2021-10-27 05:00;pnarayanaswa;ControlDiscardsSkinOfSameClassWithoutDisposing.java;https://bugs.openjdk.org/secure/attachment/96829/ControlDiscardsSkinOfSameClassWithoutDisposing.java",,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2ur3f:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@67282485,,,,,,,,,"2021-10-27 04:55;pnarayanaswa;Checked with attached testcase in Windows 10, Issue is reproducible in openjfx 17 and 18ea Attached screenshot for reference
Test result
========
8u311: Pass
openjfx11:Pass
openjfx16: Pass
openjfx17: Fail <--Regression
openjfx18: Fail 

;;;","2021-10-29 05:09;aghaisas;Regression may be due to one of the issues linked to umbrella issue JDK-8241364.
It is not exactly a regression, but more cleanup is required. JDK-8245303 may share the same root cause. Need to check.;;;","2021-10-29 06:51;fastegal;IMO, there are several issues here

1. Control.skinProperty not disposing a skin that it discards
2. pecularities of ComboXXSkin (which is not yet cleaned, as of JDK-8241364)

The former also introduces memory leaks (of the discarded skin) plus might pile up children (below are are couple of failing tests). Can be fixed (for most, but not all already cleaned skins) by calling dispose when discarding the skin.

The latter - as demonstrated by the example (nice one, btw :) is a bit weird (even in the light of not yet being cleaned), some observations:

- happens only for the listView in the combo's popup, not for a stand-alone listView
- don't see any change  between 16/17 (working/not working) that's obviously related to replacing the combo/listView skin

Failing tests (could be added to SkinMemoryLeakTest):

    /**
     * default skin -> set another instance of default skin
     */
    @Test
    public void testMemoryLeakSameSkinClass() {
        installDefaultSkin(control);
        Skin<?> skinOfSameClass = createDefaultSkin(control);
        control.setSkin(skinOfSameClass);
        WeakReference<?> weakRef = new WeakReference<>(skinOfSameClass);
        skinOfSameClass = null;
        attemptGC(weakRef);
        assertEquals(""unused Skin must be gc'ed"", null, weakRef.get());
    }

    /**
     * default skin -> set alternative while showing
     */
    @Test
    public void testMemoryLeakSameSkinClassShowing() {
        showControl(control, true);
        Skin<?> skinOfSameClass = createDefaultSkin(control);
        control.setSkin(skinOfSameClass);
        WeakReference<?> weakRef = new WeakReference<>(skinOfSameClass);
        assertNotNull(weakRef.get());
        // beware: this is important - we might get false reds without!
        Toolkit.getToolkit().firePulse();
        skinOfSameClass = null;
        attemptGC(weakRef);
        assertEquals(""Skin must be gc'ed"", null, weakRef.get());
    }

    @Test
    public void testControlChildrenSameSkinClass() {
        installDefaultSkin(control);
        int childCount = control.getChildrenUnmodifiable().size();
        String skinClass = control.getSkin().getClass().getSimpleName();
        Skin<?> skinOfSameClass = createDefaultSkin(control);
        control.setSkin(skinOfSameClass);
        assertEquals(skinClass + "" must remove direct children that it has added"",
                childCount, control.getChildrenUnmodifiable().size());
    }

    @Test
    public void testSetSkinOfSameClass() {
        installDefaultSkin(control);
        Skin<?> skin = control.getSkin();
        Skin<?> skinOfSameClass = createDefaultSkin(control);
        assertEquals(""sanity: skinnable is control"", control, skinOfSameClass.getSkinnable());
        assertSame(""sanity: same skin class"", skin.getClass(), skinOfSameClass.getClass());
        control.setSkin(skinOfSameClass);
        assertSame(""sanity: skin must be same instance"", skin, control.getSkin());
        assertNull(""rejected skin must be disposed"", skinOfSameClass.getSkinnable());
    }

(most) are passing with changing skinProperty.set to dispose the skin:

            if (v == null
                ? oldValue == null
                : oldValue != null && v.getClass().equals(oldValue.getClass())) {
                if (v != null) {
                    v.dispose();
                }
                return;
            }
;;;","2022-06-29 06:41;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jfx/pull/806
Date: 2022-06-29 13:35:15 +0000;;;","2022-07-08 08:02;dukebot;Changeset: 178d8987
Author:    Marius Hanl <mhanl@openjdk.org>
Committer: Kevin Rushforth <kcr@openjdk.org>
Date:      2022-07-08 14:59:57 +0000
URL:       https://git.openjdk.org/jfx/commit/178d8987e3c9524bf47cffd23d72149af204ac79
;;;",,,,,,,,,,,,,,,,
[lworld] Indeterministic GC behavior in runtime/valhalla/inlinetypes/InlineOops.java,JDK-8276051,5061313,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,dsimms,dsimms,dsimms,2021-10-27 03:04,2021-10-27 05:24,2023-10-01 09:57,2021-10-27 05:24,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,lw3,lworld,,,,,,,,,,,,,,,"Some issues:

* The loop to exercise GC in testActiveGc() causes intermittent OOM
* Waiting on WeakReference processing wildly increases test execution time
* Using many threads during concurrent test execution is wasteful
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,repo-valhalla,,,,,,,,"0|i2utgb:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
XMLInputFactoryImpl.getProperty() returns null,JDK-8276050,5061095,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,joehw,webbuggrp,webbuggrp,2021-10-25 04:13,2022-08-17 11:26,2023-10-01 09:57,2022-04-04 13:05,11,17,18,8,,,,,,,,,,19,xml,,0,dcsaw,reproducer-yes,webbug,,,,,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
windows OS, JAVA 10.0.1

A DESCRIPTION OF THE PROBLEM :
XMLInputFactoryImpl method getProperty(String) can return null in some cases even though the property has been declared earlier.
It will happen when the property is part of the secure properties. The method containsProperty() that is called in the 'if' term supports a few cases that have not supported within the if statement and then null will be returned.
We can see below that containsProperty() method has an additional OR for fSecurityPropertyMgr but the getProperty() method itself does not support this case:


public Object getProperty(java.lang.String name) throws java.lang.IllegalArgumentException {
    if(name == null){
        throw new IllegalArgumentException(""Property not supported"");
    }
    if(fPropertyManager.containsProperty(name))
        return fPropertyManager.getProperty(name);
    throw new IllegalArgumentException(""Property not supported"");
}


public boolean containsProperty(String property){
    return supportedProps.containsKey(property) ||
            (fSecurityManager != null && fSecurityManager.getIndex(property) > -1) ||
            (fSecurityPropertyMgr!=null && fSecurityPropertyMgr.getIndex(property) > -1) ;
}


STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
XMLInputFactory xif = XMLInputFactory.newInstance();
xif.setProperty(XMLConstants.ACCESS_EXTERNAL_DTD, """"); 
xif.getProperty(XMLConstants.ACCESS_EXTERNAL_DTD);

we create an xmlInputFactory and set a secure property against external entity definition. 
when we call getProperty() it will return null 

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
expected result : an empty string ("""")

ACTUAL -
actual result: null

---------- BEGIN SOURCE ----------
public class main {
    public static void main(String[] args) throws IOException {
        try {
            XMLInputFactory xif = XMLInputFactory.newInstance();
            xif.setProperty(XMLConstants.ACCESS_EXTERNAL_DTD, """");
            xif.setProperty(XMLConstants.ACCESS_EXTERNAL_SCHEMA, """");
            xif.getProperty(XMLConstants.ACCESS_EXTERNAL_DTD);
            xif.getProperty(XMLConstants.ACCESS_EXTERNAL_SCHEMA);
        } catch (Exception e) {
            System.out.println(""An error occurred."");
            e.printStackTrace();
        }
    }
}
---------- END SOURCE ----------

CUSTOMER SUBMITTED WORKAROUND :
public Object getProperty(java.lang.String name) throws java.lang.IllegalArgumentException {
    if(name == null){
        throw new IllegalArgumentException(""Property not supported"");
    }
    if(fPropertyManager.containsProperty(name))
        return fPropertyManager.getProperty(name);
    throw new IllegalArgumentException(""Property not supported"");
}


FREQUENCY : always


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-27 02:39;tongwan;Main.java;https://bugs.openjdk.org/secure/attachment/96825/Main.java",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2us3v:",9223372036854775807,b17,,,,,,,,,,,Verified,,"2021-10-27 02:56;tongwan;The observations on Windows 10:
JDK 8: Failed, getProperty returned null
JDK 11: Failed.
JDK 17: Failed.
JDK 18ea+1: Failed.;;;","2022-03-31 12:42;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8063
Date: 2022-03-31 19:37:08 +0000;;;","2022-04-04 13:05;dukebot;Changeset: 61d06c2d
Author:    Joe Wang <joehw@openjdk.org>
Date:      2022-04-04 20:00:36 +0000
URL:       https://git.openjdk.java.net/jdk/commit/61d06c2d281edb8725e84bad4d75c7c4770ade78
;;;",,,,,,,,,,,,,,,,,,
"codestrings.validate_vm gtest fails on ppc64, s390",JDK-8276046,5061310,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,stuefe,stuefe,stuefe,2021-10-27 01:17,2021-11-01 11:09,2023-10-01 09:57,2021-10-27 06:42,18,,,,,,,,,,,,,18,client-libs,,0,,,,,,,,,,,,,,,,,"Test output:

```
[ RUN      ] codestrings.validate_vm
/sapmnt/sapjvm_work/openjdk/nb/linuxppc64le/jdk-dev/test/hotspot/gtest/code/test_codestrings.cpp:179: Failure
Value of: cbuf.dbg_strings().is_empty()
  Actual: true
Expected: false
/sapmnt/sapjvm_work/openjdk/nb/linuxppc64le/jdk-dev/test/hotspot/gtest/code/test_codestrings.cpp:249: Failure
Value of: cbuf.dbg_strings().is_empty()
  Actual: true
Expected: false
[  FAILED  ] codestrings.validate_vm (2 ms)
```

Problem is that the tests assumes that `MacroAssembler::unimplemented()` uses code strings, which it does not on ppc64 (s390 too AFAICT).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276175,,,,,,,,,,,,,,,,,,ppc,s390x,,,,,,,,,,,,,,,,,,"0|i2utfn:",9223372036854775807,b21,,,,,,,,,,,,,"2021-10-27 06:42;roboduke;Changeset: 809488bf
Author:    Thomas Stuefe <stuefe@openjdk.org>
Date:      2021-10-27 13:40:51 +0000
URL:       https://git.openjdk.java.net/jdk/commit/809488bf38c250db3c263f200e5eb1a269059c3d
;;;",,,,,,,,,,,,,,,,,,,,
Remove unnecessary qualifications of java_lang_Class::,JDK-8276039,5061300,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,minqi,minqi,minqi,2021-10-26 21:10,2021-11-03 18:02,2023-10-01 09:57,2021-10-29 09:17,,,,,,,,,,,,,,18,hotspot,,0,,,,,,,,,,,,,,,,,"in javaClasses.cpp:1264
https://github.com/openjdk/jdk/blob/master/src/hotspot/share/classfile/javaClasses.cpp#L1264
java_lang_Class:set_init_lock(archived_mirror, NULL);

The "":"" should be ""::""
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2utdf:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-28 09:14;minqi;The discovery of the typo ""java_lang_Class:set_init_lock"" leads discovery of unnecessary qualifications of java_lang_Class:: used in function call to function within same class. In code review, we decided to remove  the type ""java_lang_Class:"" in this line, as well as all unnecessary  ""java_lang_Class::"" qualifications in this file.

;;;","2021-10-29 09:17;roboduke;Changeset: cef9db9a
Author:    Yumin Qi <minqi@openjdk.org>
Date:      2021-10-29 16:15:35 +0000
URL:       https://git.openjdk.java.net/jdk/commit/cef9db9a69061d51630e40b94ceba4b4bf03a0ce
;;;",,,,,,,,,,,,,,,,,,,
The value of full_count in the message of insufficient codecache is wrong,JDK-8276036,5061295,Bug,Resolved,JDK,JDK,software,duke,,,P5,Fixed,tholenstein,myano,myano,2021-10-26 19:13,2023-09-22 11:16,2023-10-01 09:57,2021-11-03 08:32,11,17,18,,,,,,,,,,,18,hotspot,,0,amazon-interest,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-11,oracle-triage-17,oracle-triage-18,starter,,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
Microsoft Windows [Version 10.0.19041.1237]

A DESCRIPTION OF THE PROBLEM :
The value of full_count in the message of insufficient codecache is 0 even though a codecache shortage occurred.
full_count is the number of times the code heap was full.
This issue is common to all operating systems.

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
javac WasteCodeCache.java
java -XX:ReservedCodeCacheSize=2496k -XX:-UseCodeCacheFlushing WasteCodeCache

EXPECTED OUTPUT :
[16.139s][warning][codecache] CodeCache is full. Compiler has been disabled.
[16.140s][warning][codecache] Try increasing the code cache size using -XX:ReservedCodeCacheSize=
OpenJDK 64-Bit Server VM warning: CodeCache is full. Compiler has been disabled.
OpenJDK 64-Bit Server VM warning: Try increasing the code cache size using -XX:ReservedCodeCacheSize=
CodeCache: size=2496Kb used=2180Kb max_used=2300Kb free=315Kb
 bounds [0x0000028b91320000, 0x0000028b91590000, 0x0000028b91590000]
 total_blobs=1277 nmethods=971 adapters=217
 compilation: disabled (not enough contiguous free space left)
              stopped_count=1, restarted_count=0
 full_count=1

ACTUAL :
[16.139s][warning][codecache] CodeCache is full. Compiler has been disabled.
[16.140s][warning][codecache] Try increasing the code cache size using -XX:ReservedCodeCacheSize=
OpenJDK 64-Bit Server VM warning: CodeCache is full. Compiler has been disabled.
OpenJDK 64-Bit Server VM warning: Try increasing the code cache size using -XX:ReservedCodeCacheSize=
CodeCache: size=2496Kb used=2180Kb max_used=2300Kb free=315Kb
 bounds [0x0000028b91320000, 0x0000028b91590000, 0x0000028b91590000]
 total_blobs=1277 nmethods=971 adapters=217
 compilation: disabled (not enough contiguous free space left)
              stopped_count=1, restarted_count=0
 full_count=0",,,,,,,,,,JDK-8316760,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277042,,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-26 19:12;myano;WasteCodeCache.java;https://bugs.openjdk.org/secure/attachment/96820/WasteCodeCache.java",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2utcb:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-26 19:32;dholmes;The logic is basically:

if (full_count == 0)  { // not reported yet
  print everything
}
full_count++  // heap->report_full()

we can probably increment the count first.;;;","2021-10-27 07:54;dcubed;Since this is codecache related, I'm moving this bug
from hotspot/runtime -> hotspot/compiler.;;;","2021-10-27 16:23;dlong;[~tholenstein], this looks like a starter bug.  Would you like to take it?;;;","2021-10-27 16:25;dlong;ILW = incorrect output = LMH = P5;;;","2021-10-27 23:54;tholenstein;[~dlong]  Sure, I will give it a try. Thanks;;;","2021-11-03 08:32;roboduke;Changeset: 61cb4bc6
Author:    Tobias Holenstein <tobias.holenstein@oracle.com>
Committer: Christian Hagedorn <chagedorn@openjdk.org>
Date:      2021-11-03 15:31:50 +0000
URL:       https://git.openjdk.java.net/jdk/commit/61cb4bc6b0252536364a86f38ff2e5c8c7ab610b
;;;","2023-09-19 11:34;roboduke;[jdk17u-fix-request] Approval Request from Elif Aslan
“Clean backport. Fix a wrong value of full_count in the message of insufficient codecache Low risk. GHA tested”;;;","2023-09-19 11:39;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1742
Date: 2023-09-14 23:01:52 +0000;;;",,,,,,,,,,,,,
Hotspot's libsvml.so may conflict with user dependency,JDK-8276025,5061277,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,sviswanathan,psandoz,psandoz,2021-10-26 11:18,2021-11-16 12:08,2023-10-01 09:57,2021-11-04 20:31,17,18,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,oracle-triage-11,oracle-triage-17,oracle-triage-18,vectorapi,,,,,,,,,,"When the jdk.incubator.vector module is linked in a JDK image then the library libsvml.so is present and loaded in phase 2 of stub generation.

This occurs even if the jdk.incubator.vector module is not visible, since stub generation occurs before module definitions when the JVM boots. So we cannot predicate the library loading and stub generation on the UseVectorStubs flag.

This may cause conflicts with user applications using JNI that load (indirectly) libsvml.so distributed with Intel's MKL library.

For more details see:

https://mail.openjdk.java.net/pipermail/panama-dev/2021-October/015536.html

I have logged this against hotspot/runtime for now, but it may be some or all of the solution is build/infrastructure based e.g. we could rename the library.",,,,,,,,,,JDK-8277252,JDK-8276980,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86,,,,,,,,,,,17,,,,,,,,"0|i2ut8b:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-26 17:10;dholmes;I think it is a hotspot bug that libsvml is always loaded even if not needed! Just running ""java -version"" loads it and that is plain wrong!;;;","2021-10-26 17:32;psandoz;So we have two issues, one related to conflicts, and one related to when the stubs are initialized.

To some extent it's like other stubs, which are generated whether they are used or not. Although it's more likely the other stubs will get used, until we enhance the auto vectorizer. This is amplified by the current incubating status of the Vector API. Since its a separate module we use whether that is visible in the module graph to determine if the Vector API is enabled or not, but alas that determination occurs after stub initialization!

Do you know if it may be possible to initialize the stubs on class initialization, triggered in the static initializer of `jdk.internal.vm.vector.VectorSupport`? e.g. in the native call to `registerNatives`.

public class VectorSupport {
    static {
        registerNatives();
    }
;;;","2021-10-27 04:15;ihse;What's worse, it might not only be the name of the library that is clashing, but also all individual symbols within it. :-( Fixing that would require renaming all symbols exported by the library, and where they are imported in hotspot. Luckily, there seem to be already code dealing with the fact that the names have a special pattern, so it should be easy to adjust to a new, hopefully unique, pattern.

[~psandoz] Maybe you can split this bug in two, so we are clear if we're talking about stub initialization sequence (purely within hotspot) or the library/symbol name clash, which is mostly a build issue (but with hotspot coordination required).;;;","2021-10-27 04:17;ihse;Is the early stub initialization a problem since this is an incubator module? If so, that's (hopefully) a short-lived problem that will resolve by itself over time when the module moves from incubator stage.

Or is it that the stubs are not generated lazily? If so, it seems more like an internal hotspot optimization issue.;;;","2021-10-27 08:11;psandoz;I am still uncertain about how big an issue the library opening on stub generation is. If/when the Vector exits incubation I think this will be considered less of an issue, since its a core part of the platform. I will log an issue capturing this aspect, but we may decide to close it out later as will-not-fix.

My suggestion is we focus on making this library more private, renaming the file and the exported symbols. To do that requires input from Sandhya, so reassigning and moving back to hotspot.;;;","2021-10-27 09:21;kvn;Sandhya is on vacation currently. Will be back in a week.

I agree that we should rename exported symbols and rename library for this bug.

Stubs generation issue could be done separately. We have RFE for that: JDK-8231349.
;;;","2021-10-27 16:28;dlong;ILW = potential library conflict = MMM = P3;;;","2021-11-04 20:31;roboduke;Changeset: 9ad4d3d0
Author:    Sandhya Viswanathan <sviswanathan@openjdk.org>
Date:      2021-11-05 03:30:09 +0000
URL:       https://git.openjdk.java.net/jdk/commit/9ad4d3d06bb356436d69af07726ef6727c500f59
;;;","2021-11-05 09:23;kvn;[~sviswanathan] We need to backport this into JDK 17u.
 ;;;","2021-11-05 11:57;sviswanathan;[~kvn] Patch doesn't apply cleanly to JDK17u. There is a dependency on https://bugs.openjdk.java.net/browse/JDK-8273450. Will need to backport that first.;;;","2021-11-05 12:02;kvn;[~sviswanathan] Backport JDK-8273450 too. JDK17u is LTS release - it will be used for years. We need these fixes there.
 ;;;","2021-11-05 13:15;sviswanathan;Fix Request
   This patch removes conflicts in symbols and library name observed on JDK 17 by users. Backport requires that JDK-8273450 be backported and applied first. Patch applies cleanly after that. Please approve. ;;;",,,,,,,,,
Some locks shouldn't allow_vm_block,JDK-8275917,5061156,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,coleenp,coleenp,coleenp,2021-10-26 05:04,2021-11-03 18:01,2023-10-01 09:57,2021-10-28 04:59,18,,,,,,,,,,,,,18,hotspot,,0,sync,,,,,,,,,,,,,,,,"There are some safepoint checking locks that pass allow_vm_block as true that aren't actually taken out by the VM thread.  If allow_vm_block is true, that causes a NoSafepointVerifier after the lock is taken, which could unnecessarily delay safepoints.

We can't really change below to 'if !thread->is_Java_thread() && SafepointSynchronize::is_at_safepoint()' because G1 concurrent threads run through safepoints.  So it can be true that it's at a safepoint but trying to acquire a lock, such as the Heap_lock will not block the execution of the safepoint. So the check is somewhat narrow and special but it's still worth keeping.

     if (!_allow_vm_block && thread->is_VM_thread()) {
    // JavaThreads are checked to make sure that they do not hold _allow_vm_block locks during operations
    // that could safepoint.  Make sure the vm thread never uses locks with _allow_vm_block == false.
    fatal(""VM thread could block on lock that may be held by a JavaThread during safepoint: %s"", name());
     }",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275162,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2ushf:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-28 04:59;roboduke;Changeset: bec977c7
Author:    Coleen Phillimore <coleenp@openjdk.org>
Date:      2021-10-28 11:57:21 +0000
URL:       https://git.openjdk.java.net/jdk/commit/bec977c778a35ea48a45db662f1feaeab79308b2
;;;",,,,,,,,,,,,,,,,,,,,
Keyboard doesn't show when tapping inside an iOS text input control ,JDK-8275911,5061150,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jpereda,jpereda,jpereda,2021-10-26 03:30,2021-11-09 10:17,2023-10-01 09:57,2021-11-04 06:33,jfx16,,,,,,,,,,,,,jfx18,javafx,,0,,,,,,,,,,,,,,,,,"After JDK-8245053, tapping on a text input control on Android shows the keyboard, which hides after the control loses the focus.

However, on iOS, the keyboard shows when the control gains the focus, and hides when it loses it.

Both platforms should use the same approach.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,iOS,,,,,,"0|i2usg3:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@67282485,,,,,,,,,"2021-11-04 06:33;roboduke;Changeset: 7d6493bf
Author:    Jose Pereda <jpereda@openjdk.org>
Date:      2021-11-04 13:31:54 +0000
URL:       https://git.openjdk.java.net/jfx/commit/7d6493bf8219d8f57b4da07ca2bfe2d3422dd827
;;;",,,,,,,,,,,,,,,,,,,,
[JVMCI] c2v_readFieldValue use long instead of jlong for the offset parameter,JDK-8275909,5061148,Bug,Resolved,JDK,JDK,software,duke,,,P5,Fixed,tholenstein,stefank,stefank,2021-10-26 02:30,2021-11-11 07:48,2023-10-01 09:57,2021-10-28 23:18,17,18,,,,,,,,,,,,18,hotspot,,0,jvmci,oracle-triage-11,oracle-triage-17,oracle-triage-18,starter,,,,,,,,,,,,"GivThe following should be using jlong and not long for the type of the displacement:
C2V_VMENTRY_NULL(jobject, readFieldValue, (JNIEnv* env, jobject, jobject object, jobject expected_type, long displacement, jboolean is_volatile, jobject kind_object))
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2usfn:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-26 02:58;chagedorn;ILW = Wrong type usage, no known failures, no workaround = LLH = P5;;;","2021-10-28 23:18;roboduke;Changeset: e922023e
Author:    Tobias Holenstein <tobias.holenstein@oracle.com>
Committer: Aleksey Shipilev <shade@openjdk.org>
Date:      2021-10-29 06:16:38 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e922023ec9a74e694a8180e678be19bc2720c346
;;;",,,,,,,,,,,,,,,,,,,
javac's manpage example for Two Argument Files does not work,JDK-8275907,5061145,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,cstein,cstein,cstein,2021-10-26 01:53,2021-12-08 17:42,2023-10-01 09:57,2021-12-02 04:13,,,,,,,,,,,,,,18,tools,,0,noreg-doc,trivial,,,,,,,,,,,,,,,"Following the instructions listed at https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html#command-line-argument-files - Examples of Using javac @filename - Two Argument Files yields (on Windows):

    javac @options @classes
    ❌ error: not a directory: classes

Workaround and possible fix: Rename the second Argument File from ""classes"" to ""sources"" in order to prevent a clash of names.

    rename classes sources
    javac @options @sources
    ✅

Or change the name of the output directory from `-d classes` to `-d out`.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2usez:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deproblemlist closed/test/jdk/javax/swing/JTextArea/5042886/bug5042886.java,JDK-8275891,5061127,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,psadhukhan,psadhukhan,psadhukhan,2021-10-25 22:44,2021-11-01 11:06,2023-10-01 09:57,2021-10-27 01:18,,,,,,,,,,,,,,18,client-libs,,0,sn_104,test_sprint,,,,,,,,,,,,,,,closed/test/jdk/javax/swing/JTextArea/5042886/bug5042886.java is passing in default L&F. It is failing in non-default Windows L&F so we can deproblemlist it.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8078831,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2usaz:",9223372036854775807,b21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
jarsigner prints invalid digest/signature algorithm warnings if keysize is weak/disabled,JDK-8275887,5061124,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mullan,mullan,mullan,2021-10-25 14:01,2023-01-18 07:48,2023-10-01 09:57,2021-11-19 06:37,18,,,,,,,,,,,,,18,security-libs,,0,CPU22_10-critical-approved,CPU22_10-critical-SQE-OK,jdk11u-critical-request,jdk11u-critical-yes,jdk17u-critical-request,jdk17u-critical-yes,jdk8u-critical-request,jdk8u-critical-yes,,,,,,,,,"For example, this is a JAR signed with a 1024-bit key:

jarsigner -signedjar signeda.jar  -sigalg SHA256withRSA  a.jar e1
jar signed.

Warning: 
The SHA-256 algorithm specified for the -digestalg option is considered a security risk. This algorithm will be disabled in a future update.
The SHA256withRSA algorithm specified for the -sigalg option is considered a security risk. This algorithm will be disabled in a future update.
The RSA signing key has a keysize of 1024 which is considered a security risk. This key size will be disabled in a future update.
The signer certificate will expire within six months.
No -tsa or -tsacert is provided and this jar is not timestamped. Without a timestamp, users may not be able to validate this jar after the signer certificate's expiration date (2022-01-23).
",,,,,,,,,,JDK-8294105,JDK-8294010,JDK-8300552,JDK-8291579,JDK-8291581,JDK-8294106,JDK-8291580,JDK-8292798,JDK-8297922,JDK-8292793,JDK-8292927,JDK-8293909,,,,,JDK-8273236,,,,,,,,,,,,,,,,,,,,,JDK-8291624,,,,,,,JDK-8285639,JDK-8269039,,,,,,,,,,,,,,JDK-8277474,JDK-8291494,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2usab:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2ec284e3,,,,,,,,,"2021-11-19 06:37;roboduke;Changeset: 03f8c0fb
Author:    Sean Mullan <mullan@openjdk.org>
Date:      2021-11-19 14:36:07 +0000
URL:       https://git.openjdk.java.net/jdk/commit/03f8c0fb9363dc1bb07bed1ae0359c029caa0130
;;;","2022-09-15 03:41;goetz;Critical fix request [17u]

I backport this for parity with 17.0.5-oracle.
I think it should go to 17.0.5 this late as it is a follow up to the
changes of jar file signing that come with this release.
Acceptable risk. Change is late and touches critical code. 
It changes exception messages, but I think we need this definitely.
I had to resolve the change.  (Once it is pushed, I will take this as base for the 11u backport.)
Test passes. SAP nightly testing passed.;;;","2022-09-15 03:45;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u/pull/354
Date: 2022-09-15 10:38:06 +0000;;;","2022-09-16 00:30;goetz;Critical fix request [11u]

I backport the 17.0.5 change to 11 for parity with 11.0.17-oracle.
I think it should go to 11.0.17 this late (as for 17.0.5) as it is a follow up to the
changes of jar file signing that come with this release.
Acceptable risk. Change is late and touches critical code.
It changes exception messages, but I think we need this definitely.
I had to resolve the change and change a record into a class.
Test passes. SAP nightly testing passed. ;;;","2022-09-16 00:34;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u/pull/56
Date: 2022-09-16 07:27:22 +0000;;;","2022-11-28 05:35;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk8u-dev/pull/197
Date: 2022-11-28 13:25:42 +0000;;;","2022-11-28 23:23;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk8u/pull/24
Date: 2022-11-29 07:10:58 +0000;;;","2022-11-29 14:20;abakhtin;Critical fix request [8u]

This is a follow-up fix for the already submitted JDK-8269039.  
Test passes.;;;",,,,,,,,,,,,,
jextract branch fails to build due to javac serialization warning,JDK-8275875,5061106,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,sundar,sundar,sundar,2021-10-25 07:29,2021-10-28 03:05,2023-10-01 09:57,2021-10-28 03:05,repo-panama,,,,,,,,,,,,,,tools,,0,,,,,,,,,,,,,,,,,"ParsingFailedException class uses  non-serializable, non-transient field of type Path. This leads to javac warning which results in build failure",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2us6b:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2251e2f8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[JVMCI] only support aligned reads in c2v_readFieldValue,JDK-8275874,5061105,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,dnsimon,dnsimon,dnsimon,2021-10-25 07:27,2022-02-03 00:31,2023-10-01 09:57,2021-10-26 11:52,11,17,18,,,,,,,,,,,18,hotspot,,0,jdk11-graalvm,jdk17-graalvm,jdk17u-fix-request,jdk17u-fix-yes,jvmci,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,"JDK-8275645 fixed a problem with crashes due to unaligned volatile reads in JVMCI. However, it did so at the cost of loosing single-copy atomicity.",,,,,,,,,,JDK-8280595,JDK-8281199,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275645,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2us63:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-26 02:54;chagedorn;ILW = Lost single-copy atomicity for reads in c2v_readFieldValue, medium, no workaround = MMH = P3;;;","2021-10-26 11:52;roboduke;Changeset: 2448b3f5
Author:    Doug Simon <dnsimon@openjdk.org>
Date:      2021-10-26 18:50:21 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2448b3f5f96ec4d9ea8fe9dae32a0aab725fb4ad
;;;","2022-02-01 01:17;goetz;Fix request [17u]

I backport this for parity with 17.0.3-oracle.
Clean backport.
Test passes.  SAP nightly testing passes.;;;","2022-02-01 01:22;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/138
Date: 2022-02-01 09:17:22 +0000;;;",,,,,,,,,,,,,,,,,
Sync J2DBench run and analyze Makefile targets with build.xml,JDK-8275872,5061103,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jvanek,andrew,andrew,2021-10-25 07:16,2021-11-29 11:43,2023-10-01 09:57,2021-10-26 09:56,11,17,18,8,,,,,,,,,,18,client-libs,,0,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,,,,,,,,,,,,,,"It seems the build.xml file for J2DBench has always referred to the JAR files by an absolute path, `${dist}/J2DBench.jar` since initial import.

The same change is absent from the Makefile and so should be added there too, as with the changes in JDK-8042199.
",,,,,,,,,,JDK-8277268,JDK-8276967,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8042199,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2us5n:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4b09ce31,,,,,,,,,"2021-10-26 09:56;roboduke;Changeset: f1f5e269
Author:    Jiří Vaněk <jvanek@openjdk.org>
Committer: Magnus Ihse Bursie <ihse@openjdk.org>
Date:      2021-10-26 16:54:55 +0000
URL:       https://git.openjdk.java.net/jdk/commit/f1f5e2690cb93c07eb8be96a4cbfbf140e8a15e0
;;;","2021-11-05 17:57;andrew;Fix Request [17u]:

Patch applies cleanly to 17u and is a low-risk change which keeps the J2DBench Makefile in sync with behaviour already in place in its Ant build;;;",,,,,,,,,,,,,,,,,,,
"ciReplay: Inlining fails with ""unloaded signature classes"" due to wrong protection domains",JDK-8275868,5061099,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,chagedorn,chagedorn,chagedorn,2021-10-25 05:25,2021-11-03 18:02,2023-10-01 09:57,2021-11-01 01:25,11,17,18,,,,,,,,,,,18,hotspot,,0,ci-replay,oracle-triage-18,,,,,,,,,,,,,,,"Given the simple example in Test.java and run with (referred to as normal run):

$  java -XX:CompileCommand=quiet -Xbatch -XX:+PrintCompilation -XX:-TieredCompilation -XX:CompileOnly=Test -XX:+PrintInlining Test

When normally running Test.java, C2 successfully inlines bar():

   2729   25    b        Test::test (5 bytes)
                            @ 0   Test::bar (2 bytes)   inline (hot)

However, when replay compiling test(), it fails to inline bar():

   2734   24    b  4       Test::test (5 bytes)
                              @ 0   Test::bar (2 bytes)   unloaded signature classes

The reason is that replay compilation fails to resolve Integer (which is initially resolved with no protection domain because it belongs to the Java API) with the protection domain of class Test. In the initialization of ciReplay, we only resolve InstanceKlasses without a protection domain:

CompileReplay(const char* filename, TRAPS) {
  ...
  _protection_domain = Handle();
  ...
}

When doing replay compilation of test(), we try to inline bar() and check if all classes in the signature are loaded. This is done by calling ciMethod::has_unloaded_classes_in_signature() by using the protection domain of class Test. But since we have not resolved class Integer with the protection domain of Test, we fail this check and do not perform inlining.

There are different variations of the same problem depending on which Java API class is used in the signature of the inlinee and which methods were already compiled by C2 in the normal run:

1) bar() was already compiled before test():
In this case, C2 has already called Method::load_signature_classes() for bar() and successfully resolved Integer with the protection domain of Test (protection domain Test newly added for String).

2) bar() was not compiled and is public:
Before invoking main(), it is validated by java.base/LauncherHelper::validateMainClass(). It tries to find main() by calling getMethod() which eventually calls the native method getDeclaredMethods0() into the VM to get the list of all public methods inside Test. In this process, all the classes in the method signatures are resolved.

3) bar() was not compiled, is private and we use String instead of Integer:
Same as 2) but this time, bar() is private and therefore ignored by getDeclaredMethods0(). Thus, bar() will not initiate the resolution of String. Instead, the method main() itself does that because it has String[] as parameter.

To fix this, we need to make sure to resolve all classes used in signatures of inlinees with the protection domain of the holder class of the method to be replay compiled in order to inline them.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8254106,JDK-8273919,,,,,,,,,,,,,,JDK-8276227,,,,,,,,,,"2021-10-25 05:31;chagedorn;Test.java;https://bugs.openjdk.org/secure/attachment/96792/Test.java",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2us4r:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-25 05:44;chagedorn;ILW = Compiler replay could fail to reproduce an error due to incorrect inlining decisions, low, no workaround = MLH = P4;;;","2021-11-01 01:25;roboduke;Changeset: 5bb1992b
Author:    Christian Hagedorn <chagedorn@openjdk.org>
Date:      2021-11-01 08:22:59 +0000
URL:       https://git.openjdk.java.net/jdk/commit/5bb1992b8408a0d196b1afa308bc00d007458dbd
;;;",,,,,,,,,,,,,,,,,,,
Deproblemlist closed/test/jdk/javax/swing/RepaintManager/4939857/bug4939857.java for non-linux platform,JDK-8275862,5061091,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,psadhukhan,psadhukhan,psadhukhan,2021-10-25 02:28,2021-11-01 11:06,2023-10-01 09:57,2021-10-26 02:05,,,,,,,,,,,,,,18,client-libs,,0,sn_104,test_sprint,,,,,,,,,,,,,,,closed/test/jdk/javax/swing/RepaintManager/4939857/bug4939857.java was problemlisted for all platforms but it is failing only in linux so need to correct the problemlist,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2us2z:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@568a5b31,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
C2: assert(stride_con != 0) failed: missed some peephole opt,JDK-8275854,5061082,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,wchao,wchao,wchao,2021-10-25 00:22,2022-03-03 01:59,2023-10-01 09:57,2021-11-11 02:40,16,17,18,,,,,,,,,,,18,hotspot,,0,c2,javafuzzer,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-11,oracle-triage-18,tencent-interest,,,,,,,,,,"Crash happened when run the following test 

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/data/openjdk/jdk_dev/src/hotspot/share/opto/loopnode.cpp:780), pid=23848, tid=23868
#  assert(stride_con != 0) failed: missed some peephole opt
#
# JRE version: OpenJDK Runtime Environment (18.0) (slowdebug build 18-internal+0-adhoc.root.jdkdev)
# Java VM: OpenJDK 64-Bit Server VM (slowdebug 18-internal+0-adhoc.root.jdkdev, mixed mode, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0xe02fd7]  PhaseIdealLoop::transform_long_counted_loop(IdealLoopTree*, Node_List&)+0x103
#
# No core dump will be written. Core dumps have been disabled. To enable core dumping, try ""ulimit -c unlimited"" before starting Java again
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#

---------------  S U M M A R Y ------------

Command Line: Test

Host: VM_235_31_centos, AMD EPYC 7K62 48-Core Processor, 16 cores, 31G, CentOS Linux release 7.2 (Final)
Time: Mon Oct 25 15:01:23 2021 CST elapsed time: 1.117192 seconds (0d 0h 0m 1s)

---------------  T H R E A D  ---------------

Current thread (0x00007fce3c04f3c0):  JavaThread ""C2 CompilerThread1"" daemon [_thread_in_native, id=23868, stack(0x00007fce7e5cb000,0x00007fce7e6cc000)]


Current CompileTask:
C2:   1117  373 %     4       Test::lMeth @ 168 (358 bytes)

Stack: [0x00007fce7e5cb000,0x00007fce7e6cc000],  sp=0x00007fce7e6c5ef0,  free space=1003k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xe02fd7]  PhaseIdealLoop::transform_long_counted_loop(IdealLoopTree*, Node_List&)+0x103
V  [libjvm.so+0xe11e57]  PhaseIdealLoop::build_and_optimize(LoopOptsMode)+0x152d
V  [libjvm.so+0x7ce5da]  PhaseIdealLoop::PhaseIdealLoop(PhaseIterGVN&, LoopOptsMode)+0xf4
V  [libjvm.so+0x7ce7cc]  PhaseIdealLoop::optimize(PhaseIterGVN&, LoopOptsMode)+0x46
V  [libjvm.so+0x7c2595]  Compile::Optimize()+0xb95
V  [libjvm.so+0x7bb86a]  Compile::Compile(ciEnv*, ciMethod*, int, bool, bool, bool, bool, bool, DirectiveSet*)+0x142c
V  [libjvm.so+0x6afe8c]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x138
V  [libjvm.so+0x7d8d18]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0x97e
V  [libjvm.so+0x7d78ab]  CompileBroker::compiler_thread_loop()+0x3df
V  [libjvm.so+0x7f7e45]  CompilerThread::thread_entry(JavaThread*, JavaThread*)+0x69
V  [libjvm.so+0x1249f3f]  JavaThread::thread_main_inner()+0x15f
V  [libjvm.so+0x1249dd6]  JavaThread::run()+0x1fc
V  [libjvm.so+0x1247636]  Thread::call_run()+0x180
V  [libjvm.so+0xfadbd5]  thread_native_entry(Thread*)+0x18f",,,,,,,,,,JDK-8280691,JDK-8282597,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275855,,,,,,,,,,,,,,,,,,,,,,JDK-8256655,,,,,,,,,,"2021-10-25 00:30;wchao;Test.java;https://bugs.openjdk.org/secure/attachment/96791/Test.java","2021-10-25 00:29;wchao;hs_err_pid20909.log;https://bugs.openjdk.org/secure/attachment/96789/hs_err_pid20909.log","2021-10-25 00:29;wchao;hs_err_pid23848.log;https://bugs.openjdk.org/secure/attachment/96790/hs_err_pid23848.log",,,,,,,,,,,,,,,,,,,,,,,,,"0|i2us0z:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-25 01:36;chagedorn;ILW = C2 assertion failure, single JavaFuzzer test, disable compilation of affected method = HLM = P3;;;","2021-11-11 02:40;roboduke;Changeset: aea09677
Author:    casparcwang <casparcwang@tencent.com>
Committer: Hui Shi <hshi@openjdk.org>
Date:      2021-11-11 10:39:09 +0000
URL:       https://git.openjdk.java.net/jdk/commit/aea096770e74b9c0e1556467705ffdd6cf843d9d
;;;","2022-03-02 08:24;mdoerr;Fix Request (17u):
Should get backported for parity with 17.0.4-oracle. Applies cleanly.;;;","2022-03-02 08:28;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/185
Date: 2022-03-02 16:23:29 +0000;;;",,,,,,,,,,,,,,,,,
Deproblemlist open/test/jdk/javax/swing/JComponent/6683775/bug6683775.java,JDK-8275851,5061079,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,psadhukhan,psadhukhan,psadhukhan,2021-10-24 23:40,2021-11-01 11:08,2023-10-01 09:57,2021-10-27 03:26,,,,,,,,,,,,,,18,client-libs,,0,sn_104,test_sprint,,,,,,,,,,,,,,,javax/swing/JComponent/6683775/bug6683775.java was problemlisted long time back. It is now passing in all platforms and can be deproblemlisted,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2us0b:",9223372036854775807,b21,,,,,,,,,,,,,"2021-10-27 03:26;roboduke;Changeset: 485d6586
Author:    Prasanta Sadhukhan <psadhukhan@openjdk.org>
Date:      2021-10-27 10:24:21 +0000
URL:       https://git.openjdk.java.net/jdk/commit/485d65865ea8af3f7275e9aa8b75057326486a4d
;;;",,,,,,,,,,,,,,,,,,,,
TestZoneInfo310.java fails with tzdata2021e,JDK-8275849,5061076,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,ysatowse,ysatowse,ysatowse,2021-10-24 22:49,2022-08-19 06:49,2023-10-01 09:57,2021-11-02 06:03,18,,,,,,,,,,,,,18,core-libs,,0,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,noreg-self,,,,,,,,,,,,,"test/jdk/sun/util/calendar/zi/TestZoneInfo310.java fails with below with tzdata2021e: 


STDOUT:
Compiling tz files!
testing!
OLD.getZoneInfoOld()[1]=1232
OLD.getZoneInfoOld()[2]=1103
OLD.getZoneInfoOld()[3]=1159
OLD.getAvailableIDs()=2051, total=629
OLD.getAliasTable()=211, total=239
OLD.TotalTZ()=439 (ms)
NEW.getTimeZone()[1]=586
NEW.getTimeZone()[2]=611
NEW.getTimeZone()[3]=253
NEW.getAvailableIDs()=22, total=629
NEW.getAliasTable()=47, total=239
NEW.TotalTZ()=14 (ms)
******************************
Asia/Gaza : Asia/Gaza
    -------------
    SimpleTimeZone (NG)
       stz=java.util.SimpleTimeZone[id=Asia/Gaza,offset=7200000,dstSavings=3600000,useDaylight=true,startYear=0,startMode=3,startMonth=2,startDay=24,startDayOfWeek=7,startTime=0,startTimeMode=0,endMode=3,endMonth=9,endDay=25,endDayOfWeek=6,endTime=3600000,endTimeMode=0]
      stz0=java.util.SimpleTimeZone[id=Asia/Gaza,offset=7200000,dstSavings=3600000,useDaylight=true,startYear=0,startMode=3,startMonth=2,startDay=24,startDayOfWeek=7,startTime=0,startTimeMode=0,endMode=2,endMonth=9,endDay=-1,endDayOfWeek=6,endTime=3600000,endTimeMode=0]
    -------------
STDERR:
javazic: warning: found last rules for Morocco inconsistent.
javazic: warning: found last rules for Morocco inconsistent.
javazic: warning: found last rules for Eire inconsistent.
java.lang.RuntimeException:   FAILED:  Asia/Gaza
	at TestZoneInfo310.main(TestZoneInfo310.java:204)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:76)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:51)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
	at java.base/java.lang.Thread.run(Thread.java:833)

JavaTest Message: Test threw exception: java.lang.RuntimeException
JavaTest Message: shutting down test


TEST RESULT: Failed. Execution failed: `main' threw exception: java.lang.RuntimeException: FAILED: Asia/Gaza",,,,,,,,,,JDK-8277598,JDK-8277254,JDK-8276542,JDK-8277218,JDK-8277668,JDK-8281341,JDK-8277377,JDK-8277726,JDK-8276544,JDK-8278394,JDK-8277311,JDK-8277220,JDK-8279136,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275766,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2urzn:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@a9a7756,,,,,,,Not verified,,"2021-11-02 06:03;roboduke;Changeset: 5b4e3986
Author:    Yoshiki Sato <ysatowse@openjdk.org>
Committer: Sean Coffey <coffeys@openjdk.org>
Date:      2021-11-02 13:02:51 +0000
URL:       https://git.openjdk.java.net/jdk/commit/5b4e39863dbc0d61e91675261dd6887f704ab868
;;;",,,,,,,,,,,,,,,,,,,,
Deprecate for removal mistakenly exposed field from class javafx.scene.shape.Box,JDK-8275848,5061073,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,aghaisas,aghaisas,aghaisas,2021-10-24 22:11,2021-11-09 10:17,2023-10-01 09:57,2021-10-29 07:23,jfx17,,,,,,,,,,,,,jfx18,javafx,,0,sn_104,test_sprint,,,,,,,,,,,,,,,"This came up while reviewing JDK-8271090.
See - https://github.com/openjdk/jfx/pull/650#discussion_r734599035

class javafx.scene.shape.Box has below field that is mistakenly exposed.
public static final double DEFAULT_SIZE = 2;

This needs to be marked as deprecated and subsequently removed (made private)",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276163,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8271090,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uryz:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4143e3f7,,,,,,,,,"2021-10-29 07:23;roboduke;Changeset: d9e1ad97
Author:    Ajit Ghaisas <aghaisas@openjdk.org>
Date:      2021-10-29 14:21:59 +0000
URL:       https://git.openjdk.java.net/jfx/commit/d9e1ad976873799128871c0544f6eb26e843b880
;;;",,,,,,,,,,,,,,,,,,,,
"Scheduling fails with ""too many D-U pinch points"" on small method",JDK-8275847,5061071,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ngasson,ngasson,ngasson,2021-10-24 21:05,2022-02-03 00:36,2023-10-01 09:57,2021-11-07 22:41,16,17,18,,,,,,,,,,,18,hotspot,,0,aarch64-related,c2,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-11,oracle-triage-18,redhat-interest,,,,,,,,,,"Since around JDK 16 the following method cannot be compiled by C2 on AArch64:

public double mergeSync() { return Math.log(Math.sin(value)); }

811 416 ! 3 Test::mergeSync (61 bytes)
813 417 ! 4 Test::mergeSync (61 bytes)
816 417 ! 4 Test::mergeSync (61 bytes) COMPILE SKIPPED: too many D-U pinch points (retry at different tier)
816 418 ! 1 Test::mergeSync (61 bytes)
416 ! 3 Test::mergeSync (61 bytes) made not entrant

The problem is the scheduler will create temporary Nodes for each OptoReg killed by the MachProjs from the two runtime log/sin leaf calls. After SVE support was added these runtime calls kill more registers, and the number of new Nodes added by anti_do_def exceeds an internal limit (which is roughly proportional to the method size).",,,,,,,,,,JDK-8280560,JDK-8281202,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uryj:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-25 00:18;chagedorn;ILW = C2 is bailing out of a simple method on aarch64, low?, no workaround = MLH = P4;;;","2021-10-26 02:14;ngasson;Removed the [AArch64] tag as it fails on X86 as well with -XX:+OptoScheduling.;;;","2021-11-07 22:41;roboduke;Changeset: 3934fe54
Author:    Nick Gasson <ngasson@openjdk.org>
Date:      2021-11-08 06:40:49 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3934fe54b4c3e51add6d3fe1f145e5aebfe3b2fc
;;;","2022-01-31 04:54;goetz;Fix request [17u]

I backport this for parity with 17.0.3-oracle.
Clean backport.
Test passes.  SAP nightly testing passes.;;;","2022-01-31 04:58;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/134
Date: 2022-01-31 12:53:33 +0000;;;",,,,,,,,,,,,,,,,
read_base_archive_name() could read past the end of buffer,JDK-8275846,5061068,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,iklam,dholmes,dholmes,2021-10-24 16:02,2021-11-10 17:56,2023-10-01 09:57,2021-11-07 13:40,18,,,,,,,,,,,,,18,hotspot,,0,intermittent,tier4,,,,,,,,,,,,,,,"Test: runtime/cds/appcds/dynamicArchive/ArchiveConsistency.java

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (t:\workspace\open\src\hotspot\os\windows\os_windows.cpp:4435), pid=73956, tid=58200
#  assert(result == unicode_path_len) failed: length already checked above
#

---------------  T H R E A D  ---------------

Current thread is native thread

Stack: [0x0000000856d00000,0x0000000856e00000]
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [jvm.dll+0xb532f1]  os::platform_print_native_stack+0xf1  (os_windows_x86.cpp:235)
V  [jvm.dll+0xd9047e]  VMError::report+0x101e  (vmError.cpp:828)
V  [jvm.dll+0xd91e7e]  VMError::report_and_die+0x7fe  (vmError.cpp:1656)
V  [jvm.dll+0xd92604]  VMError::report_and_die+0x64  (vmError.cpp:1437)
V  [jvm.dll+0x4df6c7]  report_vm_error+0xb7  (debug.cpp:282)
V  [jvm.dll+0xb4982d]  convert_to_unicode+0x9d  (os_windows.cpp:4435)
V  [jvm.dll+0xb52a27]  wide_abs_unc_path+0x117  (os_windows.cpp:4500)
V  [jvm.dll+0xb51a0a]  os::stat+0x3a  (os_windows.cpp:4538)
V  [jvm.dll+0xb40988]  os::file_exists+0x48  (os.cpp:1403)
V  [jvm.dll+0x596082]  FileHeaderHelper::read_base_archive_name+0xe2  (filemap.cpp:1098)
V  [jvm.dll+0x592c75]  FileMapInfo::check_archive+0x1f5  (filemap.cpp:1143)
V  [jvm.dll+0x227a15]  Arguments::init_shared_archive_paths+0x3c5  (arguments.cpp:3542)
V  [jvm.dll+0x226115]  Arguments::apply_ergo+0x205  (arguments.cpp:4001)
V  [jvm.dll+0xd0a7b2]  Threads::create_vm+0xf2  (thread.cpp:2709)
V  [jvm.dll+0x7ac892]  JNI_CreateJavaVM_inner+0xb2  (jni.cpp:3616)
V  [jvm.dll+0x7b01ef]  JNI_CreateJavaVM+0x1f  (jni.cpp:3704)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276625,JDK-8261455,,,,,,,,,,,,,,,,,,,,,JDK-8276769,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,windows,,,,,,"0|i2urxv:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-25 10:23;ccheung;The mdmp doesn't give much information. Below are the threads dump using windbg:
0:000> ~*kb

.  0  Id: 120e4.8a20 Suspend: 0 Teb: 00000008`56972000 Unfrozen
 # RetAddr               : Args to Child                                                           : Call Site
00 00007ffe`861be7fe     : 00000149`b14994c0 00007ffe`8778afdd 00000000`00000000 00000000`00000000 : ntdll!NtWaitForSingleObject+0x14
01 00007ffe`7992798b     : 00000000`00000124 00000000`00000000 00000000`00000000 00000000`00000124 : KERNELBASE!WaitForSingleObjectEx+0x8e
02 00007ffe`7992492c     : 00000000`00000000 00000149`b148e298 00000000`00000000 00000149`0000e358 : jli!CallJavaMainInNewThread+0x87 [t:\workspace\open\src\java.base\windows\native\libjli\java_md.c @ 811] 
03 00007ffe`79925149     : 00000149`b1499460 00000008`56aff940 00000149`b1494f80 00000008`56aff8a0 : jli!ContinueInNewThread+0x94 [t:\workspace\open\src\java.base\share\native\libjli\java.c @ 2285] 
04 00007ff7`2c9c1139     : 00007ff7`2c9c2200 00000149`b1499680 00000000`00000000 00007ffe`85eb6a36 : jli!JLI_Launch+0x4ad [t:\workspace\open\src\java.base\share\native\libjli\java.c @ 339] 
05 00007ff7`2c9c13b0     : 00000149`b1499680 00007ff7`2c9c1429 00000000`00000000 00000000`00000000 : java!main+0x131
06 00007ffe`87784ed0     : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : java!main+0x3a8
07 00007ffe`8890e20b     : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : kernel32!BaseThreadInitThunk+0x10
08 00000000`00000000     : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : ntdll!RtlUserThreadStart+0x2b

   1  Id: 120e4.93ac Suspend: 0 Teb: 00000008`56974000 Unfrozen
 # RetAddr               : Args to Child                                                           : Call Site
00 00007ffe`8889c25f     : 00000000`00000000 00000000`00000000 00000149`b1484b60 00000149`b149e960 : ntdll!NtWaitForWorkViaWorkerFactory+0x14
01 00007ffe`87784ed0     : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : ntdll!TppWorkerThread+0x2df
02 00007ffe`8890e20b     : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : kernel32!BaseThreadInitThunk+0x10
03 00000000`00000000     : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : ntdll!RtlUserThreadStart+0x2b

   2  Id: 120e4.6550 Suspend: 0 Teb: 00000008`56976000 Unfrozen
 # RetAddr               : Args to Child                                                           : Call Site
00 00007ffe`8889c25f     : 00000000`00000000 00000000`00000000 00000149`b1484b60 00000149`b149f340 : ntdll!NtWaitForWorkViaWorkerFactory+0x14
01 00007ffe`87784ed0     : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : ntdll!TppWorkerThread+0x2df
02 00007ffe`8890e20b     : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : kernel32!BaseThreadInitThunk+0x10
03 00000000`00000000     : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : ntdll!RtlUserThreadStart+0x2b

   3  Id: 120e4.e358 Suspend: 0 Teb: 00000008`56978000 Unfrozen
 # RetAddr               : Args to Child                                                           : Call Site
00 00000008`56df9fb8     : 00000000`00000002 00000000`00000000 000004b4`00030000 00000001`f46857d4 : ntdll!NtGetContextThread+0x14
01 00000000`00000002     : 00000000`00000000 000004b4`00030000 00000001`f46857d4 00000149`b1211764 : 0x00000008`56df9fb8
02 00000000`00000000     : 000004b4`00030000 00000001`f46857d4 00000149`b1211764 00000008`56978000 : 0x2
;;;","2021-10-26 09:04;iklam;The bug seems to be here:

https://github.com/openjdk/jdk/blob/master/src/hotspot/share/cds/filemap.cpp#L1092

    size_t n = os::read(_fd, *target, (unsigned int)name_size);
    if (n != name_size) {
      log_info(cds)(""Unable to read base archive name from archive"");
      FREE_C_HEAP_ARRAY(char, *target);
      return false;
    }
    if (!os::file_exists(*target)) {  <<<<<<<<<<<<< here


In this test case, the name is not zero-terminated, so os::file_exists(*target) will be passing a string whose end is in the unallocated area of the C heap. When the following code is executed in os_windows.cpp, if a C_HEAP_ALLOC happens between the two MultiByteToWideChar calls, the string pointed to by char_path will change, and hence result will not be equal to unicode_path_len.

===============
static errno_t convert_to_unicode(char const* char_path, LPWSTR* unicode_path) {
  // Get required buffer size to convert to Unicode
  int unicode_path_len = MultiByteToWideChar(CP_ACP,
                                             MB_ERR_INVALID_CHARS,
                                             char_path, -1,
                                             NULL, 0);
  if (unicode_path_len == 0) {
    return EINVAL;
  }

    /////// <<<<<<<<<<<<<<<<< C_HEAP_ALLOC happens in a different thread 

  *unicode_path = NEW_C_HEAP_ARRAY(WCHAR, unicode_path_len, mtInternal);

  int result = MultiByteToWideChar(CP_ACP,
                                   MB_ERR_INVALID_CHARS,
                                   char_path, -1,
                                   *unicode_path, unicode_path_len);
  assert(result == unicode_path_len, ""length already checked above"");
====================;;;","2021-10-26 11:12;mseledtsov;ILW = HLM = P3;;;","2021-10-26 20:32;minqi;This is addressed in jdk-8261455. This closed as dup.;;;","2021-11-05 00:42;iklam;JDK-8261455 may take longer to integrate than expected. Let's do a small fix for this crash first.;;;","2021-11-07 13:40;roboduke;Changeset: 88491549
Author:    Ioi Lam <iklam@openjdk.org>
Date:      2021-11-07 21:38:59 +0000
URL:       https://git.openjdk.java.net/jdk/commit/884915496f7bfe754279f1644603131c64f192b3
;;;",,,,,,,,,,,,,,,
Random crashes while the UI code is executed,JDK-8275843,5061058,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,serb,serb,serb,2021-10-23 12:54,2023-08-07 14:06,2023-10-01 09:57,2021-12-14 10:05,11,17,18,,,,,,,,,,,19,client-libs,,0,11-bp,17-bp,amazon-interest,jdk17u-fix-request,jdk17u-fix-yes,regression,regression_8204931,,,,,,,,,,"While executing some UI applications on the various Linux environments including virtual environment, docker, or just on the physical PC the java sometimes crashed in random places.

The stack information in the core file is always broken, sometimes hs_file contains the report below, but I think this is not a root cause and just a result of already broken memory.

#0  0x0000ffffb8983470 in raise () from /lib64/libc.so.6
#1  0x0000ffffb8984cb4 in abort () from /lib64/libc.so.6
#2  0x0000ffffb89be860 in __libc_message () from /lib64/libc.so.6
#3  0x0000ffffb89c4c84 in malloc_printerr () from /lib64/libc.so.6
#4  0x0000ffffb89c69a0 in _int_free () from /lib64/libc.so.6
#5  0x0000ffffb6f3e0bc in Chunk::operator delete (p=0xffffb070d300) at /jdk/src/hotspot/share/memory/arena.cpp:199
#6  Chunk::chop (this=<optimized out>) at /jdk/src/hotspot/share/memory/arena.cpp:213
#7  0x0000ffffb6f3e178 in Chunk::next_chop (this=0xffffb0029170) at /jdk/src/hotspot/share/memory/arena.cpp:219
#8  0x0000ffffb70fe88c in ResourceArea::rollback_to (state=..., this=0xffffb00273a0) at /jdk/src/hotspot/share/memory/resourceArea.hpp:119
#9  ResourceMarkImpl::reset_to_mark (this=0xffffb6875880) at /jdk/src/hotspot/share/memory/resourceArea.hpp:163
#10 ResourceMarkImpl::~ResourceMarkImpl (this=0xffffb6875880, __in_chrg=<optimized out>) at /jdk/src/hotspot/share/memory/resourceArea.hpp:158
#11 0x0000ffffb7c16da8 in ResourceMark::~ResourceMark (this=0x0, __in_chrg=<optimized out>) at /jdk/src/hotspot/share/memory/resourceArea.hpp:204
#12 nmethod::check_all_dependencies (changes=...) at /jdk/src/hotspot/share/code/nmethod.cpp:2231
#13 0x0000ffffb72649c8 in CodeCache::mark_for_deoptimization (changes=...) at /jdk/src/hotspot/share/code/codeCache.cpp:1020
#14 0x0000ffffb7264bb8 in CodeCache::flush_dependents_on (dependee=dependee@entry=0x80109eed0) at /jdk/src/hotspot/share/code/codeCache.cpp:1189
#15 0x0000ffffb801afd0 in SystemDictionary::add_to_hierarchy (k=k@entry=0x80109eed0) at /jdk/src/hotspot/share/classfile/systemDictionary.cpp:1583
#16 0x0000ffffb8020c9c in SystemDictionary::define_instance_class (k=k@entry=0x80109eed0, class_loader=..., __the_thread__=__the_thread__@entry=0xffffb0028b40) at /jdk/src/hotspot/share/classfile/systemDictionary.cpp:1440
#17 0x0000ffffb8020fd4 in SystemDictionary::find_or_define_helper (class_name=class_name@entry=0xffff991eee80, class_loader=..., k=k@entry=0x80109eed0, __the_thread__=__the_thread__@entry=0xffffb0028b40)
    at /jdk/src/hotspot/share/classfile/systemDictionary.cpp:1524
#18 0x0000ffffb802117c in SystemDictionary::find_or_define_instance_class (class_name=class_name@entry=0xffff991eee80, class_loader=..., class_loader@entry=..., k=k@entry=0x80109eed0, __the_thread__=__the_thread__@entry=0xffffb0028b40)
    at /jdk/src/hotspot/share/classfile/systemDictionary.cpp:1546
#19 0x0000ffffb8022fac in SystemDictionary::load_instance_class_impl (class_name=class_name@entry=0xffff991eee80, class_loader=..., __the_thread__=__the_thread__@entry=0xffffb0028b40)
    at /jdk/src/hotspot/share/classfile/systemDictionary.cpp:1294
#20 0x0000ffffb8021510 in SystemDictionary::load_instance_class (name_hash=name_hash@entry=266064372, name=name@entry=0xffff991eee80, class_loader=..., __the_thread__=__the_thread__@entry=0xffffb0028b40)
    at /jdk/src/hotspot/share/classfile/systemDictionary.cpp:1353
#21 0x0000ffffb8021c1c in SystemDictionary::resolve_instance_class_or_null (name=name@entry=0xffff991eee80, class_loader=..., protection_domain=..., __the_thread__=__the_thread__@entry=0xffffb0028b40)
    at /jdk/src/hotspot/share/classfile/systemDictionary.cpp:722
#22 0x0000ffffb8021ebc in SystemDictionary::resolve_instance_class_or_null_helper (class_name=class_name@entry=0xffff991eee80, class_loader=..., protection_domain=..., __the_thread__=__the_thread__@entry=0xffffb0028b40)
    at /jdk/src/hotspot/share/classfile/systemDictionary.cpp:293
#23 0x0000ffffb80234a4 in SystemDictionary::resolve_or_null (__the_thread__=0xffffb0028b40, protection_domain=..., class_loader=..., class_name=0xffff991eee80) at /jdk/src/hotspot/share/classfile/systemDictionary.cpp:276
#24 SystemDictionary::resolve_or_fail (class_name=class_name@entry=0xffff991eee80, class_loader=..., protection_domain=..., throw_error=throw_error@entry=true, __the_thread__=__the_thread__@entry=0xffffb0028b40)
    at /jdk/src/hotspot/share/classfile/systemDictionary.cpp:262
#25 0x0000ffffb72f59f4 in ConstantPool::klass_at_impl (this_cp=..., which=which@entry=542, __the_thread__=__the_thread__@entry=0xffffb0028b40) at /jdk/src/hotspot/share/oops/constantPool.cpp:513
#26 0x0000ffffb76bf7e4 in ConstantPool::klass_at (__the_thread__=0xffffb0028b40, which=542, this=0xffff9882e550) at /jdk/src/hotspot/share/oops/constantPool.hpp:401
#27 InterpreterRuntime::_new (current=0xffffb0028b40, pool=0xffff9882e550, index=542) at /jdk/src/hotspot/share/interpreter/interpreterRuntime.cpp:218",,,,,,,,,,JDK-8299556,JDK-8302843,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8204931,JDK-8227392,JDK-8176795,JDK-8214579,,,,,,,,,,,,JDK-8204931,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,linux,,,,,,"0|i2urvn:",9223372036854775807,b02,,,,,,,,,,,,,"2021-10-26 13:39;serb;This is another wagon in this train:
JDK-8176795->JDK-8204931->JDK-8214579->JDK-8227392->Current issue.

I think that the current issue is the same as was reported by the JDK-8214579, which was rolled back by the JDK-8227392.
Looks like nobody realized that the wrong rendering was caused by the broken memory access and the last fix(JDK-8227392) solved one JCK issue in one particular case but reintroduce the crashes.

The change caused mismatch is JDK-8204931.;;;","2021-12-10 09:25;vdyakov;Let's review it for 19.;;;","2021-12-14 10:05;roboduke;Changeset: a9c1acbb
Author:    Sergey Bylokhov <serb@openjdk.org>
Date:      2021-12-14 18:03:00 +0000
URL:       https://git.openjdk.java.net/jdk/commit/a9c1acbb8aec46e4a488b7c77bb6318af87747f6
;;;","2022-12-30 21:31;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/993
Date: 2022-12-29 05:55:46 +0000;;;","2022-12-30 21:33;serb;Fix request (17u)

Clean backport. Fix for a regression introduced in jdk13 b30. 
Verified by the ""steps to reproduce"" above under X11 when 16 bits depth is used.
The jdk_desktop tests are green.
Review 17u-dev: https://github.com/openjdk/jdk17u-dev/pull/993;;;",,,,,,,,,,,,,,,,
C2: Receiver downcast is missing when inlining through method handle linkers,JDK-8275830,5061038,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,vlivanov,dlong,dlong,2021-10-22 18:27,2022-03-07 02:52,2023-10-01 09:57,2022-01-04 04:37,17,18,,,,,,,,,,,,18,hotspot,,0,c2,hs-comp-triaged,intermittent,intermittent-low-frequency,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-11,oracle-triage-17,oracle-triage-18,redhat-interest,,,,,,,"Seen in developer testing only (so far), and only with this one test.

Current CompileTask:
C2:  95948 4127       4       java.lang.invoke.LambdaForm$MH/0x00000001001af400::invoke (71 bytes)

Stack: [0x00007f98cebfc000,0x00007f98cecfd000],  sp=0x00007f98cecf8eb0,  free space=1011k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x15b1811]  Parse::do_method_entry()+0x431
V  [libjvm.so+0x15baf14]  Parse::Parse(JVMState*, ciMethod*, float)+0x9b4
V  [libjvm.so+0x820ce0]  ParseGenerator::generate(JVMState*)+0x110
V  [libjvm.so+0xb50461]  Parse::do_call()+0x371
V  [libjvm.so+0x15c71e8]  Parse::do_one_bytecode()+0x428
V  [libjvm.so+0x15b53c8]  Parse::do_one_block()+0x838
V  [libjvm.so+0x15b62f0]  Parse::do_all_blocks()+0x130
V  [libjvm.so+0x15bb0f5]  Parse::Parse(JVMState*, ciMethod*, float)+0xb95
V  [libjvm.so+0x820ce0]  ParseGenerator::generate(JVMState*)+0x110
V  [libjvm.so+0xb50461]  Parse::do_call()+0x371
V  [libjvm.so+0x15c71e8]  Parse::do_one_bytecode()+0x428
V  [libjvm.so+0x15b53c8]  Parse::do_one_block()+0x838
V  [libjvm.so+0x15b62f0]  Parse::do_all_blocks()+0x130
V  [libjvm.so+0x15bb0f5]  Parse::Parse(JVMState*, ciMethod*, float)+0xb95
V  [libjvm.so+0x820ce0]  ParseGenerator::generate(JVMState*)+0x110
V  [libjvm.so+0xa02f62]  Compile::Compile(ciEnv*, ciMethod*, int, bool, bool, bool, bool, bool, DirectiveSet*)+0x1342
V  [libjvm.so+0x81dd36]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x646
V  [libjvm.so+0xa135f9]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xd09
V  [libjvm.so+0xa14298]  CompileBroker::compiler_thread_loop()+0x518
V  [libjvm.so+0x18896ec]  JavaThread::thread_main_inner()+0x27c
V  [libjvm.so+0x188fca0]  Thread::call_run()+0x100
V  [libjvm.so+0x156f5e4]  thread_native_entry(Thread*)+0x104",,,,,,,,,,JDK-8280777,JDK-8282734,JDK-8279812,JDK-8279767,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8280469,JDK-8280467,,,,,,,,,,,,,,JDK-8268405,JDK-8267807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2urr7:",9223372036854775807,b30,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-23 00:27;dlong;In the most recent crash on 10/23, holder_type is java/nio/HeapFloatBuffer and receiver_type is java/nio/FloatBuffer.  The replay file shows a call to java/nio/HeapFloatBuffer.put() through lambda classes:

compile java/lang/invoke/LambdaForm$MH+0x00000001001af400 invoke (Ljava/lang/Object;Ljava/lang/Object;ILjava/lang/Object;)V -1 4
inline 13
0 -1 java/lang/invoke/LambdaForm$MH+0x00000001001af400 invoke (Ljava/lang/Object;Ljava/lang/Object;ILjava/lang/Object;)V
 1 8 java/lang/invoke/MethodHandleImpl assertSame (Ljava/lang/Object;Ljava/lang/Object;)V
 1 29  @bci SquareRootTests halfWay ()I 130 <appendix> form vmentry <vmtarget> ; invoke (Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
  2 21 java/lang/invoke/DirectMethodHandle$Holder invokeSpecial (Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
   3 1 java/lang/invoke/DirectMethodHandle internalMemberName (Ljava/lang/Object;)Ljava/lang/Object;
 1 46 java/lang/invoke/LambdaForm$MH+0x00000001001acc00 invoke (Ljava/lang/Object;Ljava/lang/Object;)F
  2 21 java/lang/invoke/LambdaForm$DMH+0x00000001001ac000 invokeStatic (Ljava/lang/Object;Ljava/lang/Object;I)F
   3 1 java/lang/invoke/DirectMethodHandle internalMemberName (Ljava/lang/Object;)Ljava/lang/Object;
   3 11 sun/invoke/util/ValueConversions unboxFloat (Ljava/lang/Object;Z)F
    4 11 java/lang/Float floatValue ()F
 1 67 java/lang/invoke/LambdaForm$DMH+0x0000000100190400 invokeVirtual (Ljava/lang/Object;Ljava/lang/Object;IF)Ljava/lang/Object;
  2 1 java/lang/invoke/DirectMethodHandle internalMemberName (Ljava/lang/Object;)Ljava/lang/Object;
  2 14 java/nio/HeapFloatBuffer put (IF)Ljava/nio/FloatBuffer;
;;;","2021-10-25 00:14;chagedorn;ILW = C2 assertion failure during parsing, single test intermittent, disable compilation of affected method = HLM = P3;;;","2021-11-09 08:04;mbaesken;We have seen this issue as well today in our central  OpenJDK18 jtreg tests (on Linux x86_64,  SLES15).;;;","2021-11-16 06:51;rbackman;[~mbaesken] can you share any info? Like what test/tests failed? Replay files?;;;","2021-11-16 07:02;mbaesken;The crash happened again in the jtreg test  java/nio/Buffer/EqualsCompareTest.java ; unfortunately I have no replay files.
Backtrace is :

Current CompileTask:
C2:   9085 1995       4       java.lang.invoke.LambdaForm$MH/0x0000000800c95000::invoke (71 bytes)

Stack: [0x00007f3c67aed000,0x00007f3c67bee000],  sp=0x00007f3c67be9f00,  free space=1011k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x13ce6c4]  Parse::do_method_entry()+0x384
V  [libjvm.so+0x13d5c95]  Parse::Parse(JVMState*, ciMethod*, float)+0xa45
V  [libjvm.so+0x7b544c]  ParseGenerator::generate(JVMState*)+0x17c
V  [libjvm.so+0xa8ba08]  Parse::do_call()+0x528
V  [libjvm.so+0x13e1150]  Parse::do_one_bytecode()+0xfc0
V  [libjvm.so+0x13d1518]  Parse::do_one_block()+0x5f8
V  [libjvm.so+0x13d2147]  Parse::do_all_blocks()+0x117
V  [libjvm.so+0x13d5e90]  Parse::Parse(JVMState*, ciMethod*, float)+0xc40
V  [libjvm.so+0x7b544c]  ParseGenerator::generate(JVMState*)+0x17c
V  [libjvm.so+0xa8ba08]  Parse::do_call()+0x528
V  [libjvm.so+0x13e1150]  Parse::do_one_bytecode()+0xfc0
V  [libjvm.so+0x13d1518]  Parse::do_one_block()+0x5f8
V  [libjvm.so+0x13d2147]  Parse::do_all_blocks()+0x117
V  [libjvm.so+0x13d5e90]  Parse::Parse(JVMState*, ciMethod*, float)+0xc40
V  [libjvm.so+0x7b544c]  ParseGenerator::generate(JVMState*)+0x17c
V  [libjvm.so+0x95493c]  Compile::Compile(ciEnv*, ciMethod*, int, Options, DirectiveSet*)+0x174c
V  [libjvm.so+0x7b1df6]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x406
V  [libjvm.so+0x9621e9]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xbe9
V  [libjvm.so+0x962c18]  CompileBroker::compiler_thread_loop()+0x3c8
V  [libjvm.so+0x17653ab]  JavaThread::thread_main_inner()+0x25b
V  [libjvm.so+0x176b0c8]  Thread::call_run()+0xf8
V  [libjvm.so+0x1392959]  thread_native_entry(Thread*)+0x109;;;","2021-12-16 20:12;dlong;I tried to reproduce this but no luck so far.  I took a look at one of the core dumps, but didn't anything obviously wrong.  I had a theory that CHA decision based on a unique subclass was invalidated by concurrent class loading, but the times in the hs_err file seem to indicate that classloading of the new subclass happened before the compile started.;;;","2021-12-17 00:16;neliasso;Perhaps this happened because of some bug that was introduced and then fixed a short while later? All 4 bugs are with G1.;;;","2021-12-17 00:33;mbaesken;We had a similar crash on darwinaarch64 on Nov 26th  in OpenJDK18  (again in the java/nio/Buffer/EqualsCompareTest.java  test).
The fastdbg JVM was used to get the assertion.   We run  jtreg_jdk_tier1   to see this crash (probably you have to run that suite a few 100 times to reproduce the issue).
So at least at that time the issue was present. (Previous crash I reported was from linux x86_64) .

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/openjdk/nb/darwinaarch64/jdk/src/hotspot/share/opto/parse1.cpp:1210), pid=60744, tid=23555
#  assert(callee_holder->is_interface()) failed: missing subtype check
#

Host: mymac1, ""Macmini9,1"" arm64, 8 cores, 16G, Darwin 20.6.0, macOS 11.6.1
Time: Fri Nov 26 01:21:52 2021 CET elapsed time: 4.099362 seconds (0d 0h 0m 4s)

---------------  T H R E A D  ---------------

Current thread (0x0000000139045e20):  JavaThread ""C2 CompilerThread0"" daemon [_thread_in_native, id=23555, stack(0x000000016d550000,0x000000016d753000)]


Current CompileTask:
C2:   4099 1839       4       java.lang.invoke.LambdaForm$MH/0x0000000800c94c00::invoke (71 bytes)

Stack: [0x000000016d550000,0x000000016d753000],  sp=0x000000016d74fae0,  free space=2046k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.dylib+0x113fc98]  VMError::report_and_die(int, char const*, char const*, char*, Thread*, unsigned char*, void*, void*, char const*, int, unsigned long)+0x5d0
V  [libjvm.dylib+0x11403d0]  VMError::report_and_die(Thread*, void*, char const*, int, char const*, char const*, char*)+0x40
V  [libjvm.dylib+0x59dc18]  report_vm_error(char const*, int, char const*, char const*, ...)+0x80
V  [libjvm.dylib+0xdc73cc]  Parse::do_method_entry()+0x238
V  [libjvm.dylib+0xdc56c8]  Parse::Parse(JVMState*, ciMethod*, float)+0x9bc
V  [libjvm.dylib+0x448d90]  ParseGenerator::generate(JVMState*)+0xbc
V  [libjvm.dylib+0x65bd14]  Parse::do_call()+0xb60
V  [libjvm.dylib+0xddb5cc]  Parse::do_one_bytecode()+0x1cc
V  [libjvm.dylib+0xdcb7f8]  Parse::do_one_block()+0x3f0
V  [libjvm.dylib+0xdc984c]  Parse::do_all_blocks()+0x330
V  [libjvm.dylib+0xdc58d0]  Parse::Parse(JVMState*, ciMethod*, float)+0xbc4
V  [libjvm.dylib+0x448d90]  ParseGenerator::generate(JVMState*)+0xbc
V  [libjvm.dylib+0x65bd14]  Parse::do_call()+0xb60
V  [libjvm.dylib+0xddb5cc]  Parse::do_one_bytecode()+0x1cc
V  [libjvm.dylib+0xdcb7f8]  Parse::do_one_block()+0x3f0
V  [libjvm.dylib+0xdc984c]  Parse::do_all_blocks()+0x330
V  [libjvm.dylib+0xdc58d0]  Parse::Parse(JVMState*, ciMethod*, float)+0xbc4
V  [libjvm.dylib+0x448d90]  ParseGenerator::generate(JVMState*)+0xbc
V  [libjvm.dylib+0x547fb0]  Compile::Compile(ciEnv*, ciMethod*, int, Options, DirectiveSet*)+0xeb4
V  [libjvm.dylib+0x447b44]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x160
V  [libjvm.dylib+0x563520]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0x7a0
V  [libjvm.dylib+0x562bc0]  CompileBroker::compiler_thread_loop()+0x288
V  [libjvm.dylib+0x1099944]  JavaThread::thread_main_inner()+0x25c
V  [libjvm.dylib+0x10996c8]  JavaThread::run()+0x374
V  [libjvm.dylib+0x1096a50]  Thread::call_run()+0x21c
V  [libjvm.dylib+0xd9df54]  thread_native_entry(Thread*)+0x160
C  [libsystem_pthread.dylib+0x7878]  _pthread_start+0x140
;;;","2021-12-17 01:59;dlong;I forgot to mention, I tried to use SA to generate the dynamic class files from two of the core dumps, but it failed, so I wasn't able to try replay on the failures.;;;","2021-12-19 03:45;dlong;I haven't been able to reproduce this, but I think I see the problem.  We aren't calling HeapFloatBuffer::put with an invokevirtual bytecode.  We are actually doing something like this:

        14: invokestatic  #24                 // Method java/lang/invoke/MethodHandle.linkToVirtual:(Ljava/lang/Object;IDLjava/lang/invoke/MemberName;)Ljava/lang/Object;

which is processed by CallGenerator::for_method_handle_inline.  Finally, we call call_generator() with the resolved callee, but the bci is still 14, pointing at an invokestatic.  So this new code from JDK-8268405 does not work as intended:

  const bool is_virtual_or_interface = (bytecode == Bytecodes::_invokevirtual) ||
                                       (bytecode == Bytecodes::_invokeinterface);
[...]
        if (cg != NULL && is_virtual_or_interface && !callee->is_static()) {
          CallGenerator* trap_cg = CallGenerator::for_uncommon_trap(callee,

To make this work with linkToVirtual and friends, I think we need to pass in the bytecode value (real or emulated) as an argument.;;;","2022-01-03 03:42;vlivanov;[~dlong] yes, your analysis is correct: the problem is JDK-8268405 fix works only for invokevirtual/invokeinterface bytecodes and not when invocation happens through method handle linkers (MH.linkToVirtual/linkToInterface).;;;","2022-01-03 10:52;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk18/pull/77
Date: 2022-01-03 18:45:25 +0000
;;;","2022-01-04 04:37;roboduke;Changeset: 95a3010a
Author:    Vladimir Ivanov <vlivanov@openjdk.org>
Date:      2022-01-04 12:35:48 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/95a3010acf822a76bf0e1ebffdddce5d38b75e7b
;;;","2022-01-04 11:35;roboduke;Changeset: 95a3010a
Author:    Vladimir Ivanov <vlivanov@openjdk.org>
Date:      2022-01-04 12:35:48 +0000
URL:       https://git.openjdk.java.net/jdk/commit/95a3010acf822a76bf0e1ebffdddce5d38b75e7b
;;;","2022-03-04 04:04;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/197
Date: 2022-03-04 11:57:25 +0000;;;","2022-03-05 01:50;mdoerr;Fix Request (17u):
Should get backported for parity with 17.0.4-oracle. Applies cleanly. No new test failures observed (our nightly tests).;;;",,,,,
[lworld] Unnecessary buffering because trivial accessor methods are not C2 compiled,JDK-8275825,5061032,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,thartmann,skuksenko,skuksenko,2021-10-22 13:52,2022-07-04 03:46,2023-10-01 09:57,2021-10-26 05:51,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,lworld,performance,,,,,,,,,,,,,,,"Attached src.zip contains some benchmarks for return of value type.
Here are results:
Benchmark                                Mode  Cnt  Score   Error  Units
Ret4.bench_invokeArgInt           avgt    5  4.439 ± 0.037  ns/op
Ret4.bench_invokeArgVal_loc0  avgt    5  4.725 ± 0.106  ns/op
Ret4.bench_invokeArgVal_loc1  avgt    5  4.729 ± 0.093  ns/op
Ret4.bench_invokeArgVal_loc2  avgt    5  4.704 ± 0.056  ns/op
Ret4.bench_invokeIF                 avgt    5  7.349 ± 0.360  ns/op
Ret4.bench_invokeNew             avgt    5  4.185 ± 0.083  ns/op
Ret4.bench_invokeSF                avgt    5  4.453 ± 0.041  ns/op

Benchmarks cover different behavior:
invokeNew() - return new Value(<const>);
invokeSF() - return <static field>
invokeIF() - return <instance field>
invokeArgInt(int) - return new Value(<arg>);
invokeArgVal(VInteger v) - return <arg>;

All benchmarks behave the same except ""invokeIF"".
Code generated for ""invokeIF"" does unnecessary value buffering:

Ret4.bench_invokeArgInt:·gc.alloc.rate.norm               avgt    5    ≈ 10⁻⁶              B/op
Ret4.bench_invokeArgVal_loc0:·gc.alloc.rate.norm      avgt    5    ≈ 10⁻⁶              B/op
Ret4.bench_invokeArgVal_loc1:·gc.alloc.rate.norm      avgt    5    ≈ 10⁻⁶              B/op
Ret4.bench_invokeArgVal_loc2:·gc.alloc.rate.norm      avgt    5    ≈ 10⁻⁶              B/op
Ret4.bench_invokeIF:·gc.alloc.rate.norm                      avgt    5    16.001 ±   0.001    B/op
Ret4.bench_invokeNew:·gc.alloc.rate.norm                  avgt    5    ≈ 10⁻⁶              B/op
Ret4.bench_invokeSF:·gc.alloc.rate.norm                     avgt    5    ≈ 10⁻⁶              B/op
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8289686,,,,,,,,,,"2021-10-22 13:43;skuksenko;src.zip;https://bugs.openjdk.org/secure/attachment/96786/src.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2urpv:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-25 07:01;thartmann;The problem seems to be that the callee methods are only compiled with C1 which does not return scalarized:

  2.56%         c1, level 1  org.openjdk.bench.valhalla.callconv.Ret4$InvokeImpl2::invokeIF, version 690 (123 bytes) 
  2.52%         c1, level 1  org.openjdk.bench.valhalla.callconv.Ret4$InvokeImpl1::invokeIF, version 689 (123 bytes) 
  2.37%         c1, level 1  org.openjdk.bench.valhalla.callconv.Ret4$InvokeImpl3::invokeIF, version 691 (123 bytes) 

Most likely that's because these ""getter"" methods are considered simple enough to not benefit from C2 compilation. We need to adjust that heuristic (CompilationPolicy::is_trivial) to take inline type returns into account.;;;","2021-10-25 07:23;thartmann;Temporary workaround: -XX:-TieredCompilation

Ret4.bench_invokeIF                      avgt   15   3.420 ±  0.085   ns/op
Ret4.bench_invokeIF:·gc.alloc.rate       avgt   15  ≈ 10⁻⁴           MB/sec
Ret4.bench_invokeIF:·gc.alloc.rate.norm  avgt   15  ≈ 10⁻⁶             B/op
Ret4.bench_invokeIF:·gc.count            avgt   15     ≈ 0           counts;;;",,,,,,,,,,,,,,,,,,,
[lworld] C2 generates unused code (klass ptr check) when oop value of scalarized return is not used,JDK-8275824,5061031,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,thartmann,skuksenko,skuksenko,2021-10-22 13:41,2021-10-25 23:08,2023-10-01 09:57,2021-10-25 23:08,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,c2,lworld,performance,,,,,,,,,,,,,,"For code like:
        int r = 0;
        for(InvocationLogic t : arr) {
            r += t.invokeSF().value;
        }
where ""invokeSF"" returns value type
There is generated unnecessary/unused klass prt check.

         │↗   0x00007fe94cf37440:   mov    (%rsp),%r10
         ││   0x00007fe94cf37444:   mov    %r11d,0xc(%rsp)              ;*aload {reexecute=0 rethrow=0 return_oop=0 return_scalarized=0}
         ││                                                             ; - org.openjdk.bench.valhalla.callconv.Ret4::bench_invokeArgVal_loc0@32 (line 260)
  0.04%  ↘│   0x00007fe94cf37449:   mov    0x10(%r10,%rbp,4),%r11d
  0.91%   │   0x00007fe94cf3744e:   mov    %r10,(%rsp)
  9.39%   │   0x00007fe94cf37452:   mov    %r11,%rsi
          │   0x00007fe94cf37455:   shl    $0x3,%rsi                    ;*aaload {reexecute=0 rethrow=0 return_oop=0 return_scalarized=0}
          │                                                             ; - org.openjdk.bench.valhalla.callconv.Ret4::bench_invokeArgVal_loc0@36 (line 260)
          │   0x00007fe94cf37459:   mov    $0x2a,%edx
  0.95%   │   0x00007fe94cf3745e:   data16 xchg %ax,%ax
  9.88%   │   0x00007fe94cf37461:   movabs $0x801027028,%rax
          │   0x00007fe94cf3746b:   callq  0x00007fe94cf367a0           ; ImmutableOopMap {[0]=Oop }
          │                                                             ;*invokevirtual invokeArgVal {reexecute=0 rethrow=0 return_oop=1 return_scalarized=1}
          │                                                             ; - org.openjdk.bench.valhalla.callconv.Ret4::bench_invokeArgVal_loc0@44 (line 261)
          │                                                             ;   {virtual_call org.openjdk.bench.valhalla.callconv.Ret4$InvocationLogic::invokeArgVal}
  0.91%   │   0x00007fe94cf37470:   mov    %rax,%r10
          │   0x00007fe94cf37473:   and    $0x1,%r10
          │   0x00007fe94cf37477:   sub    $0x1,%r10
          │   0x00007fe94cf3747b:   and    %r10,%rax                    ;*invokevirtual invokeArgVal {reexecute=0 rethrow=0 return_oop=0 return_scalarized=0}
          │                                                             ; - org.openjdk.bench.valhalla.callconv.Ret4::bench_invokeArgVal_loc0@44 (line 261)
  0.88%   │   0x00007fe94cf3747e:   mov    0xc(%rsp),%r11d
  8.98%   │   0x00007fe94cf37483:   add    %edi,%r11d                   ;*iadd {reexecute=0 rethrow=0 return_oop=0 return_scalarized=0}
          │                                                             ; - org.openjdk.bench.valhalla.callconv.Ret4::bench_invokeArgVal_loc0@50 (line 261)
          │   0x00007fe94cf37486:   inc    %ebp                         ;*iinc {reexecute=0 rethrow=0 return_oop=0 return_scalarized=0}
          │                                                             ; - org.openjdk.bench.valhalla.callconv.Ret4::bench_invokeArgVal_loc0@53 (line 260)
  1.13%   │   0x00007fe94cf37488:   cmp    0x8(%rsp),%ebp
          ╰   0x00007fe94cf3748c:   jl     0x00007fe94cf37440",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-22 13:41;skuksenko;src.zip;https://bugs.openjdk.org/secure/attachment/96785/src.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2urpn:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[TableRowAccessibility accessibilityChildren] method is ineffective,JDK-8275819,5061024,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,ant,ant,ant,2021-10-22 11:22,2023-05-05 03:51,2023-10-01 09:57,2021-10-26 08:24,17,18,,,,,,,,,,,,18,client-libs,,0,a11y,jdk11u-a11y-defer,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,macos,,,,,,,,,,,"The method:

-[TableRowAccessibility accessibilityChildren]

returns children (cells) of a particular row in a table, however in order to do that the method retrieves all the children in a table. This is redundant and ineffective, especially for a table with huge number of rows. It is enough to retrieve cells for a particular requested row.",,,,,,,,,,JDK-8287655,JDK-8277716,JDK-8277767,JDK-8288264,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,os_x,,,,,,"0|i2uro3:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4785f47c,,,,,,,,,"2021-10-26 08:24;roboduke;Changeset: b98ed550
Author:    Anton Tarasov <ant@openjdk.org>
Date:      2021-10-26 15:23:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b98ed55060b5f3b7832ec28064b04577e3725cc2
;;;","2021-11-23 03:57;ant;Fix request (17u) 
A direct backport. Fixes slow access to a table that can be critical and lead to a noticeable lag for a long table.
PR: https://github.com/openjdk/jdk17u/pull/301;;;",,,,,,,,,,,,,,,,,,,
OCA link in README.md and CONTRIBUTING.md is broken,JDK-8275815,5061018,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,kcr,kcr,kcr,2021-10-22 10:35,2021-10-27 15:45,2023-10-01 09:57,2021-10-22 13:18,jfx18,,,,,,,,,,,,,jfx18,javafx,,0,noreg-doc,sn_104,,,,,,,,,,,,,,,"The jfx project README.md and CONTRIBUTING.md include the following link to the Oracle Contributor Agreement:

https://www.oracle.com/technetwork/community/oca-486395.html

That is now broken link, and should be replaced by:

https://oca.opensource.oracle.com/
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,SKARA-1221,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2urmr:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1d1c7815,,,,,,,,,"2021-10-22 13:18;roboduke;Changeset: d244b305
Author:    Kevin Rushforth <kcr@openjdk.org>
Date:      2021-10-22 20:17:31 +0000
URL:       https://git.openjdk.java.net/jfx/commit/d244b3054aa3a735825c360159826bc414df36ca
;;;",,,,,,,,,,,,,,,,,,,,
Incorrect instance to dispose,JDK-8275811,5061012,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,xuelei,xuelei,xuelei,2021-10-22 10:25,2022-04-19 06:00,2023-10-01 09:57,2021-11-16 12:36,11-pool,17,8-pool,,,,,,,,,,,18,security-libs,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,jdk8u-needs-pr,noreg-trivial,redhat-interest,,,,,,,,,"Here is the original bug report: https://mail.openjdk.java.net/pipermail/security-dev/2021-October/027805.html.
-------------
During routine examination of thread dumps I noticed a stack trace you
may find interesting. Relevant part:

  java.lang.Thread.State: RUNNABLE
...
at java.lang.IllegalStateException.<init>(java.base@11.0.11/Unknown Source)
at javax.crypto.Cipher.checkCipherState(java.base@11.0.11/Unknown Source)
at javax.crypto.Cipher.doFinal(java.base@11.0.11/Unknown Source)
at sun.security.ssl.SSLCipher$T12GcmReadCipherGenerator$GcmReadCipher.dispose(java.base@11.0.11/Unknown
Source)
at sun.security.ssl.InputRecord.changeReadCiphers(java.base@11.0.11/Unknown
Source)
at sun.security.ssl.ChangeCipherSpec$T10ChangeCipherSpecConsumer.consume(java.base@11.0.11/Unknown
Source)
...

All handshakes that negotiate GCM ciphers throw and catch an
exception, because the newly created cipher is disposed before use.

I believe this is caused by this line of code:
https://github.com/openjdk/jdk/blob/739769c8fc4b496f08a92225a12d07414537b6c0/src/java.base/share/classes/sun/security/ssl/InputRecord.java#L125

I think it should read as follows:
this.readCipher.dispose();
",,,,,,,,,,JDK-8277710,JDK-8275812,JDK-8278550,JDK-8275814,JDK-8275813,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,11,,,,,,,,"0|i2urlf:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@39d9862,,,,,,,,,"2021-11-16 12:36;roboduke;Changeset: cddc6ce4
Author:    Daniel Jelinski <djelinski1@gmail.com>
Committer: Xue-Lei Andrew Fan <xuelei@openjdk.org>
Date:      2021-11-16 20:34:15 +0000
URL:       https://git.openjdk.java.net/jdk/commit/cddc6ce44695cba4614c3405eb2b194d7c76489b
;;;","2021-11-22 11:43;coffeys;Fix Request:
Low risk bug fix in TLS code which can improve JDK performance in this area.;;;","2021-12-08 10:48;zgu;Fix Request (11u)

A clean backport for parity with Oracle 11.0.15.

Low risk bug fix in TLS code which can improve JDK performance in this area.;;;","2021-12-17 07:14;zgu;8u code review: https://mail.openjdk.java.net/pipermail/jdk8u-dev/2021-December/014478.html
;;;","2022-04-19 06:00;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk8u-dev/pull/38
Date: 2022-04-19 12:55:41 +0000;;;",,,,,,,,,,,,,,,,
crash in [CommonComponentAccessibility getCAccessible:withEnv:],JDK-8275809,5061010,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,ant,ant,ant,2021-10-22 09:26,2023-05-05 03:51,2023-10-01 09:57,2021-10-26 08:28,18,,,,,,,,,,,,,18,client-libs,,0,a11y,accessibility,jdk11u-a11y-defer,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,macos,,,,,,,,,,"In the method:

+[CommonComponentAccessibility getCAccessible:withEnv:]

the code can crash:

if ((*env)->IsInstanceOf(env, jaccessible, sjc_CAccessible)) {

because jaccessible is a weak ref and i is not checked for validity here.

Below I'm listing a dump that we get from the JetBrains OpenJDK fork (where it has been fixed). The problem is reproduced rarely however it is quite clear from the code:

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib        	0x00007fff202f3462 __pthread_kill + 10
1   libsystem_pthread.dylib       	0x00007fff20321610 pthread_kill + 263
2   libsystem_c.dylib             	0x00007fff20274720 abort + 120
3   libjvm.dylib                  	0x0000000113646920 os::abort(bool, void*, void const*) + 22 (os_bsd.cpp:1094)
4   libjvm.dylib                  	0x000000011378a042 VMError::report_and_die(int, char const*, char const*, __va_list_tag*, Thread*, unsigned char*, void*, void*, char const*, int, unsigned long) + 2896 (vmError.cpp:1613)
5   libjvm.dylib                  	0x00000001137894ce VMError::report_and_die(Thread*, unsigned int, unsigned char*, void*, void*, char const*, ...) + 148 (vmError.cpp:1274)
6   libjvm.dylib                  	0x000000011378a117 VMError::report_and_die(Thread*, unsigned int, unsigned char*, void*, void*) + 33 (vmError.cpp:1280)
7   libjvm.dylib                  	0x000000011364a730 JVM_handle_bsd_signal + 543 (os_bsd_x86.cpp:803)
8   libjvm.dylib                  	0x00000001136483c8 signalHandler(int, __siginfo*, void*) + 45 (os_bsd.cpp:2854)
9   libsystem_platform.dylib      	0x00007fff20365d7d _sigtramp + 29
10  ???                           	0x00000001b6dd1858 0 + 7362910296
11  libawt_lwawt.dylib            	0x000000013dcf0019 +[JavaComponentAccessibility getCAccessible:withEnv:] + 849 (JavaComponentAccessibility.m:269)
12  libawt_lwawt.dylib            	0x000000013dcf1348 +[JavaComponentAccessibility createWithParent:accessible:role:index:withEnv:withView:isWrapped:] + 608 (JavaComponentAccessibility.m:385)
13  libawt_lwawt.dylib            	0x000000013dcedd38 -[JavaCellAccessibility accessibilityChildren] + 185 (JavaCellAccessibility.m:18)
14  com.apple.AppKit              	0x00007fff22cd865a -[NSAccessibilityAttributeAccessorInfo getAttributeValue:forObject:] + 58
15  com.apple.AppKit              	0x00007fff2327807a ___NSAccessibilityEntryPointValueForAttribute_block_invoke.811 + 1691
16  com.apple.AppKit              	0x00007fff23273ce3 NSAccessibilityPerformEntryPointObject + 16
17  com.apple.AppKit              	0x00007fff22f33a26 _NSAccessibilityEntryPointValueForAttribute + 168
18  com.apple.AppKit              	0x00007fff23069ab2 _NSAccessibilityChildrenInNavigationOrderAttributeValue + 40
19  com.apple.AppKit              	0x00007fff22cd958a NSAccessibilityGetObjectValueForAttribute + 2724
20  com.apple.AppKit              	0x00007fff22cd865a -[NSAccessibilityAttributeAccessorInfo getAttributeValue:forObject:] + 58
21  com.apple.AppKit              	0x00007fff2327807a ___NSAccessibilityEntryPointValueForAttribute_block_invoke.811 + 1691
22  com.apple.AppKit              	0x00007fff23273ce3 NSAccessibilityPerformEntryPointObject + 16
23  com.apple.AppKit              	0x00007fff22f33a26 _NSAccessibilityEntryPointValueForAttribute + 168
24  com.apple.AppKit              	0x00007fff2306bf05 -[NSObject(NSAccessibilityInternal) _accessibilityValueForAttribute:clientError:] + 341
25  com.apple.AppKit              	0x00007fff23070eb6 CopyAppKitUIElementAttributeValueNoCatch + 98
26  com.apple.AppKit              	0x00007fff2306de6b CopyAttributeValue + 142
27  com.apple.HIServices          	0x00007fff256ada2b _AXXMIGCopyAttributeValue + 409
28  com.apple.HIServices          	0x00007fff256cf82b _XCopyAttributeValue + 443
29  com.apple.HIServices          	0x00007fff2568e704 mshMIGPerform + 174
30  com.apple.CoreFoundation      	0x00007fff2041a188 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 41
31  com.apple.CoreFoundation      	0x00007fff2041a065 __CFRunLoopDoSource1 + 595
32  com.apple.CoreFoundation      	0x00007fff20418709 __CFRunLoopRun + 2402
33  com.apple.CoreFoundation      	0x00007fff204176ce CFRunLoopRunSpecific + 563
34  com.apple.HIToolbox           	0x00007fff2869c6d0 RunCurrentEventLoopInMode + 292
35  com.apple.HIToolbox           	0x00007fff2869c4cc ReceiveNextEventCommon + 709
36  com.apple.HIToolbox           	0x00007fff2869c1ef _BlockUntilNextEventMatchingListInModeWithFilter + 64
37  com.apple.AppKit              	0x00007fff22c34de9 _DPSNextEvent + 883
38  com.apple.AppKit              	0x00007fff22c335af -[NSApplication(NSEvent) _nextEventMatchingEventMask:untilDate:inMode:dequeue:] + 1366
39  libosxapp.dylib               	0x000000013e14e1ea -[NSApplicationAWT nextEventMatchingMask:untilDate:inMode:dequeue:] + 121 (NSApplicationAWT.m:385)
40  com.apple.AppKit              	0x00007fff22c25b0a -[NSApplication run] + 586
41  libosxapp.dylib               	0x000000013e14dfcf +[NSApplicationAWT runAWTLoopWithApp:] + 165 (NSApplicationAWT.m:343)
42  libawt_lwawt.dylib            	0x000000013dd024c2 +[AWTStarter starter:headless:] + 496
43  libosxapp.dylib               	0x000000013e14fd6c +[ThreadUtilities invokeBlockCopy:] + 15 (ThreadUtilities.m:98)
44  com.apple.Foundation          	0x00007fff211c54d9 __NSThreadPerformPerform + 204
45  com.apple.CoreFoundation      	0x00007fff20419a0c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17
46  com.apple.CoreFoundation      	0x00007fff20419974 __CFRunLoopDoSource0 + 180
47  com.apple.CoreFoundation      	0x00007fff204196ef __CFRunLoopDoSources0 + 248
48  com.apple.CoreFoundation      	0x00007fff20418121 __CFRunLoopRun + 890
49  com.apple.CoreFoundation      	0x00007fff204176ce CFRunLoopRunSpecific + 563
50  libjli.dylib                  	0x000000010a42e8a4 ParkEventLoop + 98 (java_md_macosx.c:323) [inlined]
51  libjli.dylib                  	0x000000010a42e8a4 MacOSXStartup + 178 (java_md_macosx.c:356) [inlined]
52  libjli.dylib                  	0x000000010a42e8a4 CreateExecutionEnvironment + 381 (java_md_macosx.c:403)
53  libjli.dylib                  	0x000000010a42acab JLI_Launch + 1287 (java.c:276)
54  java                          	0x000000010a419f64 main + 372 (main.c:206)
55  libdyld.dylib                 	0x00007fff2033c621 start + 1",,,,,,,,,,JDK-8277768,JDK-8277717,JDK-8287656,JDK-8288265,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,os_x,,,,,,"0|i2urkz:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4785f47c,,,,,,,Not verified,,"2021-10-26 08:28;roboduke;Changeset: 7c88a59b
Author:    Anton Tarasov <ant@openjdk.org>
Date:      2021-10-26 15:26:45 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7c88a59b7bca50061f120a1cf2c1d4457a1d741b
;;;","2021-11-23 03:15;ant;Fix request (17u)
A direct backport of the crash fix.
PR: https://github.com/openjdk/jdk17u/pull/299;;;",,,,,,,,,,,,,,,,,,,
Redefinition leaks MethodData::_extra_data_lock,JDK-8275800,5060999,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,coleenp,coleenp,coleenp,2021-10-22 07:58,2022-01-04 22:53,2023-10-01 09:57,2021-10-27 05:11,18,,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-yes,,,,,,,,,,,,,,,"When we deallocate metadata for redefinition, we don't call the Mutex destructor, which leaks the PlatformMutex and the name.
And broke JDK-8274794.",,,,,,,,,,JDK-8279493,JDK-8276554,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8274794,,,,,,,,,,,,,,,JDK-8232112,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2urij:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@661b156a,,,,,,,,,"2021-10-27 05:11;roboduke;Changeset: 40606021
Author:    Coleen Phillimore <coleenp@openjdk.org>
Date:      2021-10-27 12:09:46 +0000
URL:       https://git.openjdk.java.net/jdk/commit/40606021ee6b7d18674e36b3f6249f1ca8a7647e
;;;","2021-12-30 04:17;goetz;Fix request [17u]

I backport this for parity with 17.0.3-oracle.
The change is not trivial, but we should take a fix for a leak.
Clean backport.  SAP nightly testing passes.;;;","2021-12-30 04:22;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/49
Date: 2021-12-30 12:18:36 +0000
;;;",,,,,,,,,,,,,,,,,,
[lworld] Scalar replacement fails with ShouldNotReachHere() due to unexpected load type,JDK-8275797,5060994,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,thartmann,thartmann,thartmann,2021-10-22 07:21,2021-10-25 04:22,2023-10-01 09:57,2021-10-25 04:22,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,c2,intermittent,lw3,lworld,,,,,,,,,,,,,"# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (...workspace/open/src/hotspot/share/opto/memnode.cpp:907), pid=8703, tid=8718
#  Error: ShouldNotReachHere()
#
# JRE version: Java(TM) SE Runtime Environment (18.0) (fastdebug build 18-lworld3ea+0-2021-10-22-0938526.tobias.hartmann.valhalla)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-lworld3ea+0-2021-10-22-0938526.tobias.hartmann.valhalla, compiled mode, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0x14d9e7a]  LoadNode::make(PhaseGVN&, Node*, Node*, Node*, TypePtr const*, Type const*, BasicType, MemNode::MemOrd, LoadNode::ControlDependency, bool, bool, bool, unsigned char)+0x23a


Current CompileTask:
C2:  18758 3495    b        compiler.valhalla.inlinetypes.TestArrays::test27_verifier (82 bytes)

Stack: [0x00007fee109fa000,0x00007fee10afb000],  sp=0x00007fee10af5930,  free space=1006k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x14d9e7a]  LoadNode::make(PhaseGVN&, Node*, Node*, Node*, TypePtr const*, Type const*, BasicType, MemNode::MemOrd, LoadNode::ControlDependency, bool, bool, bool, unsigned char)+0x23a
V  [libjvm.so+0x67e63d]  BarrierSetC2::load_at_resolved(C2Access&, Type const*) const+0x26d
V  [libjvm.so+0xc4dc9f]  G1BarrierSetC2::load_at_resolved(C2Access&, Type const*) const+0xcf
V  [libjvm.so+0x67cbfd]  BarrierSetC2::load_at(C2Access&, Type const*) const+0xed
V  [libjvm.so+0x5e71dd]  ArrayCopyNode::load(BarrierSetC2*, PhaseGVN*, Node*&, MergeMemNode*, Node*, TypePtr const*, Type const*, BasicType)+0xbd
V  [libjvm.so+0x13cb8e8]  PhaseMacroExpand::make_arraycopy_load(ArrayCopyNode*, long, Node*, Node*, BasicType, Type const*, AllocateNode*)+0x8d8
V  [libjvm.so+0x13cacb1]  PhaseMacroExpand::value_from_mem(Node*, Node*, BasicType, Type const*, TypeOopPtr const*, AllocateNode*)+0x631
V  [libjvm.so+0x13cc0f8]  PhaseMacroExpand::inline_type_from_mem(Node*, Node*, ciInlineKlass*, TypeAryPtr const*, int, AllocateNode*)+0x1e8
V  [libjvm.so+0x13cc8d6]  PhaseMacroExpand::scalar_replacement(AllocateNode*, GrowableArray<SafePointNode*>&)+0x5d6
V  [libjvm.so+0x13cf46e]  PhaseMacroExpand::eliminate_allocate_node(AllocateNode*) [clone .part.0]+0x2be
V  [libjvm.so+0x13cfa2b]  PhaseMacroExpand::eliminate_macro_nodes()+0x2eb
V  [libjvm.so+0xa527ce]  Compile::Optimize()+0x187e
V  [libjvm.so+0xa54066]  Compile::Compile(ciEnv*, ciMethod*, int, bool, bool, bool, bool, bool, DirectiveSet*)+0x1656
V  [libjvm.so+0x847f00]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x6a0
V  [libjvm.so+0xa64269]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xc39
V  [libjvm.so+0xa64ec8]  CompileBroker::compiler_thread_loop()+0x518
V  [libjvm.so+0x1977c0c]  JavaThread::thread_main_inner()+0x27c
V  [libjvm.so+0x197e1c0]  Thread::call_run()+0x100
V  [libjvm.so+0x162ea54]  thread_native_entry(Thread*)+0x104
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2urhf:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bogus warning generated for record with compact constructor,JDK-8275784,5060644,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jjg,webbuggrp,webbuggrp,2021-10-19 01:35,2023-05-31 22:22,2023-10-01 09:57,2022-06-28 08:59,15,17,18,,,,,,,,,,,19,tools,,0,dcsad,doclint,javac-record,reproducer-yes,webbug,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
If a record has a compact constructor, a comment for the constructors describing the parameters is required even if the parameters have already been described in the record comment.

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Simply ""javadoc X.java""

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
No warnings
ACTUAL -
X.java:7: warning: no @param for i
    public X { }

---------- BEGIN SOURCE ----------
/**
 * Comment.
 * @param i comment
 */
public record X(int i) {
    /** Comment. */
    public X { }
}
---------- END SOURCE ----------

CUSTOMER SUBMITTED WORKAROUND :
Move the parameter description to the comment of the constructor.

FREQUENCY : always


",,,,,,,,,,JDK-8291197,JDK-8291354,JDK-8289415,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8309252,,,,,,,,,,,,,,,JDK-8275199,,,,,,,,,,"2021-10-22 03:29;adev;Test.java;https://bugs.openjdk.org/secure/attachment/96780/Test.java",,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2upbn:",9223372036854775807,b29,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2021-10-22 03:30;adev;The issue relates to JDK-8275199.;;;","2021-11-23 18:35;jjg;This is similar to, but different from, the issues in JDK-8275199.

Currently, the policy for generating comments for the ""special"" members of a record is, ""if you provide anything, you must provide everything"". This includes `@param` and `@return` tags.  javadoc does not (currently) perform more detailed analysis to determine if any parts of the comment are ""missing"" and could be inferred and added to the otherwise incomplete user-provided comment.  You can see this by providing partial comments to any of the other ""special"" members, not just the compact constructor.

The more interesting question may be, if one does decide to explicitly provide an implementation for anything that could be auto-generated, should you also be expected to provide a comment to go along with that implementation?

;;;","2021-11-29 16:46;jjg;It's related to but different from JDK-8275199.

Right now, the general policy for the comments on the ""special"" methods for a record is, ""if you provide anything for a ""special"" method, you must provide everything."";;;","2022-06-24 08:44;jjg;The notable issue here is that no parameters are given in the compact constructor.;;;","2022-06-24 08:50;jjg;The message is coming from doclint.;;;","2022-06-24 13:58;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk19/pull/70
Date: 2022-06-24 20:53:30 +0000;;;","2022-06-28 08:59;dukebot;Changeset: a814293e
Author:    Jonathan Gibbons <jjg@openjdk.org>
Date:      2022-06-28 15:54:52 +0000
URL:       https://git.openjdk.org/jdk19/commit/a814293e1fb724cb85e66501ed7a8185409642df
;;;",,,,,,,,,,,,,,
JDK source code contains redundant boolean operations in jdk.compiler and langtools,JDK-8275771,5060962,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,vromero,tongwan,tongwan,2021-10-21 23:26,2021-12-13 19:20,2023-10-01 09:57,2021-12-07 15:32,18,,,,,,,,,,,,,18,tools,,0,18ea,dcsaw,noreg-cleanup,reproducer-other,webbug,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
The JDK source code contains the following redundant boolean operations which have no effect; some of them could be simplified and some might be bugs.

- https://github.com/openjdk/jdk/blob/7fc3a8d052bfb8d31fedec56f72b10a40ba7bf83/make/langtools/tools/compileproperties/CompileProperties.java#L186
`true &&` has no effect; maybe wrong precedence?

- Should simplify to `= false`
  https://github.com/openjdk/jdk/blob/7fc3a8d052bfb8d31fedec56f72b10a40ba7bf83/src/jdk.compiler/share/classes/com/sun/tools/javac/comp/Resolve.java#L1304
  https://github.com/openjdk/jdk/blob/7fc3a8d052bfb8d31fedec56f72b10a40ba7bf83/src/jdk.compiler/share/classes/com/sun/tools/javac/comp/Resolve.java#L1318
  https://github.com/openjdk/jdk/blob/7fc3a8d052bfb8d31fedec56f72b10a40ba7bf83/src/jdk.compiler/share/classes/com/sun/tools/javac/comp/Resolve.java#L1340
- Has no effect, should maybe be `= true`?
  https://github.com/openjdk/jdk/blob/7fc3a8d052bfb8d31fedec56f72b10a40ba7bf83/src/jdk.compiler/share/classes/com/sun/tools/javac/comp/Resolve.java#L1316
  https://github.com/openjdk/jdk/blob/7fc3a8d052bfb8d31fedec56f72b10a40ba7bf83/src/jdk.compiler/share/classes/com/sun/tools/javac/comp/Resolve.java#L1338


",,,,,,,,,,JDK-8278697,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275767,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2urab:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,,,"2021-12-07 15:32;roboduke;Changeset: 3c2951f7
Author:    Vicente Romero <vromero@openjdk.org>
Date:      2021-12-07 23:31:09 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3c2951f738c5041761b551674822a32b418094c2
;;;",,,,,,,,,,,,,,,,,,,,
JDK source code contains redundant boolean operations in jdk.charsets,JDK-8275767,5060481,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,naoto,webbuggrp,webbuggrp,2021-10-15 16:41,2021-11-01 11:06,2023-10-01 09:57,2021-10-26 05:49,18,,,,,,,,,,,,,18,core-libs,,0,18ea,dcsaw,noreg-cleanup,reproducer-other,webbug,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
The JDK source code contains the following redundant boolean operations which have no effect; some of them could be simplified and some might be bugs.

- https://github.com/openjdk/jdk/blob/7fc3a8d052bfb8d31fedec56f72b10a40ba7bf83/src/jdk.charsets/share/classes/sun/nio/cs/ext/IBM964.java.template#L206
`true &&` can be removed
- https://github.com/openjdk/jdk/blob/7fc3a8d052bfb8d31fedec56f72b10a40ba7bf83/src/jdk.charsets/share/classes/sun/nio/cs/ext/SimpleEUCEncoder.java.template#L263
`true &&` can be removed


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275770,JDK-8275771,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uobf:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@3962510e,,,,,,,,,"2021-10-22 11:31;martin;Agreed; looks like ""temporary"" debug code that some developer forgot to back out properly.;;;","2021-10-23 11:56;rriggs;In both cases, git reports the code has been there since 2007; giving temporary a new meaning.;;;","2021-10-26 05:49;roboduke;Changeset: 63e0f344
Author:    Naoto Sato <naoto@openjdk.org>
Date:      2021-10-26 12:32:49 +0000
URL:       https://git.openjdk.java.net/jdk/commit/63e0f344e9a2da135c76caff11e437dfc40408a6
;;;","2021-10-26 12:40;ulfzibis;Sometimes such bogus code was used to force HotSpot to compile faster JIT code.;;;",,,,,,,,,,,,,,,,,
Backout:  JDK-8274794 Print all owned locks in hs_err file,JDK-8275761,5060957,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,dholmes,dholmes,dholmes,2021-10-21 21:10,2021-11-30 11:17,2023-10-01 09:57,2021-10-21 21:49,18,,,,,,,,,,,,,18,hotspot,,0,noreg-undo,tier4,tier5,tier6,tier7,,,,,,,,,,,,The fix for JDK-8274794 is causing massive test failures in tier5 due to a SEGV in the ~Mutex destructor. The cause is not clear so I'm backing out the fix to clean up the CI test results while it is investigated further.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275762,JDK-8275756,JDK-8275765,JDK-8275763,JDK-8275752,,,JDK-8274794,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2ur97:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-21 21:49;roboduke;Changeset: fab3d6c6
Author:    David Holmes <dholmes@openjdk.org>
Date:      2021-10-22 04:47:53 +0000
URL:       https://git.openjdk.java.net/jdk/commit/fab3d6c6122b2ce23dfa12db489923d8261f8f35
;;;",,,,,,,,,,,,,,,,,,,,
Reproducible copyright headers,JDK-8275745,5060941,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,ihse,ihse,ihse,2021-10-21 16:02,2022-03-09 08:42,2023-10-01 09:57,2021-11-19 05:56,,,,,,,,,,,,,,18,infrastructure,,1,build-infra,jdk17u-fix-request,jdk17u-fix-yes,reproducible-build,,,,,,,,,,,,,"Description copied from PR https://github.com/openjdk/jdk/pull/1498:

The copyright headers are generated at build time, and the year inserted in the template depends on the current date. This means the headers are not reproducible if the project is built a year later. The year in the headers could be derived from the SOURCE_DATE_EPOCH environment variable to make the build reproducible (this variable is already used in other parts of the build).",,,,,,,,,,JDK-8282889,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2ur5n:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-11-19 05:56;roboduke;Changeset: a0227965
Author:    Magnus Ihse Bursie <mag@icus.se>
Committer: Magnus Ihse Bursie <ihse@openjdk.org>
Date:      2021-11-19 13:55:08 +0000
URL:       https://git.openjdk.java.net/jdk/commit/a0227965bb8d1d49718794d67f8a4cfeebc9bec2
;;;","2022-03-08 03:42;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/206
Date: 2022-03-08 11:37:14 +0000;;;","2022-03-08 06:01;aleonard;Fix Request jdk17u
This fix provides reproducible build for the copyright headers so that the same copyright year is picked up when building a version across a year boundary or at a later year date.
Low risk, default behavior remains using current year if SOURCE_DATE_EPOCH is not set.
;;;",,,,,,,,,,,,,,,,,,
[linux] Remove deprecated Metrics api (kernel memory limit),JDK-8275735,5060923,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,sgehwolf,sgehwolf,sgehwolf,2021-10-21 10:37,2023-05-25 00:46,2023-10-01 09:57,2021-11-02 03:40,,,,,,,,,,,,,,18,core-libs,,0,containers,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,,,,,,,,,,,,"In the - cgroup v1 specific - Metrics api there is reporting of the set kernel memory limit:

    public long getKernelMemoryLimit() {
        return CgroupV1SubsystemController.longValOrUnlimited(getLongValue(memory, ""memory.kmem.limit_in_bytes""));
    }

    public long getTcpMemoryLimit() {
        return CgroupV1SubsystemController.longValOrUnlimited(getLongValue(memory, ""memory.kmem.tcp.limit_in_bytes""));
    }

The cgroup v1 API has been deprecated in the Linux kernel and there are container runtime implementations released which already ignore setting a kernel memory limit when being asked to do so via --kernel-memory switch.

Note that it's not supported at all on cgroups v2.

Therefore, this code should get removed as it'll stop doing anything anyway (other than reporting unlimited in any case).

Example docker-only reproducer:
# docker run --kernel-memory=200m --rm -ti fedora:34 cat sys/fs/cgroup/memory/memory.kmem.limit_in_bytes 
WARNING: Specifying a kernel memory limit is deprecated and will be removed in a future release.
9223372036854771712

References:

Kernel commit adding the deprecation:
https://github.com/torvalds/linux/commit/0158115f702b

runc container runtime PR which ignores any setting of --kernel-memory:
https://github.com/opencontainers/runc/pull/2840

podman PR which hides '--kernel-memory' as an option for 'podman run':
https://github.com/containers/podman/pull/12048

OCI runtime spec update discouraging using/implementing it in container runtimes:
https://github.com/opencontainers/runtime-spec/pull/1093",,,,,,,,,,JDK-8305016,JDK-8308837,JDK-8305239,JDK-8307585,JDK-8305199,JDK-8304875,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275713,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,linux,,,,,,"0|i2ur1n:",9223372036854775807,b22,,,,,,,,,,,Verified,,"2021-10-21 10:43;sgehwolf;$ grep -rn 'getKernelMemoryLimit()' src/
src/java.base/linux/classes/jdk/internal/platform/CgroupV1MetricsImpl.java:52:    public long getKernelMemoryLimit() {
src/java.base/linux/classes/jdk/internal/platform/CgroupV1MetricsImpl.java:53:        return metrics.getKernelMemoryLimit();
src/java.base/linux/classes/jdk/internal/platform/cgroupv1/CgroupV1Subsystem.java:335:    public long getKernelMemoryLimit() {
src/java.base/linux/classes/jdk/internal/platform/CgroupV1Metrics.java:64:    public long getKernelMemoryLimit();
$ grep -rn 'getTcpMemoryLimit()' src/
src/java.base/linux/classes/jdk/internal/platform/CgroupV1MetricsImpl.java:72:    public long getTcpMemoryLimit() {
src/java.base/linux/classes/jdk/internal/platform/CgroupV1MetricsImpl.java:73:        return metrics.getTcpMemoryLimit();
src/java.base/linux/classes/jdk/internal/platform/cgroupv1/CgroupV1Subsystem.java:351:    public long getTcpMemoryLimit() {
src/java.base/linux/classes/jdk/internal/platform/CgroupV1Metrics.java:104:    public long getTcpMemoryLimit();
$ grep -rn -E 'getKernelMemoryLimit\(\)|getTcpMemoryLimit\(\)' test
test/lib/jdk/test/lib/containers/cgroup/MetricsTesterCgroupV1.java:250:        oldVal = metrics.getKernelMemoryLimit();
test/lib/jdk/test/lib/containers/cgroup/MetricsTesterCgroupV1.java:276:        oldVal = metrics.getTcpMemoryLimit();
test/jdk/jdk/internal/platform/docker/MetricsMemoryTester.java:128:            long kmemlimit = mCgroupV1.getKernelMemoryLimit();;;;","2021-10-21 10:44;sgehwolf;It's not used anywhere other than in this internal api and the tests.;;;","2021-11-02 03:40;roboduke;Changeset: 9971a2ca
Author:    Severin Gehwolf <sgehwolf@openjdk.org>
Date:      2021-11-02 10:39:41 +0000
URL:       https://git.openjdk.java.net/jdk/commit/9971a2cab3892a17f3fd39243df5ecfff5b9f108
;;;","2022-04-25 10:56;sqetools;verified;;;","2023-05-04 07:29;goetz;Fix request [17u]

I backport this for parity with 17.0.8-oracle.
No risk, only removing unused code.
Clean backport.
Test passes. SAP nightly testing passes.;;;","2023-05-04 07:37;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1322
Date: 2023-05-04 14:30:09 +0000;;;","2023-05-24 07:28;lucy;Fix request [11u]

This is a backport for parity with 11.0.20-oracle.

Did not apply cleanly. 
No risk. Only code removal. Manual changes to make the original patch apply are immediately removed again when applying the patch.

Tess passed. Change is reviewed.
;;;","2023-05-24 07:31;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1893
Date: 2023-05-24 14:22:53 +0000;;;",,,,,,,,,,,,,
CDS archived enums objects are recreated at runtime,JDK-8275731,5060917,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,iklam,iklam,iklam,2021-10-21 09:22,2022-12-18 23:50,2023-10-01 09:57,2022-02-28 12:35,18,,,,,,,,,,,,,19,hotspot,,0,archived-heap,cds,,,,,,,,,,,,,,,"As reported in https://mail.openjdk.java.net/pipermail/core-libs-dev/2021-October/082709.html

The static constructors of enum classes are executed at both CDS dump time and run time. E.g., 

    public enum Modifier {
        OPEN,
    }

The Modifier::<clinit> method is a synthetic method created by javac. It essentially does this:

    public static final Modifier OPEN = new Modifier(""OPEN"");

If a reference of Modifier.OPEN is stored inside the CDS archived heap, it will be different than the value of Modifier.OPEN that is re-created at runtime by the execution of Modifier.<clinit>

==============================
import java.lang.module.*;
import java.io.*;
import java.util.*;

public class EnumEquality {

    public static void main(final String[] args) throws Exception {
        String moduleName = ""java.sql"";
        // load the ""java.sql"" module from boot layer
        Optional<Module> bootModule = ModuleLayer.boot().findModule(moduleName);
        if (bootModule.isEmpty()) {
            throw new RuntimeException(moduleName + "" module is missing in boot layer"");
        }
        ModuleDescriptor m1 = bootModule.get().getDescriptor();
        // now recreate the same module using the ModuleDescriptor.read on the module's module-info.class
        ModuleDescriptor m2;
        try (InputStream moduleInfo = bootModule.get().getResourceAsStream(""module-info.class"")) {
            if (moduleInfo == null) {
                throw new RuntimeException(""Could not locate module-info.class in "" + moduleName + "" module"");
            }
            // this will internally use a ModuleDescriptor.Builder to construct the ModuleDescriptor
            m2 = ModuleDescriptor.read(moduleInfo);
        }
        if (!m1.equals(m2)) {
            // root cause - the enums aren't ""equal""
            for (ModuleDescriptor.Requires r1 : m1.requires()) {
                if (r1.name().equals(""java.base"")) {
                    for (ModuleDescriptor.Requires r2 : m2.requires()) {
                        if (r2.name().equals(""java.base"")) {
                            System.out.println(""Modifiers r1 "" + r1.modifiers() + "" r2 "" + r2.modifiers()
                                + "" --> equals? "" + r1.modifiers().equals(r2.modifiers()));
                        }
                    }
                }
            }

            throw new RuntimeException(""ModuleDescriptor(s) aren't equal: \n"" + m1 + ""\n"" + m2);
        }
        System.out.println(""Success"");
    }
}




",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8297543,,,,,,,JDK-8292499,,,,,,,,,,,,,,,,,,,,,,,,,"2021-12-01 12:24;iklam;enum_warning.txt;https://bugs.openjdk.org/secure/attachment/97242/enum_warning.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2ur0b:",9223372036854775807,b12,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-24 21:14;jiangli;Pre-initializing CDS archived Enums require supporting the mirror objects within the archived object sub-graphs. I've implemented that support for mirrors (as a foundation for more general class pre-initialization) in http://cr.openjdk.java.net/~jiangli/Leyden/general_class_pre_initialization_core_mechanism/, for JDK-8233887. With that, it supports pre-init Enums and other classes more generally.

I'm in the middle of integrating that patch and open sourcing additional bug fixes to https://github.com/adoptium/jdk11u-fast-startup-incubator for contributing back to OpenJDK as the main goal.

Ioi, please let me know if you are interested in forward porting the changes to the last code base, or collaborating in any forms. ;;;","2021-10-26 11:20;mseledtsov;ILW = MLM = P4;;;","2021-12-01 12:25;iklam;The chain of reference to the enum objects are in the attachment
https://bugs.openjdk.java.net/secure/attachment/97242/enum_warning.txt;;;","2021-12-01 12:51;iklam;Hi [~jiangli], thanks for the information. I have created a patch for this bug, but it doesn't require the support of archiving mirror objects. That's because Enum class have special <clinit> methods. Please see https://github.com/openjdk/jdk/pull/6653;;;","2021-12-01 15:48;iklam;Changed to P3 as this may interfere with user programs that inspect the module graph.;;;","2021-12-03 15:50;jiangli;Hi Ioi, I'll take a look of your change https://github.com/openjdk/jdk/pull/6653. Thanks.;;;","2021-12-21 11:18;mseledtsov;RT Triage team: given the complexity of the changes we are deferring this to JDK 19. ;;;","2022-02-28 12:35;dukebot;Changeset: d983d108
Author:    Ioi Lam <iklam@openjdk.org>
Date:      2022-02-28 20:33:18 +0000
URL:       https://git.openjdk.java.net/jdk/commit/d983d108c565654e717e2811d88aa94d982da2f5
;;;","2022-11-25 00:02;lzhai;-Fix request [18u]

The patch applies clean except manually edit below source file:

* src/hotspot/share/cds/dumpTimeClassInfo.cpp
Include ""cds/runTimeClassInfo.hpp"" header file.
* src/hotspot/share/cds/heapShared.hpp
Add initialize_enum_klass(...) defination.
* src/hotspot/share/oops/klass.hpp
Change Enumeration.

Testing jtreg tier1~3 now.-

Christoph suggested me backport to 17u owing to jdk18u is not maintained any more.;;;","2022-11-25 00:19;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk18u/pull/179
Date: 2022-11-25 07:54:22 +0000;;;","2022-12-01 16:56;lzhai;In order to backport this issue to jdk 17u, the following issues must be backported first, in the order of

a. JDK-8267189: Remove duplicated unregistered classes from dynamic archive
b. JDK-8268821: Split systemDictionaryShared.cpp
c. JDK-8269004: Implement ResizableResourceHashtable
d. JDK-8270061: Change parameter order of ResourceHashtable
e. JDK-8270803: Reduce CDS API verbosity
f. JDK-8270489: Support archived heap objects in EpsilonGC;;;","2022-12-18 23:50;goetz;[17u]
Hi Leslie, 
please give a reason why you want to backport this change.
Why is it needed in 17?
I will not approve any changes referring only to this one, 
as long as this one does not have a reason why it is needed.
Given the size of the change and the many prerequisites you list, 
I think it is a bad candidate for backporting.

;;;",,,,,,,,,
Crash on macOS 12 in GlassRunnable::dealloc,JDK-8275723,5060906,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,bae,jvos,jvos,2021-10-21 06:41,2023-01-03 10:12,2023-10-01 09:57,2021-11-05 01:03,8,jfx11,jfx17,,,,,,,,,,,jfx18,javafx,,0,8bpr-critical-approved,bugdb_33550318,CPU22_01-critical-approved,CPU22_01-critical-SQE-OK,macos,macos12,,,,,,,,,,,"On MacOS 12 beta (Monterey), crashes are reported that originate from glass, using JavaFX 17 and Java 11.0.12

The relevant stacktrace for this is:

V  [libjvm.dylib]  _Z12report_fatalPKciS0_z+0xb5
V  [libjvm.dylib]  _ZN20SafepointSynchronize5blockEP10JavaThread+0x1d1
V  [libjvm.dylib]  _ZN10JavaThread44check_safepoint_and_suspend_for_native_transEPS_+0xab
V  [libjvm.dylib]  _ZN20ThreadInVMfromNativeC1EP10JavaThread+0x6d
V  [libjvm.dylib]  jni_DeleteGlobalRef+0x3e
C  [libglass.dylib]  -[GlassRunnable dealloc]+0x28
C  [Foundation]  -[_NSThreadPerformInfo dealloc]+0x2a

The final crash is triggered by an assert in safepoint.cpp in SafepointSynchronize::block(JavaThread *thread) where the passed thread is in status 4 (_thread_in_native) where it should be in _thread_in_native_trans probably. 

The trace originates from glass, where the `dealloc` invocation on GlassRunnable calls `jni_DeleteGlobalRef` and enters the VM.

At this point, I'm not sure if this is an issue in JavaFX (glass on Mac) or in hotspot.","MacOS 12 beta (Monterey)

ProductName: macOS
ProductVersion: 12.0.1
BuildVersion: 21A558",,,,,,,,,JDK-8276728,JDK-8276741,JDK-8276886,JDK-8276726,JDK-8276823,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8281257,JDK-8276993,JDK-8285713,JDK-8279141,JDK-8277852,JDK-8277043,JDK-8277787,JDK-8282285,JDK-8279375,JDK-8284527,JDK-8278184,JDK-8280062,JDK-8279200,JDK-8299321,JDK-8276992,JDK-8278184,JDK-8282285,JDK-8276697,JDK-8276991,JDK-8276915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,os_x,,,,,,"0|i2uqxv:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4f591050,,,,,,,,,"2021-10-21 06:44;kcr;Can you run ""sw_vers"" and add the output to the above ""Environment"" field? (so we can see the build number you are using in case it is relevant);;;","2021-10-21 12:43;jvos;Version added.
;;;","2021-10-29 08:46;bae;A slowdebug build with option -XX:+VerifyJNIEnvThread gives a bit more precise picture:

Current thread (0x00007faf0d035c20):  JavaThread ""InvokeLaterDispatcher"" daemon [_thread_in_native, id=36367, stack(0x000070000d6d7000,0x000070000d7d7000)]

Stack: [0x000070000d6d7000,0x000070000d7d7000],  sp=0x000070000d7d5f30,  free space=1019k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.dylib+0x11e871b]  VMError::report_and_die(int, char const*, char const*, __va_list_tag*, Thread*, unsigned char*, void*, void*, char const*, int, unsigned long)+0x80b
V  [libjvm.dylib+0x11e8d69]  VMError::report_and_die(Thread*, void*, char const*, int, char const*, char const*, __va_list_tag*)+0x89
V  [libjvm.dylib+0x5d2591]  report_vm_error(char const*, int, char const*, char const*, ...)+0x1e1
V  [libjvm.dylib+0x9b4c38]  jni_DeleteGlobalRef+0x68
C  [libglass.dylib+0x8288]  -[GlassRunnable dealloc]+0x28
C  [Foundation+0x81b7b]  -[_NSThreadPerformInfo dealloc]+0x2a
C  [Foundation+0x4ea47]  -[NSObject(NSThreadPerformAdditions) performSelectorOnMainThread:withObject:waitUntilDone:]+0x7c
j  com.sun.glass.ui.mac.MacApplication._submitForLaterInvocation(Ljava/lang/Runnable;)V+0 javafx.graphics@17.0.1-internal
j  com.sun.glass.ui.mac.MacApplication.submitForLaterInvocation(Ljava/lang/Runnable;)V+2 javafx.graphics@17.0.1-internal

We can see that we a trying to execute GlassRunnable::dealloc() on InvokeLaterDispatcher thread whereas it is supposed to be running on main application thread:

- (void)dealloc
{
    assert(pthread_main_np() == 1);
    JNIEnv *env = jEnv;
    if (env != NULL)
    {
        (*env)->DeleteGlobalRef(env, self->jRunnable);
    }
    self->jRunnable = NULL;

    [super dealloc];
}

The jEnv is created for the main thread, so the option -XX:+VerifyJNIEnvThread will trigger following assert

#  Internal Error (/Users/home/ws/17/jdk17/src/hotspot/share/prims/jni.cpp:686), pid=5730, tid=36367
#  assert(!VerifyJNIEnvThread || (thread == Thread::current())) failed: JNIEnv is only valid in same thread

With debugNative jfx build we can see following failure:
 
Assertion failed: (pthread_main_np() == 1), function -[GlassRunnable dealloc], file /Users/home/ws/jfx/modules/javafx.graphics/src/main/native-glass/mac/GlassApplication.m, line 114

A straightforward solution seems to be to eliminate dealloc() and destroy jRunnable reference inside run() method. However there could be an ellegant way to schedule dealloc() execution on the main thread.;;;","2021-10-29 09:21;vkempik;https://developer.apple.com/library/archive/technotes/tn2109/_index.html

When a secondary thread retains the target object, you have to ensure that the thread releases that reference before the main thread releases its last reference to the object. If you don't do this, the last reference to the object is released by the secondary thread, which means that the object's -dealloc method runs on that secondary thread. This is problematic if the object's -dealloc method does things that are not safe to do on a secondary thread, something that's common for UIKit objects like a view controller.

So maybe the body of this if block:
if (jEnv != NULL)
    {
        GlassRunnable *runnable = [[GlassRunnable alloc] initWithRunnable:(*env)->NewGlobalRef(env, jRunnable)];
        [runnable performSelectorOnMainThread:@selector(run) withObject:nil waitUntilDone:NO];
    }

should be put in a obj-c block which should be scheduled to run on main thread

or just eliminate unsafe dealloc;;;","2021-11-01 14:07;kcr;I can reproduce this quite easily on an M1 system (aarch64) running macOS 12.0.1 beta. I cannot reproduce it on an Intel x64 system. Both systems are running the same version of macOS:

$ sw_vers
ProductName:	macOS
ProductVersion:	12.0.1
BuildVersion:	21A559

So we are either getting lucky on x64, or there is some difference in the sequence of operations when running on M1 that is triggering this failure.;;;","2021-11-01 14:12;vkempik;>So we are either getting lucky on x64, or there is some difference in the sequence of operations when running on M1 that is triggering this failure.

we are lucky in one moment: additional W^X logic on macos-aarch64 allowed to catch it earlier. however bug is similar on intel and aarch64 macs.
you just need a fastdebug build of jfx ( with asserts enabled) to easily catch the issue on intel mac as well.;;;","2021-11-02 08:46;kcr;We have seen many reports of this issue, mostly on M1 (aarch64) systems, but a few reports on an Intel x64 system.

Raising to P2 as this issue has no known workaround and is very likely to occur.;;;","2021-11-02 09:42;jvos;I can confirm that in almost all cases, the assert in the GlassRunnable:dealloc function is satisfied:
```  
  assert(pthread_main_np() == 1);
```

However, in some cases, it turns out that `pthread_main_np()` is not 0, hence we are not on the main thread -- and then the crash can happen.

The strange thing about this is that, if we look at the stacktrace posted above, the function is called via 
`performSelectorOnMainThread:withObject:waitUntilDone`
I would expect that after `performSelectorOnMainThread` is called, a call to `pthread_main_np()` should always return `1` so that assert should always be true.
;;;","2021-11-02 09:53;bae;Following change makes the problem gone (tested on both aarch64 and x64 with DebugNative build):

```
diff --git a/modules/javafx.graphics/src/main/native-glass/mac/GlassApplication.m b/modules/javafx.graphics/src/main/native-glass/mac/GlassApplication.m
index 686893aad9..7f73ac3e30 100644
--- a/modules/javafx.graphics/src/main/native-glass/mac/GlassApplication.m
+++ b/modules/javafx.graphics/src/main/native-glass/mac/GlassApplication.m
@@ -98,30 +98,21 @@ - (void)run
     {
         assert(pthread_main_np() == 1);
         JNIEnv *env = jEnv;
-        if (env != NULL)
+        if (env != NULL && self->jRunnable != NULL)
         {
             (*env)->CallVoidMethod(env, self->jRunnable, jRunnableRun);
             GLASS_CHECK_EXCEPTION(env);
+
+            (*env)->DeleteGlobalRef(env, self->jRunnable);
         }
 
+        self->jRunnable = NULL;
+
         [self release];
     }
     [pool drain];
 }
 
-- (void)dealloc
-{
-    assert(pthread_main_np() == 1);
-    JNIEnv *env = jEnv;
-    if (env != NULL)
-    {
-        (*env)->DeleteGlobalRef(env, self->jRunnable);
-    }
-    self->jRunnable = NULL;
-
-    [super dealloc];
-}
-
 @end
 
 #pragma mark --- GlassApplication
```

With this change we do all jni work in the run() method, and have no need to control on what thread the dealloc() method is executed.
;;;","2021-11-02 10:30;kcr;[~bae] I was just starting down the rabbit hole of trying to call the JNIDeleteGlobalRef from dealloc using performSelectorOnMainThread, but that is overly complex. I much prefer your proposed solution of calling it from the run method.

I'll do some testing, including running a full set of unit tests, but I suspect it will work just fine. Do you want to create a PR for this? Otherwise, I will create a PR based on your proposed solution, and add you as a contributor of this PR.;;;","2021-11-02 10:37;bae;[~kcr] thanks for verification, I will create a PR for this change shortly.;;;","2021-11-02 10:57;jvos;[~bae] that patch should work indeed (cleaning up at the end of the run) hence I think it's the correct approach.
It is still unclear to me how we end up with not being on the main thread, even though performSelectorOnMainThread is used. That worries me a bit, especially since this didn't happen before macOS 12 -- did the contract of performSelectorOnMainThread change somehow?;;;","2021-11-02 11:00;vkempik;Johan, api doesn't guarantee the dealloc will be called on same thread as our selector ( via performSelectorOnMainThread). dealloc is called by GC on objects which retain count becomes 0

check this comment https://bugs.openjdk.java.net/browse/JDK-8275723?focusedCommentId=14455546&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-14455546;;;","2021-11-02 11:32;kcr;Yeah, this looks like a case where some change in behavior in a newer version of macOS has exposed a latent bug in the JavaFX glass code. And while it would be nice to know what the change in behavior was, the fix looks correct, since it is incorrect to assume NSObject::dealloc is called on any particular thread unless you know all calls to retain and release are done on the same thread.

It seems worth a follow-up effort to look at other classes to see if any of them have the same problem: namely, an object that is created or retained by a thread whose dealloc method assumes it is called on the main thread.
;;;","2021-11-02 14:23;jvos;I falsely assumed that the performSelectorOnMainThread would lead to both the selector (run) and dealloc (if applicable) being executed on the main thread. Since we never saw a report like this one before macOS 12, I guess this was the behaviour until now.

I believe the proposed patch is indeed the appropriate way to fix this, and indeed, we probably need a follow-up issue to check for other dealloc's.;;;","2021-11-05 01:03;roboduke;Changeset: 4d8e12d2
Author:    Andrew Brygin <bae@openjdk.org>
Committer: Johan Vos <jvos@openjdk.org>
Date:      2021-11-05 08:02:42 +0000
URL:       https://git.openjdk.java.net/jfx/commit/4d8e12d231476fe72742cf10c223d8baf5028677
;;;","2021-11-08 12:35;sstenzel;Other than the title of this issue may suggest, macOS 12 is no longer beta. As this is currently scheduled for OpenJFX 17.0.2, which is scheduled for early 2022, I wonder if there shouldn't be some kind of hotfix for 17.0.1.

After all this bug makes even the simplest Hello World app crash on macOS 12. Or is there a workaround, that I missed?;;;","2021-11-08 12:56;kcr;Developers can use the latest JavaFX 18 early access build. It is already available in an 18-ea+6 build.

I should add that there is also a JavaFX 17.0.2 early access build, 17.0.2+1, that contains this fix.;;;","2021-11-08 13:20;sstenzel;So are EA builds intended for production?;;;","2021-11-08 13:23;kcr;I wouldn't recommend an EA build for production. For that you will likely need to wait until 17.0.2 is released.

Having said that, the 17.0.2-ea+1 build only has a couple other fixes in addition to this fix, so if you test it with your application, it might be a stop-gap solution for you.;;;","2021-11-08 14:37;sstenzel;I see, I guess this is the best option then. Thanks for the quick reply!;;;"
Name of UTC timezone in a locale changes depending on previous code,JDK-8275721,5060847,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,naoto,webbuggrp,webbuggrp,2021-10-20 12:27,2023-06-15 06:53,2023-10-01 09:57,2021-12-07 08:46,11.0.9,17,18,,,,,,,,,,,18,core-libs,,0,dcsaw,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,regression,reproducer-yes,webbug,,,,,,,,,"ADDITIONAL SYSTEM INFORMATION :
$ uname -a
Linux gonzo 5.10.0-8-amd64 #1 SMP Debian 5.10.46-4 (2021-08-03) x86_64 GNU/Linux
$ java -version
openjdk version ""17"" 2021-09-14
OpenJDK Runtime Environment (build 17+35-Debian-1)
OpenJDK 64-Bit Server VM (build 17+35-Debian-1, mixed mode, sharing)

A DESCRIPTION OF THE PROBLEM :
Name of timezone UTC in locale 'zh-MO' according to JDK is 協調世界時間. However, if an unrelated code (requesting the name in a different, though related, locale) is executed first, name changes to 世界標準時間.

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Compile and run the short attached program like this:
$ javac test.java && java test && java test broken

Observe that the name in the same locale changes between two runs.

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
zh-MO: 協調世界時間

zh-Hant-HK: 世界標準時間
zh-MO: 協調世界時間

ACTUAL -
zh-MO: 協調世界時間

zh-Hant-HK: 世界標準時間
zh-MO: 世界標準時間


---------- BEGIN SOURCE ----------
import java.time.*;
import java.time.format.*;
import java.util.*;

public class test
{
    public static void main (String[] args) throws Exception
    {
        if (args.length == 1 && args[0].equals (""broken""))
            System.out.println (utcNameIn (""zh-Hant-HK""));
        System.out.println (utcNameIn (""zh-MO""));
        System.out.println ();
    }

    protected static String utcNameIn (String locale)
    {
        return locale + "": "" + DateTimeFormatter.ofPattern (""zzzz"", Locale.forLanguageTag (locale)).format (ZonedDateTime.ofInstant (Instant.ofEpochSecond (0), ZoneId.of (""UTC"")));
    }
}

---------- END SOURCE ----------

FREQUENCY : always


",,,,,,,,,,JDK-8278684,JDK-8305372,JDK-8304340,JDK-8304623,JDK-8304343,JDK-8305373,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8294889,JDK-8300752,,,,,,,,,,,,,JDK-8278434,,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-21 06:05;tongwan;Main.java;https://bugs.openjdk.org/secure/attachment/96770/Main.java",,,,,,,,generic,,,,,,,,,,b01,11.0.9,,generic,,,,,,"0|i2uqkr:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7644fb4c,,,,,,,Verified,,"2021-10-21 03:11;tongwan;The observations on Windows 10:
JDK 8: Passed, both test cases the outputs of zh-MO are the same (Coordinated Universal Time)
JDK 11.0.8.0.90+1: Passed, the outputs of zh-MO are the same (世界標準時間)
JDK 11.0.9-ea+1: Failed, the outputs of zh-MO are different (協調世界時間 and 世界標準時間)
JDK 17: Failed.
JDK 18ea+1: Failed.;;;","2021-12-02 15:40;naoto;Time zone name resolution logic in the CLDR provider substitutes the missing name(s) in the names array from COMPAT provider if available. The logic seems incorrectly retrieving COMPAT's name (協調世界時間) in the first place.;;;","2021-12-07 08:46;roboduke;Changeset: 543d1a8c
Author:    Naoto Sato <naoto@openjdk.org>
Date:      2021-12-07 16:44:52 +0000
URL:       https://git.openjdk.java.net/jdk/commit/543d1a8cf41d32dca161c9d8041f133a71bf0ecb
;;;","2022-04-13 04:18;sqetools;verified;;;","2023-03-28 02:51;goetz;Fix request [11u,17u]

I backport this for parity with 11.0.20,17.0.8-oracle.
Low risk fix of time zone handling.
Clean backport.
Test passes.  SAP nighlty testing passed.;;;","2023-03-28 02:56;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1217
Date: 2023-03-28 09:50:31 +0000;;;","2023-03-28 02:58;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1818
Date: 2023-03-28 09:52:28 +0000;;;","2023-06-15 06:53;snazarki;I observe significant startup score drop (SPECJvm2008, startup.helloworld, jdk17) after this patch. Is anyone aware of this?
aarch64 M1 linux:
Before: Score on startup.helloworld: 1395.35 ops/m
After: Score on startup.helloworld: 967.74 ops/m;;;",,,,,,,,,,,,,
CommonComponentAccessibility.createWithParent isWrapped causes mem leak,JDK-8275720,5060903,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,ant,ant,ant,2021-10-21 06:02,2023-05-05 03:50,2023-10-01 09:57,2021-10-26 08:49,17,18,,,,,,,,,,,,18,client-libs,,0,a11y,accessibility,jdk11u-a11y-defer,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,macos,,,,,,,,,,"In the method

+[CommonComponentAccessibility createWithParent:accessible:role:index:withEnv:withView:isWrapped:]

the isWrapped arg is used to create an a11y element which is wrapped into an object that does not have direct peer in Java like ListRowAccessibility, TableRowAccessibility. In the current implementation these objects leak, because when the wrapped element is created (isWrapped == YES), the native pointer to the element is rewritten in the associated java peer (the 'accessible' arg) and the element object is then released via the CFRetainedResource mechanism. However the wrapping object (ListRowAccessibility, TableRowAccessibility) is never released.

The wrapping logic should thus be reimplemented.",,,,,,,,,,JDK-8278004,JDK-8277858,JDK-8287657,JDK-8288266,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,os_x,,,,,,"0|i2uqx7:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4785f47c,,,,,,,,,"2021-10-26 08:49;roboduke;Changeset: 574f8903
Author:    Anton Tarasov <ant@openjdk.org>
Date:      2021-10-26 15:47:17 +0000
URL:       https://git.openjdk.java.net/jdk/commit/574f8903ee1f74bdf7154d670d96c36d94b38b4d
;;;","2021-11-23 20:37;ant;Fix request (17u) 
A direct backport. Fixes the memory leak.
pr: https://github.com/openjdk/jdk17u/pull/307;;;",,,,,,,,,,,,,,,,,,,
D3D pipeline processes multiple PaintEvent at initial drawing,JDK-8275715,5060898,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,myano,myano,myano,2021-10-21 05:06,2023-01-05 10:17,2023-10-01 09:57,2022-03-06 15:54,17,18,,,,,,,,,,,,19,client-libs,,0,,,,,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
On Windows platform, default drawing pipeline (D3D) processes multiple PaintEvent at initial drawing. This behavior does not occur on GDI pipeline (-Dsun.java2d.noddraw=true).

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
compile and run attached sample code on Windows platform. This sample counts a number of paint() calls.

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
Green window is shown and ""1"" is printed on console.

ACTUAL -
Red window is shown and print ""2"" is printed on console.

This additional PaintEvent is unnecessary and may cause performance issue.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8299436,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8298876,,,,,,,,,,,,,,,JDK-8282713,,,,,,,,,,"2021-10-21 04:41;myano;MultiPaintEvent.java;https://bugs.openjdk.org/secure/attachment/96769/MultiPaintEvent.java",,,,,,,,x86_64,,,,,,,,,,,,,windows,,,,,,"0|i2uqw3:",9223372036854775807,b13,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4b09ce31,,,,,,,,,"2021-12-08 14:08;vdyakov;too risky to push in right before the fork, so retargeted to 19 (mainline);;;","2022-03-06 15:54;dukebot;Changeset: 415bf441
Author:    Masanori Yano <myano@openjdk.org>
Date:      2022-03-06 23:53:50 +0000
URL:       https://git.openjdk.java.net/jdk/commit/415bf44191632cd8dbcc158c0ff0992c0b61c3ba
;;;",,,,,,,,,,,,,,,,,,,
TestDockerMemoryMetrics test fails on recent runc,JDK-8275713,5060895,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,sgehwolf,sgehwolf,sgehwolf,2021-10-21 02:40,2023-03-15 09:04,2023-10-01 09:57,2021-10-28 01:22,11.0.13,13,openjdk8u312,,,,,,,,,,,11.0.14,core-libs,,0,containers,jdk11u-fix-request,jdk11u-fix-yes,testbug,,,,,,,,,,,,,"This bug affects JDKs < 15.

With recent runc as OCI runtime, --kernel-memory option is being ignored. I.e. even if you specify a value it'll not populate. The Linux kernel deprecated the feature and runc did so to. 'crun', another runtime is about to ignore the option too. References:
runc: https://github.com/opencontainers/runc/pull/2840
podman PR to remove (hide) the option: https://github.com/containers/podman/pull/12048

The effect of this is that container test TestDockerMemoryMetrics.java fails on recent docker (which uses runc by default). It also fails when run with podman and runc as runtime.

Failure looks like this:
========== NEW TEST CASE:      testKernelMemoryLimit, value = 100m
[COMMAND]
docker run --tty=true --rm --volume /disk/openjdk/upstream-sources/git/jdk11u/JTwork/classes/jdk/internal/platform/docker/TestDockerMemoryMetrics.d:/test-classes/ --kernel-memory=100m jdk-internal:test-metrics-memory /jdk/bin/java -cp /test-classes/ --add-exports java.base/jdk.internal.platform=ALL-UNNAMED -Djdk.test.docker.image.name=fedora -Djdk.test.docker.image.version=34 MetricsMemoryTester kernelmem 100m
[ELAPSED: 854 ms]
[STDERR]
WARNING: Specifying a kernel memory limit is deprecated and will be removed in a future release.

[STDOUT]
[kernelmem, 100m]
Exception in thread ""main"" java.lang.RuntimeException: Kernel Memory limit not equal, expected : [104857600], got : [-1]
        at MetricsMemoryTester.testKernelMemoryLimit(MetricsMemoryTester.java:113)
        at MetricsMemoryTester.main(MetricsMemoryTester.java:38)


The stand-alone Docker/podman equivalent is:
$ docker run --kernel-memory 200m --rm -ti fedora:34 cat sys/fs/cgroup/memory/memory.kmem.limit_in_bytes
WARNING: Specifying a kernel memory limit is deprecated and will be removed in a future release.
9223372036854771712

Note the huge value instead of the (previously) expected value of 209715200 for the kernel memory limit.

It doesn't affect JDK mainline as it has cgroups v2 support and the follow-up fix of that, JDK-8240189, included a fix for this issue. JDK-8240189 landed in JDK 15. In particular this hunk from JDK-8240189 needs backporting to older releases:

 public class MetricsMemoryTester {
+
+    public static final long UNLIMITED = -1;
+
     public static void main(String[] args) {
         System.out.println(Arrays.toString(args));
         switch (args[0]) {
@@ -115,13 +118,13 @@ public class MetricsMemoryTester {
             System.out.println(""TEST PASSED!!!"");
             long limit = getMemoryValue(value);
             long kmemlimit = mCgroupV1.getKernelMemoryLimit();
-            if (kmemlimit != 0 && limit != kmemlimit) {
+            if (kmemlimit != UNLIMITED && limit != kmemlimit) {
                 throw new RuntimeException(""Kernel Memory limit not equal, expected : [""
                         + limit + ""]"" + "", got : [""
                         + kmemlimit + ""]"");
             }
",,,,,,,,,,JDK-8298078,JDK-8304268,JDK-8304270,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8240189,,,,,,,,,,,,,,,JDK-8275735,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,linux,,,,,,"0|i2uqvf:",9223372036854775807,b01,,,,,,,,,,,,,"2021-10-27 02:21;sgehwolf;Fix Request (OpenJDK 11u):

Please approve this JDK 11 fix for the container tests (Testbug). It accounts for recent container runtimes which start to ignore --kernel-memory switch. This patch makes the test only fail if the returned kernel memory is not ""unlimited"" (as that is the value returned when the setting is ignored). Test only, no risk. Test fails prior this patch, passes after. See JDK-8275735 where I propose to remove this Linux only API entirely for JDK mainline.;;;","2021-10-28 01:22;roboduke;Changeset: fd22289a
Author:    Severin Gehwolf <sgehwolf@openjdk.org>
Date:      2021-10-28 08:20:57 +0000
URL:       https://git.openjdk.java.net/jdk11u-dev/commit/fd22289a851a645c09f63229469decfb7b3ee450
;;;","2021-11-03 07:46;roboduke;Changeset: fd22289a
Author:    Severin Gehwolf <sgehwolf@openjdk.org>
Date:      2021-10-28 08:20:57 +0000
URL:       https://git.openjdk.java.net/jdk11u/commit/fd22289a851a645c09f63229469decfb7b3ee450
;;;","2022-11-01 13:25;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk8u-dev/pull/121
Date: 2022-09-21 10:12:07 +0000;;;",,,,,,,,,,,,,,,,,
Hashtable literal_size functions are broken,JDK-8275712,5060894,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,stefank,stefank,stefank,2021-10-21 02:08,2023-05-17 08:01,2023-10-01 09:57,2021-10-22 01:21,17,18,,,,,,,,,,,,18,hotspot,,0,amazon-interest,,,,,,,,,,,,,,,,"The literal_size functions are used to estimate the size of held objects in some of our hashtables.

Two bugs:
1) They return int, but the returned value is in bytes and could be larger than MAX_INT.
2) Non-String objects report words instead of bytes.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uqv7:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-22 01:21;roboduke;Changeset: 1efe946d
Author:    Stefan Karlsson <stefank@openjdk.org>
Date:      2021-10-22 08:20:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/1efe946db77e38507511a9c898b8b59fe9ba1aeb
;;;",,,,,,,,,,,,,,,,,,,,
Metaspace::contains() should be threadsafe,JDK-8275704,5060886,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,stuefe,stuefe,stuefe,2021-10-21 01:06,2023-05-09 04:43,2023-10-01 09:57,2021-10-27 22:31,11,17,18,8,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-yes,metaspace,,,,,,,,,,,,,,"Metaspace::contains() is used in many places. It is not threadsafe since it walks the list of metaspace mappings, which can be altered concurrently. This is suspected to be the cause for JDK-8271124.

This is a day zero bug of metaspace, in there since JDK 8. Weirdly enough it never surfaced until now.

Currently, it does not lock, and adding a lock is not realistic either. It should work lockless. (See discussion in comment section of JDK-8271124).",,,,,,,,,,JDK-8307735,JDK-8307296,JDK-8301323,,,,,,,,,,,,,JDK-8275582,,,,,,,,,,,,,,,,,,,,,,JDK-8271124,,,,,,,JDK-8271124,,,,,,,,,,,,,,,JDK-8276086,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uqtf:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-21 01:07;stuefe;JDK-8275582 will make solving this a lot simpler.;;;","2021-10-27 22:31;roboduke;Changeset: d9b0138d
Author:    Thomas Stuefe <stuefe@openjdk.org>
Date:      2021-10-28 05:29:58 +0000
URL:       https://git.openjdk.java.net/jdk/commit/d9b0138d7d02ceddc5d9c73908177f0b0d2e7c54
;;;","2023-01-27 05:50;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1120
Date: 2023-01-27 13:42:29 +0000;;;","2023-01-28 02:24;stuefe;Fix Request 17u
 
Backporting this patch fixes a low-possibility fault when walking metaspace mapping chains in Metaspace::contains()
Low risk, applies cleanly.
Tested:
GHAs (windows failures are infra-related)
SAP nightlies planned;;;",,,,,,,,,,,,,,,,,
System.loadLibrary fails on Big Sur for libraries hidden from filesystem,JDK-8275703,5060734,Bug,Closed,JDK,JDK,software,duke,,,P3,Fixed,mchung,webbuggrp,webbuggrp,2021-10-19 13:58,2023-07-13 05:14,2023-10-01 09:57,2021-10-28 08:29,17,,,,,,,,,,,,,18,core-libs,,0,azul-interest,dcsswa,jdk11u-critical-request,jdk11u-critical-yes,jdk13u-fix-request,jdk13u-fix-yes,jdk15u-fix-request,jdk15u-fix-yes,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,reproducer-yes,webbug,,,,"ADDITIONAL SYSTEM INFORMATION :
MacBook Pro (15-inch, 2018)
MacOS Big Sur 11.6
OpenJDK 17, OpenJDK 11, Oracle JDK 17, Oracle JDK 18-ea

A DESCRIPTION OF THE PROBLEM :
OSX Big Sur no longer ships with copies of the libraries on the filesystem [1] and therefore attempts to load a native library via System.loadLibrary no longer works.

Details:
- The new dynamic linker cache introduced by OSX Big Sur creates problems with previous code which checks for the existence of a library file in the filesystem before attempting to load it with dlopen(...). According to the Big Sur release notes in [1], 
   ""Code that attempts to check for dynamic library presence by looking for a file at a path or enumerating a directory will fail. Instead, check for library presence by attempting to dlopen() the path, which will correctly check for the library in the cache.""

Tracing the execution of System.loadLibrary shows that the offending check happens at [2] (tested on OpenJDK 11 and 17, Oracle JDK 17 and 18-ea) where File.exists(...) is used to check whether the library file is present on the filesystem before attempting to load it.  As a result, valid dynamic libraries that otherwise open fine via dlopen(...) fail with UnsatisfiedLinkError in current versions of the JDK.

Background:
- the way I discovered this issue was while attempting to get the OSX Accelerate LibVec BLAS implementation to load via Netlib in Spark;  Netlib kept complaining that it can't find the native BLAS libraries. Inspecting the Netlib code [3] showed that it used System.loadLibrary to attempt to load the appropriately-configured BLAS library. From there, further tests on using System.loadLibrary via ""jshell"" showed the problem to be in its implementation.  I have confirmed that the dlopen(...) call works with ""hidden"" libraries by creating a small C application that invoked dlopen and reported success or failure.  Inspection of the JDK code for System.loadLibrary eventually led to the offending file existence check in [2]

[1] https://developer.apple.com/documentation/macos-release-notes/macos-big-sur-11_0_1-release-notes/#Kernel
[2] https://github.com/openjdk/jdk/blob/895e2bd7c0bded5283eca8792fbfb287bb75016b/src/java.base/share/classes/jdk/internal/loader/NativeLibraries.java#L163
[3] https://github.com/luhenry/netlib/blob/20ecbd98425ea7baae5ebd70d392c9eb206dfb26/blas/src/main/jdk17/dev/ludovic/netlib/blas/ForeignLinkerBLAS.java#L55

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
In a OSX Big Sur installation with XCode and developer tools installed install any Java version from the list in ""Runtime information"", then

capitanu@leo:~/Downloads/java/jdk-18.jdk/Contents/Home$ export JAVA_HOME=$(pwd)
capitanu@leo:~/Downloads/java/jdk-18.jdk/Contents/Home$ export LD_LIBRARY_PATH='/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A'
capitanu@leo:~/Downloads/java/jdk-18.jdk/Contents/Home$ export JAVA_LIBRARY_PATH='/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A'
capitanu@leo:~/Downloads/java/jdk-18.jdk/Contents/Home$ jshell
|  Welcome to JShell -- Version 18-ea
|  For an introduction type: /help intro

jshell> System.loadLibrary(""blas"")
|  Exception java.lang.UnsatisfiedLinkError: no blas in java.library.path: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A:/Users/capitanu/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
|        at ClassLoader.loadLibrary (ClassLoader.java:2429)
|        at Runtime.loadLibrary0 (Runtime.java:818)
|        at System.loadLibrary (System.java:1998)
|        at (#1:1)

jshell> System.load(""/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib"")
|  Exception java.lang.UnsatisfiedLinkError: Can't load library: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
|        at ClassLoader.loadLibrary (ClassLoader.java:2393)
|        at Runtime.load0 (Runtime.java:755)
|        at System.load (System.java:1962)
|        at (#2:1)

To prove that dlopen works with ""hidden"" libraries, create a file dlopen.c with contents:

#include <stdio.h>
#include <stdlib.h>
#include <dlfcn.h>

int main(int argc, char** argv)
{
    void *handle;

    if (argc != 2) {
        fprintf(stderr, ""Usage: %s <lib_filename_or_full_path>\n"", argv[0]);
        return EXIT_FAILURE;
    }

    printf(""Attempting to load library '%s'...\n"", argv[1]);

    handle = dlopen(argv[1], RTLD_LAZY);

    if (handle == NULL) {
	fprintf(stderr, ""Unable to load library!\n"");
	return EXIT_FAILURE;
    }

    printf(""Library successfully loaded!\n"");

    return dlclose(handle);
}

Then:
gcc -o dlopen dlopen.c
./dlopen libBLAS.dylib
and
./dlopen /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib



EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
Expected for dynamic library to load correctly via System.loadLibrary and System.load even for ""hidden"" libraries that are not visible on the filesystem but can be successfully loaded via dlopen.

ACTUAL -
|  Exception java.lang.UnsatisfiedLinkError: no blas in java.library.path: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A:/Users/capitanu/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
|        at ClassLoader.loadLibrary (ClassLoader.java:2429)
|        at Runtime.loadLibrary0 (Runtime.java:818)
|        at System.loadLibrary (System.java:1998)
|        at (#1:1)

---------- BEGIN SOURCE ----------
System.load(""/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib"")
---------- END SOURCE ----------

FREQUENCY : always


",,,,,,,,,,JDK-8281177,JDK-8278988,JDK-8278543,JDK-8282866,JDK-8277700,JDK-8276035,JDK-8288655,JDK-8288654,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8281099,JDK-8286874,JDK-8288547,,,,,,,,,,,,,JDK-8287917,JDK-8293659,,,,,,,,,"2021-10-21 00:59;sswsharm;dlopen.c;https://bugs.openjdk.org/secure/attachment/96767/dlopen.c",,,,,,,,x86_64,,,,,,,,,,,,,os_x,,,,,,"0|i2upvn:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4c088d55,,,,,,,Verified,,"2021-10-21 00:58;sswsharm;Issue is reproduced.
Exception is thrown when trying to load dynamic library  via System.loadLibrary and System.load but can be successfully loaded via dlopen. 

MacOS BigSur 11.6
JDK 17.0.1:Fail

jshell> System.loadLibrary(""blas"") 

Output : |  Exception java.lang.UnsatisfiedLinkError: no blas in java.library.path: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A:/Users/sswsharm/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.

jshell> System.load(""/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib"")

Output:
| Exception java.lang.UnsatisfiedLinkError: Can't load library: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib 

The filesystem are successfully loaded via dlopen 

 ./dlopen libBLAS.dylib
 
Output:
Attempting to load library 'libBLAS.dylib'...
Library successfully loaded!
 
./dlopen /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib

Output:
Attempting to load library '/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib'...
Library successfully loaded!
;;;","2021-10-21 03:50;dholmes;Moving to core-libs as this is handled on the JDK side, the VM just does a dlopen for the path passed from Java.

There was a related discussion of this behaviour recently in regard to the native library loading API used by Panama.;;;","2021-10-21 11:31;mchung;The JDK side determines the path of the given library name and checks if it exists before calling JVM_LoadLibrary.   A potential fix for MacOS might be to skip the file presence check and pass it to JVM.  However, we should look into the performance implication. ;;;","2021-10-28 08:29;roboduke;Changeset: 309acbf0
Author:    Mandy Chung <mchung@openjdk.org>
Date:      2021-10-28 15:27:26 +0000
URL:       https://git.openjdk.java.net/jdk/commit/309acbf0e86a0d248294503fccc7a936fa0a846e
;;;","2021-11-17 09:45;mchung;Fix request to backport to jdk17u:

On macOS 11.x, system libraries are loaded from dynamic linker cache and the libraries are no longer present on the filesystem.  This does not impact JNI libraries which are not in the dynamic linker cache.   However, existing code using `System::loadLibrary` to load a system library no longer works since the implementation checks for file existence before doing dlopen.    The alternative is for the existing code to change and load a system library in native code using dlopen instead.   For compatibility of this long-standing behavior, request to fix this in jdk17u.

The backport  is exact same change as JDK-8275703. ;;;","2022-03-08 00:04;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u/pull/30
Date: 2022-03-08 07:59:10 +0000;;;","2022-03-08 00:16;goetz;Critical fix request [11u]

I backport this for parity with 11.0.15-oracle.
I had to do some rework because the code touched has been reengineered.
This is P3 and in 11.0.15-oracle, so I would like to get it to 11.0.15. Oracle even backported it to 7!
SAP nighlty testing passed.;;;","2022-04-13 04:19;sqetools;verified;;;","2022-06-14 12:44;omikhaltcova;Fix request (13u, 15u) - will label after testing completed 

This issue was reproduced on macOS Monterey 12.0.1. After applying the patch it is eliminated. 
The original patch applied not cleanly (for jdk15u difference is in 1 file; for jdk13u the patch is identical to jdk11u).;;;","2022-06-16 14:29;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk15u-dev/pull/222
Date: 2022-06-13 14:38:51 +0000;;;","2022-06-16 14:40;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk13u-dev/pull/358
Date: 2022-06-13 14:52:22 +0000;;;","2022-09-08 04:47;mbaesken;Looks like the change has the undesired side effect on macOS  that in case of some failures (e.g. trying to load a macOS x86_64 shared lib  on macOS aarch64)  the exception message got worse.

old exception message with details about  the error from Hotspot os::dll_load :
Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.ExceptionInInitializerError: JCo initialization failed with java.lang.UnsatisfiedLinkError: /testing/jco3/macOsx64/libsapjco3.dylib: dlopen(/testing/jco3/macOsx64/libsapjco3.dylib, 1): no suitable image found.  Did find:
                /testing/jco3/macOsx64/libsapjco3.dylib: mach-o, but wrong architecture
                /testing/jco3/macOsx64/libsapjco3.dylib: mach-o, but wrong architecture [in thread ""main""]

new  exception message , details ""thrown away"" :

Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.ExceptionInInitializerError: JCo initialization failed with java.lang.UnsatisfiedLinkError: Can't load library: /testing/jco3/macOsx64/libsapjco3.dylib [in thread ""main""]
;;;",,,,,,,,,
[TESTBUG] Use color tolerance only for XRender in BlitRotateClippedArea test,JDK-8275689,5060870,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jdv,jdv,jdv,2021-10-20 22:12,2023-07-24 21:41,2023-10-01 09:57,2021-10-27 03:22,18,,,,,,,,,,,,,18,client-libs,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,sn_104,test_sprint,,,,,,,,,,"https://bugs.openjdk.java.net/browse/JDK-8255724 added color tolerance check for all pipelines. But all pipelines except XRender should pass without color tolerance.

So restrict color tolerance only for XRender pipeline in java/awt/image/DrawImage/BlitRotateClippedArea.java ",,,,,,,,,,JDK-8311563,JDK-8289754,JDK-8291609,JDK-8291610,JDK-8289758,JDK-8312654,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8255724,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,linux,,,,,,"0|i2uqpv:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5a9b3fd3,,,,,,,,,"2021-10-27 03:22;roboduke;Changeset: b3f45f86
Author:    Jayathirth D V <jdv@openjdk.org>
Date:      2021-10-27 10:21:28 +0000
URL:       https://git.openjdk.java.net/jdk/commit/b3f45f868d9c91d630a118e43cef54cdb3216fd0
;;;","2022-07-28 08:48;goetz;Fix request [11u,17u]

I backport this for parity with 11.0.17/17.0.5-oracle.
No risk, only a test change.
Clean backport.
Test passes.
SAP nightly testing passed.;;;","2022-07-28 09:02;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/606
Date: 2022-07-28 15:50:48 +0000;;;","2022-07-28 09:04;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1283
Date: 2022-07-28 15:54:05 +0000;;;",,,,,,,,,,,,,,,,,
runtime/CommandLine/PrintTouchedMethods test shouldn't catch RuntimeException,JDK-8275687,5060868,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,fmatte,iignatyev,iignatyev,2021-10-20 21:34,2022-01-25 01:10,2023-10-01 09:57,2021-11-25 00:38,11,17,18,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,oraclejdk-na,redhat-interest,testbug,,,,,,,,,,,"https://github.com/openjdk/jdk/pull/5231#pullrequestreview-784995993

I think this is an existing bug. Do we need this catch block? TouchedMethodsDCmd is always enabled as long as the current JVM has INCLUDE_SERVICES is true. If INCLUDE_SERVICES is false, the jcmd connection will fail, and you will get a different error, like
`com.sun.tools.attach.AttachNotSupportedException: Unable to open socket file /proc/18810/root/tmp/.java_pid18810: target process 18810 doesn't respond within 10500ms or HotSpot VM not loaded`

The catch block will incorrectly ignore the problem if the VM is incorrectly modified and the TouchedMethodsDCmd is inadvently excluded.
",,,,,,,,,,JDK-8280570,JDK-8280156,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uqpf:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-11-25 00:38;roboduke;Changeset: f0136ec9
Author:    Fairoz Matte <fmatte@openjdk.org>
Committer: Christian Hagedorn <chagedorn@openjdk.org>
Date:      2021-11-25 08:37:31 +0000
URL:       https://git.openjdk.java.net/jdk/commit/f0136ec94539d0e30ec11d44f8143196da1f7125
;;;","2022-01-24 02:08;shade;Fix Request (17u)

Improves testing. Applies cleanly. Tests pass.;;;","2022-01-24 02:10;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/115
Date: 2022-01-24 10:05:13 +0000;;;",,,,,,,,,,,,,,,,,,
ciReplay: java.lang.NoClassDefFoundError when trying to load java/lang/invoke/LambdaForm$MH,JDK-8275670,5060851,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,dlong,epavlova,epavlova,2021-10-20 13:08,2021-11-12 00:29,2023-10-01 09:57,2021-11-04 12:54,18,,,,,,,,,,,,,18,hotspot,,0,ci-replay,ci-replay-failed,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,"
ciReplay fails with 
java.lang.NoClassDefFoundError: java/lang/invoke/LambdaForm$MH+0x0000000801001000
Caused by: java.lang.ClassNotFoundException: java.lang.invoke.LambdaForm$MH+0x0000000801001000
        at jdk.internal.loader.BuiltinClassLoader.loadClass(java.base@18-internal/BuiltinClassLoader.java:641)
        at jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(java.base@18-internal/ClassLoaders.java:188)
        at java.lang.ClassLoader.loadClass(java.base@18-internal/ClassLoader.java:520)

when trying to
ciInstanceKlass java/lang/invoke/LambdaForm$MH+0x0000000801001000 1 1 50 1 7 1 100 1 1 1 1 1 1 1 7 1 1 12 9 1 12 9 1 7 1 1 12 10 1 1 1 1 1 7 1 1 12 10 1 7 1 1 12 11 1 7 12 9 1 1 1 1


To reproduce the issue use test/jdk/java/lang/String/Split.java as the test case.


> cp test/jdk/java/lang/String/Split.java to some local dir
> $JAVA_HOME/bin/javac Split.java
> $JAVA_HOME/bin/java -XX:CompileCommand=option,Split::*,DumpReplay Split
> $JAVA_HOME/bin/java -XX:+ReplayCompiles -XX:ReplayDataFile=[replay file created by previous step]

the last command fails with
Resolving klass java/lang/Exception at 135
java.lang.NoClassDefFoundError: java/lang/invoke/LambdaForm$MH+0x0000000801001000
Error while parsing line 946: java/lang/invoke/LambdaForm$MH+0x0000000801001000

java.lang.NoClassDefFoundError: java/lang/invoke/LambdaForm$MH+0x0000000801001000
Caused by: java.lang.ClassNotFoundException: java.lang.invoke.LambdaForm$MH+0x0000000801001000
        at jdk.internal.loader.BuiltinClassLoader.loadClass(java.base@18-internal/BuiltinClassLoader.java:641)
        at jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(java.base@18-internal/ClassLoaders.java:188)
        at java.lang.ClassLoader.loadClass(java.base@18-internal/ClassLoader.java:520)",,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8254106,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8271911,,,,,,,,,,"2021-10-20 13:16;epavlova;replay_bug8275670.log;https://bugs.openjdk.org/secure/attachment/96766/replay_bug8275670.log",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uqln:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-21 16:27;dlong;Looks like 8271911 improvement isn't covering some cases.;;;","2021-10-21 16:28;dlong;ILW = replay failure, no workaround = MMH = P3;;;","2021-11-04 12:54;roboduke;Changeset: dcf36f87
Author:    Dean Long <dlong@openjdk.org>
Date:      2021-11-04 19:52:27 +0000
URL:       https://git.openjdk.java.net/jdk/commit/dcf36f87f87d52490c1f0434c2fca99fc8fd90a2
;;;",,,,,,,,,,,,,,,,,,
serviceability/jvmti/GetObjectSizeClass.java shouldn't have vm.flagless,JDK-8275666,5060845,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,iignatyev,iignatyev,iignatyev,2021-10-20 11:26,2021-11-16 12:15,2023-10-01 09:57,2021-10-20 12:26,17,18,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,noreg-self,redhat-interest,,,,,,,,,,,,serviceability/jvmti/GetObjectSizeClass.java doesn't ignore external flags (where it matters) and hence should not have been marked w/ vm.flagless,,,,,,,,,,JDK-8277263,JDK-8276884,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8268563,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uqkb:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@661b156a,,,,,,,,,"2021-10-20 12:25;roboduke;Changeset: cea3f010
Author:    Igor Ignatyev <iignatyev@openjdk.org>
Date:      2021-10-20 19:24:46 +0000
URL:       https://git.openjdk.java.net/jdk/commit/cea3f010460c4b45e76bfac8a5b193c49fdd274a
;;;","2021-11-08 02:06;shade;Fix Request (17u)

Fixes the test, effectively reverses the hunk added in JDK 17. Applies cleanly.;;;",,,,,,,,,,,,,,,,,,,
Problemlist java/io/File/createTempFile/SpecialTempFile.java for Windows 11,JDK-8275650,5060827,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,isipka,msheppar,msheppar,2021-10-20 08:35,2023-01-29 19:21,2023-10-01 09:57,2021-11-03 12:32,18,,,,,,,,,,,,,18,core-libs,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jdk8u-fix-request,jdk8u-fix-yes,noreg-self,,,,,,,,,,"the test java/io/File/createTempFile/SpecialTempFile.java is failing on Windows 11, so problemlist it while waiting on solution",,,,,,,,,,JDK-8278544,JDK-8278504,JDK-8279499,JDK-8279154,JDK-8301315,JDK-8300033,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8274122,JDK-8276623,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,windows,,,,,,"0|i2uqgb:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5f132e58,,,,,,,,,"2021-11-03 12:32;roboduke;Changeset: 32895ac6
Author:    Ivan Šipka <isipka@openjdk.org>
Committer: Mark Sheppard <msheppar@openjdk.org>
Date:      2021-11-03 19:30:12 +0000
URL:       https://git.openjdk.java.net/jdk/commit/32895ac60949ccceb0a3d25c73ec5e3a00c29593
;;;","2021-12-20 05:46;goetz;Fix request [17u]

I backport this for parity with 17.0.3-oracle.
No risk, only a test change.
Clean backport.;;;","2021-12-20 05:51;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/12
Date: 2021-12-20 13:46:14 +0000
;;;","2022-01-04 08:34;goetz;Fix request [11u]

I backport this for parity with 11.0.15-oracle.
No risk, only a test change.
Clean backport.;;;","2022-01-04 08:37;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk11u-dev/pull/738
Date: 2022-01-04 16:31:55 +0000
;;;","2023-01-26 03:46;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk8u-dev/pull/244
Date: 2023-01-26 11:37:29 +0000;;;","2023-01-26 17:44;ktakakuri;Fix request [8u]

I would like to backport this fix into 8u.
No risk, only a test change.;;;",,,,,,,,,,,,,,
[JVMCI] avoid unaligned volatile reads on AArch64,JDK-8275645,5060820,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,dnsimon,dnsimon,dnsimon,2021-10-20 07:20,2023-05-30 05:25,2023-10-01 09:57,2021-10-22 09:22,11,17,18,,,,,,,,,,,18,hotspot,,0,jdk11-graalvm,jdk17-graalvm,jdk17u-fix-request,jdk17u-fix-yes,jvmci,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,"The c2v_readFieldValue function uses HotSpot primitives for doing an unaligned volatile read of a short. This is not supported on AArch64. Instead, the function should unconditionally perform a volatile pre-read barrier (i.e., OrderAccess::acquire()) followed by a normal read.",,,,,,,,,,JDK-8281020,JDK-8280561,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275874,,,,,,,,,,,,,,,JDK-8309104,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uqer:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-21 16:32;dlong;ILW = incorrect unaligned volatile read on aarch64, no workaround = MMH = P3;;;","2021-10-22 09:22;roboduke;Changeset: 4dec8fc4
Author:    Doug Simon <dnsimon@openjdk.org>
Date:      2021-10-22 16:20:31 +0000
URL:       https://git.openjdk.java.net/jdk/commit/4dec8fc4cc2b1762fba554d0401da8be0d6d1166
;;;","2021-10-25 03:55;shade;(late to the party, sorry) I am confused by this patch. 

Doing unaligned volatile loads is not supported by most hardware for a reason. At very least we are losing single-copy atomicity for this access. Explicit barriers only gain the volatile memory ordering. But then I am perplexed what code would even attempt to do such an access: the volatile fields have to be aligned to their natural width to avoid this mess. Could you tell what path actually does this (wrong) access?;;;","2021-10-25 04:44;dnsimon;Here's one example: https://github.com/openjdk/jdk/pull/6044/files#diff-94871b3930dc1616479a90a628a029d1b673b5f7ab151675644a626da24c66edR81;;;","2021-10-25 05:17;shade;Okay, but that seems to be a test code, right? Is there a product code that does a similar thing? Otherwise I'd argue the test is overly strict, and we should not be changing the product code to accommodate it.;;;","2021-10-25 07:25;dnsimon;This code is used when intrinsifying methods in Unsafe. In particular, if the arguments are compile time constants, then a JVMCI compiler can try to constant fold the Unsafe call. In that case, we want to avoid constant folding an unsafe, unaligned read from crashing the VM.

However, you're right in that we are losing single-copy atomicity for these reads. I think the right approach is to revert to using the <type>_field_acquire accessors for *all* aligned reads and only use the <type>_field accessors for unaligned reads (JDK-8275874);;;","2022-01-30 23:28;goetz;Fix request [17u]

I backport this for parity with 17.0.3-oracle.
Clean backport.
SAP nightly testing passes.;;;","2022-01-30 23:34;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/130
Date: 2022-01-31 07:27:13 +0000;;;",,,,,,,,,,,,,
C2's unaryOp vector intrinsic does not properly handle LongVector.neg,JDK-8275643,5060818,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,thartmann,thartmann,thartmann,2021-10-20 07:20,2022-02-03 00:46,2023-10-01 09:57,2021-11-18 23:09,16,17,18,repo-panama,,,,,,,,,,18,hotspot,,0,c2,hs-comp-triaged,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-11,oracle-triage-18,vectorapi,vectorIntrinsics,,,,,,,,,"Executing jdk/incubator/vector/* with -XX:+UnlockExperimentalVMOptions -XX:PerMethodSpecTrapLimit=0 -XX:PerMethodTrapLimit=0 triggers:

# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/oracle/jdk/open/src/hotspot/share/prims/vectorSupport.cpp:297), pid=496845, tid=496853
#  fatal error: NEG: long

Current CompileTask:
C2:  21564 1175 %  b        Long128VectorTests::NEGLong128VectorTests @ 50 (115 bytes)

Stack: [0x00007f1c1e037000,0x00007f1c1e138000],  sp=0x00007f1c1e132840,  free space=1006k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x191d4d5]  VectorSupport::vop2ideal(int, BasicType)+0x6b5
V  [libjvm.so+0x190df41]  LibraryCallKit::inline_vector_nary_operation(int)+0x7d1
V  [libjvm.so+0x12750e2]  LibraryIntrinsic::generate(JVMState*)+0x302
V  [libjvm.so+0x8262d0]  CallGenerator::do_late_inline_helper()+0xab0
V  [libjvm.so+0x9fea4d]  Compile::inline_incrementally_one()+0x33d
V  [libjvm.so+0x9fedaf]  Compile::inline_incrementally(PhaseIterGVN&)+0x18f
V  [libjvm.so+0x9ffa09]  Compile::Optimize()+0x5e9
V  [libjvm.so+0xa026ae]  Compile::Compile(ciEnv*, ciMethod*, int, bool, bool, bool, bool, bool, DirectiveSet*)+0x159e
V  [libjvm.so+0x81d2b6]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x646
V  [libjvm.so+0xa12ae9]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xd09
V  [libjvm.so+0xa13788]  CompileBroker::compiler_thread_loop()+0x518
V  [libjvm.so+0x1887f5c]  JavaThread::thread_main_inner()+0x27c
V  [libjvm.so+0x188e510]  Thread::call_run()+0x100
V  [libjvm.so+0x156de34]  thread_native_entry(Thread*)+0x104",,,,,,,,,,JDK-8281205,JDK-8280562,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8277449,JDK-8223347,,,,,,,,,"2021-10-20 07:20;thartmann;hs_err_pid497716.log;https://bugs.openjdk.org/secure/attachment/96763/hs_err_pid497716.log","2021-10-20 07:20;thartmann;replay_pid497716.log;https://bugs.openjdk.org/secure/attachment/96762/replay_pid497716.log",,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uqeb:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-20 07:29;thartmann;ILW = Fatal error during C2 compilation, with incubator feature/tests and experimental flags, disable affected intrinsic = HLM = P3;;;","2021-11-18 23:09;roboduke;Changeset: 47564cae
Author:    Tobias Hartmann <thartmann@openjdk.org>
Date:      2021-11-19 07:07:17 +0000
URL:       https://git.openjdk.java.net/jdk/commit/47564caeb0628e5c03a0e7f04093adce77d6dd3b
;;;","2022-02-01 02:35;goetz;Fix request [17u]

I backport this for parity with 17.0.3-oracle.
Low risk, trivial fix.
Clean backport.
Test passes.  SAP nightly testing passes.;;;","2022-02-01 02:42;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/139
Date: 2022-02-01 10:36:39 +0000;;;",,,,,,,,,,,,,,,,,
(win) java.net.NetworkInterface issues with IPv6-only environments,JDK-8275640,5060815,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,djelinski,dfuchs,dfuchs,2021-10-20 06:50,2023-01-26 09:55,2023-10-01 09:57,2022-03-08 08:16,,,,,,,,,,,,,,19,core-libs,,0,noreg-hard,,,,,,,,,,,,,,,,"During the review for JDK-8275319 it was discovered that NetworkInterface.c and NetworkInterface_winXP.c have some issues in the logic that deals with IPv6-only environment (cases where -2 is returned).

This is a followup issues to clean up this code.

See discussions on https://github.com/openjdk/jdk/pull/5956",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8279566,,,,,,,,,,,,,,JDK-8275319,JDK-8282189,JDK-8221681,,,,,,,,,,,,,JDK-8046500,JDK-8279329,JDK-8225239,,,,,,,,,,,,,,,,,,,,,,,,,,,,,windows,,,,,,"0|i2uqdn:",9223372036854775807,b13,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2021-10-20 06:59;dfuchs;This relates to the combined changes introduced by JDK-8046500 and JDK-8225239;;;","2022-03-08 08:16;dukebot;Changeset: 2549e550
Author:    Daniel Jeliński <djelinski@openjdk.org>
Committer: Daniel Fuchs <dfuchs@openjdk.org>
Date:      2022-03-08 16:15:24 +0000
URL:       https://git.openjdk.java.net/jdk/commit/2549e5503806447733572643603af9a2bf4b52e5
;;;",,,,,,,,,,,,,,,,,,,
"GraphKit::combine_exception_states fails with ""matching stack sizes"" assert",JDK-8275638,5060813,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,roland,thartmann,thartmann,2021-10-20 06:29,2022-03-08 09:36,2023-10-01 09:57,2021-12-16 23:48,17,18,,,,,,,,,,,,18,hotspot,,0,c2,hs-comp-triaged,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,"Even with the fix for JDK-8273165, I can still reproduce this:

java -XX:+UnlockExperimentalVMOptions -XX:PerMethodSpecTrapLimit=0 -XX:PerMethodTrapLimit=0 -XX:+AlwaysIncrementalInline -XX:-TieredCompilation -Xbatch -XX:CompileThreshold=10 -XX:CompileCommand=dontinline,*DirectMethodHandle::allocateInstance

# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/oracle/jdk/open/src/hotspot/share/opto/graphKit.cpp:348), pid=492513, tid=492526
#  assert(ex_jvms->sp() == phi_map->_jvms->sp()) failed: matching stack sizes

Current CompileTask:
C2:  12785 1313    b        jdk.internal.module.SystemModuleFinders$1::find (19 bytes)

Stack: [0x00007f9d5783a000,0x00007f9d5793b000],  sp=0x00007f9d57935b60,  free space=1006k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xd46d56]  GraphKit::combine_exception_states(SafePointNode*, SafePointNode*) [clone .part.0]+0xc6
V  [libjvm.so+0xd5204c]  GraphKit::replace_call(CallNode*, Node*, bool)+0x63c
V  [libjvm.so+0x8263db]  CallGenerator::do_late_inline_helper()+0xbbb
V  [libjvm.so+0x9fea4d]  Compile::inline_incrementally_one()+0x33d
V  [libjvm.so+0x9fedaf]  Compile::inline_incrementally(PhaseIterGVN&)+0x18f
V  [libjvm.so+0x9ffa09]  Compile::Optimize()+0x5e9
V  [libjvm.so+0xa026ae]  Compile::Compile(ciEnv*, ciMethod*, int, bool, bool, bool, bool, bool, DirectiveSet*)+0x159e
V  [libjvm.so+0x81d2b6]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x646
V  [libjvm.so+0xa12ae9]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xd09
V  [libjvm.so+0xa13788]  CompileBroker::compiler_thread_loop()+0x518
V  [libjvm.so+0x1887f5c]  JavaThread::thread_main_inner()+0x27c
V  [libjvm.so+0x188e510]  Thread::call_run()+0x100
V  [libjvm.so+0x156de34]  thread_native_entry(Thread*)+0x104

We might need the same check added by JDK-8273165 in LateInlineMHCallGenerator::do_late_inline_check as well.",,,,,,,,,,JDK-8282818,JDK-8279732,JDK-8280690,JDK-8279098,,,,,,,,,,,,,,,,JDK-8278873,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8278966,JDK-8273165,JDK-8278846,,,,,,,,,,,,,JDK-4432078,JDK-8271276,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uqd7:",9223372036854775807,b29,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,Verified,,"2021-10-20 06:29;thartmann;ILW = Same as JDK-8273165 = P2;;;","2021-10-20 06:50;thartmann;Vladimir, could you please have a look? I would assume we need a similar receiver non-null check in LateInlineMHCallGenerator::do_late_inline_check as well.;;;","2021-11-30 10:47;dlong;[~jrose], this issue seems related to an old issue, JDK-4432078, where the fix was to preserve the stack for exceptions (a while longer) rather than truncating immediately.  I know it was a long time ago, but do you remember any details about that bug?  In particular, how long does the stack need to be preserved, and at what point is it safe to truncate it?;;;","2021-12-16 23:48;roboduke;Changeset: b9a477bf
Author:    Roland Westrelin <roland@openjdk.org>
Date:      2021-12-17 07:46:47 +0000
URL:       https://git.openjdk.java.net/jdk18/commit/b9a477bf19d9f276f6b1da8984eb56d7bd5fc137
;;;","2021-12-17 13:14;dlong;[~roland] Unfortunately we are hitting the new assert

    assert(!jvms->method()->has_exception_handlers()) failed: no exception handler expected

in some closed benchmarks.  I'll investigate.
;;;","2022-03-07 05:11;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/200
Date: 2022-03-07 13:05:34 +0000;;;","2022-03-07 05:16;mdoerr;Fix Request (17u):
Should get backported for parity with 17.0.4-oracle together with JDK-8278966. Applies cleanly. Test has passed.;;;",,,,,,,,,,,,,,
C2: Object field load floats above its null check resulting in a segfault,JDK-8275610,5060447,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,chagedorn,webbuggrp,webbuggrp,2021-10-15 02:11,2022-07-11 23:33,2023-10-01 09:57,2021-12-06 06:48,11,17,18,9,,,,,,,,,,18,hotspot,,0,additional-information-received,apache-poi-found,dcsswa,hs-comp-triaged,jdk11u-fix-request,jdk11u-fix-yes,jdk13u-fix-request,jdk13u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-18,redhat-interest,reproducer-yes,webbug,,,"ADDITIONAL SYSTEM INFORMATION :
Java 17 / ubuntu

This is a CI/CD env so I don't have full access to get exact version numbers for the OS.

A DESCRIPTION OF THE PROBLEM :
We've been building and testing Apache POI on different Java installs for years. On OpenJDK 17, the test runs regularly fail with a SIGSEGV failure.

REGRESSION : Last worked in version 16.0.2

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
* Check out https://github.com/apache/poi
* ./gradlew poi-ooxml:test
* warning - this can take quite a few mins to run

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
Successful compile and test run
ACTUAL -
https://ci-builds.apache.org/job/POI/job/POI-DSL-1.17/38/ is one example build where this failed

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007f5246b70be0, pid=21730, tid=21917
#
# JRE version: OpenJDK Runtime Environment (17.0+35) (build 17+35-2724)
# Java VM: OpenJDK 64-Bit Server VM (17+35-2724, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# J 34089 c2 com.sun.org.apache.xerces.internal.dom.CoreDocumentImpl.importNode(Lorg/w3c/dom/Node;ZZLjava/util/Map;)Lorg/w3c/dom/Node; java.xml@17 (1038 bytes) @ 0x00007f5246b70be0 [0x00007f5246b70320+0x00000000000008c0]
#
# No core dump will be written. Core dumps have been disabled. To enable core dumping, try ""ulimit -c unlimited"" before starting Java again
#
# An error report file with more information is saved as:
# /home/jenkins/jenkins-agent/workspace/POI/POI-DSL-1.17/poi-ooxml/hs_err_pid21730.log
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#

FREQUENCY : often


",,,,,,,,,,JDK-8279432,JDK-8279321,JDK-8278755,JDK-8280565,JDK-8280500,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8283386,,,,,,,JDK-8278228,,,,,,,,,,,,,,,JDK-8143542,,,,,,,,,,"2021-10-27 02:59;dstadler;hs_err_pid24100.log;https://bugs.openjdk.org/secure/attachment/96826/hs_err_pid24100.log","2021-11-12 08:03;fmatte;hs_err_pid3951.log;https://bugs.openjdk.org/secure/attachment/97067/hs_err_pid3951.log",,,,,,,x86_64,,,,,,,,,,,,,linux,,,,,,"0|i2uo3v:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-20 04:29;sswsharm;additional information requested from submitter:
========================================
I executed the testcase on both Ubuntu and windows 10 with JDK 17 but was not able to reproduce this issue.

Steps followed:
* Check out https://github.com/apache/poi
* ./gradlew poi-ooxml:test

Actual behavior : No crash is observed on both Ubuntu and windows 10

Could you please confirm if the steps are proper to reproduce this issue?

Also, https://ci-builds.apache.org/job/POI/job/POI-DSL-1.17/38/ does not contain the hs_err_pid.log file, could you please share the complete hs_err_pid.log
file to analyze it further.
============================================;;;","2021-10-26 23:14;pnarayanaswa;Additional Information from submitter:
===========================
https://ci-builds.apache.org/job/POI/job/POI-DSL-1.17/54/artifact/build/hs_err_pid24100.log might help to debug.;;;","2021-10-27 00:21;dholmes;Crash is in JIT'd code so moving to Compiler team.;;;","2021-10-27 03:00;dstadler;I have attached the crash-log-file to not have it aged out by subsequent CI builds on builds.apache.org;;;","2021-10-27 19:17;dlong;ILW = crash in compiled code, not reproducible, disable compilation of problem method = HLM = P3;;;","2021-11-12 06:17;chagedorn;I could not reproduce this (yet) on Ubuntu 20.04. I did the following:

git clone https://github.com/apache/poi.git
git checkout 6b1a477997e8e09fbc2fd9f0277baa198ee1c3b4   # Job 54 mentioned above

Then repeated runs with
./gradlew clean
./gradlew build

and:
./gradlew clean
./gradlew poi-ooxml:test

Both time using JDK 17+35-2724 but I could not reproduce it. Was it confirmed that

* Check out https://github.com/apache/poi
* ./gradlew poi-ooxml:test

can reproduce the crash [~sswsharm]?;;;","2021-11-12 06:52;chagedorn;I had a closer at https://ci-builds.apache.org/job/POI/job/POI-DSL-1.17/54/artifact/build/hs_err_pid24100.log.

The assembly code around the crash looks like this:

mov    r10d,DWORD PTR [r11+0x3c]   # read _firstChild into r10
mov    ecx,DWORD PTR [r11+0x44]
mov    rdi,r11
mov    rax,r10
mov    r13d,0xf
and    r13d,DWORD PTR [r10+0xc]   #  trying to read from r10=_firstChild which is 0x0 (null) -> crash when trying to read from 0xc  (see siginfo: [..] si_addr: 0x000000000000000c)

R11=0x00000000cace1558 is an oop: org.apache.xmlbeans.impl.store.AttrXobj 
{0x00000000cace1558} - klass: 'org/apache/xmlbeans/impl/store/AttrXobj'
 - ---- fields (total size 12 words):
..... 
 - '_firstChild' 'Lorg/apache/xmlbeans/impl/store/Xobj;' @60  NULL (0)  # 0x3c = 60
.....

So, it looks like we are missing a null check. It was either removed by mistake or this access somehow floated above its null check. Looking at the assembly code immediately following the crashing instruction, it seems that the latter is true:

and    r13d,DWORD PTR [r10+0xc]    # floated above null check below
test   r10d,r10d
jne    0x120

I guess it is highly dependent on the order in which optimizations take place and/or how C2 finally schedules the instructions. I will continue to try to reproduce this with a fastdebug build by using a combination of -XX:+StressIGVN/GCM/LCM.;;;","2021-11-12 08:02;fmatte;I am able to reproduce this issue on 17 b20 (fastdebug build)
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007f7b61702308, pid=3951, tid=4221
#
# JRE version: Java(TM) SE Runtime Environment (17.0+20) (fastdebug build 17-ea+20-LTS-1743)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 17-ea+20-LTS-1743, mixed mode, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# J 33579 c2 com.sun.org.apache.xerces.internal.dom.CoreDocumentImpl.importNode(Lorg/w3c/dom/Node;ZZLjava/util/Map;)Lorg/w3c/dom/Node; java.xml@17-ea (1038 bytes) @ 0x00007f7b61702308 [0x00007f7b617013a0+0x0000000000000f68]
#
# Core dump will be written. Default location: Core dumps may be processed with ""/usr/share/apport/apport %p %s %c %d %P %E"" (or dumping to /tank/fmatte/JI/9071681/poi/poi-ooxml/core.3951)
#
# An error report file with more information is saved as:
# /tank/fmatte/JI/9071681/poi/poi-ooxml/hs_err_pid3951.log
Java HotSpot(TM) 64-Bit Server VM warning: outputStream::do_vsnprintf output truncated -- buffer length is 2000 bytes but 9218 bytes are needed.
Java HotSpot(TM) 64-Bit Server VM warning: outputStream::do_vsnprintf output truncated -- buffer length is 2000 bytes but 11613 bytes are needed.
#
# If you would like to submit a bug report, please visit:
#   https://bugreport.java.com/bugreport/crash.jsp
#

Attaching the complete hs_error file hs_err_pid3951.log;;;","2021-11-15 05:32;chagedorn;I was also able to reproduce this.  Thanks [~fmatte] for your help! I noticed that the failing method was only C1 compiled in my runs. I added an additional loop to the failing test TestSignature::testNonSha1() and added -XX:-TieredCompilation which now reliably triggers the bug. Will have a closer look at why this is happening.;;;","2021-11-26 08:33;chagedorn;Introduced by JDK-8143542 which eliminates back to back Ifs by using split-if. In this bug, two back to back null checks are optimized: The dominated null check If node is split through the region merging the if/else branch of the dominating null check If node. This separates the CastPP node from its null check If node. The CastPP ends up after a range check right before the dominating null check If node. Later, we remove that range check because of an earlier range check before the null check covering it. As a consequence, the CastPP is also rewired to the earlier range check. C2 then schedules a field load which has the same control as the CastPP later before the null check. This results in a segfault. ;;;","2021-12-06 06:48;roboduke;Changeset: 7c6f57fc
Author:    Christian Hagedorn <chagedorn@openjdk.org>
Date:      2021-12-06 14:48:03 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7c6f57fcb1f1fcecf26f7b8046a5a41ca6d9c315
;;;","2021-12-22 08:45;goetz;Fix request [17u]

I backport this for parity with 11.0.15-oracle.
As this is in 11.0.15-oracle, I think it should also go to 17.0.3.
Typical risk of a fix in C2.
Clean backport.
SAP nightly tests passed.;;;","2021-12-22 08:50;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/32
Date: 2021-12-22 16:44:00 +0000
;;;","2022-01-18 04:43;goetz;Fix request [11u]

I backport this for parity with 11.0.15-oracle.
I had to adapt the test. Pre-submit tests failed.;;;","2022-01-18 04:51;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/773
Date: 2022-01-18 12:46:48 +0000;;;","2022-01-20 11:32;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/784
Date: 2022-01-20 19:26:39 +0000;;;","2022-01-21 05:57;yan;Fix request (13u,15u)
This backport of a crash fix is not exactly clean. Two options different in two passes of the test are not supported in 13u and 15u as well as ""randomness"" key in the test. Running the test without jtreg consistently does crash VM before the fix.;;;","2022-01-21 06:03;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk13u-dev/pull/312
Date: 2022-01-21 13:57:36 +0000;;;",,,
runtime/Metaspace/elastic/TestMetaspaceAllocationMT2 too slow,JDK-8275608,5060780,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,stuefe,stuefe,stuefe,2021-10-20 02:26,2022-01-26 00:32,2023-10-01 09:57,2021-10-29 06:55,18,,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-yes,metaspace,noreg-self,,,,,,,,,,,,,"The runtime of the elastic metaspace stress tests can vary wildly, which should be investigated and fixed.

",,,,,,,,,,JDK-8280272,JDK-8280702,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uq5v:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-27 02:11;stuefe;Stalled; needs reviews. ;;;","2021-10-29 06:55;roboduke;Changeset: d6d82f52
Author:    Thomas Stuefe <stuefe@openjdk.org>
Date:      2021-10-29 13:54:27 +0000
URL:       https://git.openjdk.java.net/jdk/commit/d6d82f52d4a4fac037ee9424503f8b7f11a61c40
;;;","2022-01-17 06:10;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/101
Date: 2022-01-17 14:05:48 +0000;;;","2022-01-25 21:58;stuefe;Fix Request: this is a small improvement to the runtime of the metaspace tests introduced with JEP 387. Patch applies cleanly. I think backport would be worthwhile to reduce test runtimes. Low risk. Test only, has been cooking in JDK 18 and 19 for several months now.

Backport PR: https://github.com/openjdk/jdk17u-dev/pull/101

Backport tested in GHAs and SAP nightlies.;;;",,,,,,,,,,,,,,,,,
G1: G1CardSetAllocator::drop_all needs to call G1SegmentedArray::drop_all,JDK-8275607,5060779,Bug,Closed,JDK,JDK,software,duke,,,P1,Fixed,mli,mli,mli,2021-10-20 01:56,2022-02-10 14:26,2023-10-01 09:57,2021-10-20 18:18,18,,,,,,,,,,,,,18,hotspot,,0,gc-g1,,,,,,,,,,,,,,,,"This is a follow-up of JDK-8273626.

G1CardSetAllocator::drop_all should call call G1SegmentedArray::drop_all to put all buffers into buffer free list, which is the original behavior of G1CardSetAllocator.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8273626,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uq5n:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,Verified,,"2021-10-20 06:57;tschatzl;The high priority is because I think this causes a significant memory leak, or at least remembered sets growing all the time.;;;","2021-10-20 18:17;roboduke;Changeset: c7a80e60
Author:    Hamlin Li <mli@openjdk.org>
Date:      2021-10-21 01:16:10 +0000
URL:       https://git.openjdk.java.net/jdk/commit/c7a80e60e2e201b573d4653fa978df527addc8a6
;;;",,,,,,,,,,,,,,,,,,,
[lworld] ClassInitializationFailuresTest triggers assert with -XX:-UseTLAB,JDK-8275606,5060777,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,fparain,thartmann,thartmann,2021-10-20 01:35,2021-10-29 08:22,2023-10-01 09:57,2021-10-29 08:22,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,lw3,lworld,,,,,,,,,,,,,,,"# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/oracle/valhalla/open/src/hotspot/share/interpreter/interpreterRuntime.cpp:405), pid=338539, tid=338559
#  assert(field_vklass->is_initialized()) failed: Must be initialized at this point

Stack: [0x00007fb80a030000,0x00007fb80a131000],  sp=0x00007fb80a12ef10,  free space=1019k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xeef8b8]  InterpreterRuntime::read_inlined_field(JavaThread*, oopDesc*, int, Klass*)+0x278
j  runtime.valhalla.inlinetypes.ClassInitializationFailuresTest.testEscapedValueInObject()V+36
j  runtime.valhalla.inlinetypes.ClassInitializationFailuresTest.main([Ljava/lang/String;)V+9
v  ~StubRoutines::call_stub
V  [libjvm.so+0xf0a243]  JavaCalls::call_helper(JavaValue*, methodHandle const&, JavaCallArguments*, JavaThread*)+0x4d3
V  [libjvm.so+0x1750beb]  invoke(InstanceKlass*, methodHandle const&, Handle, bool, objArrayHandle, BasicType, objArrayHandle, bool, JavaThread*) [clone .constprop.0]+0xd6b
V  [libjvm.so+0x17520e5]  Reflection::invoke_method(oop, Handle, objArrayHandle, JavaThread*)+0x255
V  [libjvm.so+0x1097efc]  JVM_InvokeMethod+0x24c
j  jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Ljava/lang/reflect/Method;Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+0 java.base
j  jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+133 java.base
j  jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+6 java.base
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+59 java.base
j  com.sun.javatest.regtest.agent.MainWrapper$MainThread.run()V+172
j  java.lang.Thread.run()V+11 java.base
v  ~StubRoutines::call_stub
V  [libjvm.so+0xf0a243]  JavaCalls::call_helper(JavaValue*, methodHandle const&, JavaCallArguments*, JavaThread*)+0x4d3
V  [libjvm.so+0xf0b064]  JavaCalls::call_virtual(JavaValue*, Klass*, Symbol*, Symbol*, JavaCallArguments*, JavaThread*)+0x4b4
V  [libjvm.so+0xf0b4b7]  JavaCalls::call_virtual(JavaValue*, Handle, Klass*, Symbol*, Symbol*, JavaThread*)+0x77
V  [libjvm.so+0x1083ebb]  thread_entry(JavaThread*, JavaThread*)+0x12b
V  [libjvm.so+0x1977ecc]  JavaThread::thread_main_inner()+0x27c
V  [libjvm.so+0x197e480]  Thread::call_run()+0x100",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8273650,,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-20 01:36;thartmann;hs_err_pid338539.log;https://bugs.openjdk.org/secure/attachment/96757/hs_err_pid338539.log",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uq57:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-20 01:38;thartmann;Sometimes the test also fails with:

java.lang.NoClassDefFoundError: Could not initialize class runtime.valhalla.inlinetypes.ClassInitializationFailuresTest$BadFive
	at runtime.valhalla.inlinetypes.ClassInitializationFailuresTest.testEscapedValueInObject(ClassInitializationFailuresTest.java:199)
	at runtime.valhalla.inlinetypes.ClassInitializationFailuresTest.main(ClassInitializationFailuresTest.java:206)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:76)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:51)
	at java.base/java.lang.reflect.Method.invoke(Method.java:570)
	at com.sun.javatest.regtest.agent.MainActionHelper$AgentVMRunnable.run(MainActionHelper.java:312)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.RuntimeException: Failing initialization [in thread ""AgentVMThread""]
	at runtime.valhalla.inlinetypes.ClassInitializationFailuresTest$BadFive.<clinit>(ClassInitializationFailuresTest.java:180)
	at runtime.valhalla.inlinetypes.ClassInitializationFailuresTest.testEscapedValueInObject(ClassInitializationFailuresTest.java:193)
	... 7 more;;;",,,,,,,,,,,,,,,,,,,,
Deproblemlist closed/test/jdk/javax/swing/JMenuItem/6458123/bug6458123.java for linux,JDK-8275605,5060776,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,psadhukhan,psadhukhan,psadhukhan,2021-10-20 01:34,2023-09-25 00:56,2023-10-01 09:57,2021-10-21 08:31,,,,,,,,,,,,,,18,client-libs,,0,jdk11u-na,jdk17u-na,sn_104,test_sprint,,,,,,,,,,,,,"closed/test/jdk/javax/swing/JMenuItem/6458123/bug6458123.java is problemlisted for linux, mac. 
It seems the test needs headful keyword as it tests layouting after which it does not fail in linux.
But it should still be problemlisted for macos",,,,,,,,,,JDK-8316833,JDK-8316665,JDK-8316667,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,os_x,,,,,,"0|i2uq4z:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@568a5b31,,,,,,,,,"2023-09-22 05:07;goetz;[11u-na, 17u-na]
Test not in OpenJDK.;;;",,,,,,,,,,,,,,,,,,,,
Incorrect stack spilling in CallArranger on MacOS/AArch64,JDK-8275584,5060755,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jvernee,ngasson,ngasson,2021-10-19 23:45,2022-10-26 06:31,2023-10-01 09:57,2022-10-26 06:31,repo-panama,,,,,,,,,,,,,repo-panama,core-libs,,0,foreign-memaccess+abi,,,,,,,,,,,,,,,,"Consider a C function like this:

void f(int, int, int, int, int, int, int, int, char x, short y);

In the standard AArch64 ABI x and y get spilled to the stack as eight byte quantities (as if they were assigned to a register and then spilled) but in the Mac ABI they are spilled to the stack with their original size and natural alignment. AArch64 CallArranger needs to handle this difference.",,,,,,,,,,,,,,,,,,,,,,,,,JDK-8283462,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8284041,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,os_x,,,,,,"0|i2uq0b:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@28ce6b78,,,,,,,,,"2022-10-04 06:38;jvernee;[~ngasson] Could you maybe take a look at this? I've been trying to make progress, but other things keep popping up that require my attention as well.

I've made a start, if you want to use that: https://github.com/openjdk/panama-foreign/compare/foreign-memaccess+abi...JornVernee:panama-foreign:Mac_Stack

There are some failing test cases in TestUpcallStack. I think the issue is the code that aligns structs in CallArranger, but not sure.;;;","2022-10-04 08:12;ngasson;Sure, I can take a look at it. But it might be a few weeks until I am able to.;;;","2022-10-05 03:15;jvernee;Thanks!;;;","2022-10-21 06:53;ngasson;[~jvernee] I rebased your branch and fixed up a few corner cases to do with spilling structs:

https://github.com/nick-arm/panama-foreign/commit/9e9a6eba32d4f84fb

All of jdk_foreign is passing now on my M1 Mac. Should I make a PR for this along with your changes?;;;","2022-10-21 07:51;jvernee;[~ngasson] Yes please! Thanks;;;","2022-10-21 08:53;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/panama-foreign/pull/746
Date: 2022-10-21 15:50:01 +0000;;;",,,,,,,,,,,,,,,
[lworld] C2 fails to scalarize inline types in safepoint debug info in rare cases,JDK-8275583,5060754,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,thartmann,thartmann,thartmann,2021-10-19 23:27,2021-10-20 06:08,2023-10-01 09:57,2021-10-20 06:08,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,c2,intermittent,lw3,lworld,,,,,,,,,,,,,"# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (...workspace/open/src/hotspot/share/opto/macro.cpp:1171), pid=1059, tid=1083
#  assert(!inline_alloc) failed: Inline type allocations should not have safepoint uses

Current CompileTask:
C2:   5347 1092    b  4       compiler.valhalla.inlinetypes.TestArrays::test2 (24 bytes)

Stack: [0x00007ffa6dcfd000,0x00007ffa6ddfe000],  sp=0x00007ffa6ddf8fd0,  free space=1007k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x13cef25]  PhaseMacroExpand::eliminate_allocate_node(AllocateNode*) [clone .part.0]+0x4d5
V  [libjvm.so+0x13cf2cb]  PhaseMacroExpand::eliminate_macro_nodes()+0x2eb
V  [libjvm.so+0xa520bb]  Compile::Optimize()+0x188b
V  [libjvm.so+0xa53956]  Compile::Compile(ciEnv*, ciMethod*, int, bool, bool, bool, bool, bool, DirectiveSet*)+0x1656
V  [libjvm.so+0x847f00]  C2Compiler::compile_method(ciEnv*, ciMethod*, int, bool, DirectiveSet*)+0x6a0
V  [libjvm.so+0xa63b59]  CompileBroker::invoke_compiler_on_method(CompileTask*)+0xc39
V  [libjvm.so+0xa647b8]  CompileBroker::compiler_thread_loop()+0x518
V  [libjvm.so+0x19774dc]  JavaThread::thread_main_inner()+0x27c
V  [libjvm.so+0x197da90]  Thread::call_run()+0x100
V  [libjvm.so+0x162e324]  thread_native_entry(Thread*)+0x104
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uq03:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Don't purge metaspace mapping lists,JDK-8275582,5060753,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,stuefe,stuefe,stuefe,2021-10-19 23:27,2023-05-09 01:17,2023-10-01 09:57,2021-10-25 21:55,18,,,,,,,,,,,,,18,hotspot,,0,jdk17u-fix-request,jdk17u-fix-yes,metaspace,,,,,,,,,,,,,,"Metaspace, at its lowest level, keeps a list of memory mappings. That list is dynamically expandable, which makes Metaspace expandable as well, one of the key features of this allocator.

There are two mechanisms in place in Metaspace to return memory to the OS:

1) purging the list of mappings
2) uncommitting free chunks 

(1) is the old way, existing since the inception of Metaspace. It works by unmapping and deleting mapping segments which are fully evacuated. Metaspace allocations are fine granular and cannot move, so Metaspace is subject to fragmentation. That fragmentation makes (1) rather ineffective, since we only can unmap a mapping which had been fully free'd after class unloading. The mappings however are quite large (and we plan to make them larger still), the chance of one being completely empty is small.

(2) was introduced with JEP-387 and is much more effective. We return memory not on a mapping level, but on a chunk level, by uncommitting free chunks larger than a certain threshold. That works very well.

When working on JEP-387, I left (1) in place out of caution. But (1) is really not needed anymore. It has barely any effect in combination with (2). 

Removing (1) would have the following advantages:

- a nice reduction in code complexity
- reduce the work we do during class unloading
- the mapping list then would only ever grow, never shrink, which would simplify lockless accesses (see JDK-8271124)
- (1) stands in the way of other improvements, e.g. the increase of the mapping size of individual mappings, which would have diminished the effectiveness of (1) even further. 

Removing the ability to purge the mapping list means we retain the *uncommitted* virtual address space of those mappings after spikes in class unloading. But the consequences of that are minimal, it does not affect RSS at all.",,,,,,,,,,JDK-8307189,JDK-8301242,JDK-8307711,,,,,,,,,,,,,,JDK-8275704,,,,,,,,,,,,,,,,,,,,,JDK-8295652,,,,,,,JDK-8295652,,,,,,,,,,,,,,,JDK-8276086,JDK-8271124,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2upzv:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-25 21:55;roboduke;Changeset: 3ff085e2
Author:    Thomas Stuefe <stuefe@openjdk.org>
Date:      2021-10-26 04:52:01 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3ff085e2967508ad312c9d32fa908807aefe69ee
;;;","2023-01-10 06:09;stuefe;Fix Request:

I'd like to downport this to jdk17u. It is a prereq for JDK-8275704, which is a bug we should fix in 17.

The fix is medium to low risk. It removes one of two ways to discard metaspace memory after class unloading. The other way (uncommitting metaspace chunks) is the main way to return memory to the OS after JEP387, and should be, in theory, enough. But we will run the full gamut of SAP tests for this, as well as some manual tests.;;;","2023-01-10 06:11;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1048
Date: 2023-01-10 14:03:30 +0000;;;",,,,,,,,,,,,,,,,,,
Unproblemlist runtime/InvocationTests/invokevirtualTests.java,JDK-8275579,5060750,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,jcm,jcm,jcm,2021-10-19 22:37,2021-10-19 23:05,2023-10-01 09:57,2021-10-19 23:05,17.0.2,18,,,,,,,,,,,,,hotspot,,0,,,,,,,,,,,,,,,,,"runtime/InvocationTests/invokevirtualTests.java was problem listed by
https://bugs.openjdk.java.net/browse/JDK-8272970.
It is fixed here
https://github.com/openjdk/jdk/commit/af82404b3cd04c00212c19afcaa703bb3e56f40e",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8271723,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2upz7:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-19 23:03;jcm;Seems to be already fixed by 
https://github.com/openjdk/jdk/commit/25c85848794f0d42cada95309cd83f0baf091df8
closing as duplicate!;;;",,,,,,,,,,,,,,,,,,,,
Retrying a failed authentication on multiple LDAP servers can lead to users blocked,JDK-8275535,5060704,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mbalao,mbalao,mbalao,2021-10-19 12:52,2023-02-17 03:33,2023-10-01 09:57,2022-05-12 09:21,11.0.8-oracle,17,8u261,,,,,,,,,,,19,core-libs,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jdk8u-fix-request,jdk8u-fix-yes,noreg-trivial,regression,,,,,,,,,"After JDK-8160768, the behavior upon a failed LDAP authentication changed: instead of aborting the operation with an AuthenticationException exception, all available LDAP servers are tried with the same credentials. Note that the credentials might be wrong because of an error when the user entered them (i.e.: a typo). If this is the case, the user may be blocked on all LDAP servers after a single operation because of exceeding the maximum number of authentication failures. In my view, an authentication error means that the LDAP server is alive and there is no need to iterate to a different endpoint.",,,,,,,,,,JDK-8293664,JDK-8293663,JDK-8302737,,,,,,,,,,,,,,,,JDK-8276959,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8160768,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2upoz:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@226ed983,,,,,,,,,"2022-05-12 09:21;dukebot;Changeset: 3be394e1
Author:    Martin Balao <mbalao@openjdk.org>
Date:      2022-05-12 16:16:49 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3be394e1606dd17c2c14ce806c796f5eb2b1ad6e
;;;","2022-09-06 11:52;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1351
Date: 2022-08-31 20:54:47 +0000;;;","2022-09-06 12:04;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/654
Date: 2022-09-06 18:59:49 +0000;;;","2022-09-06 12:36;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk8u-dev/pull/117
Date: 2022-09-06 19:30:06 +0000;;;","2022-09-12 00:12;clanger;Fix request (11u, 17u) (on behalf of Ryan Flegel, no JBS user)
I would like to backport this change because I have been affected by a bug (JDK-8275535) introduced by JDK-8160768. It is causing users to get locked out too quickly since incorrect credentials are being sent to every LDAP server configured. I have tested the patch by stepping through the scenario and confirming in the debugger that the behaviour is the same as before JDK-8160768.

I have also run javax/naming, tier1 and tier2 tests locally (build/macosx-x86_64-server-release).

javax/naming - All passed.
tier1 - GTests Hotspot tests failed since I did not have it configured
tier2 - There were 15 unrelated test failures in java.lang, java.net, java.nio and sun.net
;;;","2023-02-09 00:05;abakhtin;Fix Request (8u)
I would like to backport this fix to 8u to restore behavior before JDK-8160768

javax/naming regression tests are passed successfully;;;","2023-02-15 08:52;sgehwolf;[~abakhtin] The PR is closed and wasn't reviewed, please add the approval label only once it's ready for approval. Removing the fix request label meanwhile.;;;","2023-02-16 01:03;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk8u-dev/pull/268
Date: 2023-02-16 08:56:58 +0000;;;","2023-02-16 22:16;abakhtin;[~sgehwolf] I have resubmitted the PR and it has been approved already.;;;",,,,,,,,,,,,
"com.sun.net.httpserver.BasicAuthenticator should check whether ""realm"" is a quoted string",JDK-8275534,5060703,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jboes,dfuchs,dfuchs,2021-10-19 11:09,2021-11-10 17:54,2023-10-01 09:57,2021-11-04 04:32,18,6,,,,,,,,,,,,18,core-libs,,0,,,,,,,,,,,,,,,,,"The value of the basic authentication realm is defined by RFC 7617 as a free-form string - which therefore may contain quotes. 
The BasicAuthenticator embeds the string directly in the WWW-Authenticate challenge, without escaping any quotes it may contain.

The API documentation of BasicAuthenticator should either be clarified, or its behavior changed to escape quotes before embedding the realm string in the WWW-Authenticate  header value.",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276228,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2upor:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2021-11-04 04:32;roboduke;Changeset: ee499632
Author:    Julia Boes <jboes@openjdk.org>
Date:      2021-11-04 11:31:51 +0000
URL:       https://git.openjdk.java.net/jdk/commit/ee499632586eabb3dab209645d5b9c781a09034b
;;;",,,,,,,,,,,,,,,,,,,,
Off-by-one error in allocation,JDK-8275517,5060678,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,mgronlun,mgronlun,mgronlun,2021-10-19 08:14,2022-02-01 10:54,2023-10-01 09:57,2021-10-19 09:22,18,,,,,,,,,,,,,18,hotspot,,0,noreg-hard,,,,,,,,,,,,,,,,"Copy-paste error in JDK-8275445 trying to resolve original issue JDK-8266936

Moving from the JFR abstraction:

static char* allocate_string(bool c_heap, int length, JavaThread* jt) {
  return c_heap ? NEW_C_HEAP_ARRAY(char, length, mtTracing) :
                  NEW_RESOURCE_ARRAY_IN_THREAD(jt, char, length);
}

const char* JfrJavaSupport::c_str(oop string, JavaThread* t, bool c_heap /* false */) {
  DEBUG_ONLY(check_java_thread_in_vm(t));
  char* str = NULL;
  const typeArrayOop value = java_lang_String::value(string);
  if (value != NULL) {
    const int length = java_lang_String::utf8_length(string, value);
    str = allocate_string(c_heap, length + 1, t);
    if (str == NULL) {
      JfrJavaSupport::throw_out_of_memory_error(""Unable to allocate native memory"", t);
      return NULL;
    }
    java_lang_String::as_utf8_string(string, value, str, length + 1);
  }
  return str;
}

To the non-JFR code:

static const char* allocate(oop string) {
  char* str = nullptr;
  const typeArrayOop value = java_lang_String::value(string);
  if (value != nullptr) {
    const int length = java_lang_String::utf8_length(string, value);
    str = NEW_C_HEAP_ARRAY(char, length, mtServiceability);
    java_lang_String::as_utf8_string(string, value, str, length + 1);
  }
  return str;
}

allocate_string() takes the length+1 to the  NEW_C_HEAP_ARRAY, but the new code lost the +1
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275513,,,,,,,,,,,,,,,,,,,,,,JDK-8275445,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2upj7:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,Not verified,,"2021-10-19 09:22;roboduke;Changeset: 99bf7dd8
Author:    Markus Grönlund <mgronlun@openjdk.org>
Date:      2021-10-19 16:20:45 +0000
URL:       https://git.openjdk.java.net/jdk/commit/99bf7dd8ddac1b5870534af50c97bec554004248
;;;",,,,,,,,,,,,,,,,,,,,
Upgrade required version of jtreg to 6.1,JDK-8275512,5060670,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,weijun,weijun,weijun,2021-10-19 06:47,2021-11-02 11:36,2023-10-01 09:57,2021-10-19 14:50,18,,,,,,,,,,,,,18,infrastructure,,0,,,,,,,,,,,,,,,,,"As a follow up of JEP 411, we will soon disallow security manager by default. jtreg 6.1 does not set its own security manager if JDK version is >= 18.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275884,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uphf:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-10-19 14:50;roboduke;Changeset: c24fb852
Author:    Weijun Wang <weijun@openjdk.org>
Date:      2021-10-19 21:04:14 +0000
URL:       https://git.openjdk.java.net/jdk/commit/c24fb852f20bf0fc2817dfed52ff1609a5bced59
;;;",,,,,,,,,,,,,,,,,,,,
ModuleDescriptor.hashCode isn't reproducible across builds,JDK-8275509,5060667,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,jpai,jpai,jpai,2021-10-19 05:27,2022-04-08 03:44,2023-10-01 09:57,2021-11-04 20:46,17,18,,,,,,,,,,,,18,core-libs,,0,redhat-interest,reproducible-build,,,,,,,,,,,,,,,"The jdk.tools.jlink.internal.plugins.SystemModulesPlugin dynamically generates bytecode for ""jdk.internal.module.SystemModules$all"" class. One part of that bytecode generation ends up embedding the hashCode(s) of java.lang.module.ModuleDescriptor instances into the generated class file. These hashCode(s) as per the contract of java.lang.Object#hashCode() aren't guaranteed to stay the same across JVM runs, as a result of which the generated jdk.internal.module.SystemModules$all class' content isn't reproducible across multiple runs (with same set of module inputs).

One such impacted area is the jlink tool and it shows up in the JLinkReproducibleTest intermittent failures which is tracked in https://bugs.openjdk.java.net/browse/JDK-8258945",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276564,,,,,,,JDK-8276830,JDK-8276688,,,,,,,,,,,,,,JDK-8258945,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2upgr:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@34132c1c,,,,,,,Verified,,"2021-10-19 05:32;jpai;I've opened a discussion in core-libs-dev with a proposed patch and to ask for some inputs on how to fix this https://mail.openjdk.java.net/pipermail/core-libs-dev/2021-October/082621.html
;;;","2021-10-21 05:31;alanb;Moving to core-libs/java.lang.module for now. While there is no requirement for a hashCode to be same across VM runs, it's an issue here because it's computed at link time.;;;","2021-10-21 05:31;alanb;Another report of the issue here:
https://mail.openjdk.java.net/pipermail/jigsaw-dev/2021-September/014708.html;;;","2021-11-04 20:46;roboduke;Changeset: 396132ff
Author:    Jaikiran Pai <jpai@openjdk.org>
Date:      2021-11-05 03:44:45 +0000
URL:       https://git.openjdk.java.net/jdk/commit/396132ff1e56463ad195cac5c9ac8e2eac5a16e8
;;;","2022-04-08 03:44;sqetools;verified;;;",,,,,,,,,,,,,,,,
"RunThese30M.java failed ""assert(ZAddress::is_marked(addr)) failed: Should be marked""",JDK-8275445,5060592,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,mgronlun,dcubed,dcubed,2021-10-18 16:53,2021-11-09 10:17,2023-10-01 09:57,2021-10-19 06:02,18,,,,,,,,,,,,,18,hotspot,,0,test-bigapps-runthese,test-bigapps-runThese,tier3,zgc,,,,,,,,,,,,,"The following test failed in the JDK18 CI:

applications/runthese/RunThese30M.java

Here's snippets from the hs_err_pid file:

#  Internal Error (/opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S14140/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/613f517d-67d3-486d-87f2-01f4b9f74b7d/runs/d2691236-49f2-4fbe-8646-dc091f7193b9/workspace/open/src/hotspot/share/gc/z/zBarrier.cpp:41), pid=23069, tid=23079
#  assert(ZAddress::is_marked(addr)) failed: Should be marked
#
# JRE version: Java(TM) SE Runtime Environment (18.0+20) (fastdebug build 18-ea+20-1223)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+20-1223, mixed mode, sharing, tiered, compressed class ptrs, z gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0x19ee898]  unsigned long ZBarrier::mark<false, true, false, true>(unsigned long)+0x238

<snip>

---------------  T H R E A D  ---------------

Current thread (0x00007f7258096910):  ConcurrentGCThread ""ZDriver"" [stack: 0x00007f72405e3000,0x00007f72406e3000] [id=23079]

Stack: [0x00007f72405e3000,0x00007f72406e3000],  sp=0x00007f72406e12a0,  free space=1016k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x19ee898]  unsigned long ZBarrier::mark<false, true, false, true>(unsigned long)+0x238
V  [libjvm.so+0x2e6c0b]  AccessInternal::PostRuntimeDispatch<ZBarrierSet::AccessBarrier<548932ul, ZBarrierSet>, (AccessInternal::BarrierType)2, 548932ul>::oop_access_barrier(void*)+0xbb
V  [libjvm.so+0xed0a4e]  send_event(FinalizerEntry const*, InstanceKlass const*, TimeInstant<CounterRepresentation, FastUnorderedElapsedCounterSource> const&, Thread*)+0x6e
V  [libjvm.so+0xed184e]  JfrFinalizerStatisticsEvent::send_unload_event(InstanceKlass const*)+0xfe
V  [libjvm.so+0xefa938]  JfrKlassUnloading::on_unload(Klass const*)+0x218
V  [libjvm.so+0xf6c319]  do_unloading_klass(Klass*)+0x29
V  [libjvm.so+0x978a46]  ClassLoaderData::classes_do(void (*)(Klass*))+0x36
V  [libjvm.so+0x983c91]  ClassLoaderDataGraph::classes_unloading_do(void (*)(Klass*))+0x51
V  [libjvm.so+0xf71248]  write_klasses()+0x4a8
V  [libjvm.so+0xf72daa]  JfrTypeSet::serialize(JfrCheckpointWriter*, JfrCheckpointWriter*, bool, bool)+0x12a
V  [libjvm.so+0xea7517]  JfrCheckpointManager::on_unloading_classes()+0x57
V  [libjvm.so+0x181e674]  SystemDictionary::do_unloading(GCTimer*)+0x1d4
V  [libjvm.so+0x1a8a336]  ZUnload::unlink()+0xa6
V  [libjvm.so+0x1a22cda]  ZHeap::process_non_strong_references()+0x3a
V  [libjvm.so+0x1a1bf0c]  ZDriver::concurrent_process_non_strong_references()+0x7c
V  [libjvm.so+0x1a1d694]  ZDriver::gc(ZDriverRequest const&)+0x12c4
V  [libjvm.so+0x1a1e36f]  ZDriver::run_service()+0x1ef
V  [libjvm.so+0xa3f2ab]  ConcurrentGCThread::run()+0x2b
V  [libjvm.so+0x188d3e0]  Thread::call_run()+0x100
V  [libjvm.so+0x156cd04]  thread_native_entry(Thread*)+0x104",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275517,,,,,,,,,,,,,,,JDK-8266936,,,,,,,,,,,,,,,,,,x86_64,,,,,,,,,,,,,linux,windows,,,,,"0|i2up03:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2021-10-18 17:26;dcubed;Here's the crashing stack for the windows-x64 sighting in jdk-18+20-1223-tier3:

---------------  T H R E A D  ---------------

Current thread (0x000001d642fdcd40):  ConcurrentGCThread ""ZDriver"" [stack: 0x0000000d04900000,0x0000000d04a00000] [id=38384]

Stack: [0x0000000d04900000,0x0000000d04a00000]
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [jvm.dll+0xae02c1]  os::platform_print_native_stack+0xf1  (os_windows_x86.cpp:235)
V  [jvm.dll+0xcfe19e]  VMError::report+0x101e  (vmError.cpp:828)
V  [jvm.dll+0xcffb9e]  VMError::report_and_die+0x7fe  (vmError.cpp:1656)
V  [jvm.dll+0xd00324]  VMError::report_and_die+0x64  (vmError.cpp:1437)
V  [jvm.dll+0x4ce677]  report_vm_error+0xb7  (debug.cpp:282)
V  [jvm.dll+0xd482c4]  ZBarrier::should_mark_through<0>+0x44  (zBarrier.cpp:41)
V  [jvm.dll+0xd48e47]  ZBarrier::load_barrier_on_oop_slow_path+0x67  (zBarrier.cpp:130)
V  [jvm.dll+0x1cd3e]  AccessInternal::PostRuntimeDispatch<ZBarrierSet::AccessBarrier<548964,ZBarrierSet>,2,548964>::oop_access_barrier+0x3e  (access.inline.hpp:86)
V  [jvm.dll+0x6e6036]  codesource+0x96  (jfrFinalizerStatisticsEvent.cpp:73)
V  [jvm.dll+0x6e660a]  send_event+0xca  (jfrFinalizerStatisticsEvent.cpp:86)
V  [jvm.dll+0x6e67a4]  JfrFinalizerStatisticsEvent::send_unload_event+0x54  (jfrFinalizerStatisticsEvent.cpp:106)
V  [jvm.dll+0x6f5955]  JfrKlassUnloading::on_unload+0x105  (jfrKlassUnloading.cpp:129)
V  [jvm.dll+0x4514ec]  ClassLoaderData::classes_do+0x2c  (classLoaderData.cpp:342)
V  [jvm.dll+0x4549c8]  ClassLoaderDataGraph::classes_unloading_do+0x98  (classLoaderDataGraph.cpp:421)
V  [jvm.dll+0x7298a0]  JfrTypeSet::on_unloading_classes+0x170  (jfrTypeSet.cpp:1102)
V  [jvm.dll+0x6d66fa]  JfrCheckpointManager::on_unloading_classes+0x3a  (jfrCheckpointManager.cpp:433)
V  [jvm.dll+0xc3db68]  SystemDictionary::do_unloading+0x88  (systemDictionary.cpp:1604)
V  [jvm.dll+0xd7cc7a]  ZUnload::_unlink+0xba  (zUnload.cpp:149)
V  [jvm.dll+0xd57208]  ZHeap::process_non_strong_references+0x38  (zHeap.cpp:322)
V  [jvm.dll+0xd54e3d]  ZDriver::gc+0x38d  (zDriver.cpp:464)
V  [jvm.dll+0xd553c7]  ZDriver::run_service+0x137  (zDriver.cpp:497)
V  [jvm.dll+0x4b6fa5]  ConcurrentGCThread::run+0x35  (concurrentGCThread.cpp:54)
V  [jvm.dll+0xc7f154]  Thread::call_run+0x1b4  (thread.cpp:365)
V  [jvm.dll+0xadec7e]  thread_native_entry+0xae  (os_windows.cpp:544)
C  [ucrtbase.dll+0x2268a]
C  [KERNEL32.DLL+0x17974]
C  [ntdll.dll+0x5a2f1];;;","2021-10-18 17:28;dcubed;Both of these crashes have:

V [libjvm.so+0xed184e] JfrFinalizerStatisticsEvent::send_unload_event(InstanceKlass const*)+0xfe 

in the stack and jdk-18+20-1223-tier3 includes this fix:

JDK-8266936 Add a finalization JFR event

[~mgronlun] - Can you take a look at this new failure?;;;","2021-10-18 23:57;stefank;send_event calls this function:
static const char* codesource(const InstanceKlass* ik, Thread* thread) {                                                                                                                                                                                                                  
  assert(ik != NULL, ""invariant"");                                                                                                                                                                                                                                                        
  assert(thread != NULL, ""invariant"");                                                                                                                                                                                                                                                    
  oop pd = java_lang_Class::protection_domain(ik->java_mirror());                                                                                                                                                                                                                         
  if (pd == NULL) {                                                                                                                                                                                                                                                                       
    return NULL;                                                                                                                                                                                                                                                                          
  }                                                                                                                                                                                                                                                                                       
  oop codesource = get_codesource(pd, thread);                                                                                                                                                                                                                                            
  return codesource != NULL ? get_locationNoFragString(codesource, thread) : NULL;                                                                                                                                                                                                        
}  

which tries to load oops through a klass that has been found to be dead. The oops in that class are not safe to load and follow. The asserts detects that someone is trying to load these dead objects.;;;","2021-10-19 06:02;roboduke;Changeset: 98ab4b03
Author:    Markus Grönlund <mgronlun@openjdk.org>
Date:      2021-10-19 13:00:50 +0000
URL:       https://git.openjdk.java.net/jdk/commit/98ab4b03b311dcd8374cbbb21a898298798750d6
;;;",,,,,,,,,,,,,,,,,
PretouchTask num_chunks calculation can overflow,JDK-8275426,5060569,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,kbarrett,kbarrett,kbarrett,2021-10-18 09:22,2022-02-10 14:26,2023-10-01 09:57,2021-10-21 06:29,16,17,18,,,,,,,,,,,18,hotspot,,0,gc-g1,gc-parallel,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,redhat-interest,,,,,,,,,,,"In PretouchTask::pretouch, the calculation for the number of chunks that need to be touched is

(total_bytes + chunk_size - 1) / chunk_size

The numerator can overflow if total_bytes and chunk_size are sufficiently large, leading to a result probably quite different from what's desired.  It could even be zero, leading to requesting no threads being requested.
",,,,,,,,,,JDK-8277702,JDK-8277526,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8254972,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uouz:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,Verified,,"2021-10-21 06:29;roboduke;Changeset: 60cb27dc
Author:    Kim Barrett <kbarrett@openjdk.org>
Date:      2021-10-21 13:28:25 +0000
URL:       https://git.openjdk.java.net/jdk/commit/60cb27dcda475a66e329359ac1ee3ffcde95c657
;;;","2021-10-25 03:38;shade;Seems to date back to JDK-8254972, which affects 16, 17, 18.;;;","2021-11-18 03:24;shade;Original bug reproduces on 32-bit (which has 32-bit size_t):

$ build/linux-x86-server-fastdebug/images/jdk/bin/java -Xms2200m -Xmx2200m -XX:+AlwaysPreTouch -XX:PreTouchParallelChunkSize=2000m -Xlog:gc+heap=debug 2>&1 | head
[0.023s][debug][gc,heap] Minimum heap 2306867200  Initial heap 2306867200  Maximum heap 2306867200
[0.025s][debug][gc,heap] Running G1 PreTouch with 0 workers for 0 work units pre-touching 2306867200B.
# To suppress the following error report, specify this argument
# after -XX: or in .hotspotrc:  SuppressErrorAt=/workgroup.cpp:212
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/home/shade/trunks/shipilev-jdk17u/src/hotspot/share/gc/shared/workgroup.cpp:212), pid=1327000, tid=1327002
#  guarantee(num_workers > 0) failed: Trying to execute task G1 PreTouch with zero workers

Fixed with this patch.
;;;","2021-11-18 04:15;shade;Fix Request (17u)

Fixes the potential overflow. Does not apply cleanly due to different context (see 17u RFR). Tests pass, x86_32 reproducer passes.;;;",,,,,,,,,,,,,,,,,
Prepare Leak Profiler for Lilliput,JDK-8275415,5060556,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,mgronlun,mgronlun,mgronlun,2021-10-18 07:56,2023-07-21 08:35,2023-10-01 09:57,2021-10-21 03:14,17,18,,,,,,,,,,,,18,hotspot,,0,amazon-interest,jdk17u-fix-request,jdk17u-fix-yes,lilliput,,,,,,,,,,,,,"Currently, the associated chain for a leak candidate (called the leak context edge) is stored as a pointer in the mark word. With Lilliput, this will not work.

Providing another hashtable works fine to solve this problem, but the overhead might not fully warrant it. The default hashtable has 1009 buckets IIRC, but the number of leak candidates (samples) found during heap traversal might only be a relatively small number (default queue size is 256).

A solution is to still use space available in the markword, since we have already provisioned to use this as a ""scratch area"" as part of setup - but it is now limited to accommodate for Lilliput (i.e. restricted to only use the lower 32-bits). Instead of storing a pointer to the leak context edge, we store an index into an array.
",,,,,,,,,,JDK-8312513,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8282067,,,,,,,,,,,,,,,JDK-8279016,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uos3:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2021-10-21 03:14;roboduke;Changeset: c41ce6d1
Author:    Markus Grönlund <mgronlun@openjdk.org>
Date:      2021-10-21 10:12:19 +0000
URL:       https://git.openjdk.java.net/jdk/commit/c41ce6d159e59a8c05dbeacde2d2612b58733d46
;;;","2023-07-19 05:25;rkennke;Fix-request (17u)
This change prepares for backport of JDK-8276333. It'll also eases maintenance of lilliput-jdk17u. The change baked since jdk18 with no relevant follow-up issues (JDK-8276333 and its duplicate JDK-8282067 are pre-existing, JDK-8279016 is not actually a bug). Backport is clean, except for 1 context-diff in the copyright header of eventEmitter.cpp.
PR: https://github.com/openjdk/jdk17u-dev/pull/1600;;;","2023-07-19 05:31;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1600
Date: 2023-07-19 12:07:22 +0000;;;","2023-07-20 05:01;goetz;[17u fix-yes]
I am a bit concerned about all these liliput backports. 
I already approved a row of backports for Aleksey.
Easing maintenance of other projects definitely is not the 
purpose of jdk17u. 
This only touches jfr, so it should be harmless, thus
I'll aprove it once more.;;;","2023-07-20 05:30;rkennke;@goetz I understand that. While it's a nice side-effect for the Lilliput project (and really the reason how I came to look at backporting this), the primary reason to do this here (as opposed to lilliput-jdk17u downstream) is to prepare for JDK-8276333, otherwise that one would be much more difficult and essentially require a re-write, which also seems risky.;;;",,,,,,,,,,,,,,,,
Linking error for classes with lambda template parameters and virtual functions,JDK-8275405,5060546,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,stefank,stefank,stefank,2021-10-18 04:17,2021-10-27 17:45,2023-10-01 09:57,2021-10-21 00:48,,,,,,,,,,,,,,18,infrastructure,,0,build-infra,,,,,,,,,,,,,,,,"We encountered the following linking error when trying to build Generational ZGC on Windows:
```
jvm.exp : error LNK2001: unresolved external symbol ""const ZBasicOopIterateClosure<class <lambda_9767402e468f9fc654281195f9700e48> >::`vftable'"" (??_7?$ZBasicOopIterateClosure@V<lambda_9767402e468f9fc654281195f9700e48>@@@@6B@)
```

I narrowed this down to a simple reproducer, which doesn't link when built through the HotSpot build system:
```
#include <functional>
std::function<void()> = [](){};
```

I found that we have a line in our make files that filters out symbols that contain the string vftable (though it checks the mangled name, so a bit hard to find):
```
else ifeq ($(call isTargetOs, windows), true)                                                                                                                                                                                                                                             
  DUMP_SYMBOLS_CMD := $(DUMPBIN) -symbols *.obj                                                                                                                                                                                                                                           
  FILTER_SYMBOLS_AWK_SCRIPT := \                                                                                                                                                                                                                                                          
      '{ \                                                                                                                                                                                                                                                                                
        if ($$7 ~ /??_7.*@@6B@/ && $$7 !~ /type_info/) print $$7; \                                                                                                                                                                                                                       
      }'
```

The following line prints the vftable symbol if it doesn't contain the string 'type_info':
 if ($$7 ~ /??_7.*@@6B@/ && $$7 !~ /type_info/) print $$7;

The printed values are added to a list of symbols that get filtered out of the mapfile, which is then passed to the linker.

If I add a second exception for vftable symbols. This addition also checks if the symbol contains the string 'lambda', and not only type_info:
 if ($$7 ~ /??_7.*@@6B@/ && $$7 !~ /type_info/ && $$7 !~ /lambda/) print $$7;

With this the code now compiles.

I did an additional experiment where I completely removed this filtering of vftable symbols. When I did that the linker complained that we used more than 64K symbols.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uopv:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@429c566,,,,,,,,,"2021-10-21 00:48;roboduke;Changeset: 09f5235c
Author:    Stefan Karlsson <stefank@openjdk.org>
Date:      2021-10-21 07:47:10 +0000
URL:       https://git.openjdk.java.net/jdk/commit/09f5235c65de546640d5f923fa9369e28643c6ed
;;;",,,,,,,,,,,,,,,,,,,,
[REDO] JDK-8271949 dumppath in -XX:FlightRecorderOptions does not affect,JDK-8275375,5060515,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,ysuenaga,dholmes,dholmes,2021-10-17 16:48,2021-12-15 12:31,2023-10-01 09:57,2021-12-07 01:28,18,,,,,,,,,,,,,18,hotspot,,0,tier5,,,,,,,,,,,,,,,,"Following the integration of JDK-8271949 this test:

jfr/api/consumer/security/TestStreamingRemote.java 

is now failing with:

----------System.err:(44/3143)----------
 stdout: [Repository: /opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S13967/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/d6a9fc85-1758-47a3-8de3-5727897a9cc7/runs/cb4f5a46-5a37-47a5-a65a-8b5becf337d4/testoutput/test-support/jtreg_open_test_jdk_jdk_jfr/tmp/2021_10_17_16_04_57_18662
];
 stderr: [WARNING: A command line option has enabled the Security Manager
WARNING: The Security Manager is deprecated and will be removed in a future release
Exception in thread ""main"" java.lang.ExceptionInInitializerError
	at jdk.jfr/jdk.jfr.internal.JVM.<clinit>(JVM.java:55)
	at jdk.jfr/jdk.jfr.internal.consumer.EventDirectoryStream.process(EventDirectoryStream.java:118)
	at jdk.jfr/jdk.jfr.internal.consumer.AbstractEventStream.execute(AbstractEventStream.java:266)
	at jdk.jfr/jdk.jfr.internal.consumer.AbstractEventStream$1.run(AbstractEventStream.java:289)
	at jdk.jfr/jdk.jfr.internal.consumer.AbstractEventStream$1.run(AbstractEventStream.java:286)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)
	at jdk.jfr/jdk.jfr.internal.consumer.AbstractEventStream.run(AbstractEventStream.java:286)
	at jdk.jfr/jdk.jfr.internal.consumer.AbstractEventStream.start(AbstractEventStream.java:237)
	at jdk.jfr/jdk.jfr.internal.consumer.EventDirectoryStream.start(EventDirectoryStream.java:108)
	at jdk.jfr.api.consumer.security.TestStreamingRemote$Test.main(TestStreamingRemote.java:67)
Caused by: java.security.AccessControlException: access denied (""java.io.FilePermission"" ""."" ""write"")
	at java.base/java.security.AccessControlContext.checkPermission(AccessControlContext.java:485)
	at java.base/java.security.AccessController.checkPermission(AccessController.java:1068)
	at java.base/java.lang.SecurityManager.checkPermission(SecurityManager.java:416)
	at java.base/java.lang.SecurityManager.checkWrite(SecurityManager.java:847)
	at java.base/java.io.File.canWrite(File.java:805)
	at jdk.jfr/jdk.jfr.internal.Options.setDumpPath(Options.java:123)
	at jdk.jfr/jdk.jfr.internal.Options.reset(Options.java:165)
	at jdk.jfr/jdk.jfr.internal.Options.<clinit>(Options.java:71)
	... 10 more
]
 exitValue = 1",,,,,,,,,,JDK-8278664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275373,,,,,,,JDK-8271949,,,,,,,,,,,,,,,JDK-8275373,,,,,,,,,,,,,,,,,,,,,,,,,,,,,18,,,,,,,,"0|i2uoiz:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,Verified,,"2021-10-18 10:05;dcubed;[~ysuenaga], [~egahlin] and [~mgronlun] - This bug is causing a lot
of noise in Tier5 and Tier6. I didn't see ay failures in Tier7, but I'm
expecting failures when we reach Tier8.

I've read thru to review (https://github.com/openjdk/jdk/pull/5984) and
it doesn't look like we're close to a solution so I think we need to consider
doing a [BACKOUT] of:

JDK-8271949 dumppath in -XX:FlightRecorderOptions does not affect

Opinions?;;;","2021-10-18 11:31;dcubed;I've done the [BACKOUT] using:

JDK-8275436 [BACKOUT] JDK-8271949 dumppath in -XX:FlightRecorderOptions does not affect

so that makes this bug into the [REDO]:

JDK-8275375 [REDO] JDK-8271949 dumppath in -XX:FlightRecorderOptions does not affect;;;","2021-12-07 01:28;roboduke;Changeset: 07669e3b
Author:    Yasumasa Suenaga <ysuenaga@openjdk.org>
Date:      2021-12-07 09:26:13 +0000
URL:       https://git.openjdk.java.net/jdk/commit/07669e3bc65b1728d784e21ec83b437374f9fa19
;;;",,,,,,,,,,,,,,,,,,
ciReplay: staticfield lines not properly terminated,JDK-8275347,5060479,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,dlong,dlong,dlong,2021-10-15 15:55,2021-11-11 07:44,2023-10-01 09:57,2021-10-21 12:04,17,18,,,,,,,,,,,,18,hotspot,,0,ci-replay,ci-replay-failed,oracle-triage-11,oracle-triage-17,oracle-triage-18,starter,,,,,,,,,,,"[~epavlova] has a test case where a static field with an empty string results in a line like the following:
staticfield TestKatya emptyString Ljava/lang/String; “”ciMethod TestKatya m1 ()V 3328 0 6784 0 -1",,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8254106,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-15 20:57;epavlova;TestReplay01.java;https://bugs.openjdk.org/secure/attachment/96731/TestReplay01.java","2021-10-15 21:06;epavlova;replay_iter_1.log;https://bugs.openjdk.org/secure/attachment/96733/replay_iter_1.log","2021-10-15 21:06;epavlova;replay_iter_2.log;https://bugs.openjdk.org/secure/attachment/96734/replay_iter_2.log",,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uoaz:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-15 21:04;epavlova;To run the test do:
export VMARGS=""-XX:-TieredCompilation -XX:+AlwaysIncrementalInline -Xbatch -XX:CompileCommand=option,TestReplay01::*,DumpReplay""

1) generate 1st replay file
 > $JAVA_HOME/bin/java $VMARGS TestReplay01

2) run replay file from step 1 and generate new replay file
 > $JAVA_HOME/bin/java $VMARGS  -XX:+ReplayCompiles -XX:ReplayDataFile=replay_pid<PID>_compid1.log 

3) compare replay file from the step 1 and 2

Here the diff for my replay files:
>  diff replay_pid1_compid1.log replay_pid2_compid1.log |grep -v instance

579,581c579,581
< staticfield TestReplay01 emptyString Ljava/lang/String; """"ciMethod TestReplay01 m1 ()V 3328 0 6784 0 -1
< ciMethod TestReplay01 m2 ()V 3328 0 6783 0 0
< ciMethod TestReplay01 m3 ()V 3328 0 6783 0 0
---
> staticfield TestReplay01 emptyString Ljava/lang/String; """"ciMethod TestReplay01 m1 ()V 0 0 1 0 -1
> ciMethod TestReplay01 m2 ()V 3328 0 6783 0 -1
> ciMethod TestReplay01 m3 ()V 3328 0 6783 0 -1

;;;","2021-10-17 23:36;chagedorn;ILW = staticfield lines not properly terminated in replay files, only a problem when replay compiling, no workaround = MLH = P4;;;","2021-10-21 12:04;roboduke;Changeset: 0961de47
Author:    Dean Long <dlong@openjdk.org>
Date:      2021-10-21 19:02:38 +0000
URL:       https://git.openjdk.java.net/jdk/commit/0961de47de1bf4379089e010978bcb4708fde767
;;;",,,,,,,,,,,,,,,,,,
RasterFormatException when drawing a tiled image made of non-writable rasters,JDK-8275345,5060474,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prr,webbuggrp,webbuggrp,2021-10-15 13:09,2022-02-28 16:39,2023-10-01 09:57,2022-02-16 14:02,11,17,,,,,,,,,,,,19,client-libs,,0,reproducer-yes,sn_112,webbug,,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
Call to Graphics2D.drawRenderedImage(RenderedImage, AffineTransform) fails if the 2 following conditions are true:

* The RenderedImage to draw contains at least one tile having a location different than (0,0). Note that this is always the case with images having more than one tile.
* The tiles are not instances of WritableRaster (they are instances of Raster only).

The problem seems to be located in SunGraphics2D.drawRenderedImage. If the tile to drawn is not an instance of WritableRaster, then the code wraps the tile's DataBuffer into a new WritableRaster but with a location set to (0,0), because the location argument in the createWritableRaster(...) call is null. Then the call to createWritableChild(...) applies a translation for bringing the tile location to (0,0). But in the case where the raster has been converted from Raster to WritableRaster, that translation has already been applied, and the effect of current code is to apply the translation twice.


STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
The attached test case draws the same image twice: one time with WritableRaster tiles (which succeed), then the same operation where the only change is the use of Raster tiles.

EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
No exception thrown, both when drawing with WritableRaster and when repeating the operation with Raster.

ACTUAL -
Drawing with WritableRasters passes. But the same drawing with Rasters causes following exception:

Exception in thread ""main"" java.awt.image.RasterFormatException: (parentX + width) is outside raster
    at java.desktop/java.awt.image.WritableRaster.createWritableChild(WritableRaster.java:228)
    at java.desktop/sun.java2d.SunGraphics2D.drawTranslatedRenderedImage(SunGraphics2D.java:2852)
    at java.desktop/sun.java2d.SunGraphics2D.drawRenderedImage(SunGraphics2D.java:2711)


---------- BEGIN SOURCE ----------
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.geom.AffineTransform;
import java.awt.image.BandedSampleModel;
import java.awt.image.BufferedImage;
import java.awt.image.Raster;
import java.awt.image.ColorModel;
import java.awt.image.DataBuffer;
import java.awt.image.DataBufferByte;
import java.awt.image.RenderedImage;
import java.awt.image.SampleModel;
import java.awt.image.WritableRaster;
import java.util.Objects;
import java.util.Vector;

final class TiledImage implements RenderedImage {
    public static void main(String[] args) {
        draw(true);         // Pass.
        draw(false);        // Fail with exception described in javadoc.
    }

    private static final int NUM_X_TILES = 2, NUM_Y_TILES = 3;

    private static final int TILE_WIDTH = 16, TILE_HEIGHT = 12;

    /**
     * Tests rendering a tiled image.
     *
     * @param  writable  whether the image shall use writable raster.
     */
    private static void draw(final boolean writable) {
        final BufferedImage target = new BufferedImage(
                TILE_WIDTH  * NUM_X_TILES,
                TILE_HEIGHT * NUM_Y_TILES,
                BufferedImage.TYPE_BYTE_GRAY);

        final RenderedImage source = new TiledImage(writable,
                target.getColorModel());

        Graphics2D g = target.createGraphics();
        g.drawRenderedImage(source, new AffineTransform());
        g.dispose();
    }

    private final ColorModel colorModel;

    private final Raster[] tiles;

    /**
     * Creates a tiled image. The image is empty,
     * but pixel values are not relevant for this test.
     *
     * @param  writable  whether the image shall use writable raster.
     */
    private TiledImage(boolean writable, ColorModel cm) {
        /*
         * We need a sample model class for which Raster.createRaster
         * do not provide a special case. That method has optimizations
         * for most SampleModel sub-types, except BandedSampleModel.
         */
        SampleModel sm = new BandedSampleModel(DataBuffer.TYPE_BYTE, TILE_WIDTH, TILE_HEIGHT, 1);
        tiles = new Raster[NUM_X_TILES * NUM_Y_TILES];
        final Point location = new Point();
        for (int tileY = 0; tileY < NUM_Y_TILES; tileY++) {
            for (int tileX = 0; tileX < NUM_X_TILES; tileX++) {
                location.x = tileX * TILE_WIDTH;
                location.y = tileY * TILE_HEIGHT;
                DataBufferByte db = new DataBufferByte(TILE_WIDTH * TILE_HEIGHT);
                Raster r;
                if (writable) {
                    r = Raster.createWritableRaster(sm, db, location);
                } else {
                    // Case causing RasterFormatException later.
                    r = Raster.createRaster(sm, db, location);
                }
                tiles[tileX + tileY * NUM_X_TILES] = r;
            }
        }
        colorModel = cm;
    }

    @Override
    public ColorModel getColorModel() {
        return colorModel;
    }

    @Override
    public SampleModel getSampleModel() {
        return tiles[0].getSampleModel();
    }

    @Override
    public Vector<RenderedImage> getSources() {
        return new Vector();
    }

    @Override
    public Object getProperty(String key) {
        return Image.UndefinedProperty;
    }

    @Override
    public String[] getPropertyNames() {
        return null;
    }

    @Override public int getMinX()            {return 0;}
    @Override public int getMinY()            {return 0;}
    @Override public int getMinTileX()        {return 0;}
    @Override public int getMinTileY()        {return 0;}
    @Override public int getTileGridXOffset() {return 0;}
    @Override public int getTileGridYOffset() {return 0;}
    @Override public int getNumXTiles()       {return NUM_X_TILES;}
    @Override public int getNumYTiles()       {return NUM_Y_TILES;}
    @Override public int getTileWidth()       {return TILE_WIDTH;}
    @Override public int getTileHeight()      {return TILE_HEIGHT;}
    @Override public int getWidth()           {return TILE_WIDTH  * NUM_X_TILES;}
    @Override public int getHeight()          {return TILE_HEIGHT * NUM_Y_TILES;}

    @Override
    public Raster getTile(final int tileX, final int tileY) {
        Objects.checkIndex(tileX, NUM_X_TILES);
        Objects.checkIndex(tileY, NUM_Y_TILES);
        return tiles[tileX + tileY * NUM_X_TILES];
    }

    @Override
    public Raster getData() {
        throw new UnsupportedOperationException(""Not needed for this test."");
    }

    @Override
    public Raster getData(Rectangle rect) {
        throw new UnsupportedOperationException(""Not needed for this test."");
    }

    @Override
    public WritableRaster copyData(WritableRaster raster) {
        throw new UnsupportedOperationException(""Not needed for this test."");
    }
}

---------- END SOURCE ----------

CUSTOMER SUBMITTED WORKAROUND :
Avoid read-only Raster instances, always use WritableRaster.

FREQUENCY : always


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uo9v:",9223372036854775807,b11,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4b09ce31,,,,,,,,,"2022-02-08 17:48;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7337
Date: 2022-02-03 15:26:40 +0000;;;","2022-02-16 14:02;roboduke;Changeset: 9ba0760c
Author:    Martin Desruisseaux <martin.desruisseaux@geomatys.com>
Committer: Alexey Ivanov <aivanov@openjdk.org>
Date:      2022-02-16 22:01:01 +0000
URL:       https://git.openjdk.java.net/jdk/commit/9ba0760cf85f9e843f3383b725017c9ffac350df
;;;",,,,,,,,,,,,,,,,,,,
-Xcheck:jni produces some warnings in the LCMS.c,JDK-8275344,5060477,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,serb,serb,serb,2021-10-15 14:23,2021-10-27 17:46,2023-10-01 09:57,2021-10-21 20:06,11,17,18,,,,,,,,,,,18,client-libs,,0,redhat-interest,,,,,,,,,,,,,,,,"The newly added test MTTransformReplacedProfile(yeah that test again) produce some warning if check:jni is enabled:
Something like this:
WARNING in native method: JNI call made with exception pending
	at sun.java2d.cmm.lcms.LCMS.setTagDataNative(java.desktop@17-internal/Native Method)
	at sun.java2d.cmm.lcms.LCMSProfile.setTag(java.desktop@17-internal/LCMSProfile.java:82)
	at sun.java2d.cmm.lcms.LCMS.setTagData(java.desktop@17-internal/LCMS.java:84)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2uoaj:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4b09ce31,,,,,,,,,"2021-10-21 20:06;roboduke;Changeset: c978ca87
Author:    Sergey Bylokhov <serb@openjdk.org>
Date:      2021-10-22 03:05:16 +0000
URL:       https://git.openjdk.java.net/jdk/commit/c978ca87de2d9152345dfd85983278c42bb28cd3
;;;",,,,,,,,,,,,,,,,,,,,
C1: assert(false) failed: live_in set of first block must be empty,JDK-8275337,5060460,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,iveresov,shade,shade,2021-10-15 07:00,2023-03-27 00:32,2023-10-01 09:57,2022-01-31 15:03,11,17,18,19,,,,,,,,,,19,hotspot,,0,c1,hs-comp-triaged,javafuzzer,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jdk18u-fix-request,jdk18u-fix-SQE-OK-next,jdk18u-fix-yes,oracle-triage-18,redhat-interest,regression,,,,"(synopsis is provisional, please change as you see fit)

The attached Fuzzer test fails like this:

$ ../build/linux-x86_64-server-fastdebug/images/jdk/bin/java -Xmx512m -Xcomp -XX:CompileOnly=Test -XX:TieredStopAtLevel=1 Test

# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/home/shade/trunks/jdk/src/hotspot/share/c1/c1_LinearScan.cpp:858), pid=1577021, tid=1577034
#  assert(false) failed: live_in set of first block must be empty

There is a superficially similar bug report with a similar assertion (JDK-8271202), but this one does not require deopt flags, and also the current patch from JDK-8271202 does *not* solve this failure.

I also bisected it to JDK-8264066 (CPU) patch -- therefore I provisionally set all suspected affected versions:
https://github.com/openjdk/jdk/commit/e1051ae0695f14802f192a5aa58ff2365a5ef753",,,,,,,,,,JDK-8283940,JDK-8284347,JDK-8283825,JDK-8284266,JDK-8284057,JDK-8304792,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8271202,JDK-8264066,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-15 06:59;shade;0028.tar.gz;https://bugs.openjdk.org/secure/attachment/96728/0028.tar.gz",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uo6r:",9223372036854775807,b08,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-17 23:19;chagedorn;ILW = Assert in C1 Linear scan, only with single JavaFuzzer test, disable compilation of affected method = HLM = P3;;;","2021-10-17 23:20;chagedorn;[~yyang] Can you also have a look at that and see if it is similar to JDK-8271202?;;;","2021-10-18 23:04;yyang;Okay, I will investigate it to see if it's similar to JDK-8271202 later~;;;","2021-10-19 00:32;chagedorn;Thanks Yi!;;;","2021-12-07 13:56;mdoerr;Possible workaround for this issue: -XX:-RangeCheckElimination
This workaround doesn't help for JDK-8271202, so, it seems to be a different issue.;;;","2021-12-10 07:47;chagedorn;Deferring to JDK 19 as this seems to be quite an edge case and not a recent regression.;;;","2022-01-26 22:18;iveresov;From the first look of it RangeCheckEliminator::loop_invariant() should be checking dominance instead of dominator depth? Trying a fix.;;;","2022-01-28 13:28;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7276
Date: 2022-01-28 21:23:09 +0000;;;","2022-01-31 15:03;roboduke;Changeset: 4191b2b9
Author:    Igor Veresov <iveresov@openjdk.org>
Date:      2022-01-31 23:02:34 +0000
URL:       https://git.openjdk.java.net/jdk/commit/4191b2b9b98c1137e5f27e3b64efb83857fa2c91
;;;","2022-03-29 05:11;mdoerr;Fix Request (17u)
Should get backported for parity with 17.0.4-oracle. Applies cleanly. Test has passed.;;;","2022-03-29 05:16;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/294
Date: 2022-03-29 12:10:45 +0000;;;","2022-03-29 07:45;thartmann;Fix Request (JDK 18u)
Fixes an assert in C1. The fix is low risk and applies cleanly. Already tested and backported to Oracle JDK 17u. Tier 1-3 testing is running for JDK 18u.;;;","2022-03-29 08:02;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk18u/pull/57
Date: 2022-03-29 14:56:46 +0000;;;","2022-04-02 00:25;goetz;Fix request [11u]

I backport this for parity with 11.0.16-oracle.
Small C1 change, low risk.
Clean backport.
Test passes.  SAP nightly testing passed.;;;","2022-04-02 00:32;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/988
Date: 2022-04-02 07:28:15 +0000;;;",,,,,,
Variadic functions don't work on Linux/AArch64,JDK-8275332,5060455,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,ngasson,jvernee,jvernee,2021-10-15 04:56,2021-10-22 03:49,2023-10-01 09:57,2021-10-22 03:49,repo-panama,,,,,,,,,,,,,,tools,,0,foreign-memaccess+abi,,,,,,,,,,,,,,,,"Reported here: https://github.com/openjdk/panama-foreign/pull/593#issuecomment-941993637

During the API refresh the behavior of MacOS/AArch64 variadic functions was accidentally used for Linux/AArch64 as well.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uo5n:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2251e2f8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[lworld] TestArrays.java fails IR verification on aarch64,JDK-8275331,5060454,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,thartmann,thartmann,thartmann,2021-10-15 04:44,2021-10-15 06:18,2023-10-01 09:57,2021-10-15 06:18,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,lw3,lworld,noreg-self,,,,,,,,,,,,,,"Scenario #5
===========
Scenario flags: [-XX:+IgnoreUnrecognizedVMOptions, -XX:-UseACmpProfile, -XX:+AlwaysIncrementalInline, -XX:FlatArrayElementMaxOops=5, -XX:FlatArrayElementMaxSize=-1, -XX:-UseArrayLoadStoreProfile, -XX:InlineFieldMaxFlatSize=-1, -XX:-InlineTypePassFieldsAsArgs, -XX:-InlineTypeReturnedAsFields, -XX:-MonomorphicArrayCheck, -XX:-UncommonNullCast, -XX:+StressArrayCopyMacroNode]

Command Line:
/opt/mach5/mesos/work_dir/jib-master/install/jdk-18-valhalla+1-97/linux-aarch64-debug.jdk/jdk-18/fastdebug/bin/java -cp /opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S23402/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/b5c4567a-0c42-4189-b2b8-d02ebaae440a/runs/11dd91d5-8b4f-41b0-83ed-7fdd97388dca/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_compiler_3/classes/3/compiler/valhalla/inlinetypes/TestArrays.d:/opt/mach5/mesos/work_dir/jib-master/install/jdk-18-valhalla+1-97/src.full/open/test/hotspot/jtreg/compiler/valhalla/inlinetypes:/opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S23402/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/b5c4567a-0c42-4189-b2b8-d02ebaae440a/runs/11dd91d5-8b4f-41b0-83ed-7fdd97388dca/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_compiler_3/classes/3/test/lib:/opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S23402/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/b5c4567a-0c42-4189-b2b8-d02ebaae440a/runs/11dd91d5-8b4f-41b0-83ed-7fdd97388dca/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_compiler_3/classes/3:/opt/mach5/mesos/work_dir/jib-master/install/jtreg/6/1/bundles/jtreg-6+1.zip/jtreg/lib/javatest.jar:/opt/mach5/mesos/work_dir/jib-master/install/jtreg/6/1/bundles/jtreg-6+1.zip/jtreg/lib/jtreg.jar:/opt/mach5/mesos/work_dir/jib-master/install/jtreg/6/1/bundles/jtreg-6+1.zip/jtreg/lib/junit.jar:/opt/mach5/mesos/work_dir/jib-master/install/jtreg/6/1/bundles/jtreg-6+1.zip/jtreg/lib/hamcrest.jar:/opt/mach5/mesos/work_dir/jib-master/install/jtreg/6/1/bundles/jtreg-6+1.zip/jtreg/lib/testng.jar:/opt/mach5/mesos/work_dir/jib-master/install/jtreg/6/1/bundles/jtreg-6+1.zip/jtreg/lib/jcommander.jar:/opt/mach5/mesos/work_dir/jib-master/install/jtreg/6/1/bundles/jtreg-6+1.zip/jtreg/lib/guice.jar -Djava.library.path=/opt/mach5/mesos/work_dir/jib-master/install/jdk-18-valhalla+1-97/linux-aarch64-debug.test/hotspot/jtreg/native -Xbootclasspath/a:. -XX:+UnlockDiagnosticVMOptions -XX:+WhiteBoxAPI -XX:MaxRAMPercentage=6.25 -Djava.io.tmpdir=/opt/mach5/mesos/work_dir/slaves/ff806ead-2cac-495d-9cbc-62116f99bf14-S23402/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/b5c4567a-0c42-4189-b2b8-d02ebaae440a/runs/11dd91d5-8b4f-41b0-83ed-7fdd97388dca/testoutput/test-support/jtreg_open_test_hotspot_jtreg_tier1_compiler_3/tmp -Dir.framework.server.port=44057 -XX:+IgnoreUnrecognizedVMOptions -XX:-UseACmpProfile -XX:+AlwaysIncrementalInline -XX:FlatArrayElementMaxOops=5 -XX:FlatArrayElementMaxSize=-1 -XX:-UseArrayLoadStoreProfile -XX:InlineFieldMaxFlatSize=-1 -XX:-InlineTypePassFieldsAsArgs -XX:-InlineTypeReturnedAsFields -XX:-MonomorphicArrayCheck -XX:-UncommonNullCast -XX:+StressArrayCopyMacroNode -XX:+PrintCompilation -XX:+UnlockDiagnosticVMOptions -XX:+LogCompilation -XX:CompileCommand=log,compiler.valhalla.inlinetypes.TestArrays::* -XX:CompileCommand=option,compiler.valhalla.inlinetypes.TestArrays::*,bool,PrintIdeal,true -XX:CompileCommand=option,compiler.valhalla.inlinetypes.TestArrays::*,bool,PrintOptoAssembly,true -XX:-OmitStackTraceInFastThrow -DShouldDoIRVerification=true -XX:-BackgroundCompilation -XX:CompileCommand=quiet -DWarmup=251 compiler.lib.ir_framework.test.TestVM compiler.valhalla.inlinetypes.TestArrays compiler.valhalla.inlinetypes.MyValue2 compiler.valhalla.inlinetypes.MyValue1 compiler.valhalla.inlinetypes.MyValue2Inline

One or more @IR rules failed:

Failed IR Rules (1)
------------------
- Method ""public boolean compiler.valhalla.inlinetypes.TestArrays.test101(java.lang.Object[])"":
  * @IR rule 1: ""@compiler.lib.ir_framework.IR(applyIfAnd={}, applyIf={}, failOn={}, applyIfOr={}, counts={""(((?i:cmp|CLFI|CLR).*\\\\[precise compiler/valhalla/inlinetypes/MyValue.*:|.*(?i:mov|or).*\\\\[precise compiler/valhalla/inlinetypes/MyValue.*;:.*\\\\R.*(cmp|CMP|CLR)))"", ""= 1""}, applyIfNot={})""
    - counts: Graph contains wrong number of nodes:
        Regex 1: (((?i:cmp|CLFI|CLR).*\\[precise compiler/valhalla/inlinetypes/MyValue.*:|.*(?i:mov|or).*\\[precise compiler/valhalla/inlinetypes/MyValue.*;:.*\\R.*(cmp|CMP|CLR)))
        Expected 1 but found 0 nodes.

>>> Check stdout for compilation output of the failed methods",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,,,,,,,"0|i2uo5f:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-15 04:46;thartmann;Root cause is the recent merge. JDK-8273825 needs to be applied to Valhalla specific matching rules.;;;",,,,,,,,,,,,,,,,,,,,
"C2:  assert(n->is_Root() || n->is_Region() || n->is_Phi() || n->is_MachMerge() || def_block->dominates(block)) failed: uses must be dominated by definitions",JDK-8275330,5060453,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,roland,shade,shade,2021-10-15 04:42,2022-04-20 22:03,2023-10-01 09:57,2021-11-26 01:50,11,17.0.2,18,,,,,,,,,,,18,hotspot,,0,c2,hs-comp-triaged,javafuzzer,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,oracle-triage-11,oracle-triage-18,redhat-interest,regression,,,,,,"(synopsis is provisional, feel free to change it)

The attached Fuzzer test fails like:

$ ../build/linux-x86_64-server-fastdebug/images/jdk/bin/java -Xmx512m -XX:+UnlockDiagnosticVMOptions -Xcomp -XX:CompileOnly=Test -XX:-TieredCompilation Test

#  Internal Error (/home/shade/trunks/jdk/src/hotspot/share/opto/block.cpp:1252), pid=956055, tid=956068
#  assert(n->is_Root() || n->is_Region() || n->is_Phi() || n->is_MachMerge() || def_block->dominates(block)) failed: uses must be dominated by definitions

Bisection points to JDK-8272562 as the starting point.",,,,,,,,,,JDK-8281540,JDK-8280558,JDK-8285299,JDK-8284651,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8272562,,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-15 04:41;shade;0030.tar.gz;https://bugs.openjdk.org/secure/attachment/96724/0030.tar.gz",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uo57:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-15 05:21;chagedorn;ILW = Assertion failure in C2 code generation, single Java Fuzzer test, disable compilation of affected method = HLM = P3;;;","2021-11-26 01:50;roboduke;Changeset: 3e798dd4
Author:    Roland Westrelin <roland@openjdk.org>
Date:      2021-11-26 09:48:09 +0000
URL:       https://git.openjdk.java.net/jdk/commit/3e798dd40c68439f3220445e679b9e0e495435d8
;;;","2022-02-02 06:18;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk17u-dev/pull/143
Date: 2022-02-02 14:13:40 +0000;;;","2022-02-08 00:47;goetz;Fix request [17u]

I backport this for parity with 17.0.3-oracle.
A C2 fix we should not skip.
Clean backport.
Test passes. SAP nightly testing passes.;;;","2022-04-05 05:05;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/1002
Date: 2022-04-05 11:58:31 +0000;;;","2022-04-07 06:35;roland;Fix request (11u):

Reason for the backport:
    - it helps for the backport of 8280799 (С2: assert(false) failed: cyclic dependency prevents range check elimination) that we've encountered with 11
    - while I can't reproduce the failure with 11, I see no reason the bug wouldn't exit in 11 as well (so not critical for 11 but nice to have)

The patch doesn't apply cleanly. Backport reviewed here: https://github.com/openjdk/jdk11u-dev/pull/1002

I tested this with tier1 and some compile the world/fuzzer tests.;;;",,,,,,,,,,,,,,,
ZGC: vmTestbase/gc/gctests/SoftReference/soft004/soft004.java fails with assert(_phases->length() <= 1000) failed: Too many recored phases?,JDK-8275329,5060452,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,pliden,tschatzl,tschatzl,2021-10-15 04:31,2022-02-10 14:26,2023-10-01 09:57,2021-11-12 00:21,18,,,,,,,,,,,,,18,hotspot,,0,tier5,zgc,,,,,,,,,,,,,,,"#  Internal Error (.../open/src/hotspot/share/gc/shared/gcTimer.cpp:133), pid=7430, tid=7439
#  assert(_phases->length() <= 1000) failed: Too many recored phases?
#
# JRE version: Java(TM) SE Runtime Environment (18.0+20) (fastdebug build 18-ea+20-1190)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+20-1190, mixed mode, sharing, tiered, compressed class ptrs, z gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0xcfeb24]  ConcurrentGCTimer::register_gc_concurrent_start(char const*, TimeInstant<CompositeCounterRepresentation, CompositeElapsedCounterSource> const&)+0x174
#

Stack trace:

Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xcfeb24]  ConcurrentGCTimer::register_gc_concurrent_start(char const*, TimeInstant<CompositeCounterRepresentation, CompositeElapsedCounterSource> const&)+0x174
V  [libjvm.so+0x1a70fe0]  ZStatPhaseConcurrent::register_start(TimeInstant<CompositeCounterRepresentation, CompositeElapsedCounterSource> const&) const+0x20
V  [libjvm.so+0x1a10515]  ZDriver::gc(ZDriverRequest const&)+0x4e5
V  [libjvm.so+0x1a11fcf]  ZDriver::run_service()+0x1ef
V  [libjvm.so+0xa3df0b]  ConcurrentGCThread::run()+0x2b",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uo4z:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,Verified,,"2021-11-12 00:21;roboduke;Changeset: 6b833db3
Author:    Per Liden <pliden@openjdk.org>
Date:      2021-11-12 08:19:03 +0000
URL:       https://git.openjdk.java.net/jdk/commit/6b833db3f9cace8fbb09bb803ba31208e37a4622
;;;","2021-11-12 07:18;dcubed;Here's a log file snippet for the jdk-18+24-1549-tier5 sighting:

#  Internal Error (/opt/mach5/mesos/work_dir/slaves/a2dc162d-743b-4800-9e92-31f85abb45b1-S136911/frameworks/1735e8a2-a1db-478c-8104-60c8b0af87dd-0196/executors/fe3a9797-7e8c-48a1-af91-c83470a3f05f/runs/de66bbd8-4037-447a-8cb0-b6e86dc6f270/workspace/open/src/hotspot/share/gc/shared/gcTimer.cpp:133), pid=28250, tid=28261
#  assert(_phases->length() <= 1000) failed: Too many recorded phases? (count: 1001)
#
# JRE version: Java(TM) SE Runtime Environment (18.0+24) (fastdebug build 18-ea+24-1549)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-ea+24-1549, mixed mode, sharing, tiered, compressed class ptrs, z gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0xd0a4b4]  ConcurrentGCTimer::register_gc_concurrent_start(char const*, TimeInstant<CompositeCounterRepresentation, CompositeElapsedCounterSource> const&)+0x174
#

Here's the crashing thread's stack:

---------------  T H R E A D  ---------------

Current thread (0x00007f22d8070100):  ConcurrentGCThread ""ZDriver"" [stack: 0x00007f22c0d8d000,0x00007f22c0e8d000] [id=28261]

Stack: [0x00007f22c0d8d000,0x00007f22c0e8d000],  sp=0x00007f22c0e8bc00,  free space=1019k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0xd0a4b4]  ConcurrentGCTimer::register_gc_concurrent_start(char const*, TimeInstant<CompositeCounterRepresentation, CompositeElapsedCounterSource> const&)+0x174
V  [libjvm.so+0x1a839f0]  ZStatPhaseConcurrent::register_start(TimeInstant<CompositeCounterRepresentation, CompositeElapsedCounterSource> const&) const+0x20
V  [libjvm.so+0x1a233e5]  ZDriver::gc(ZDriverRequest const&)+0x4e5
V  [libjvm.so+0x1a24e97]  ZDriver::run_service()+0x1e7
V  [libjvm.so+0xa41c9b]  ConcurrentGCThread::run()+0x2b
V  [libjvm.so+0x1893370]  Thread::call_run()+0x100
V  [libjvm.so+0x1574354]  thread_native_entry(Thread*)+0x104


It's not clear to me why the bug synopsis and the main bug description both
have a typo in the assert msg: 'recored' instead of 'recorded'. However, we
can't fix the bug synopsis because this bug has already been used to integrate
a fix.

Update: The original failure does indeed spell the word as ""recored"" instead
of ""recorded"". The sighting that I added uses ""recorded"" so there are two
different asserts...

Update: Both asserts use the same line number... perhaps someone fixed
the typo between the original sighting and mine. I don't know...;;;","2021-11-12 07:19;dcubed;The fix for this bug is in jdk-18+24-1557.;;;",,,,,,,,,,,,,,,,,,
C2: assert(no_dead_loop) failed: dead loop detected,JDK-8275326,5060448,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,chagedorn,shade,shade,2021-10-15 02:42,2022-01-20 15:45,2023-10-01 09:57,2021-12-01 00:26,11,17,18,,,,,,,,,,,18,hotspot,,0,c2,hs-comp-triaged,javafuzzer,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,noreg-hard,oracle-triage-18,,,,,,,,"(synopsis is provisional, feel free to change it or close as duplicate of known bug)

Attached Fuzzer test fails like this:

$ ./build/linux-x86_64-server-fastdebug/images/jdk/bin/java -XX:+StressIGVN -XX:StressSeed=77325781 -Xcomp -XX:CompileOnly=Test Test
...
#  Internal Error (/home/shade/trunks/jdk/src/hotspot/share/opto/phaseX.cpp:945), pid=2711484, tid=2711497
#  assert(no_dead_loop) failed: dead loop detected

Bisection shows it started with JDK-8273612, but that might only be because the profiling info had changed a bit.",,,,,,,,,,JDK-8279434,JDK-8280291,JDK-8279490,JDK-8278750,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8280126,JDK-8273612,,,,,,,,,,,,,,,,,,,,,,,,"2021-10-15 02:42;shade;0012.tar.gz;https://bugs.openjdk.org/secure/attachment/96722/0012.tar.gz",,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uo43:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-15 05:02;chagedorn;Might be related to JDK-8271056. I found some dead loop fails with the Java Fuzzer which I'm currently looking into. I propose to close this as a dup of it and reopen this one if the fix for JDK-8271056 is unrelated.;;;","2021-10-29 05:38;chagedorn;This dead loop assertion failure involves a MergeMemNode replacing a phi node which results in a dead data loop. This failure is unrelated to JDK-8271056 which creates a dead data loop with cmoving identity. I therefore reopen and retriage this bug for 18.;;;","2021-10-29 05:39;chagedorn;ILW = C2 assertion during IGVN due to dead data loop, only fails with single Java Fuzzer test, disable compilation of affected method = HLM = P3;;;","2021-11-08 01:16;chagedorn;Could only reproduce this with the attached replay file with latest JDK even after repeated runs with StressIGVN + RepeatCompilation. Added label noreg-hard accordingly.;;;","2021-12-01 00:26;roboduke;Changeset: 70d5dffb
Author:    Christian Hagedorn <chagedorn@openjdk.org>
Date:      2021-12-01 08:24:59 +0000
URL:       https://git.openjdk.java.net/jdk/commit/70d5dffb4e7110902b59b56efaef31614916148c
;;;","2021-12-22 08:24;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/31
Date: 2021-12-22 16:18:38 +0000
;;;","2021-12-22 08:27;goetz;Fix request [17u]

I backport this for parity with 11.0.15-oracle.
As it is in 11, I think it should also go to 17.
Typical risk of changing C2.
Clean backport.
SAP nightly tests passed. Pre-submit tests passed in PR 43.;;;","2021-12-29 09:16;roboduke;A pull request was submitted for review.

URL: https://git.openjdk.java.net/jdk17u-dev/pull/43
Date: 2021-12-29 17:11:27 +0000
;;;","2022-01-18 04:41;goetz;Fix request [11u]

I backport this for parity with 11.0.15-oracle.
Clean backport.
SAP nightly tests passed.;;;","2022-01-18 04:44;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk11u-dev/pull/772
Date: 2022-01-18 12:40:14 +0000;;;",,,,,,,,,,,
java.net.NetworkInterface throws java.lang.Error instead of SocketException,JDK-8275319,5060438,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,jpai,jpai,jpai,2021-10-14 20:28,2022-01-20 02:00,2023-10-01 09:57,2021-10-20 07:07,,,,,,,,,,,,,,18,core-libs,,0,noreg-hard,,,,,,,,,,,,,,,,"As noted in this PR https://github.com/openjdk/jdk/pull/5956, certain methods in NetworkInterface throw java.lang.Error (on Windows) instead of SocketException.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8066931,,,,,,,,,,,,,,,,,,,,,,JDK-8066931,JDK-8046500,JDK-8065078,JDK-8165665,JDK-8057900,JDK-8068597,JDK-8217298,JDK-8275640,JDK-8065559,JDK-8040229,,,,,,,,,,,,,,,,,,,,,,windows,,,,,,"0|i2uo1v:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@446e124a,,,,,,,,,"2021-10-14 23:32;alanb;It would be useful to know if this is a drive-by change or whether there has been configurations/scenarios where Error is thrown. If we get ""bad parameter"" or other errors from the Win32 functions that suggest a JDK bug then Error or InternalError may be appropriate. So I think this one will need a detailed review.;;;","2021-10-20 07:07;roboduke;Changeset: 043cde22
Author:    Daniel Jelinski <djelinski1@gmail.com>
Committer: Daniel Fuchs <dfuchs@openjdk.org>
Date:      2021-10-20 14:06:08 +0000
URL:       https://git.openjdk.java.net/jdk/commit/043cde22d4d6bd975e75daa9ad52770cf79df934
;;;",,,,,,,,,,,,,,,,,,,
loaded_classes_do may see ArrayKlass before InstanceKlass is loaded,JDK-8275318,5060437,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,iklam,iklam,iklam,2021-10-14 19:58,2022-01-26 17:14,2023-10-01 09:57,2022-01-18 17:36,,,,,,,,,,,,,,19,hotspot,,0,cds,noreg-hard,,,,,,,,,,,,,,,"In the following code, if k is a shared ArrayKlass, it may be passed to klass_closure->do_klass() before its InstanceKlass is in the is_loaded() state.

void ClassLoaderData::loaded_classes_do(KlassClosure* klass_closure) {
  // Lock-free access requires load_acquire
  for (Klass* k = Atomic::load_acquire(&_klasses); k != NULL; k = k->next_link()) {
    // Do not filter ArrayKlass oops here...
    if (k->is_array_klass() || (k->is_instance_klass() && InstanceKlass::cast(k)->is_loaded())) {
#ifdef ASSERT
      oop m = k->java_mirror();
      assert(m != NULL, ""NULL mirror"");
      assert(m->is_a(vmClasses::Class_klass()), ""invalid mirror"");
#endif
      klass_closure->do_klass(k);
    }
  }
}

Scenario:

[1] java/lang/Object is restored via InstanceKlass::restore_unshareable_info()
[2] [Ljava/lang/Object; is restored in when InstanceKlass::restore_unshareable_info() calls array_klasses()->restore_unshareable_info()

At this point, both Klasses are in the ClassLoaderData::_klasses list. However, java/lang/Object is not yet loaded. If another thread calls ClassLoaderData::loaded_classes_do(), it will see the ArrayKlass but not the InstanceKlass.

See discussions in https://github.com/openjdk/jdk/pull/5935",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8274338,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uo1n:",9223372036854775807,b07,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-14 20:02;iklam;Suggested fix: if k is an ObjectArrayKlass, and ObjArrayKlass::cast(k)->bottom_klass() is an InstanceKlass, do not iterate on k unless the bottom_klass is in the loaded state.;;;","2021-10-15 05:09;coleenp;Ok, that sounds like a good fix. [~iklam] did you want to do it?;;;","2021-10-19 11:04;hseigel;ILW=MLM=P4;;;","2022-01-13 12:58;iklam;It's not easy to create a regression test case for this since only a few shared array classes are created, and most of their ""bottom"" InstanceKlass are loaded during VM bootstrap. I am marking this bug with noreg-hard.;;;","2022-01-13 13:16;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/7069
Date: 2022-01-13 20:57:06 +0000;;;","2022-01-18 17:36;roboduke;Changeset: 4f4da3b1
Author:    Ioi Lam <iklam@openjdk.org>
Date:      2022-01-19 01:35:06 +0000
URL:       https://git.openjdk.java.net/jdk/commit/4f4da3b172bb6ed5dd80a144e8eeb17b90bd7cdf
;;;",,,,,,,,,,,,,,,
sun/java2d/pipe/InterpolationQualityTest.java fails with D3D basic render driver,JDK-8275303,5060418,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prr,landrews,landrews,2021-10-14 10:45,2023-07-24 22:03,2023-10-01 09:57,2022-05-25 09:34,11,16,17,18,8,,,,,,,,,19,client-libs,,0,amazon-interest,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,sn_119,,,,,,,,,,,"sun/java2d/pipe/InterpolationQualityTest.java fails with the following exception

nearest passed.
resImage.getRGB(13, 0) = java.awt.Color[r=207,g=207,b=207] != java.awt.Color[r=211,g=211,b=211]
bilinear failed.
bicubic passed.
----------System.err:(14/884)----------
java.lang.RuntimeException: Test FAILED.
	at InterpolationQualityTest.test(InterpolationQualityTest.java:162)
	at InterpolationQualityTest.main(InterpolationQualityTest.java:190)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:76)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:51)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at com.sun.javatest.regtest.agent.MainWrapper$MainThread.run(MainWrapper.java:127)
	at java.base/java.lang.Thread.run(Thread.java:833)

OS - Windows 10 10.0 (amd64)
JDK - jdk-18+19-1182",,,,,,,,,,JDK-8312227,JDK-8312092,JDK-8312695,JDK-8312226,JDK-8312087,JDK-8311808,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8312470,,,,,,,,,,,,,,,JDK-8275165,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,windows_10,,,,,,"0|i2unxf:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4b09ce31,,,,,,,,,"2021-10-14 11:06;vdyakov;does it affect 17 ?;;;","2021-10-14 11:20;landrews;I dn't check on older versions of JDK. Let me check and update the bug;;;","2021-10-14 11:58;landrews;[~vdyakov] test case fails in jdk17 b35, jdk 16.0.2 b07 & jdk 16.0.1 b09;;;","2021-10-14 12:00;vdyakov;[~landrews]please use Affects Version(s) to add the earliest you know;;;","2021-10-14 13:54;prr;This will apply to any version - all the way back to JDK 8 (and earlier)
The Microsoft Basic Render Driver (vendor 0x1414, device 0x008c) is in use and we allow it to enable D3D
It should probably be disabled in JDK's D3D verification code.

I am assuming that since we've not heard otherwise that it passes with D3D on ATI and Nvidia ... ;;;","2022-05-19 16:52;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.java.net/jdk/pull/8797
Date: 2022-05-19 23:46:48 +0000;;;","2022-05-25 09:34;dukebot;Changeset: bc0379ea
Author:    Phil Race <prr@openjdk.org>
Date:      2022-05-25 16:31:50 +0000
URL:       https://git.openjdk.java.net/jdk/commit/bc0379ea1a22a2631b49ecd6a331352bec81c1c6
;;;","2023-07-17 00:28;goetz;Fix request [11u,17u]

I backport this for parity with 17.0.9-oracle.
Backport to 11 is not visible, but as it was backported to 8 I think
we should have it in 11, too.
Low risk, adds a new renderer.
Clean backport.
SAP nightly testing passed.;;;","2023-07-17 00:38;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/1585
Date: 2023-07-17 07:30:28 +0000;;;","2023-07-17 00:40;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/2044
Date: 2023-07-17 07:31:31 +0000;;;",,,,,,,,,,,
"unexpected compiler error: cast, intersection types and sealed",JDK-8275302,5060417,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,vromero,vromero,vromero,2021-10-14 10:05,2021-11-02 08:57,2023-10-01 09:57,2021-10-19 09:47,17,18,,,,,,,,,,,,18,tools,,0,azul-interest,javac-sealed,jdk17u-fix-request,jdk17u-fix-yes,,,,,,,,,,,,,"The compiler is currently rejecting this code:

public class X {
    abstract class Base {}
    interface Marker {}
    sealed class B extends Base {}
    final class C extends B implements Marker {}
    private <T extends Base & Marker> void test(T obj) {
        B b = (B) obj; //error - cannot convert T to B
    }
}

this seems like a bug in the current implementation of the sealed classes spec (reported offline by Jan)",,,,,,,,,,JDK-8276359,JDK-8276233,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2unx7:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,,,"2021-10-19 09:47;roboduke;Changeset: fd10f199
Author:    Vicente Romero <vromero@openjdk.org>
Date:      2021-10-19 16:46:14 +0000
URL:       https://git.openjdk.java.net/jdk/commit/fd10f1996ef94529b5b12e547957cd904ade1956
;;;","2021-10-29 05:33;evergizova;Fix Request (17u)
I'd like to backport this fix to 17u. It fixes unexpected javac error.
The patch applies cleanly.
Tested with langtools tests, updated test passes after applying the patch.;;;",,,,,,,,,,,,,,,,,,,
A change done with JDK-8268764 mismatches the java.rmi.server.ObjID.hashCode spec,JDK-8275293,5060408,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,stsypanov,dbessono,dbessono,2021-10-14 07:17,2022-01-21 14:32,2023-10-01 09:57,2021-10-23 14:09,18,,,,,,,,,,,,,18,core-libs,,0,conformance,noreg-jck,regression,tck-red-18,,,,,,,,,,,,,"Specification for java.rmi.server.ObjID.hashCode asserts:

==========================
public int hashCode()
Returns the hash code value for this object identifier, _the object number_.
==========================

https://docs.oracle.com/en/java/javase/17/docs/api/java.rmi/java/rmi/server/ObjID.html#hashCode()

The changes done with JDK-8268764 replaced the original implementation with Long.hashCode usage
https://github.com/openjdk/jdk/commit/124f82377ba93359bc59118ee315ba194080fa92#diff-c0c1e054162cdec17bb083da268cd96be49a43ae42541d5be3906bd97b924925L203

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8268764,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,b19,18,,,,,,,,"0|i2unv7:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@50807e59,,,,,,,Verified,,"2021-10-14 16:09;smarks;Some or all of JDK-8268764 needs to be reverted. While Long.hashCode(longValue) is arguably a ""better"" way to compute an int hashCode than casting longValue to int, in some cases the hashCode value is specified. The java.rmi.server.ObjID case is one example. I haven't looked at the others.

[~stsypanov] Can you take care of this please? Thanks.
;;;","2021-10-14 23:58;stsypanov;Hi Stuart, I'll revert the changes for java.rmi.server.ObjID.hashCode() and double-check the rest;;;","2021-10-20 09:13;smarks;[~stsypanov] Thanks for opening the PR. Reverting the RMI change seems reasonable at a minimum. Did any issue arise from double-checking the rest of the changes?;;;","2021-10-21 04:41;stsypanov;Personally I didn't find anything suspicious in the rest of affected files. Btw, will you sponsor the PR?
;;;","2021-10-23 14:05;smarks;Yes, it looks like the one in RMI is the only one that needs to be reverted. And yes, I'll sponsor.;;;","2021-10-23 14:09;roboduke;Changeset: 5bbe4cae
Author:    Sergey Tsypanov <sergei.tsypanov@yandex.ru>
Committer: Stuart Marks <smarks@openjdk.org>
Date:      2021-10-23 21:07:58 +0000
URL:       https://git.openjdk.java.net/jdk/commit/5bbe4cae8746765d2ce965b06fd1e5cf512326ae
;;;",,,,,,,,,,,,,,,
assert(dest_attr.is_in_cset() == (obj->forwardee() == obj)) failed: Only evac-failed objects must be in the collection set here but <addr> is not,JDK-8275277,5060388,Bug,Closed,JDK,JDK,software,duke,,,P2,Fixed,tschatzl,tschatzl,tschatzl,2021-10-14 03:41,2022-02-10 14:26,2023-10-01 09:57,2021-10-16 04:07,18,,,,,,,,,,,,,18,hotspot,,0,gc-g1,tier4,tier5,,,,,,,,,,,,,,"vmTestbase/gc/ArrayJuggle/Juggle29/TestDescription.java fails with

#  assert(dest_attr.is_in_cset() == (obj->forwardee() == obj)) failed: Only evac-failed objects must be in the collection set here but 0x000000074c600000 is not

Stack: [0x000070000874b000,0x000070000884b000],  sp=0x000070000884a860,  free space=1022k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.dylib+0x10f4799]  VMError::report_and_die(int, char const*, char const*, __va_list_tag*, Thread*, unsigned char*, void*, void*, char const*, int, unsigned long)+0x6e9
V  [libjvm.dylib+0x10f4e1b]  VMError::report_and_die(Thread*, void*, char const*, int, char const*, char const*, __va_list_tag*)+0x3b
V  [libjvm.dylib+0x5d615d]  report_vm_error(char const*, int, char const*, char const*, ...)+0xdd
V  [libjvm.dylib+0x76120b]  void G1ParScanThreadState::write_ref_field_post<narrowOop>(narrowOop*, oop)+0x18b
V  [libjvm.dylib+0x75c3b1]  void G1ParScanThreadState::do_oop_evac<narrowOop>(narrowOop*)+0x2b1
V  [libjvm.dylib+0x75ca4b]  G1ParScanThreadState::steal_and_trim_queue(GenericTaskQueueSet<OverflowTaskQueue<ScannerTask, (MEMFLAGS)5, 131072u>, (MEMFLAGS)5>*)+0x9b
V  [libjvm.dylib+0x79fd2c]  G1ParEvacuateFollowersClosure::do_void()+0x12c
V  [libjvm.dylib+0x79fad8]  G1EvacuateRegionsBaseTask::evacuate_live_objects(G1ParScanThreadState*, unsigned int, G1GCPhaseTimes::GCParPhases, G1GCPhaseTimes::GCParPhases)+0x98
V  [libjvm.dylib+0x79f832]  G1EvacuateRegionsBaseTask::work(unsigned int)+0xa2
V  [libjvm.dylib+0x11503be]  GangWorker::run_task(WorkData)+0x5e
V  [libjvm.dylib+0x11502a1]  GangWorker::loop()+0x41
V  [libjvm.dylib+0x1150166]  GangWorker::run()+0x16
V  [libjvm.dylib+0x1049457]  Thread::call_run()+0x177
V  [libjvm.dylib+0xe181f0]  thread_native_entry(Thread*)+0x150",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8274516,,,,,,,,,,,,,,,JDK-8274452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2unqr:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,Verified,,"2021-10-14 03:44;tschatzl;I suspect that the assert is wrong due to memory visibility races since there have been no actual crashes so far.;;;","2021-10-14 14:15;dcubed;Here's the stack trace for the the jdk-18+20-1187-tier4 sighting:

---------------  T H R E A D  ---------------

Current thread (0x00007fec475be5c0):  WorkerThread ""GC Thread#2"" [stack: 0x0000700005452000,0x0000700005552000] [id=34307]

Stack: [0x0000700005452000,0x0000700005552000],  sp=0x00007000055518a0,  free space=1022k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.dylib+0x10ee1d9]  VMError::report_and_die(int, char const*, char const*, __va_list_tag*, Thread*, unsigned char*, void*, void*, char const*, int, unsigned long)+0x6e9
V  [libjvm.dylib+0x10ee85b]  VMError::report_and_die(Thread*, void*, char const*, int, char const*, char const*, __va_list_tag*)+0x3b
V  [libjvm.dylib+0x5d3f4d]  report_vm_error(char const*, int, char const*, char const*, ...)+0xdd
V  [libjvm.dylib+0x75d55b]  void G1ParScanThreadState::write_ref_field_post<narrowOop>(narrowOop*, oop)+0x18b
V  [libjvm.dylib+0x758701]  void G1ParScanThreadState::do_oop_evac<narrowOop>(narrowOop*)+0x2b1
V  [libjvm.dylib+0x758d9b]  G1ParScanThreadState::steal_and_trim_queue(GenericTaskQueueSet<OverflowTaskQueue<ScannerTask, (MEMFLAGS)5, 131072u>, (MEMFLAGS)5>*)+0x9b
V  [libjvm.dylib+0x79b5cc]  G1ParEvacuateFollowersClosure::do_void()+0x12c
V  [libjvm.dylib+0x79b378]  G1EvacuateRegionsBaseTask::evacuate_live_objects(G1ParScanThreadState*, unsigned int, G1GCPhaseTimes::GCParPhases, G1GCPhaseTimes::GCParPhases)+0x98
V  [libjvm.dylib+0x79b0d2]  G1EvacuateRegionsBaseTask::work(unsigned int)+0xa2
V  [libjvm.dylib+0x1149581]  WorkerThread::run()+0x71
V  [libjvm.dylib+0x1042f57]  Thread::call_run()+0x177
V  [libjvm.dylib+0xe12ca0]  thread_native_entry(Thread*)+0x150
C  [libsystem_pthread.dylib+0x68fc]  _pthread_start+0xe0
C  [libsystem_pthread.dylib+0x2443]  thread_start+0xf
;;;","2021-10-14 14:20;dcubed;Here's the stack trace for the jdk-18+20-1183-tier5 sighting:

---------------  T H R E A D  ---------------

Current thread (0x000001ff3d23d870):  GCTaskThread ""GC Thread#5"" [stack: 0x0000006b6f700000,0x0000006b6f800000] [id=69596]

Stack: [0x0000006b6f700000,0x0000006b6f800000]
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [jvm.dll+0xadab01]  os::platform_print_native_stack+0xf1  (os_windows_x86.cpp:235)
V  [jvm.dll+0xcf7f1e]  VMError::report+0x101e  (vmError.cpp:828)
V  [jvm.dll+0xcf991e]  VMError::report_and_die+0x7fe  (vmError.cpp:1656)
V  [jvm.dll+0xcfa0a4]  VMError::report_and_die+0x64  (vmError.cpp:1437)
V  [jvm.dll+0x4cda57]  report_vm_error+0xb7  (debug.cpp:282)
V  [jvm.dll+0x5e90c4]  G1ParScanThreadState::do_oop_evac<enum narrowOop>+0x3b4  (g1ParScanThreadState.cpp:214)
V  [jvm.dll+0x5ee65e]  G1ParScanThreadState::trim_queue_to_threshold+0x1ae  (g1ParScanThreadState.cpp:310)
V  [jvm.dll+0x5ee3b7]  G1ParScanThreadState::steal_and_trim_queue+0x57  (g1ParScanThreadState.cpp:320)
V  [jvm.dll+0x60eb4a]  G1ParEvacuateFollowersClosure::do_void+0x16a  (g1YoungCollector.cpp:620)
V  [jvm.dll+0x60f497]  G1EvacuateRegionsBaseTask::evacuate_live_objects+0x97  (g1YoungCollector.cpp:646)
V  [jvm.dll+0x60f5f5]  G1EvacuateRegionsTask::evacuate_live_objects+0x25  (g1YoungCollector.cpp:713)
V  [jvm.dll+0x610661]  G1EvacuateRegionsBaseTask::work+0x71  (g1YoungCollector.cpp:695)
V  [jvm.dll+0xd3dd5a]  GangWorker::loop+0x8a  (workgroup.cpp:239)
V  [jvm.dll+0xd3ddfd]  GangWorker::run+0x1d  (workgroup.cpp:206)
V  [jvm.dll+0xc78f74]  Thread::call_run+0x1b4  (thread.cpp:365)
V  [jvm.dll+0xad94be]  thread_native_entry+0xae  (os_windows.cpp:544)
C  [ucrtbase.dll+0x1fb80]
C  [KERNEL32.DLL+0x84d4]
C  [ntdll.dll+0x51781];;;","2021-10-15 02:43;tschatzl;Looking at some internally reproduced crash:

p = 0x8441430c
obj = {_o = 0x9e3c9800}

region(p) = 421
| 421|0x000000009e300000, 0x000000009e400000, 0x000000009e400000|100%| O|  |TAMS 0x000000009e300000, 0x000000009e300000| Untracked 

(not in cset, verified)

$ x/20x obj._o
0x9e3c9800:	0x9e3c9801	0x00000000	0x00001e90	0x00000005
0x9e3c9810:	0x32ce8d46	0x3fe15beb	0xc979d300	0x3f6bb0bf
0x9e3c9820:	0x129e0829	0x3fe98775	0xa511e698	0x3fd02670
0x9e3c9830:	0x00000000	0x00000000	0x00000000	0x00000000
0x9e3c9840:	0x00000000	0x00000000	0x00000000	0x00000000

i.e. the object is locked (0x9e3c980*1*)

  assert(dest_attr.is_in_cset() == (obj->forwardee() == obj),

false == (0x9e3c9801 & ~3  == 0x9e3c9800)
false == true -> assertion failure

The problem is that we assume that whatever forwardee() returns is actually a valid forwarding pointer.;;;","2021-10-15 03:10;tschatzl;Reproduction rate is ~0.15% (3 out of 2000) with ArrayJuggle28/29.;;;","2021-10-16 04:07;roboduke;Changeset: bfcf6a29
Author:    Thomas Schatzl <tschatzl@openjdk.org>
Date:      2021-10-16 11:05:48 +0000
URL:       https://git.openjdk.java.net/jdk/commit/bfcf6a29a16bc12d77a897fbec304868957c3188
;;;",,,,,,,,,,,,,,,
"[lworld] C2 compilation fails with assert ""adr_type for memory phis only""",JDK-8275276,5060387,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,thartmann,thartmann,thartmann,2021-10-14 02:58,2021-10-14 22:58,2023-10-01 09:57,2021-10-14 22:58,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,c2,lw3,lworld,,,,,,,,,,,,,,"# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (/oracle/valhalla/open/src/hotspot/share/opto/cfgnode.cpp:1079), pid=495670, tid=495678
#  assert((_type == Type::MEMORY) == (_adr_type != __null)) failed: adr_type for memory phis only
#
# JRE version: Java(TM) SE Runtime Environment (18.0) (fastdebug build 18-lworld3ea+0-2021-10-13-0555356.tobias...)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (fastdebug 18-lworld3ea+0-2021-10-13-0555356.tobias..., compiled mode, compressed oops, compressed class ptrs, serial gc, linux-amd64)
# Problematic frame:
# V  [libjvm.so+0x89c1c9]  PhiNode::verify_adr_type(bool) const [clone .part.0]+0x59
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2unqj:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
java/nio/channels tests needing large heap sizes fail on x86_32,JDK-8275265,5060376,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,jiefu,jiefu,jiefu,2021-10-14 00:08,2022-04-25 10:56,2023-10-01 09:57,2021-10-14 16:13,18,,,,,,,,,,,,,18,core-libs,,0,tencent-interest,ursqe-triaged,,,,,,,,,,,,,,,"
java/nio/channels/FileChannel/LargeGatheringWrite.java
```
STDERR:
Invalid maximum heap size: -Xmx4G
The specified size exceeds the maximum representable size.
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.
```

java/nio/channels/Channels/ReadXBytes.java
```
STDERR:
Invalid maximum heap size: -Xmx8G
The specified size exceeds the maximum representable size.
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.
```",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8274548,JDK-8268435,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uno3:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,Verified,,"2021-10-14 16:13;roboduke;Changeset: 9623d5bb
Author:    Jie Fu <jiefu@openjdk.org>
Date:      2021-10-14 23:12:56 +0000
URL:       https://git.openjdk.java.net/jdk/commit/9623d5bb46d14018a2b777fb7ffed6c66d912c84
;;;","2022-04-25 10:56;sqetools;verified;;;",,,,,,,,,,,,,,,,,,,
[BACKOUT] AArch64: Implement string_compare intrinsic in SVE,JDK-8275262,5060373,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,ngasson,ngasson,ngasson,2021-10-13 23:29,2022-02-04 08:08,2023-10-01 09:57,2021-10-14 02:37,18,,,,,,,,,,,,,18,hotspot,,0,aarch64-related,oracle-triage-11,oracle-triage-17,oracle-triage-18,,,,,,,,,,,,,Causes some strange errors in Oracle's CI.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275263,,,,,,,JDK-8269559,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aarch64,,,,,,,,,,,,,,,,,,,"0|i2unnf:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-14 02:37;roboduke;Changeset: 333c4692
Author:    Nick Gasson <ngasson@openjdk.org>
Date:      2021-10-14 09:35:48 +0000
URL:       https://git.openjdk.java.net/jdk/commit/333c4692d898d582fe162cc9621acd3e1c242d67
;;;",,,,,,,,,,,,,,,,,,,,
Unused ArrayList is created in RequestEngine.addHooks,JDK-8275241,5060348,Bug,Resolved,JDK,JDK,software,duke,,,P5,Fixed,aturbanov,aturbanov,aturbanov,2021-10-13 11:40,2021-12-01 17:45,2023-10-01 09:57,2021-11-29 02:51,17,18,,,,,,,,,,,,18,hotspot,,0,,,,,,,,,,,,,,,,,"Local ArrayList<RequestHook> is created in the method RequestEngine.addHooks. Elements are added to it, but then content is unused. Seems leftovers from some refactoring.

    static void addHooks(List<RequestHook> newEntries) {
        List<RequestHook> addEntries = new ArrayList<>();
        for (RequestHook rh : newEntries) {
            rh.type.setEventHook(true);
            addEntries.add(rh);
            logHook(""Added"", rh.type);
        }
        entries.addAll(newEntries);
    }

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2unhv:",9223372036854775807,b26,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2021-11-29 02:51;roboduke;Changeset: 37de4422
Author:    Andrey Turbanov <turbanoff@gmail.com>
Committer: Erik Gahlin <egahlin@openjdk.org>
Date:      2021-11-29 10:50:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/37de442269e8c14e0a112e26a8cbb63e12dec9e7
;;;",,,,,,,,,,,,,,,,,,,,
Incorrect line number reported in exception stack trace thrown from a lambda expression,JDK-8275233,5060337,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,cushon,dfuchs,dfuchs,2021-10-13 09:51,2023-07-04 23:37,2023-10-01 09:57,2021-12-07 10:46,11,13,15,17,,,,,,,,,,18,tools,,0,amazon-interest,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,,,,,,,,,,,,"Consider the following class:
================================================
import java.util.stream.LongStream;

public class TestLambdas {
    public static void main(String[] args) {
        new TestLambdas().execute(0, 5);
    }

    public boolean assertLong(long l, long forbidden) {
        if (l == forbidden) {
            throw new AssertionError(forbidden);
        }
        return true;
    }

    public boolean assertLong2(long l, long forbidden) {
        if (l == forbidden) {
            throw new AssertionError(forbidden);
        }
        return true;
    }

    public void execute(long first, long last) {
        for (int i = 0; i < 1000; i++) {
            long forbidden = 4 + i;
            System.out.println(""first"");
            LongStream.range(first, 4).forEachOrdered((l) ->
                    assertLong(l, forbidden)
            );
            System.out.println(""Second"");
            LongStream.range(first, last).forEachOrdered((l) ->
                    assertLong(l, forbidden)
            );
            System.out.println(""Done"");
        }
    }
}
================================================
An exception should be raised by the second lambda invocation, at line 31. 

But the exception that gets printed says that it happened at line 27, which is not possible:

Exception in thread ""main"" java.lang.AssertionError: 4
	at TestLambdas.assertLong(TestLambdas.java:10)
	at TestLambdas.lambda$execute$0(TestLambdas.java:27)
	at java.base/java.util.stream.Streams$RangeLongSpliterator.forEachRemaining(Streams.java:228)
	at java.base/java.util.stream.LongPipeline$Head.forEachOrdered(LongPipeline.java:610)
	at TestLambdas.execute(TestLambdas.java:30)
	at TestLambdas.main(TestLambdas.java:5)

If run in the IDE instead the same code reports the correct location:

Exception in thread ""main"" java.lang.AssertionError: 4
	at TestLambdas.assertLong(TestLambdas.java:10)
	at TestLambdas.lambda$execute$1(TestLambdas.java:31)
	at java.base/java.util.stream.Streams$RangeLongSpliterator.forEachRemaining(Streams.java:228)
	at java.base/java.util.stream.LongPipeline$Head.forEachOrdered(LongPipeline.java:610)
	at TestLambdas.execute(TestLambdas.java:30)
	at TestLambdas.main(TestLambdas.java:5)
",,,,,,,,,,JDK-8278691,JDK-8308925,JDK-8308649,JDK-8310247,JDK-8310248,JDK-8311422,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8200301,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2unff:",9223372036854775807,b27,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4dca67bd,,,,,,,,,"2021-10-13 09:54;dfuchs;If you change one of the two lambdas to use `assertLong2` (does not matter which - as long as only one of them is changed) then the correct location is printed in the stack trace.;;;","2021-10-13 09:57;prappo;Generating debugging info when compiling (javac -g) seems to eliminate the problem.;;;","2021-10-13 09:59;prappo;> If run in the IDE instead the same code reports the correct location
If you use IntelliJ IDEA, then you might be benefiting from it generating debugging info by default.;;;","2021-10-13 12:27;jlahoda;Most likely a consequence of lambda deduplication:
https://bugs.openjdk.java.net/browse/JDK-8200301
;;;","2021-10-21 12:51;cushon;I agree this is a result of lambda deduplication. There was some discussion of the implications for debug info at the time: https://mail.openjdk.java.net/pipermail/amber-dev/2018-March/002745.html. One of the ideas for future work was to allow associating multiple LNTs with a method, and somehow indicating which one should be used for a particular lambda callsite.;;;","2021-12-06 21:44;cushon;> There was some discussion of the implications for debug info at the time

Looking more closely at this, the original change was supposed to disable the optimization when line debug info was present, but there was a bug in the handling of -g flags. I mailed a fix.;;;","2021-12-07 10:46;roboduke;Changeset: d7c283a0
Author:    Liam Miller-Cushon <cushon@openjdk.org>
Date:      2021-12-07 18:44:39 +0000
URL:       https://git.openjdk.java.net/jdk/commit/d7c283a081c37bfb8bc5934e4b2af16cad512fd2
;;;","2022-09-20 23:22;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/702
Date: 2022-09-21 06:15:00 +0000;;;","2022-09-21 00:36;apavlyutkin;Fix request (17u)

The patch fixes incorrect javac -g flag processing. The issue was introduced by JDK-8200301. It prevents proper debug info generation for labmdas, in particular it causes wrong line numbers in stack trace on throwing an exception from a labmda fucntion.

The original patch applied cleanly

Verification (amd64/20.04LTS): test/langtools/tools/javac/lambda/deduplication/DeduplicationDebugInfo.java (new test)
Regression (amd64/20.04LTS): test/langtools;;;","2023-05-19 03:12;shade;Alexey, do you still want this in 17u? The tag is incorrect, should be `jdk17u-fix-request`, with the `u`.;;;","2023-05-19 03:13;apavlyutkin;Oh, thank you. Fixed;;;","2023-05-25 08:23;apavlyutkin;Fix request (11u)

The patch fixes incorrect javac -g flag processing. The issue was introduced by JDK-8200301. It prevents proper debug info generation for labmdas, in particular it causes wrong line numbers in stack trace on throwing an exception from a labmda fucntion.

The original patch applied cleanly

Verification (amd64/20.04LTS): test/langtools/tools/javac/lambda/deduplication/DeduplicationDebugInfo.java (new test)
Regression (amd64/20.04LTS): test/langtools;;;","2023-05-25 08:25;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1904
Date: 2023-05-25 15:17:20 +0000;;;",,,,,,,,
Bogus warning generated for serializable records,JDK-8275199,5060252,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,jjg,webbuggrp,webbuggrp,2021-10-12 12:24,2022-03-09 05:06,2023-10-01 09:57,2021-11-08 11:14,15.0.2,17,18,,,,,,,,,,,18,tools,,0,dcsad,regression,reproducer-yes,webbug,,,,,,,,,,,,,"A DESCRIPTION OF THE PROBLEM :
When a record implements an interface, javadoc issues bogus warnings.

STEPS TO FOLLOW TO REPRODUCE THE PROBLEM :
Run javadoc for the class below (simply ""javadoc Point.java"")


EXPECTED VERSUS ACTUAL BEHAVIOR :
EXPECTED -
No warnings.
ACTUAL -
Two warnings:
Point.java:7: warning: no comment
public record Point(double x, double y) implements java.io.Serializable {
                           ^
Point.java:7: warning: no comment
public record Point(double x, double y) implements java.io.Serializable {

---------- BEGIN SOURCE ----------
/**
 * Comment.
 * 
 * @param x comment
 * @param y comment
 */
public record Point(double x, double y) implements java.io.Serializable {
}
---------- END SOURCE ----------

FREQUENCY : always


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275784,,,,,,,,,,,,,,,JDK-8275192,,,,,,,,,,"2021-10-13 00:32;adev;Test.java;https://bugs.openjdk.org/secure/attachment/96715/Test.java",,,,,,,,generic,,,,,,,,,,b07,15.0.2,,generic,,,,,,"0|i2umwj:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7900061a,,,,,,,,,"2021-10-13 00:28;adev;Reproducible since JDK 15.
Following is my observation:
1. JDK 14 - pass
2. JDK 15-ea+1-2 - pass
3. JDK 15.0.2+7-27 - warning is generated
4. JDK 15 b36 - warning is generated
5. JDK 17- warning is generated
6. JDK 18- warning is generated;;;","2021-10-21 13:14;jjg;Unlike JDK-8275192, this issue is worth investigating. It is probable that the issue comes from the generated private fields, which should be taken into account when reporting missing comments.

Effectively, the `@param` comments should be treated as if they also applied to the private fields of the record.;;;","2021-10-21 13:39;jjg;The issue is specific to records that implement Serializable, not any interface.

This is covered by 1.13 Serialization of Records
https://docs.oracle.com/en/java/javase/17/docs/specs/serialization/serial-arch.html#serialization-of-records

javadoc should not attempt to document the fields of a serializable record. When that is fixed, the warnings will go away.;;;","2021-10-21 13:40;jjg;If you wish to investigate warnings when records implement other interfaces, please provide additional examples.;;;","2021-10-22 03:34;adev;The warning is generated with a compact constructor that does not use Serializable. An example is at https://bugs.openjdk.java.net/browse/JDK-8275784;;;","2021-11-08 11:14;roboduke;Changeset: e383d263
Author:    Jonathan Gibbons <jjg@openjdk.org>
Date:      2021-11-08 19:13:22 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e383d263610c7b4d4be2dce599a9043b8f76cd64
;;;",,,,,,,,,,,,,,,
[lworld] Revisit use of TypePtr::meet_aryptr() after merge,JDK-8275195,5060294,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,roland,roland,roland,2021-10-13 00:16,2021-10-18 04:09,2023-10-01 09:57,2021-10-18 04:09,repo-valhalla,,,,,,,,,,,,,repo-valhalla,hotspot,,0,c2,lw3,lworld,,,,,,,,,,,,,,"FIXME here:

https://github.com/openjdk/valhalla/blob/lworld/src/hotspot/share/opto/type.cpp#L6230

needs to be addressed",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2un5v:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
testlibrary_tests/ir_framework/tests/TestCheckedTests.java fails after JDK-8274911,JDK-8275173,5060272,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,aharadigopal,jiefu,jiefu,2021-10-12 16:54,2023-06-29 23:55,2023-10-01 09:57,2021-10-13 07:30,17,18,,,,,,,,,,,,18,hotspot,,0,ir-framework,jdk17u-fix-request,jdk17u-fix-yes,noreg-self,oracle-triage-18,tencent-interest,tier5,,,,,,,,,,"/home/jdk/test/hotspot/jtreg/testlibrary_tests/ir_framework/tests/TestCheckedTests.java:47: error: method shouldHaveThrownException in class Utils cannot be applied to given types;
            Utils.shouldHaveThrownException();
                 ^
  required: String
  found:    no arguments
  reason: actual and formal argument lists differ in length
/home/jdk/test/hotspot/jtreg/testlibrary_tests/ir_framework/tests/TestCheckedTests.java:58: error: method shouldHaveThrownException in class Utils cannot be applied to given types;
            Utils.shouldHaveThrownException();
                 ^
  required: String
  found:    no arguments
  reason: actual and formal argument lists differ in length",,,,,,,,,,JDK-8299406,JDK-8296873,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8296852,,,,,,,,,,,,,,JDK-8274911,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2un0z:",9223372036854775807,b19,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-12 17:02;jiefu;Suggested fix:
```
diff --git a/test/hotspot/jtreg/testlibrary_tests/ir_framework/tests/TestCheckedTests.java b/test/hotspot/jtreg/testlibrary_tests/ir_framework/tests/TestCheckedTests.java
index b6e28cb3bea..6a8d5c50c6a 100644
--- a/test/hotspot/jtreg/testlibrary_tests/ir_framework/tests/TestCheckedTests.java
+++ b/test/hotspot/jtreg/testlibrary_tests/ir_framework/tests/TestCheckedTests.java
@@ -26,6 +26,8 @@ package ir_framework.tests;
 import compiler.lib.ir_framework.*;
 import compiler.lib.ir_framework.driver.IRViolationException;
 import compiler.lib.ir_framework.driver.TestVMException;
+import java.io.ByteArrayOutputStream;
+import java.io.PrintStream;
 import jdk.test.lib.Asserts;
 
 /*
@@ -41,11 +43,17 @@ public class TestCheckedTests {
     public int iFld;
 
     public static void main(String[] args) {
+        ByteArrayOutputStream baos = new ByteArrayOutputStream();
+        PrintStream ps = new PrintStream(baos);
+        PrintStream oldOut = System.out;
+        System.setOut(ps);
+
         TestFramework.run();
         try {
             TestFramework.run(BadIRAndRuntimeCheckedTests.class);
-            Utils.shouldHaveThrownException();
+            Utils.shouldHaveThrownException(baos.toString());
         } catch (TestVMException e) {
+            System.setOut(oldOut);
             Asserts.assertTrue(e.getExceptionInfo().contains(""Test Failures (2)""));
             Asserts.assertTrue(e.getExceptionInfo().contains(""checkTestBad3""));
             Asserts.assertTrue(e.getExceptionInfo().contains(""checkTestBad5""));
@@ -53,10 +61,12 @@ public class TestCheckedTests {
             Asserts.assertFalse(e.getExceptionInfo().contains(""Failed IR Rules""));
         }
 
+        System.setOut(ps);
         try {
             TestFramework.run(BadIRCheckedTests.class);
-            Utils.shouldHaveThrownException();
+            Utils.shouldHaveThrownException(baos.toString());
         } catch (IRViolationException e) {
+            System.setOut(oldOut);
             Asserts.assertTrue(e.getExceptionInfo().contains(""Failed IR Rules (3)""));
         }
     }
```;;;","2021-10-12 23:41;chagedorn;ILW = Test cannot be compiled/run due to changes in used library method, single test always triggered, no workaround = MMH = P3;;;","2021-10-13 07:30;roboduke;Changeset: 451a2965
Author:    Jie Fu <jiefu@openjdk.org>
Date:      2021-10-13 14:30:11 +0000
URL:       https://git.openjdk.java.net/jdk/commit/451a296510994ff9fe1e0381900ffa9a8a1caa54
;;;","2021-10-13 16:05;dcubed;I was trying to figure how out a compilation failure made it all the way
out to Tier5 before logging a failure... Apparently the test:

testlibrary_tests/ir_framework/tests/TestCheckedTests.java

isn't executed in Tier[1-4]. Don't know if that's intentional or not,
but that means changes to that test (and probably dependent
libraries) have to be tested with Mach5 Tier5 specifically. GHA
only runs the equivalent of Tier1 and obviously Mach5 Tier[1-4]
won't do either.

It looks like:

JDK-8274911 testlibrary_tests/ir_framework/tests/TestIRMatching.java fails with ""java.lang.RuntimeException: Should have thrown exception""

was tested with Tier1 and Tier5 so I'm confused.;;;","2021-10-13 21:18;dholmes;[~dcubed] I share your confusion. I also investigated and cannot figure out why the preintegration testing with tier5 actually failed to run the test in question! If you look at the test history none of Christian's jobs show up for October 11.;;;","2021-10-13 23:53;chagedorn;Yes, I always test tier5 when modifying anything related to the IR framework. Running the IR framework internal tests in tier5 only was a trade-off decision between the confidence of frequent testing vs. usage of actually doing so given that the framework will not change that often. 

Here the problem was simply that I integrated JDK-8273410 (edit) but forgot to update my local repo afterwards when fixing this issue and when running tests for this fix - a silly mistake. I mentioned it in the review. I'm sorry for all the trouble!;;;","2021-10-14 00:03;dholmes;[~chagedorn] are you saying that when you fixed JDK-8274911 your local repo was missing the test file TestCheckedTests.java ?

Edit: I can see from your source bundle that was indeed the case. Trying to think if there is anything we can do to help prevent oversights like this from happening ... I guess in some sense it was just bad luck that your fix did not depend on any of the missing changes, yet part of the missing changes had a dependency on your fix.;;;","2021-10-14 00:36;chagedorn;[~dholmes] I mixed the JBS number up, I've meant JDK-8273410 (which added TestCheckedTests.java) in the comment above. 

In summary: I branched JDK-8273410 from master just before the integration of JDK-8273410. A few days later, when starting to work on JDK-8274911, which was a completely different issue, I branched again from the same state of the master branch which has not contained JDK-8273410 and the test, yet. So, the mistake was that I missed the dependency to JDK-8273410 when fixing JDK-8274911. As you said, it was kinda bad luck having this reverse dependency of otherwise unrelated changes. I'm not sure if this could have been prevented apart from just syncing the repos more often.;;;","2021-10-14 08:14;dcubed;[~chagedorn] - Thanks for clearing up the mystery.;;;","2022-12-27 03:57;goetz;Fix request [17u]

I backport this for parity with 17.0.7-oracle. Required follow up of 8273410.
No risk, only a test change.
Clean backport.
Test passes.  SAP nightly testing passed.;;;","2022-12-27 09:29;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/989
Date: 2022-12-27 11:56:55 +0000;;;",,,,,,,,,,
Some jtreg sound tests should be marked with sound keyword,JDK-8275170,5060269,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,prr,prr,prr,2021-10-12 16:03,2022-09-28 00:15,2023-10-01 09:57,2022-05-24 10:57,17,18,,,,,,,,,,,,19,client-libs,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,testbug,,,,,,,,,,,,"The javax.sound jtreg tests do not have the headful keyword so are eligible to be run on systems where the test environment may be a daemon thread without access to sound devices, or the even there may be no sound devices in a VM.

It appears that the result is that tests are bailing and reporting a pass in such situations eg this run of javax/sound/midi/Synthesizer/AsynchronousMidiChannel.java on a Windows VM : 
====

command: main AsynchronousMidiChannel
reason: Assumed action based on file name: run main AsynchronousMidiChannel 
Mode: othervm
Additional options from @modules: --add-modules java.desktop
elapsed time (seconds): 0.752
----------configuration:(3/43)----------
Boot Layer
  add modules: java.desktop

----------System.out:(2/74)----------
Got synth: com.sun.media.sound.SoftSynthesizer@767f90bd
could not test.
----------System.err:(2/115)----------
MidiUnavailableException was thrown: javax.sound.midi.MidiUnavailableException: Can not open line
STATUS:Passed.

===

There needs to be a (tedious) audit of these tests to see which ones need 
 @key headful
which would mean ""this test actually needs the sound device"" just like many UI tests really need a framebuffer, since the resources are ""usually"" equivalent
I think
@ key sound
would be useful too even if we don't use it (yet) just to be available.
The sound tests are neatly partioned into the javax/sound directory so it could be argued it is implied but it would still be better to have it explicit because we could also have a VM situation where we have a virtual framebuffer but no virtual sound ",,,,,,,,,,JDK-8294501,JDK-8292242,JDK-8292243,JDK-8292273,JDK-8294497,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2un0b:",9223372036854775807,b24,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@7d98911c,,,,,,,,,"2021-10-22 12:05;prr;Comment copied from the PR to resolve this : 

The jtreg javax.sound tests are written in such a way that if a needed audio device
or other platform resource is not available, they just exit with a ""pass"" for the test.
It is as if headful tests just swallowed HeadlessException and issued a pass.
If we allowed that we'd be effectively testing almost nothing of real importance.

Currently almost  all sound tests have no keyword like ""headful"" to indicate they
may need access to a hardware resource to do anything useful so a similar
situation arises there except when someone runs those tests manually on
a local system which has audio devices.

Of course ""headful"" and ""audio device"" aren't exactly interchangeable terms
but if tests are allowed to be run - or worse usually or always run - in a situation
where they potentially are on a system without an audio device (a headless VM) or are running in
a session which doesn't have full desktop access - which may in some
cases be how audio device access is granted, then they are more likely
to be running in this scenario where the testing isn't valid.

Another point is that headful tests must be run one at a time - no concurrency because
you can't have multiple tests moving the mouse at the same time
Whereas for headless tests, a test harness may choose to run concurrently - perhaps even in the same VM
When tests that really need access to an audio device are run it is probably safer to consider
the headful attribute as implying one test at a time is best .. granted on a desktop it isn't
usual for a single app to be able to monopolize access to a speaker, but for input devices
that is what you'd generally expect.

By no means am I sure that the tests being updated here are the full set that need tagging.
There are a lot of tests and they are all known to pass on systems with NO audio
devices, so the search has been for tests which call APIs which will definitely
need access to some device in order to do anything useful.
So likely there are more to be added - either by a reviewer pointing them out or by later discovery.
Alternatively we could mark ALL sound tests headful .. but given where we are starting from
that might be erring unnecessarily far in the opposite direction.

By adding both headful and sound keywords it gives options to someone who
wants to identify the tests and perhaps run just tests which need ""sound"" on some
config they know supports audio but isn't headful. ;;;","2022-05-24 10:57;dukebot;Changeset: 25669bb6
Author:    Phil Race <prr@openjdk.org>
Date:      2022-05-24 17:53:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/25669bb667466b3cc814f8f08d4e3a2982a4cf2e
;;;","2022-09-26 03:11;goetz;Fix request [11u, 17u]

I backport this for parity with 11.0.18-oracle, 17.0.6-oracle.
No risk, only a test change.
Clean backport.
Testing pointless. SAP nighlty testing passed.;;;","2022-09-26 03:22;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk17u-dev/pull/736
Date: 2022-09-26 10:13:18 +0000;;;","2022-09-26 03:49;roboduke;A pull request was submitted for review.
URL: https://git.openjdk.org/jdk11u-dev/pull/1371
Date: 2022-09-26 10:41:41 +0000;;;",,,,,,,,,,,,,,,,
Deflater::deflate methods omit javadoc for ReadOnlyBufferException,JDK-8275163,5060260,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,lancea,lancea,lancea,2021-10-12 13:54,2021-10-20 17:32,2023-10-01 09:57,2021-10-15 13:39,,,,,,,,,,,,,,18,core-libs,,0,noreg-doc,,,,,,,,,,,,,,,,"JDK-6341887 introduced new Deflater::deflate methods which can throw  ReadOnlyBufferException.

The javadoc for these new methods do not indicate that ReadOnlyBufferException may be thrown.",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275164,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2umyb:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@62714d2c,,,,,,,,,"2021-10-15 13:39;roboduke;Changeset: 831802dd
Author:    Lance Andersen <lancea@openjdk.org>
Date:      2021-10-15 20:38:43 +0000
URL:       https://git.openjdk.java.net/jdk/commit/831802ddb103f8f9747a9fb139af8365924da801
;;;",,,,,,,,,,,,,,,,,,,,
URLClassLoaderTable should store OopHandle instead of Handle,JDK-8275150,5060238,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,ccheung,ccheung,ccheung,2021-10-12 10:58,2021-10-25 17:14,2023-10-01 09:57,2021-10-18 11:07,18,,,,,,,,,,,,,18,hotspot,,0,cds,cds-custom-loader,,,,,,,,,,,,,,,"Currently the URLClassLoaderTable in unregisteredClasses.cpp is defined as follows:

class URLClassLoaderTable : public ResourceHashtable<
  Symbol*, Handle,
  137, // prime number
  ResourceObj::C_HEAP> {};

It should store OopHandle instead of Handle to avoid running into the same issue as in JDK-8274753.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8261941,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2umtf:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-18 11:07;roboduke;Changeset: bad75e67
Author:    Calvin Cheung <ccheung@openjdk.org>
Date:      2021-10-18 18:05:39 +0000
URL:       https://git.openjdk.java.net/jdk/commit/bad75e6796aa7940a9418e317021242ba11d8d50
;;;",,,,,,,,,,,,,,,,,,,,
(ch) ReadableByteChannel returned by Channels.newChannel(InputStream) throws ReadOnlyBufferException,JDK-8275149,5060237,Bug,Closed,JDK,JDK,software,duke,,,P4,Fixed,bpb,bpb,bpb,2021-10-12 10:43,2022-04-08 03:44,2023-10-01 09:57,2021-10-15 15:59,18,,,,,,,,,,,,,18,core-libs,,0,release-note=yes,,,,,,,,,,,,,,,,"Such a ReadableByteChannel should throw an IllegalArgumentException. This may be demonstrated by modifying java/nio/channels/Channels/Basic.java as:

@@ -296,6 +296,12 @@ public class Basic {
         byte data[] = new byte[messageSize+1];
         ByteBuffer bb = ByteBuffer.wrap(data);
 
+        try {
+            rbc.read(bb.asReadOnlyBuffer());
+        } catch (IllegalArgumentException expected) {
+            // ignore it
+        }
+
         int bytesRead = 0;
         int totalRead = 0;
         while (bytesRead != -1) {
",,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8275183,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2umt7:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@674604a9,,,,,,,Verified,,"2021-10-15 15:59;roboduke;Changeset: 7fc3a8d0
Author:    Brian Burkhalter <bpb@openjdk.org>
Date:      2021-10-15 22:58:21 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7fc3a8d052bfb8d31fedec56f72b10a40ba7bf83
;;;","2022-04-08 03:44;sqetools;verified;;;",,,,,,,,,,,,,,,,,,,
file.encoding system property has an incorrect value on Windows,JDK-8275145,5060232,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,naoto,mchung,mchung,2021-10-12 10:03,2021-10-22 17:50,2023-10-01 09:57,2021-10-15 13:38,12,,,,,,,,,,,,,18,core-libs,,0,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,noreg-hard,regression,,,,,,,,,,,,"https://mail.openjdk.java.net/pipermail/core-libs-dev/2021-October/082387.html

The `file.encoding` system property should be set to sprops->sun_jnu_encoding for platforms except MacOS but a regression introduced in JDK-4947890 that set its value to sprops->encoding instead.

#ifdef MACOSX
        /*
         * Since sun_jnu_encoding is now hard-coded to UTF-8 on Mac, we don't
         * want to use it to overwrite file.encoding
         */
        PUTPROP(props, ""file.encoding"", sprops->encoding);
#else
        PUTPROP(props, ""file.encoding"", sprops->sun_jnu_encoding);
#endif",,,,,,,,,,JDK-8275379,,,,,,,,,,,,,,,,,,JDK-8275309,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-4947890,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,windows,,,,,,"0|i2ums3:",9223372036854775807,b20,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5f132e58,,,,,,,,,"2021-10-13 01:45;alanb;This issue may not be applicable to JDK 18 as file.encoding will be UTF-8 and the JDK-internal/undocumented sun.jnu.encoding will be the same as before.

I checked a Windows Server 2019 system with JDK 11 and JDK 17 and both file.encoding and sun.jnu.encoding are set to Cp1252 as expected. The reported issue seem to be Japanese Windows 10 so I can't easily check.  The mail to core-libs-dev uses the phrase ""working behavior was changed"" but I can't tell if this is an environment where file.encoding has been changed or not.;;;","2021-10-13 01:46;alanb;[~naoto] Would you have cycles to look at this one as this area is fresh in your mind?;;;","2021-10-13 11:10;naoto;My understanding of this issue is that this happens when the system locale and the user locale are not the same ones on Windows. Say, if the system locale is set to `Japanese (Japan)` and the user locale is set to `English (US)`, which I believe the submitter's case, then:

JDK11:
---
file.encoding = MS932
sun_jnu_encoding = MS932
---

JDK17:
---
file.encoding = Cp1252
sun_jnu_encoding =MS932
---;;;","2021-10-13 23:00;itakiguchi;I checked JDK18's file.encoding and sun.jnu.encoding system properties.

Default setting
---
file.encoding = UTF-8
sun.jnu.encoding = MS932
---

With -Dfile.encoding=COMPAT option
---
file.encoding = Cp1252
sun.jnu.encoding = MS932
---;;;","2021-10-13 23:49;alanb;Thanks for the updates. Given that -Dfile.encoding=COMPAT sets encoding based on the user rather than system locale then I assume we will have to make a change in JDK 18 too.;;;","2021-10-15 13:38;roboduke;Changeset: ad9e234f
Author:    Naoto Sato <naoto@openjdk.org>
Date:      2021-10-15 20:36:30 +0000
URL:       https://git.openjdk.java.net/jdk/commit/ad9e234f5ed61635f926618a40f453fe7b6b491f
;;;","2021-10-15 22:16;alanb;This CSR has fixVersion=18 and I think needs to be clarified that it only changes the behaviour in JDK 18 when running with -Dfile.encoding=COMPAT. We really need a CSR for 17u to provide the complete story. I think it might be better to not have a RN for JDK 18, the reason is that the main change in JDK 18 is changing to UTF-8 by default and it would be confusing to say that the compatibility mode has been fixed (as this ""mode"" this does exist in prior releases).  A release note for 17u is important of course.

;;;","2021-10-18 13:53;naoto;Fix request (17u):
Request to include in 17u, applies cleanly, all relevant tests passed.;;;",,,,,,,,,,,,,
WebView: UserAgent string is empty for first request,JDK-8275138,5060224,Bug,Resolved,JDK,JDK,software,duke,,,P2,Fixed,kcr,shadowbug,shadowbug,2021-10-12 07:08,2023-01-19 23:59,2023-10-01 09:57,2021-10-20 06:51,8u291,jfx17,,,,,,,,,,,,jfx18,javafx,,0,8bpr-critical-approved,bugdb_33430613,regression,regression_8259635,sn_103,sn_104,,,,,,,,,,,"JRE upgrades between 18.0.251 and 1.8.0_291 have caused JavaFX WebView User-Agent Agent to no 
longer be valid. If you point the JavaFX WebView to a website and that website's WebService looks at
the request headers for It now returns empty String "" "" as the ""User-Agent"" header.

 It used to be 
  ""Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/610.2 (KHTML, like Gecko) JavaFX/8.0 Safari/610.2""",,,,,,,,,,JDK-8276885,JDK-8275641,JDK-8276740,JDK-8276631,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8270907,JDK-8280061,,,,,,,,,,,,,,,,,,,,,JDK-8193207,JDK-8276697,JDK-8300730,,,,,,,,,,,,,,,,,,,,,,,,,,,8u291,,,,,,,,"0|i2umqb:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5a8b92bd,,,,,,,,,"2021-10-13 04:54;kcr;I can reproduce this with JDK 8u291 and JavaFX 17, both of which have the WebKit 610.2 update, JDK-8259635.;;;","2021-10-13 06:33;kcr;I also note that if you reload the page it works. The user agent string is not correct the first time right after the page is loaded.;;;","2021-10-14 05:10;kcr;The failure was caused by a change that was done in connection with the WebKit 610.2 update, JDK-8259635. The FrameLoaderClient::userAgent method was changed to be a const method in WebKit 610.2, so that method no longer initializes the field that points to the Page structure that contains the user agent string. This means that until some other method is called that initializes the page field, the user agent string will be empty. The fix is simply to initialize that field when the WebPage is created.;;;","2021-10-20 06:51;roboduke;Changeset: d6f78e27
Author:    Kevin Rushforth <kcr@openjdk.org>
Date:      2021-10-20 13:50:05 +0000
URL:       https://git.openjdk.java.net/jfx/commit/d6f78e27a698925f029126b8d62a3e88d4d6f868
;;;",,,,,,,,,,,,,,,,,
Exceptions after a touchpad gesture on macOS,JDK-8275131,5060216,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,dbatrak,dbatrak,dbatrak,2021-10-12 05:16,2021-11-17 01:44,2023-10-01 09:57,2021-10-12 08:37,11.0.12,17,,,,,,,,,,,,18,client-libs,,0,jdk11u-fix-request,jdk11u-fix-yes,jdk17u-fix-request,jdk17u-fix-yes,jnf,,,,,,,,,,,,"With latest JDK version, performing touchpad gestures over a Java application's window causes error messages to be printed to console.
To reproduce, launch the sample program (with source code given below) on a MacBook, and perform a magnification (two-finger pinch) gesture over the
opened window. The following messages appear in console:

2021-10-12 13:52:37.454 java[25747:1001960] Bad JNI lookup handleGestureFromNative
2021-10-12 13:52:37.455 java[25747:1001960] (
	0   libawt_lwawt.dylib                  0x000000010c0110d0 -[AWTWindow_Normal postGesture:as:a:b:] + 944
	1   AppKit                              0x00007fff22f444e8 forwardMethod + 204
	2   AppKit                              0x00007fff22ebb578 -[NSWindow(NSEventRouting) _reallySendEvent:isDelayedEvent:] + 6482
	3   AppKit                              0x00007fff22eb9a06 -[NSWindow(NSEventRouting) sendEvent:] + 347
	4   libawt_lwawt.dylib                  0x000000010c010d07 -[AWTWindow_Normal sendEvent:] + 87
	5   AppKit                              0x00007fff234aa954 routeGestureEvent + 389
	6   AppKit                              0x00007fff22eb8803 -[NSApplication(NSEvent) sendEvent:] + 2895
	7   libosxapp.dylib                     0x0000000105f38765 -[NSApplicationAWT sendEvent:] + 437
	8   AppKit                              0x00007fff23190be1 -[NSApplication _handleEvent:] + 65
	9   AppKit                              0x00007fff22d20c8e -[NSApplication run] + 623
	10  libosxapp.dylib                     0x0000000105f38369 +[NSApplicationAWT runAWTLoopWithApp:] + 169
	11  libawt_lwawt.dylib                  0x000000010c068830 +[AWTStarter starter:headless:] + 496
	12  libosxapp.dylib                     0x0000000105f3a03f +[ThreadUtilities invokeBlockCopy:] + 15
	13  Foundation                          0x00007fff212d8b81 __NSThreadPerformPerform + 204
	14  CoreFoundation                      0x00007fff205292bc __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17
	15  CoreFoundation                      0x00007fff20529224 __CFRunLoopDoSource0 + 180
	16  CoreFoundation                      0x00007fff20528fa4 __CFRunLoopDoSources0 + 242
	17  CoreFoundation                      0x00007fff205279cc __CFRunLoopRun + 893
	18  CoreFoundation                      0x00007fff20526f8c CFRunLoopRunSpecific + 563
	19  libjli.dylib                        0x0000000105a280b2 CreateExecutionEnvironment + 386
	20  libjli.dylib                        0x0000000105a23c15 JLI_Launch + 1413
	21  java                                0x0000000105a11c11 main + 401
	22  libdyld.dylib                       0x00007fff2044cf3d start + 1
)
Exception in thread ""AppKit Thread"" java.lang.NoSuchMethodError: Lcom/apple/eawt/event/GestureHandler;.handleGestureFromNative(Ljava/awt/Window;IDDDD)V

The issue is reproducible for JDK 17 and 11.0.12 versions, but not for 16.0.2 or 11.0.11 versions.

----------- Sample program source code start -----------
import javax.swing.*;

public class JFrameTest {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            JFrame f = new JFrame();
            f.setBounds(300, 300, 300, 300);
            f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
            f.setVisible(true);
        });
    }
}
----------- Sample program source code end -----------
",macOS 11.6,,,,,,,,,JDK-8275365,JDK-8275341,JDK-8275492,JDK-8275505,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,os_x,,,,,,"0|i2umoj:",9223372036854775807,b19,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@5a9b3fd3,,,,,,,,,"2021-10-12 05:19;dbatrak;The issue is a regression after JDK-8257853, caused by DECLARE_METHOD macro being used mistakenly for JNI lookup instead of DECLARE_STATIC_METHOD.
;;;","2021-10-12 08:37;roboduke;Changeset: 89999f70
Author:    Dmitry Batrak <dbatrak@openjdk.org>
Date:      2021-10-12 15:36:41 +0000
URL:       https://git.openjdk.java.net/jdk/commit/89999f70e06b41704c7c5b0f9a19582f90806a10
;;;","2021-10-15 11:34;prr;Fix request comment:
This fixes a JDK 17 regression.
The fix is very low risk and the backport applies cleanly : https://github.com/openjdk/jdk17u/pull/199;;;","2021-10-18 02:25;jdowland;Fix request (11u)

Clean Oracle-parity backport. Fixes a regression. The example program in the JBS description exhibits the unwanted behaviour prior to patch and does not after.

https://github.com/openjdk/jdk11u-dev/pull/531

Thanks;;;","2021-11-17 01:44;fkirmaier;Just for the record - We've been able to run into this error in a JavaFX application, running JDK 17.0.1.;;;",,,,,,,,,,,,,,,,
IR framework does not handle client VM builds correctly,JDK-8275104,5060184,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,chagedorn,chagedorn,chagedorn,2021-10-12 00:49,2021-11-11 07:45,2023-10-01 09:57,2021-10-25 00:26,17,18,,,,,,,,,,,,18,hotspot,,0,ir-framework,jdk17u-fix-request,jdk17u-fix-SQE-ok,jdk17u-fix-yes,oracle-triage-11,oracle-triage-18,,,,,,,,,,,"There are some problems when using the IR framework with a client VM build:
- The IR framework currently only bails out of IR matching if C2 is excluded by command line flags. However, when running an IR JTreg test with a client VM build, IR matching fails when not specifically adding @requires vm.compiler2.enabled to exclude the test.
- @Test and @ForceCompile do not work correctly and throw an exception due to an incompatible compilation level.
- Some internal framework tests fail.",,,,,,,,,,JDK-8276351,JDK-8276131,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2umhf:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-12 00:51;chagedorn;ILW = IR tests can fail if C2 is not available in build, only with client VM, no workaround = MLH = P4;;;","2021-10-25 00:26;roboduke;Changeset: 1da5e6b0
Author:    Christian Hagedorn <chagedorn@openjdk.org>
Date:      2021-10-25 07:25:19 +0000
URL:       https://git.openjdk.java.net/jdk/commit/1da5e6b0e2c284c5dd295a0d48cc1c6c2fecf5b5
;;;","2021-10-26 04:07;aoqi;Fix Request (17u)

The patch applies clean. Low risk, only test changes. The modified test passed on linux-x64.;;;","2021-10-26 04:42;chagedorn;[~aoqi] Strictly speaking, it does not only affect single tests but also the IR framework as part of the test library - but everything related to testing. It should still be low risk. I suggest to run all tests in test/hotspot/jtreg/testlibrary_tests/ir_framework to verify the patch.

Edit: Okay, I missed your description in the review about testing it with all other tests. Should be fine then :-);;;","2021-10-26 07:32;aoqi;[~chagedorn] Thanks for your further description. I should also mention the test results in this fix request:);;;","2021-10-26 08:02;chagedorn;No problem!;;;",,,,,,,,,,,,,,,
compiler/c2/irTests/TestPostParseCallDevirtualization.java fails when compiler1 is disabled,JDK-8275086,5060166,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,sguoyun,sguoyun,sguoyun,2021-10-11 19:12,2021-11-10 17:51,2023-10-01 09:57,2021-11-02 22:53,18,,,,,,,,,,,,,18,hotspot,,0,hs-comp-triaged,noreg-self,oracle-triage-18,,,,,,,,,,,,,,"compiler/c2/irTests/TestPostParseCallDevirtualization.java fail when using --with-jvm-features=-compiler1:

One or more @IR rules failed:

Failed IR Rules (1)
------------------
- Method ""public int compiler.c2.irTests.TestPostParseCallDevirtualization.testMethodHandleCallWithCCP() throws java.lang.Throwable"":
  * @IR rule 1: ""@compiler.lib.ir_framework.IR(failOn={""#PRE#(\\\\d+(\\\\s){2}(CallStaticJava.*)+(\\\\s){2}===.*#IS_REPLACED#)"", ""invokeBasic""}, applyIf={}, applyIfAnd={}, applyIfOr={}, counts={""#PRE#(\\\\d+(\\\\s){2}(CallStaticJava.*)+(\\\\s){2}===.*#IS_REPLACED#)"", ""invokeStatic"", ""= 1""}, applyIfNot={})"" 
    - failOn: Graph contains forbidden nodes:
        Regex 1: (\\d+(\\s){2}(CallStaticJava.*)+(\\s){2}===.*invokeBasic)
        Matched forbidden node:
          280  CallStaticJava  ===  5  6  7  8  1 ( 188  1  1  1  1  1  1 ) [[ 281  282  283  285 ]] # Static  java.lang.invoke.MethodHandle::invokeBasic
    - counts: Graph contains wrong number of nodes:
        Regex 1: (\\d+(\\s){2}(CallStaticJava.*)+(\\s){2}===.*invokeStatic)
        Expected 1 but found 0 nodes.

>>> Check stdout for compilation output of the failed methods
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8276547,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2umdf:",9223372036854775807,b23,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6a4709f4,,,,,,,,,"2021-10-12 00:44;chagedorn;ILW = Test failure with build excluding C1, single test and only when built with --with-jvm-features=-compiler1, no workaround = MLH = P4;;;","2021-11-02 22:53;roboduke;Changeset: 87b926eb
Author:    sunguoyun <sunguoyun@loongson.cn>
Committer: Igor Veresov <iveresov@openjdk.org>
Date:      2021-11-03 05:51:18 +0000
URL:       https://git.openjdk.java.net/jdk/commit/87b926ebb7f1e341da858f7a9892377586abc026
;;;",,,,,,,,,,,,,,,,,,,
CDS warning when building with LOG=debug,JDK-8275084,5060164,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,minqi,iklam,iklam,2021-10-11 17:44,2021-12-20 06:30,2023-10-01 09:57,2021-10-21 11:31,18,,,,,,,,,,,,,18,hotspot,,0,cds,noreg-build,,,,,,,,,,,,,,,"According to [~dholmes]
When I do a slowdebug rebuild I get these:

[2.325s][warning][cds] java.lang.ClassNotFoundException: java.lang.invoke.BoundMethodHandle$Species_LLLLL
[2.325s][warning][cds] Preload Warning: Cannot find java/lang/invoke/BoundMethodHandle$Species_LLLLL
[2.326s][warning][cds] java.lang.ClassNotFoundException: java.lang.invoke.BoundMethodHandle$Species_LJ
[2.326s][warning][cds] Preload Warning: Cannot find java/lang/invoke/BoundMethodHandle$Species_LJ
[2.326s][warning][cds] java.lang.ClassNotFoundException: java.lang.invoke.BoundMethodHandle$Species_LLLLLL
[2.326s][warning][cds] Preload Warning: Cannot find java/lang/invoke/BoundMethodHandle$Species_LLLLLL
[2.327s][warning][cds] java.lang.ClassNotFoundException: java.lang.invoke.BoundMethodHandle$Species_LLLLLLL
[2.327s][warning][cds] Preload Warning: Cannot find java/lang/invoke/BoundMethodHandle$Species_LLLLLLL
[2.340s][warning][cds] java.lang.ClassNotFoundException: java.lang.invoke.BoundMethodHandle$Species_LLLLLLLL",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8279009,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2umcz:",9223372036854775807,b21,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@762b8a4b,,,,,,,,,"2021-10-15 10:29;minqi;@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_D
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_DL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_I
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_IL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_L
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LJ
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LLL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LLLL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LLLLL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LLLLLL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LLLLLLL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LLLLLLLL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LLLLLLLLL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LLLLLLLLLL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LLLLLLLLLLL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LLLLLLLLLLLL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LLLLLLLLLLLLL
@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.SimpleMethodHandle

Those are recorded during interim-image created. We could remove them from archive since we only focus on the functions in 4 Holder classes: java.lang.invoke.Invokers$Holder, java.lang.invoke.LambdaForm$Holder, java.lang.invoke.DirectMethodHandle$Holder and java.lang.invoke.DelegatingMethodHandle$Holder.
;;;","2021-10-18 19:01;iklam;The warning doesn't happen only with an incremental build. It always happens. You just need to specify LOG=debug:

$ git diff
diff --git a/make/GenerateLinkOptData.gmk b/make/GenerateLinkOptData.gmk
index 5dd766c8c07..a61e4608cc8 100644
--- a/make/GenerateLinkOptData.gmk
+++ b/make/GenerateLinkOptData.gmk
@@ -68,10 +68,12 @@ $(CLASSLIST_FILE): $(INTERIM_IMAGE_DIR)/bin/java$(EXECUTABLE_SUFFIX) $(CLASSLIST
        $(FIXPATH) $(INTERIM_IMAGE_DIR)/bin/java -XX:DumpLoadedClassList=$@.raw \
            -Duser.language=en -Duser.country=US \
            -cp $(SUPPORT_OUTPUTDIR)/classlist.jar \
+           -Xlog:class+load=debug:file=/tmp/foo.txt \
            build.tools.classlist.HelloClasslist $(LOG_DEBUG)
        $(GREP) -v HelloClasslist $@.raw > $@.interim
        $(FIXPATH) $(INTERIM_IMAGE_DIR)/bin/java -Xshare:dump \
            -XX:SharedClassListFile=$@.interim -XX:SharedArchiveFile=$@.jsa \
+           -Xlog:class+load=debug:file=/tmp/bar.txt \
            -Xmx128M -Xms128M $(LOG_INFO)
        $(FIXPATH) $(INTERIM_IMAGE_DIR)/bin/java -XX:DumpLoadedClassList=$@.raw.2 \
            -XX:SharedClassListFile=$@.interim -XX:SharedArchiveFile=$@.jsa \


$ make clean
$ make 2>&1 LOG=debug jdk-image | tee log0.txt

$ grep Species_LLLLLLLLLLLLL log0.txt
[0.241s][warning][cds] java.lang.ClassNotFoundException: java.lang.invoke.BoundMethodHandle$Species_LLLLLLLLLLLLL
[0.241s][warning][cds] Preload Warning: Cannot find java/lang/invoke/BoundMethodHandle$Species_LLLLLLLLLLLLL

$ grep Species_LLLLLLLLLLLLL /tmp/foo.txt  
[0.245s][info ][class,load] java.lang.invoke.BoundMethodHandle$Species_LLLLLLLLLLLLL source: _ClassSpecializer_generateConcreteSpeciesCode

$ ./images/jdk/bin/jimage list ./support/interim-image/lib/modules | grep Species_LLLLLLLLLLLLL | wc
      0       0       0

$ ./images/jdk/bin/jimage list images/jdk/lib/modules | grep Species_LLLLLLLLLLLLL
    java/lang/invoke/BoundMethodHandle$Species_LLLLLLLLLLLLL.class

From /tmp/foo.txt, we can see that the interim image doesn't have the Species_LLLLLLLLLLLLL class, but this class was generated by ClassSpecializer, when running this part of GenerateLinkOptData.gmk

	$(FIXPATH) $(INTERIM_IMAGE_DIR)/bin/java -XX:DumpLoadedClassList=$@.raw \
	    -Duser.language=en -Duser.country=US \
	    -cp $(SUPPORT_OUTPUTDIR)/classlist.jar \
	    -Xlog:class+load=debug:file=/tmp/foo.txt \
	    build.tools.classlist.HelloClasslist $(LOG_DEBUG)
	$(GREP) -v HelloClasslist $@.raw > $@.interim;;;","2021-10-18 19:29;iklam;Continuing from the above comment ....

In /tmp/bar.txt (this is from the -Xshare:dump command that generated the warning messages), we are able to load Species_LLLLLLLLLLLLL anyway (with ClassSpecializer).

$ grep Species_LLLLLLLLLLLLL /tmp/bar.txt
[0.786s][info ][class,load] java.lang.invoke.BoundMethodHandle$Species_LLLLLLLLLLLLL source: _ClassSpecializer_generateConcreteSpeciesCode
[0.795s][info ][class,load] java.lang.invoke.BoundMethodHandle$Species_LLLLLLLLLLLLL

$ grep Species_LLLLLLLLLLLLL support/link_opt/classlist.interim 
1018:@lambda-form-invoker [SPECIES_RESOLVE] java.lang.invoke.BoundMethodHandle$Species_LLLLLLLLLLLLL
1019:java/lang/invoke/BoundMethodHandle$Species_LLLLLLLLLLLLL id: 924

Note that in -Xshare:dump, line 1019 is processed before line 1018.

First, the warning is generated by line 1019 (a simple resolution of the Species_LLLLLLLLLLLLL  -- this fails because support/interim-image/lib/modules doesn't contain this class).

Later, when line 1018 is processed, the Species_LLLLLLLLLLLLL class is generated, so we end up having this class in the shared image after all.;;;","2021-10-21 11:31;roboduke;Changeset: 7dd82374
Author:    Yumin Qi <minqi@openjdk.org>
Date:      2021-10-21 18:30:21 +0000
URL:       https://git.openjdk.java.net/jdk/commit/7dd823740f7bfc55f456a5c8c199475cc85dfea3
;;;",,,,,,,,,,,,,,,,,
G1CollectedHeap::expand() returns the wrong value,JDK-8275080,5060159,Bug,Resolved,JDK,JDK,software,duke,,,P5,Fixed,manc,tschatzl,tschatzl,2021-10-11 14:19,2021-11-03 18:02,2023-10-01 09:57,2021-10-30 21:59,18,,,,,,,,,,,,,18,hotspot,,0,gc-g1,starter,,,,,,,,,,,,,,,"G1CollectedHeap::expand() returns

  regions_to_expand > 0

which is true if we wanted to expand; the correct value would be

  expanded_by > 0;

to return if the heap has actually been expanded.

There is no particular impact on this except for some (minimal) extra work done.

Found by Jonathan Joo (http://mail.openjdk.java.net/pipermail/hotspot-gc-dev/2021-October/037149.html)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2umbv:",9223372036854775807,b22,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@6b00f96c,,,,,,,,,"2021-10-11 20:23;manc;Jonathan will work on this and I'll sponsor him.;;;","2021-10-30 21:59;roboduke;Changeset: bf2e9ee9
Author:    Man Cao <manc@openjdk.org>
Date:      2021-10-31 04:58:16 +0000
URL:       https://git.openjdk.java.net/jdk/commit/bf2e9ee9d321ed289466b2410f12ad10504d01a2
;;;",,,,,,,,,,,,,,,,,,,
Cleanup unused code in JFR LeakProfiler,JDK-8275074,5060150,Bug,Resolved,JDK,JDK,software,duke,,,P4,Fixed,rkennke,rkennke,rkennke,2021-10-11 11:51,2021-10-18 12:55,2023-10-01 09:57,2021-10-12 06:17,18,,,,,,,,,,,,,18,hotspot,,0,,,,,,,,,,,,,,,,,While doing some fixes for Lilliput in JFR I noticed a couple of unused code paths. Let's remove them.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,generic,,,,,,,,,,,,,generic,,,,,,"0|i2um9v:",9223372036854775807,b19,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@42995637,,,,,,,,,"2021-10-12 06:17;roboduke;Changeset: e393c5ea
Author:    Roman Kennke <rkennke@openjdk.org>
Date:      2021-10-12 13:16:20 +0000
URL:       https://git.openjdk.java.net/jdk/commit/e393c5ea9d9a254cdacbd311498c55c560e8ab25
;;;",,,,,,,,,,,,,,,,,,,,
[macos] A11y cursor gets stuck when combobox is closed,JDK-8275071,5060144,Bug,Resolved,JDK,JDK,software,duke,,,P3,Fixed,kizune,kizune,kizune,2021-10-11 10:19,2023-05-05 03:49,2023-10-01 09:57,2021-11-18 08:08,17,18,,,,,,,,,,,,18,client-libs,,0,a11y,accessibility,jdk11u-a11y-defer,jdk17u-fix-request,jdk17u-fix-yes,sn_106,vpat,vpat-17u,,,,,,,,,When navigating inside the combobox the a11y cursor got stuck on embedded list of items even after the popup is closed. We need to notify system that popup is closed.,,,,,,,,,,JDK-8277774,JDK-8277751,JDK-8288597,JDK-8288629,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2um8j:",9223372036854775807,b25,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@4785f47c,,,,,,,,,"2021-11-18 08:08;roboduke;Changeset: 5d249c46
Author:    Alexander Zuev <kizune@openjdk.org>
Date:      2021-11-18 16:07:38 +0000
URL:       https://git.openjdk.java.net/jdk/commit/5d249c46abc8dfdc3acdaff41d26f3bd9ba84731
;;;","2021-11-18 09:28;vdyakov;[~kizune] please bug port it to 17u. Thanks.;;;",,,,,,,,,,,,,,,,,,,
JOL: Incorrect ClassLayout header/loss calculation for arrays,CODETOOLS-7903075,5064488,Bug,Closed,CODETOOLS,Code Tools,software,duke,,,P4,Fixed,shade,shade,shade,2021-12-10 08:06,2021-12-10 11:22,2023-10-01 09:42,2021-12-10 11:22,,,,,,,,,,,,,,,tools,,0,,,,,,,,,,,,,,,,,"JOL misatributes array length as gap:

> [B object internals:
> OFF  SZ   TYPE DESCRIPTION               VALUE
>    0   8        (object header: mark)     N/A
>    8   4        (object header: class)    N/A
>   12   4        (array length)            N/A
>   12   4        (alignment/padding gap)
>   16   0   byte [B.<elements>             N/A
> Instance size: 16 bytes
> Space losses: 4 bytes internal + 0 bytes external = 4 bytes total",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vcyj:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@2ea3ea3c,,,,,,,,,"2021-12-10 11:22;shade;https://github.com/openjdk/jol/commit/eb83245c0cc4d380d086336ac0d294126516a243;;;",,,,,,,,,,,,,,,,,,,,
ForkedMain.nakedErr is not initialized on some paths,CODETOOLS-7903072,5064195,Bug,Closed,CODETOOLS,Code Tools,software,duke,,,P4,Fixed,shade,lmesnik,lmesnik,2021-12-06 19:28,2021-12-08 00:19,2023-10-01 09:57,2021-12-08 00:19,,,,,,,,,,,,,,,tools,,0,,,,,,,,,,,,,,,,,"Sometimes jmh fails with
[jmh] Exception in thread ""Thread-0"" java.lang.NullPointerException: Cannot enter synchronized block because the return value of ""java.lang.Throwable$PrintStreamOrWriter.lock()"" is null
[jmh] at java.base/java.lang.Throwable.printStackTrace(Throwable.java:668)
[jmh] at java.base/java.lang.Throwable.printStackTrace(Throwable.java:659)
[jmh] at org.openjdk.jmh.runner.ForkedMain.hangup(ForkedMain.java:129)
[jmh] at org.openjdk.jmh.runner.ForkedMain$HangupThread.run(ForkedMain.java:157)

",,,,,,,,,,,,,,,,,,,,,,,,,,JDK-8264669,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vb5f:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@b978723,,,,,,,,,"2021-12-06 19:30;lmesnik;Seems it is needed to move 
ForkedMain.java:78 ""nakedErr = System.err;"" 
before 
ForkedMain.java:59 ""Runtime.getRuntime().addShutdownHook(new HangupThread());""


;;;","2021-12-07 03:39;shade;See the fix. https://github.com/openjdk/jmh/pull/58;;;","2021-12-08 00:19;shade;https://github.com/openjdk/jmh/commit/3bc61cb6c62fbca04b87da136a9953c1c3392bd1;;;",,,,,,,,,,,,,,,,,,
Jtreg plugin debug functionality broken in 2021.3,CODETOOLS-7903071,5064055,Bug,Resolved,CODETOOLS,Code Tools,software,duke,,,P3,Fixed,mcimadamore,mcimadamore,mcimadamore,2021-12-03 04:18,2021-12-16 08:14,2023-10-01 09:57,2021-12-16 08:14,,,,,,,,,,,,,,,tools,,0,,,,,,,,,,,,,,,,,"As 2021.3 made changes in the order in which debuggers are setup, the plugin only setup a debugger port too late, when the jtreg command line has already been emitted.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2vaab:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@41617238,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
jcstress: Fallback topology should force NONE affinity mode,CODETOOLS-7903064,5063635,Bug,Closed,CODETOOLS,Code Tools,software,duke,,,P4,Fixed,shade,shade,shade,2021-11-29 04:34,2021-11-29 06:08,2023-10-01 09:57,2021-11-29 06:08,,,,,,,,,,,,,,,tools,,0,,,,,,,,,,,,,,,,,"We have been seeing some failures in CKI project, where the kernels on some virtual machines errored out on attempting to do taskset on non-existing CPUs.

The root cause is that fallback topology is used on those nodes, since some /proc or /sysfs data made little sense. Fallback topology faked some (consecutive) CPU numbers, and then jcstress used taskset to hook forked JVMs to it. But that is not guaranteed to work: the CPU numbers are not guaranteed to be consecutive.

When using fallback topology, we should force NONE affinity mode.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v7q3:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@50120698,,,,,,,,,"2021-11-29 06:08;shade;https://github.com/openjdk/jcstress/commit/8d12b027fa40c50f147a154d3198b60858ffb8bf;;;",,,,,,,,,,,,,,,,,,,,
perfasm can report wrong stub name,CODETOOLS-7903056,5062387,Bug,Resolved,CODETOOLS,Code Tools,software,duke,,,P4,Fixed,ngasson,ngasson,ngasson,2021-11-09 22:55,2021-11-11 02:16,2023-10-01 09:57,2021-11-11 02:16,,,,,,,,,,,,,,,tools,,0,,,,,,,,,,,,,,,,,"See this comment for an example:

https://github.com/openjdk/panama-foreign/pull/610#issuecomment-963026304

The hottest method list includes StubRoutines::updateBytesAdler32 but it has been misattributed: these instructions are actually in optimized_upcall_stub which isn't listed with the -XX:+PrintStubCode output (nor is it prefixed with StubRoutines::). There are actually quite a few stubs like this: if any of them appear in the perfasm output they will be labelled with with the last stub successfully parsed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2v017:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@b978723,,,,,,,,,"2021-11-10 00:34;shade;OK, we can fix the capturing code -- since you are the Assignee, I assume you are doing it? But it also seems to indicate the Hotspot trouble: if there is a ""optimized_upcall*_stub*"", surely it should print the name and respond to -XX:+PrintStubCode?;;;","2021-11-10 00:48;ngasson;Actually I think we ought to fix IntervalMap::get(): the main problem here is that it returns the wrong MethodDesc instead of null when given a value that's not in the range of any recorded method. We can do that by using the pair (from, to) as the key instead of just the from value, and then checking from <= value < to in get().

Those new Panama stubs only get printed with TraceOptimizedUpcallStubs - perhaps that should be changed to PrintStubCode or maybe PrintAdapterHandlers?;;;","2021-11-10 01:18;shade;> Actually I think we ought to fix IntervalMap::get(): the main problem here is that it returns the wrong MethodDesc instead of null when given a value that's not in the range of any recorded method.

Ah, yes. I believe we have opted at ""report the closest stub"" as the safety measure, like you have to report it *somewhere*. But the less confusing way to do this is to attribute the unknown code to, well, ""unknown"".

> Those new Panama stubs only get printed with TraceOptimizedUpcallStubs - perhaps that should be changed to PrintStubCode or maybe PrintAdapterHandlers? 

Yes, looks like it.;;;",,,,,,,,,,,,,,,,,,
Fix minor typo in FAQ,CODETOOLS-7903051,5062241,Bug,Resolved,CODETOOLS,Code Tools,software,duke,,,P4,Fixed,jjg,jjg,jjg,2021-11-08 17:39,2021-11-08 17:48,2023-10-01 09:57,2021-11-08 17:48,,,,,,,,,,,,,,,tools,,0,,,,,,,,,,,,,,,,,--enable-option should be --enable-preview,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uz4r:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@41617238,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Jemmy: Unable to navigate to SubMenu items in JavaTest application on macOS.,CODETOOLS-7903048,5062173,Bug,Resolved,CODETOOLS,Code Tools,software,duke,,,P2,Fixed,shurailine,gyadav,gyadav,2021-11-07 18:12,2022-01-18 17:37,2023-10-01 09:57,2022-01-18 17:37,,,,,,,,,,,,,,,tools,,0,jt_automation,,,,,,,,,,,,,,,,"Unable to navigate to SubMenu items in JavaTest application on macOS.

For example: 'File-->Open-->WorkDirectory' ​using 
JMenuItemOperator::showMenuItem::pushNoBlock() or push()

Getting below error(TimeoutExpiredException) when try to click on 'File-->Open-->Work Directory' by using 'pushNoBlock()'  or 'push' method on macOS:

""Dialog with title ""Open Work Directory"" (WindowWaiter.WaitWindowTimeout)

org.netbeans.jemmy.TimeoutExpiredException: Dialog with title ""Open Work Directory"" (WindowWaiter.WaitWindowTimeout)
at org.netbeans.jemmy.Waiter.waitAction(Waiter.java:213)
at org.netbeans.jemmy.WindowWaiter.waitWindow(WindowWaiter.java:437)
at org.netbeans.jemmy.WindowWaiter.waitWindow(WindowWaiter.java:227)
at org.netbeans.jemmy.DialogWaiter.waitDialog(DialogWaiter.java:337)
at org.netbeans.jemmy.operators.JDialogOperator.waitJDialog(JDialogOperator.java:611)
at org.netbeans.jemmy.operators.JDialogOperator.<init>(JDialogOperator.java:95)
at org.netbeans.jemmy.operators.JDialogOperator.<init>(JDialogOperator.java:211)
at org.netbeans.jemmy.operators.JDialogOperator.<init>(JDialogOperator.java:228)
at org.netbeans.jemmy.operators.JDialogOperator.<init>(JDialogOperator.java:243)
at jthtest.Sanity_Tests.Test_Config_EditA1.test8(Test_Config_EditA1.java:126)
at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)""

This issue is not seen on Linux and Windows platforms.

'pushNoBlock()' method used in JavaTest automation framework(jemmy) :
https://github.com/openjdk/jtharness/blob/2fe60dc33eb45469b8a4c86451ea3d2c7749f167/gui-tests/src/gui/src/jthtest/menu/Menu.java#L126
https://github.com/openjdk/jtharness/blob/2fe60dc33eb45469b8a4c86451ea3d2c7749f167/gui-tests/src/gui/src/jthtest/workdir/Workdir.java#L64",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"2021-11-09 20:25;gyadav;PushMenuNoBlock_Passed_macOS.JPG;https://bugs.openjdk.org/secure/attachment/97023/PushMenuNoBlock_Passed_macOS.JPG","2021-11-09 03:41;gyadav;PushNoBlock_Error_macOS.JPG;https://bugs.openjdk.org/secure/attachment/97011/PushNoBlock_Error_macOS.JPG","2021-11-10 05:38;dbessono;PushNoBlock_JavaTest_macOS_01.png;https://bugs.openjdk.org/secure/attachment/97032/PushNoBlock_JavaTest_macOS_01.png",,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uyrf:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@1e6492c8,,,,,,,,,"2021-11-10 10:09;shurailine;I have provided to Golla some suggestions on how to use Jemmy API, which solves this problem.

In a nutshell, it is better to use JMenuBarOperator.pushMenu(...) methods with the whole menu path, rather than push menus one after another. 

The reason for that is that the JMenuBarOperator.pushMenu(...) have quite a bit of stabilization code inside. It is possible to make the code stable with level-by-level menu expansion, but you will have to repeat all of that stabilization code.;;;","2021-11-10 10:11;dbessono;There seem to be some platform specific assumptions which turns out to be incorrect on modern MacOS
IIRC specifically Menu::getFile_Open_TestSuiteMenu calls JMenuBarOperator::showMenuItem that is checking Platform.isOSX() and doesn't seem to work correctly after that;;;","2021-11-10 11:20;shurailine;JMenuBarOperator.showMenuItem(...) should not be used in this scenario;;;",,,,,,,,,,,,,,,,,,
jtreg should print stdout if JVM gathering properties fails,CODETOOLS-7903030,5060468,Bug,Resolved,CODETOOLS,Code Tools,software,duke,,,P4,Fixed,iignatyev,iignatyev,iignatyev,2021-10-15 10:31,2021-10-17 19:37,2023-10-01 09:57,2021-10-15 12:04,,,,,,,,,,,,,,,tools,,0,,,,,,,,,,,,,,,,,"currently, if the JVM, which was created to gather (at-requires) properties, fails for any reason, jtreg prints out ""failed to get JDK properties for"" message together w/ the exit code. and although jtreg always prints out stderr of this JVM, it might not contain enough information to understand the failure and has caused confusion in past.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,CODETOOLS-7902672,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"0|i2uo8j:",9223372036854775807,,,,,com.oracle.jira.customfield.subcomponent.service.impl.SubComponentCacheImpl@41617238,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
